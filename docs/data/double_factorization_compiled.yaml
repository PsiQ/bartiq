version: v1
program:
  name: root
  children:
  - name: qubits_alloc_0
    children: []
    type: qubits_alloc
    ports:
    - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
    resources:
    - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
    connections: []
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: qubits_alloc_1
    children: []
    type: qubits_alloc
    ports:
    - {name: out_0, direction: output, size: ceiling(log2(R))}
    resources:
    - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
    connections: []
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: qubits_alloc_2
    children: []
    type: qubits_alloc
    ports:
    - {name: out_0, direction: output, size: 1}
    resources:
    - {name: qubit_highwater, type: qubits, value: 1}
    connections: []
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: qubits_alloc_3
    children: []
    type: qubits_alloc
    ports:
    - {name: out_0, direction: output, size: N_spatial}
    resources:
    - {name: qubit_highwater, type: qubits, value: N_spatial}
    connections: []
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: qubits_alloc_4
    children: []
    type: qubits_alloc
    ports:
    - {name: out_0, direction: output, size: N_spatial}
    resources:
    - {name: qubit_highwater, type: qubits, value: N_spatial}
    connections: []
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: RotationCatalystStatePrep_compute_0
    children:
    - name: qubits_alloc_0
      children: []
      type: qubits_alloc
      ports:
      - {name: out_0, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: had_0
      children: []
      type: had
      ports:
      - {name: thru_0, direction: through, size: 'Max(b_as, b_givens, b_mas)'}
      resources:
      - {name: active_volume, type: additive, value: '3*Max(b_as, b_givens, b_mas)'}
      - {name: gidney_lelbows, type: additive, value: 0}
      - {name: gidney_relbows, type: additive, value: 0}
      - {name: measurements, type: additive, value: 0}
      - {name: ppm_x_weight, type: other, value: 0}
      - {name: ppm_z_weight, type: other, value: 0}
      - {name: ppms, type: additive, value: 0}
      - {name: ppr_x_weight, type: other, value: 0}
      - {name: ppr_z_weight, type: other, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      - {name: rotations, type: additive, value: 0}
      - {name: t_gates, type: additive, value: 0}
      - {name: toffs, type: additive, value: 0}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: split_0
      children: []
      type: split
      ports:
      - {name: in_0, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
      - {name: out_0, direction: output, size: 1}
      - {name: out_remainder, direction: output, size: 'Max(b_as, b_givens, b_mas)
          - 1'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: z_0
      children: []
      type: z
      ports:
      - {name: thru_0, direction: through, size: 1}
      resources:
      - {name: gidney_lelbows, type: additive, value: 0}
      - {name: gidney_relbows, type: additive, value: 0}
      - {name: measurements, type: additive, value: 0}
      - {name: ppm_x_weight, type: other, value: 0}
      - {name: ppm_z_weight, type: other, value: 0}
      - {name: ppms, type: additive, value: 0}
      - {name: ppr_x_weight, type: other, value: 0}
      - {name: ppr_z_weight, type: other, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 1}
      - {name: rotations, type: additive, value: 0}
      - {name: t_gates, type: additive, value: 0}
      - {name: toffs, type: additive, value: 0}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: merge_1
      children: []
      type: merge
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: in_remainder, direction: input, size: 'Max(b_as, b_givens, b_mas) -
          1'}
      - {name: out_0, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: split_2
      children: []
      type: split
      ports:
      - {name: in_0, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
      - {name: out_0, direction: output, size: 1}
      - {name: out_remainder, direction: output, size: 'Max(b_as, b_givens, b_mas)
          - 1'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: Repeated_s_inv_0_repetition
      children:
      - name: Repeated_s_inv_0
        children:
        - name: s_inv_0
          children: []
          type: s_inv
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 5}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: 1}
        - {name: out_0, direction: output, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 5}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 1}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections:
        - {source: in_0, target: s_inv_0.thru_0}
        - {source: s_inv_0.thru_0, target: out_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      type: qubrick
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: out_0, direction: output, size: 1}
      resources:
      - {name: active_volume, type: additive, value: '5*Heaviside(Max(b_as, b_givens,
          b_mas) - 1.5, 0)'}
      - {name: gidney_lelbows, type: additive, value: 0}
      - {name: gidney_relbows, type: additive, value: 0}
      - {name: measurements, type: additive, value: 0}
      - {name: ppms, type: additive, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 1}
      - {name: rotations, type: additive, value: 0}
      - {name: t_gates, type: additive, value: 0}
      - {name: toffs, type: additive, value: 0}
      connections:
      - {source: Repeated_s_inv_0.out_0, target: out_0}
      - {source: in_0, target: Repeated_s_inv_0.in_0}
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition:
        count: Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0)
        sequence: {type: constant, multiplier: 1}
      meta: {}
    - name: merge_3
      children: []
      type: merge
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: in_remainder, direction: input, size: 'Max(b_as, b_givens, b_mas) -
          1'}
      - {name: out_0, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: split_4
      children: []
      type: split
      ports:
      - {name: in_0, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
      - {name: out_0, direction: output, size: 1}
      - {name: out_remainder, direction: output, size: 'Max(b_as, b_givens, b_mas)
          - 1'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: Repeated_t_inv_0_repetition
      children:
      - name: Repeated_t_inv_0
        children:
        - name: t_inv_0
          children: []
          type: t_inv
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 28.5}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 1}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: 1}
        - {name: out_0, direction: output, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 28.5}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 1}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 1}
        - {name: toffs, type: additive, value: 0}
        connections:
        - {source: in_0, target: t_inv_0.thru_0}
        - {source: t_inv_0.thru_0, target: out_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      type: qubrick
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: out_0, direction: output, size: 1}
      resources:
      - {name: active_volume, type: additive, value: '28.5*Heaviside(Max(b_as, b_givens,
          b_mas) - 2.5, 0)'}
      - {name: gidney_lelbows, type: additive, value: 0}
      - {name: gidney_relbows, type: additive, value: 0}
      - {name: measurements, type: additive, value: 0}
      - {name: ppms, type: additive, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 1}
      - {name: rotations, type: additive, value: 0}
      - {name: t_gates, type: additive, value: 'Heaviside(Max(b_as, b_givens, b_mas)
          - 2.5, 0)'}
      - {name: toffs, type: additive, value: 0}
      connections:
      - {source: Repeated_t_inv_0.out_0, target: out_0}
      - {source: in_0, target: Repeated_t_inv_0.in_0}
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition:
        count: Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
        sequence: {type: constant, multiplier: 1}
      meta: {}
    - name: merge_5
      children: []
      type: merge
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: in_remainder, direction: input, size: 'Max(b_as, b_givens, b_mas) -
          1'}
      - {name: out_0, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: split_6
      children: []
      type: split
      ports:
      - {name: in_0, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
      - {name: out_0, direction: output, size: 1}
      - {name: out_remainder, direction: output, size: 'Max(b_as, b_givens, b_mas)
          - 1'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: Repeated_phase_0_repetition
      children:
      - name: Repeated_phase_0
        children:
        - name: phase_0
          children: []
          type: phase
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 1397}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 1}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: 1}
        - {name: out_0, direction: output, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 1397}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 1}
        - {name: rotations, type: additive, value: 1}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections:
        - {source: in_0, target: phase_0.thru_0}
        - {source: phase_0.thru_0, target: out_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      type: qubrick
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: out_0, direction: output, size: 1}
      resources:
      - {name: active_volume, type: additive, value: '1397*Max(0, Max(b_as, b_givens,
          b_mas) - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) - Heaviside(Max(b_as,
          b_givens, b_mas) - 1.5, 0) - 1)'}
      - {name: gidney_lelbows, type: additive, value: 0}
      - {name: gidney_relbows, type: additive, value: 0}
      - {name: measurements, type: additive, value: 0}
      - {name: ppms, type: additive, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 1}
      - {name: rotations, type: additive, value: 'Max(0, Max(b_as, b_givens, b_mas)
          - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens,
          b_mas) - 1.5, 0) - 1)'}
      - {name: t_gates, type: additive, value: 0}
      - {name: toffs, type: additive, value: 0}
      connections:
      - {source: Repeated_phase_0.out_0, target: out_0}
      - {source: in_0, target: Repeated_phase_0.in_0}
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition:
        count: Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens, b_mas)
          - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1)
        sequence: {type: constant, multiplier: 1}
      meta: {}
    - name: merge_7
      children: []
      type: merge
      ports:
      - {name: in_0, direction: input, size: 1}
      - {name: in_remainder, direction: input, size: 'Max(b_as, b_givens, b_mas) -
          1'}
      - {name: out_0, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
      resources:
      - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
      connections: []
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    type: qubrick
    ports:
    - {name: out_0, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
    resources:
    - {name: active_volume, type: additive, value: '1397*Max(0, Max(b_as, b_givens,
        b_mas) - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) - Heaviside(Max(b_as,
        b_givens, b_mas) - 1.5, 0) - 1) + 3*Max(b_as, b_givens, b_mas) + 28.5*Heaviside(Max(b_as,
        b_givens, b_mas) - 2.5, 0) + 5*Heaviside(Max(b_as, b_givens, b_mas) - 1.5,
        0)'}
    - {name: gidney_lelbows, type: additive, value: 0}
    - {name: gidney_relbows, type: additive, value: 0}
    - {name: measurements, type: additive, value: 0}
    - {name: ppms, type: additive, value: 0}
    - {name: pprs, type: additive, value: 0}
    - {name: qubit_highwater, type: qubits, value: 'Max(b_as, b_givens, b_mas)'}
    - {name: rotations, type: additive, value: 'Max(0, Max(b_as, b_givens, b_mas)
        - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens,
        b_mas) - 1.5, 0) - 1)'}
    - {name: t_gates, type: additive, value: 'Heaviside(Max(b_as, b_givens, b_mas)
        - 2.5, 0)'}
    - {name: toffs, type: additive, value: 0}
    connections:
    - {source: Repeated_phase_0_repetition.out_0, target: merge_7.in_0}
    - {source: Repeated_s_inv_0_repetition.out_0, target: merge_3.in_0}
    - {source: Repeated_t_inv_0_repetition.out_0, target: merge_5.in_0}
    - {source: had_0.thru_0, target: split_0.in_0}
    - {source: merge_1.out_0, target: split_2.in_0}
    - {source: merge_3.out_0, target: split_4.in_0}
    - {source: merge_5.out_0, target: split_6.in_0}
    - {source: merge_7.out_0, target: out_0}
    - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
    - {source: split_0.out_0, target: z_0.thru_0}
    - {source: split_0.out_remainder, target: merge_1.in_remainder}
    - {source: split_2.out_0, target: Repeated_s_inv_0_repetition.in_0}
    - {source: split_2.out_remainder, target: merge_3.in_remainder}
    - {source: split_4.out_0, target: Repeated_t_inv_0_repetition.in_0}
    - {source: split_4.out_remainder, target: merge_5.in_remainder}
    - {source: split_6.out_0, target: Repeated_phase_0_repetition.in_0}
    - {source: split_6.out_remainder, target: merge_7.in_remainder}
    - {source: z_0.thru_0, target: merge_1.in_0}
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: LCU_compute_0
    children:
    - name: AliasSampling_compute_0
      children:
      - name: RealUSP_compute_0
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: 1}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1))}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(R + 1))}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: ry_0
          children: []
          type: ry
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 1399}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 1}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: CompareLT_compute_0
          children:
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) - 0.5, 0)'}
            resources:
            - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1))
                - 60}
            - {name: gidney_lelbows, type: additive, value: '((ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R +
                1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          resources:
          - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1)) -
              60}
          - {name: gidney_lelbows, type: additive, value: '((ceiling(log2(R + 1))
              - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2
              ** ceiling(log2(R + 1)))) + 0.5, 0)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
              (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
              1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
              Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R
              + 1)))'}
          connections:
          - {source: in_0, target: out_0}
          - {source: qubits_alloc_0.out_0, target: out_1}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_0
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          - {name: out_0, direction: output, size: 1}
          - {name: out_remainder, direction: output, size: '(ceiling(log2(R + 1))
              - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) - 1'}
          resources:
          - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1)) -
              nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: z_0
          children: []
          type: z
          ports:
          - {name: thru_0, direction: through, size: 1}
          - {name: thru_1, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 4}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 2}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_1
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: 1}
          - {name: in_remainder, direction: input, size: '(ceiling(log2(R + 1)) -
              nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) - 1'}
          - {name: out_0, direction: output, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          resources:
          - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1)) -
              nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: CompareLT_uncompute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1))
                - 60}
            - {name: gidney_relbows, type: additive, value: '((ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R +
                1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) - 0.5, 0)'}
            resources:
            - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1)) -
              60}
          - {name: gidney_relbows, type: additive, value: '((ceiling(log2(R + 1))
              - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2
              ** ceiling(log2(R + 1)))) + 0.5, 0)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
              (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
              1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
              Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R
              + 1)))'}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: qubits_free_0.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: ry_1
          children: []
          type: ry
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 1399}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 1}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_2
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1)) - nlz(R +
              1)}
          - {name: out_remainder, direction: output, size: nlz(R + 1)}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_1
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(R + 1)) -
              3*nlz(R + 1)}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: z_1
          children: []
          type: z
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          - {name: thru_1, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R
              + 1)) - nlz(R + 1) - 1.5, 0) + 49*ceiling(log2(R + 1)) - 49*nlz(R +
              1) - 49*Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R + 1)) -
              nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R + 1)) -
              nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R + 1)) - nlz(R
              + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R + 1)) -
              2*nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 1'}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R + 1)) -
              nlz(R + 1) - 1.5, 0)'}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_2
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(R + 1)) -
              3*nlz(R + 1)}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_7
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1)) - nlz(R + 1)}
          - {name: in_remainder, direction: input, size: nlz(R + 1)}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: x_0
          children: []
          type: x
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: relbow_0
          children: []
          type: relbow
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: 1}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        resources:
        - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R
            + 1)) - nlz(R + 1) - 1.5, 0) + 172*ceiling(log2(R + 1)) - 55*nlz(R + 1)
            - 49*Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 2682'}
        - {name: gidney_lelbows, type: additive, value: '((ceiling(log2(R + 1)) -
            nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R +
            1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
            ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
            + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R
            + 1)) - nlz(R + 1))'}
        - {name: gidney_relbows, type: additive, value: '((ceiling(log2(R + 1)) -
            nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R +
            1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
            ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
            + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R
            + 1)) - nlz(R + 1))'}
        - {name: measurements, type: additive, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
            ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R + 1)) - nlz(R + 1) - Min(2,
            ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R + 1)) - nlz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
            + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
            - 0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R + 1)), (ceiling(log2(R
            + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1,
            2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1)'}
        - {name: rotations, type: additive, value: 2}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R + 1)) - nlz(R
            + 1) - 1.5, 0)'}
        connections:
        - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
        - {source: CompareLT_compute_0.out_1, target: split_0.in_0}
        - {source: CompareLT_uncompute_0.out_0, target: split_2.in_0}
        - {source: had_0.thru_0, target: CompareLT_compute_0.in_0}
        - {source: had_1.thru_0, target: z_1.thru_0}
        - {source: had_2.thru_0, target: merge_7.in_0}
        - {source: in_0, target: had_0.thru_0}
        - {source: merge_1.out_0, target: CompareLT_uncompute_0.in_1}
        - {source: merge_7.out_0, target: out_0}
        - {source: qubits_alloc_0.out_0, target: ry_0.thru_0}
        - {source: relbow_0.thru_0, target: qubits_free_0.in_0}
        - {source: ry_0.thru_0, target: z_0.thru_1}
        - {source: ry_1.thru_0, target: z_1.thru_1}
        - {source: split_0.out_0, target: z_0.thru_0}
        - {source: split_0.out_remainder, target: merge_1.in_remainder}
        - {source: split_2.out_0, target: had_1.thru_0}
        - {source: split_2.out_remainder, target: merge_7.in_remainder}
        - {source: x_0.thru_0, target: relbow_0.thru_0}
        - {source: z_0.thru_0, target: merge_1.in_0}
        - {source: z_0.thru_1, target: ry_1.thru_0}
        - {source: z_1.thru_0, target: had_2.thru_0}
        - {source: z_1.thru_1, target: x_0.thru_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: DataLookupClean_compute_0
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: b_as + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_alloc_1
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          resources:
          - {name: qubit_highwater, type: qubits, value: (b_as + ceiling(log2(R +
              1)))*(lambda - 1)}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_0
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: GoogleSelectOptimized_compute_0
          children:
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: '(ceiling(0.75*b_as + (0.75*b_as
                + 0.75*ceiling(log2(R + 1)))*(lambda - 1) + 0.75*ceiling(log2(R +
                1))) + 49)*Max(0, ceiling((R + 1)/lambda) - 1)'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
                - 1)'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
                - 1)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_1, direction: input, size: b_as + ceiling(log2(R + 1))}
          - {name: in_2, direction: input, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_1, direction: output, size: b_as + ceiling(log2(R + 1))}
          - {name: out_2, direction: output, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          resources:
          - {name: active_volume, type: additive, value: '(ceiling(0.75*b_as + (0.75*b_as
              + 0.75*ceiling(log2(R + 1)))*(lambda - 1) + 0.75*ceiling(log2(R + 1)))
              + 49)*Max(0, ceiling((R + 1)/lambda) - 1)'}
          - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
              - 1)'}
          - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
              - 1)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(b_as + (b_as + ceiling(log2(R
              + 1)))*(lambda - 1) - ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)),
              b_as + (b_as + ceiling(log2(R + 1)))*(lambda - 1) - 2*ceiling(log2(lambda))
              + 3*ceiling(log2(R + 1)) - 1)'}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: in_2, target: out_2}
          - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_1
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_2
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_remainder, direction: output, size: -ceiling(log2(lambda))
              + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: SwapUp_compute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: (-1 + (b_as + (b_as + ceiling(log2(R
                + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
                + 1))))*(55*b_as + 55*ceiling(log2(R + 1)))}
            - {name: qubit_highwater, type: qubits, value: 0}
            - {name: toffs, type: additive, value: (-1 + (b_as + (b_as + ceiling(log2(R
                + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
                + 1))))*(b_as + ceiling(log2(R + 1)))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_1, direction: input, size: b_as + ceiling(log2(R + 1))}
          - {name: in_2, direction: input, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_1, direction: output, size: b_as + ceiling(log2(R + 1))}
          - {name: out_2, direction: output, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          resources:
          - {name: active_volume, type: additive, value: (-1 + (b_as + (b_as + ceiling(log2(R
              + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R +
              1))))*(55*b_as + 55*ceiling(log2(R + 1)))}
          - {name: qubit_highwater, type: qubits, value: b_as + (b_as + ceiling(log2(R
              + 1)))*(lambda - 1) + ceiling(log2(lambda)) + ceiling(log2(R + 1))}
          - {name: toffs, type: additive, value: (-1 + (b_as + (b_as + ceiling(log2(R
              + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R +
              1))))*(b_as + ceiling(log2(R + 1)))}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: in_2, target: out_2}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_3
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_remainder, direction: input, size: -ceiling(log2(lambda)) +
              ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          resources:
          - {name: active_volume, type: additive, value: (3*b_as + 3*ceiling(log2(R
              + 1)))*(lambda - 1)}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: (b_as + ceiling(log2(R +
              1)))*(lambda - 1)}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: read_0
          children: []
          type: read
          ports:
          - {name: thru_0, direction: through, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          resources:
          - {name: active_volume, type: additive, value: 0}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: (b_as + ceiling(log2(R +
              1)))*(lambda - 1)}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: (b_as + ceiling(log2(R + 1)))*(lambda
              - 1)}
          resources:
          - {name: qubit_highwater, type: qubits, value: (b_as + ceiling(log2(R +
              1)))*(lambda - 1)}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        - {name: out_1, direction: output, size: b_as + ceiling(log2(R + 1))}
        resources:
        - {name: active_volume, type: additive, value: '(-1 + (b_as + (b_as + ceiling(log2(R
            + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(55*b_as
            + 55*ceiling(log2(R + 1))) + (3*b_as + 3*ceiling(log2(R + 1)))*(lambda
            - 1) + (ceiling(0.75*b_as + (0.75*b_as + 0.75*ceiling(log2(R + 1)))*(lambda
            - 1) + 0.75*ceiling(log2(R + 1))) + 49)*Max(0, ceiling((R + 1)/lambda)
            - 1)'}
        - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
            - 1)'}
        - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
            - 1)'}
        - {name: measurements, type: additive, value: (b_as + ceiling(log2(R + 1)))*(lambda
            - 1)}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
            b_as + 2*ceiling(log2(R + 1)), b_as + (b_as + ceiling(log2(R + 1)))*(lambda
            - 1) + 2*ceiling(log2(R + 1)), Max(b_as + (b_as + ceiling(log2(R + 1)))*(lambda
            - 1) - ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)), b_as + (b_as +
            ceiling(log2(R + 1)))*(lambda - 1) - 2*ceiling(log2(lambda)) + 3*ceiling(log2(R
            + 1)) - 1) + ceiling(log2(lambda)))'}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: (-1 + (b_as + (b_as + ceiling(log2(R
            + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as
            + ceiling(log2(R + 1)))}
        connections:
        - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_1.in_0}
        - {source: GoogleSelectOptimized_compute_0.out_1, target: SwapUp_compute_0.in_1}
        - {source: GoogleSelectOptimized_compute_0.out_2, target: SwapUp_compute_0.in_2}
        - {source: SwapUp_compute_0.out_0, target: merge_3.in_0}
        - {source: SwapUp_compute_0.out_1, target: out_1}
        - {source: SwapUp_compute_0.out_2, target: had_0.thru_0}
        - {source: had_0.thru_0, target: read_0.thru_0}
        - {source: in_0, target: split_0.in_0}
        - {source: merge_1.out_0, target: split_2.in_0}
        - {source: merge_3.out_0, target: out_0}
        - {source: qubits_alloc_0.out_0, target: GoogleSelectOptimized_compute_0.in_1}
        - {source: qubits_alloc_1.out_0, target: GoogleSelectOptimized_compute_0.in_2}
        - {source: read_0.thru_0, target: qubits_free_0.in_0}
        - {source: split_0.out_0, target: GoogleSelectOptimized_compute_0.in_0}
        - {source: split_0.out_remainder, target: merge_1.in_remainder}
        - {source: split_2.out_0, target: SwapUp_compute_0.in_0}
        - {source: split_2.out_remainder, target: merge_3.in_remainder}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: qubits_alloc_0
        children: []
        type: qubits_alloc
        ports:
        - {name: out_0, direction: output, size: b_as}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: had_0
        children: []
        type: had
        ports:
        - {name: thru_0, direction: through, size: b_as}
        resources:
        - {name: active_volume, type: additive, value: 3*b_as}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: b_as}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: qubits_alloc_1
        children: []
        type: qubits_alloc
        ports:
        - {name: out_0, direction: output, size: 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: 1}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_0
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: b_as + ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: b_as}
        - {name: out_remainder, direction: output, size: ceiling(log2(R + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: CompareGE_compute_0
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: b_as}
          resources:
          - {name: qubit_highwater, type: qubits, value: b_as}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: cost_event
          children: []
          type: intrinsic_cost
          ports: []
          resources:
          - {name: active_volume, type: additive, value: 57*b_as - 60}
          - {name: gidney_lelbows, type: additive, value: b_as}
          - {name: qubit_highwater, type: qubits, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: in_1, direction: input, size: b_as}
        - {name: out_0, direction: output, size: b_as}
        - {name: out_1, direction: output, size: b_as}
        - {name: out_2, direction: output, size: b_as}
        resources:
        - {name: active_volume, type: additive, value: 57*b_as - 60}
        - {name: gidney_lelbows, type: additive, value: b_as}
        - {name: qubit_highwater, type: qubits, value: 'Max(2*b_as, 3*b_as)'}
        connections:
        - {source: in_0, target: out_0}
        - {source: in_1, target: out_1}
        - {source: qubits_alloc_0.out_0, target: out_2}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_2
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: out_0, direction: output, size: 1}
        - {name: out_remainder, direction: output, size: b_as - 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: x_0
        children: []
        type: x
        ports:
        - {name: thru_0, direction: through, size: 1}
        - {name: thru_1, direction: through, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 4}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 2}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_3
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: 1}
        - {name: in_remainder, direction: input, size: b_as - 1}
        - {name: out_0, direction: output, size: b_as}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: CompareGE_uncompute_0
        children:
        - name: cost_event
          children: []
          type: intrinsic_cost
          ports: []
          resources:
          - {name: active_volume, type: additive, value: 57*b_as - 60}
          - {name: gidney_relbows, type: additive, value: b_as}
          - {name: qubit_highwater, type: qubits, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: b_as}
          resources:
          - {name: qubit_highwater, type: qubits, value: b_as}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: in_1, direction: input, size: b_as}
        - {name: in_2, direction: input, size: b_as}
        - {name: out_0, direction: output, size: b_as}
        - {name: out_1, direction: output, size: b_as}
        resources:
        - {name: active_volume, type: additive, value: 57*b_as - 60}
        - {name: gidney_relbows, type: additive, value: b_as}
        - {name: qubit_highwater, type: qubits, value: 'Max(2*b_as, 3*b_as)'}
        connections:
        - {source: in_0, target: out_0}
        - {source: in_1, target: out_1}
        - {source: in_2, target: qubits_free_0.in_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_5
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: in_remainder, direction: input, size: ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: b_as + ceiling(log2(R + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_6
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: b_as + ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        - {name: out_remainder, direction: output, size: b_as}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: swap_0
        children: []
        type: swap
        ports:
        - {name: thru_0, direction: through, size: ceiling(log2(R + 1))}
        - {name: thru_1, direction: through, size: ceiling(log2(R + 1))}
        - {name: thru_2, direction: through, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 55*ceiling(log2(R + 1))}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 2*ceiling(log2(R + 1)) + 1}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_7
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: in_remainder, direction: input, size: b_as}
        - {name: out_0, direction: output, size: b_as + ceiling(log2(R + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      type: qubrick
      ports:
      - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
      - {name: in_1, direction: input, size: ceiling(log2(R))}
      - {name: in_2, direction: input, size: 1}
      - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
      - {name: out_1, direction: output, size: b_as + ceiling(log2(R + 1))}
      - {name: out_2, direction: output, size: b_as}
      - {name: out_3, direction: output, size: 1}
      - {name: out_4, direction: output, size: ceiling(log2(R))}
      - {name: out_5, direction: output, size: 1}
      resources:
      - {name: active_volume, type: additive, value: '117*b_as + (-1 + (b_as + (b_as
          + ceiling(log2(R + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
          + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + (3*b_as + 3*ceiling(log2(R
          + 1)))*(lambda - 1) + (ceiling(0.75*b_as + (0.75*b_as + 0.75*ceiling(log2(R
          + 1)))*(lambda - 1) + 0.75*ceiling(log2(R + 1))) + 49)*Max(0, ceiling((R
          + 1)/lambda) - 1) + 47*Heaviside(ceiling(log2(R + 1)) - nlz(R + 1) - 1.5,
          0) + 227*ceiling(log2(R + 1)) - 55*nlz(R + 1) - 49*Min(2, ceiling(log2(R
          + 1)) - nlz(R + 1)) + 2566'}
      - {name: gidney_lelbows, type: additive, value: 'b_as + ((ceiling(log2(R + 1))
          - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R +
          1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
          ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) + 0.5, 0) + Max(0, ceiling((R + 1)/lambda) - 1) + ceiling(log2(R
          + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
      - {name: gidney_relbows, type: additive, value: 'b_as + ((ceiling(log2(R + 1))
          - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R +
          1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
          ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) + 0.5, 0) + Max(0, ceiling((R + 1)/lambda) - 1) + ceiling(log2(R
          + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
      - {name: measurements, type: additive, value: (b_as + ceiling(log2(R + 1)))*(lambda
          - 1)}
      - {name: ppms, type: additive, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 1, 2*b_as + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 1, 2*b_as
          + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, 3*b_as + ceiling(log2(R))
          + 2*ceiling(log2(R + 1)) + 2, Max(2*b_as, 3*b_as) + ceiling(log2(R)) + 2*ceiling(log2(R
          + 1)) + 2, Max(ceiling(log2(R + 1)), b_as + 2*ceiling(log2(R + 1)), b_as
          + (b_as + ceiling(log2(R + 1)))*(lambda - 1) + 2*ceiling(log2(R + 1)), Max(b_as
          + (b_as + ceiling(log2(R + 1)))*(lambda - 1) - ceiling(log2(lambda)) + 2*ceiling(log2(R
          + 1)), b_as + (b_as + ceiling(log2(R + 1)))*(lambda - 1) - 2*ceiling(log2(lambda))
          + 3*ceiling(log2(R + 1)) - 1) + ceiling(log2(lambda))) + ceiling(log2(R))
          + 1, Max(ceiling(log2(R + 1)), ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R
          + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R
          + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
          ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R
          + 1)), (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
          - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1)
          + ceiling(log2(R)) + 1)'}
      - {name: rotations, type: additive, value: 2}
      - {name: t_gates, type: additive, value: 0}
      - {name: toffs, type: additive, value: '(-1 + (b_as + (b_as + ceiling(log2(R
          + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as
          + ceiling(log2(R + 1))) + Heaviside(ceiling(log2(R + 1)) - nlz(R + 1) -
          1.5, 0) + ceiling(log2(R + 1))'}
      connections:
      - {source: CompareGE_compute_0.out_0, target: CompareGE_uncompute_0.in_0}
      - {source: CompareGE_compute_0.out_1, target: CompareGE_uncompute_0.in_1}
      - {source: CompareGE_compute_0.out_2, target: split_2.in_0}
      - {source: CompareGE_uncompute_0.out_0, target: merge_5.in_0}
      - {source: CompareGE_uncompute_0.out_1, target: out_2}
      - {source: DataLookupClean_compute_0.out_0, target: swap_0.thru_0}
      - {source: DataLookupClean_compute_0.out_1, target: split_0.in_0}
      - {source: RealUSP_compute_0.out_0, target: DataLookupClean_compute_0.in_0}
      - {source: had_0.thru_0, target: CompareGE_compute_0.in_1}
      - {source: in_0, target: RealUSP_compute_0.in_0}
      - {source: in_1, target: out_4}
      - {source: in_2, target: out_5}
      - {source: merge_3.out_0, target: CompareGE_uncompute_0.in_2}
      - {source: merge_5.out_0, target: split_6.in_0}
      - {source: merge_7.out_0, target: out_1}
      - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
      - {source: qubits_alloc_1.out_0, target: x_0.thru_0}
      - {source: split_0.out_0, target: CompareGE_compute_0.in_0}
      - {source: split_0.out_remainder, target: merge_5.in_remainder}
      - {source: split_2.out_0, target: x_0.thru_1}
      - {source: split_2.out_remainder, target: merge_3.in_remainder}
      - {source: split_6.out_0, target: swap_0.thru_1}
      - {source: split_6.out_remainder, target: merge_7.in_remainder}
      - {source: swap_0.thru_0, target: out_0}
      - {source: swap_0.thru_1, target: merge_7.in_0}
      - {source: swap_0.thru_2, target: out_3}
      - {source: x_0.thru_0, target: swap_0.thru_2}
      - {source: x_0.thru_1, target: merge_3.in_0}
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: DoubleFactorizationSelect_compute_0
      children:
      - name: DataLookupClean_compute_0
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_alloc_1
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: (lambda - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_0
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: GoogleSelectOptimized_compute_0
          children:
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: '(ceiling((0.75*lambda
                - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
                ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lambda)
                - 1)'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(R/lambda)
                - 1)'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(R/lambda)
                - 1)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_1, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: in_2, direction: input, size: (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_1, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: out_2, direction: output, size: (lambda - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: active_volume, type: additive, value: '(ceiling((0.75*lambda -
              0.75)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r)) +
              1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
              + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lambda)
              - 1)'}
          - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(R/lambda)
              - 1)'}
          - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(R/lambda)
              - 1)'}
          - {name: qubit_highwater, type: qubits, value: 'Max((lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
              - ceiling(log2(lambda)) + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
              - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)) + ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
              - 1)'}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: in_2, target: out_2}
          - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_1
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_2
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_remainder, direction: output, size: -ceiling(log2(lambda))
              + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: SwapUp_compute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: ((55*(lambda - 1)*ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1)) + 55*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
            - {name: qubit_highwater, type: qubits, value: 0}
            - {name: toffs, type: additive, value: (((lambda - 1)*ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
                + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1)))/ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_1, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: in_2, direction: input, size: (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_1, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: out_2, direction: output, size: (lambda - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: active_volume, type: additive, value: ((55*(lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
              + 55*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
              - 55)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))}
          - {name: qubit_highwater, type: qubits, value: (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
              + ceiling(log2(lambda)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: toffs, type: additive, value: (((lambda - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: in_2, target: out_2}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_3
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_remainder, direction: input, size: -ceiling(log2(lambda)) +
              ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: (lambda - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: active_volume, type: additive, value: (3*lambda - 3)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: read_0
          children: []
          type: read
          ports:
          - {name: thru_0, direction: through, size: (lambda - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: active_volume, type: additive, value: 0}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: (lambda - 1)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        - {name: out_1, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        resources:
        - {name: active_volume, type: additive, value: '(3*lambda - 3)*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ((55*(lambda - 1)*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 55*ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + (ceiling((0.75*lambda - 0.75)*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lambda)
            - 1)'}
        - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(R/lambda)
            - 1)'}
        - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(R/lambda)
            - 1)'}
        - {name: measurements, type: additive, value: (lambda - 1)*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
            ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)), (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(R + 1)) + ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), Max((lambda - 1)*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - ceiling(log2(lambda))
            + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)), (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 2*ceiling(log2(lambda)) +
            2*ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)) - 1) + ceiling(log2(lambda)))'}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: (((lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections:
        - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_1.in_0}
        - {source: GoogleSelectOptimized_compute_0.out_1, target: SwapUp_compute_0.in_1}
        - {source: GoogleSelectOptimized_compute_0.out_2, target: SwapUp_compute_0.in_2}
        - {source: SwapUp_compute_0.out_0, target: merge_3.in_0}
        - {source: SwapUp_compute_0.out_1, target: out_1}
        - {source: SwapUp_compute_0.out_2, target: had_0.thru_0}
        - {source: had_0.thru_0, target: read_0.thru_0}
        - {source: in_0, target: split_0.in_0}
        - {source: merge_1.out_0, target: split_2.in_0}
        - {source: merge_3.out_0, target: out_0}
        - {source: qubits_alloc_0.out_0, target: GoogleSelectOptimized_compute_0.in_1}
        - {source: qubits_alloc_1.out_0, target: GoogleSelectOptimized_compute_0.in_2}
        - {source: read_0.thru_0, target: qubits_free_0.in_0}
        - {source: split_0.out_0, target: GoogleSelectOptimized_compute_0.in_0}
        - {source: split_0.out_remainder, target: merge_1.in_remainder}
        - {source: split_2.out_0, target: SwapUp_compute_0.in_0}
        - {source: split_2.out_remainder, target: merge_3.in_remainder}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_0
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: out_1, direction: output, size: M_r*(R - 1)}
        - {name: out_2, direction: output, size: b_mas}
        - {name: out_remainder, direction: output, size: '-M_r*(R - 1) - M_r - b_mas
            + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)) - 1'}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: OneElectronTermBlockEncoding_compute_0
        children:
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 3}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: MultiplexedAliasSamplingDF_compute_0
          children:
          - name: MultiplexedRealUSPDF_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: lelbow_0
              children: []
              type: lelbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_0
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: RotationCatalystStatePrep_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                resources:
                - {name: active_volume, type: additive, value: '3*Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_0
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_s_inv_0_repetition
                children:
                - name: Repeated_s_inv_0
                  children:
                  - name: s_inv_0
                    children: []
                    type: s_inv
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: s_inv_0.thru_0}
                  - {source: s_inv_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '5*Heaviside(1.5 -
                    Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_s_inv_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_s_inv_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1.5, 0)
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_t_inv_0_repetition
                children:
                - name: Repeated_t_inv_0
                  children:
                  - name: t_inv_0
                    children: []
                    type: t_inv
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 28.5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 1}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 28.5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 1}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: t_inv_0.thru_0}
                  - {source: t_inv_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '28.5*Heaviside(2.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 'Heaviside(2.5 - Max(b_as,
                    b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_t_inv_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_t_inv_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 2.5, 0)
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_9
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_phase_0_repetition
                children:
                - name: Repeated_phase_0
                  children:
                  - name: phase_0
                    children: []
                    type: phase
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 1397}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 1}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 1397}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 1}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: phase_0.thru_0}
                  - {source: phase_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '1397*Max(0, Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
                    b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
                    b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as,
                    b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_phase_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_phase_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_11
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: active_volume, type: additive, value: '3*Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  - 2.5, 0)) + 5*Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  - 2.5, 0)'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(b_as, b_givens,
                  b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas))'}
              - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas),
                  0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens,
                  b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
              - {name: t_gates, type: additive, value: 'Heaviside(2.5 - Max(b_as,
                  b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_phase_0_repetition.out_0, target: merge_10.in_0}
              - {source: Repeated_s_inv_0_repetition.out_0, target: merge_2.in_0}
              - {source: Repeated_t_inv_0_repetition.out_0, target: merge_6.in_0}
              - {source: had_0.thru_0, target: merge_0.in_0}
              - {source: in_0, target: merge_0.in_1}
              - {source: merge_0.out_0, target: split_1.in_0}
              - {source: merge_10.out_0, target: split_11.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_9.in_0}
              - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
              - {source: split_1.out_0, target: Repeated_s_inv_0_repetition.in_0}
              - {source: split_1.out_remainder, target: merge_2.in_remainder}
              - {source: split_11.out_0, target: out_0}
              - {source: split_11.out_1, target: out_1}
              - {source: split_3.out_0, target: merge_4.in_0}
              - {source: split_3.out_1, target: merge_4.in_1}
              - {source: split_5.out_0, target: Repeated_t_inv_0_repetition.in_0}
              - {source: split_5.out_remainder, target: merge_6.in_remainder}
              - {source: split_7.out_0, target: merge_8.in_0}
              - {source: split_7.out_1, target: merge_8.in_1}
              - {source: split_9.out_0, target: Repeated_phase_0_repetition.in_0}
              - {source: split_9.out_remainder, target: merge_10.in_remainder}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Contiguizer_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: lelbow_0
                children: []
                type: lelbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_3
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: lelbow_0
                    children: []
                    type: lelbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 44}
                    - {name: gidney_lelbows, type: additive, value: 1}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 44}
                  - {name: gidney_lelbows, type: additive, value: 1}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: lelbow_0.thru_0}
                  - {source: in_1, target: lelbow_0.thru_1}
                  - {source: in_2, target: lelbow_0.thru_2}
                  - {source: lelbow_0.thru_0, target: out_0}
                  - {source: lelbow_0.thru_1, target: out_1}
                  - {source: lelbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1,
                    ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                    (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                    + 1) - 1) + 2*M_r + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_9
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_10
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_9.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_8.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_8.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_11.in_0}
              - {source: in_0, target: split_0.in_0}
              - {source: lelbow_0.thru_0, target: merge_3.in_0}
              - {source: lelbow_0.thru_1, target: x_0.thru_0}
              - {source: merge_11.out_0, target: out_1}
              - {source: merge_3.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_10.in_0}
              - {source: merge_9.out_0, target: out_0}
              - {source: qubits_alloc_0.out_0, target: split_1.in_0}
              - {source: split_0.out_0, target: lelbow_0.thru_0}
              - {source: split_0.out_remainder, target: merge_3.in_remainder}
              - {source: split_1.out_0, target: lelbow_0.thru_1}
              - {source: split_1.out_remainder, target: merge_5.in_remainder}
              - {source: split_10.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_10.out_remainder, target: merge_11.in_remainder}
              - {source: split_6.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_6.out_remainder, target: merge_9.in_remainder}
              - {source: split_7.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_7.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: x_0.thru_0, target: merge_5.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_0_repetition
              children:
              - name: Repeated_had_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_0.out_0, target: out_0}
              - {source: Repeated_had_0.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_0.in_0}
              - {source: in_1, target: Repeated_had_0.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: CompareLT_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_0
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_0
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_0
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_1
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_1
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_2
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_3
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_4
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_5
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_6
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_7
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_8
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_9
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_2
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_10
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_11
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_1
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_0
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_12
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: z_0
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_13
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_1
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_2
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_14
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_15
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_3
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_16
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_17
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_18
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_19
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_20
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_21
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_22
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_23
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_4
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_24
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_25
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_3
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_1
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_1_repetition
              children:
              - name: Repeated_had_1
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_1.out_0, target: out_0}
              - {source: Repeated_had_1.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_1.in_0}
              - {source: in_1, target: Repeated_had_1.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: z_1
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: ceiling(log2(R))}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R))
                  - 1.5, 0) + 49*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R)) - Min(2,
                  ceiling(log2(R)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R)) -
                  Min(2, ceiling(log2(R))) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) -
                  1.5, 0)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_2_repetition
              children:
              - name: Repeated_had_2
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_2.out_0, target: out_0}
              - {source: Repeated_had_2.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_2.in_0}
              - {source: in_1, target: Repeated_had_2.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: Contiguizer_uncompute_0
              children:
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_2
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: relbow_0
                    children: []
                    type: relbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 1}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 1}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: relbow_0.thru_0}
                  - {source: in_1, target: relbow_0.thru_1}
                  - {source: in_2, target: relbow_0.thru_2}
                  - {source: relbow_0.thru_0, target: out_0}
                  - {source: relbow_0.thru_1, target: out_1}
                  - {source: relbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_8
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: relbow_0
                children: []
                type: relbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_5.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_4.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_4.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_1.in_0}
              - {source: in_0, target: split_2.in_0}
              - {source: in_1, target: split_0.in_0}
              - {source: merge_1.out_0, target: split_3.in_0}
              - {source: merge_10.out_0, target: qubits_free_0.in_0}
              - {source: merge_11.out_0, target: out_0}
              - {source: merge_4.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_8.in_0}
              - {source: relbow_0.thru_0, target: merge_11.in_0}
              - {source: relbow_0.thru_1, target: merge_10.in_0}
              - {source: split_0.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_2.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_2.out_remainder, target: merge_5.in_remainder}
              - {source: split_3.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_3.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_6.out_0, target: x_0.thru_0}
              - {source: split_6.out_remainder, target: merge_10.in_remainder}
              - {source: split_8.out_0, target: relbow_0.thru_0}
              - {source: split_8.out_remainder, target: merge_11.in_remainder}
              - {source: x_0.thru_0, target: relbow_0.thru_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_alloc_1
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_compute_1
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_26
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: lelbow_1
              children: []
              type: lelbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_27
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_1
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + 1'}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: in_3, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1'}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_4, direction: output, size: ceiling(log2(R))}
            - {name: out_5, direction: output, size: 1}
            - {name: out_6, direction: output, size: 1}
            resources:
            - {name: active_volume, type: additive, value: '49*M_r + 130*b_mas + 3*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                2.5, 0)) + 5*Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                2.5, 0) + 47*Heaviside(ceiling(log2(R)) - 1.5, 0) - 49*Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 277*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r
                - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) - 312'}
            - {name: gidney_lelbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: gidney_relbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: measurements, type: additive, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r + b_mas + Max(b_as,
                b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
                + 1, M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 3, M_r + b_mas + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2*ceiling(log2(R)) + 3, M_r + b_mas + Max(Max(b_as, b_givens,
                b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, 2*M_r +
                b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
                + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
            - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                2.5, 0))'}
            - {name: t_gates, type: additive, value: 'Heaviside(2.5 - Max(b_as, b_givens,
                b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(b_as, b_givens, b_mas) - 2.5, 0) + 6*Min(M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1, ceiling(log2(R)))'}
            - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) - 1.5,
                0)'}
            connections:
            - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
            - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
            - {source: CompareLT_compute_0.out_2, target: split_12.in_0}
            - {source: CompareLT_compute_1.out_0, target: CompareLT_uncompute_1.in_0}
            - {source: CompareLT_compute_1.out_1, target: CompareLT_uncompute_1.in_1}
            - {source: CompareLT_compute_1.out_2, target: split_26.in_0}
            - {source: CompareLT_uncompute_0.out_0, target: Contiguizer_uncompute_0.in_0}
            - {source: CompareLT_uncompute_0.out_1, target: Repeated_had_1_repetition.in_1}
            - {source: CompareLT_uncompute_1.out_0, target: out_0}
            - {source: CompareLT_uncompute_1.out_1, target: out_4}
            - {source: Contiguizer_compute_0.out_0, target: CompareLT_compute_0.in_0}
            - {source: Contiguizer_compute_0.out_1, target: Repeated_had_0_repetition.in_0}
            - {source: Contiguizer_uncompute_0.out_0, target: CompareLT_compute_1.in_0}
            - {source: GidneyAdd_compute_0.out_0, target: merge_6.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_uncompute_0.out_0, target: merge_20.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_1}
            - {source: Repeated_had_0_repetition.out_0, target: Repeated_had_1_repetition.in_0}
            - {source: Repeated_had_0_repetition.out_1, target: CompareLT_compute_0.in_1}
            - {source: Repeated_had_1_repetition.out_0, target: Repeated_had_2_repetition.in_0}
            - {source: Repeated_had_1_repetition.out_1, target: z_1.thru_0}
            - {source: Repeated_had_2_repetition.out_0, target: Contiguizer_uncompute_0.in_1}
            - {source: Repeated_had_2_repetition.out_1, target: CompareLT_compute_1.in_1}
            - {source: RotationCatalystStatePrep_compute_0.out_0, target: merge_0.in_0}
            - {source: RotationCatalystStatePrep_compute_0.out_1, target: merge_0.in_1}
            - {source: had_0.thru_0, target: x_1.thru_1}
            - {source: had_1.thru_0, target: s_0.thru_0}
            - {source: had_2.thru_0, target: x_3.thru_1}
            - {source: had_3.thru_0, target: s_1.thru_0}
            - {source: in_0, target: Contiguizer_compute_0.in_0}
            - {source: in_1, target: GidneyAdd_compute_0.in_1}
            - {source: in_2, target: RotationCatalystStatePrep_compute_0.in_0}
            - {source: in_3, target: Repeated_had_0_repetition.in_1}
            - {source: lelbow_0.thru_0, target: x_0.thru_0}
            - {source: lelbow_1.thru_0, target: merge_27.in_0}
            - {source: lelbow_1.thru_1, target: out_6}
            - {source: merge_0.out_0, target: split_1.in_0}
            - {source: merge_10.out_0, target: split_11.in_0}
            - {source: merge_13.out_0, target: CompareLT_uncompute_0.in_2}
            - {source: merge_14.out_0, target: split_15.in_0}
            - {source: merge_16.out_0, target: split_17.in_0}
            - {source: merge_18.out_0, target: split_19.in_0}
            - {source: merge_2.out_0, target: split_3.in_0}
            - {source: merge_20.out_0, target: split_21.in_0}
            - {source: merge_22.out_0, target: split_23.in_0}
            - {source: merge_24.out_0, target: split_25.in_0}
            - {source: merge_27.out_0, target: CompareLT_uncompute_1.in_2}
            - {source: merge_4.out_0, target: split_5.in_0}
            - {source: merge_6.out_0, target: split_7.in_0}
            - {source: merge_8.out_0, target: split_9.in_0}
            - {source: qubits_alloc_0.out_0, target: lelbow_0.thru_0}
            - {source: qubits_alloc_1.out_0, target: lelbow_1.thru_1}
            - {source: s_0.thru_0, target: z_0.thru_1}
            - {source: s_1.thru_0, target: z_1.thru_1}
            - {source: s_inv_0.thru_0, target: had_0.thru_0}
            - {source: s_inv_1.thru_0, target: had_2.thru_0}
            - {source: split_1.out_0, target: x_1.thru_0}
            - {source: split_1.out_remainder, target: merge_2.in_remainder}
            - {source: split_11.out_0, target: merge_14.in_0}
            - {source: split_11.out_1, target: merge_14.in_1}
            - {source: split_12.out_0, target: z_0.thru_0}
            - {source: split_12.out_remainder, target: merge_13.in_remainder}
            - {source: split_15.out_0, target: x_3.thru_0}
            - {source: split_15.out_remainder, target: merge_16.in_remainder}
            - {source: split_17.out_0, target: merge_18.in_0}
            - {source: split_17.out_1, target: merge_18.in_1}
            - {source: split_19.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: split_19.out_remainder, target: merge_20.in_remainder}
            - {source: split_21.out_0, target: merge_22.in_0}
            - {source: split_21.out_1, target: merge_22.in_1}
            - {source: split_23.out_0, target: x_4.thru_0}
            - {source: split_23.out_remainder, target: merge_24.in_remainder}
            - {source: split_25.out_0, target: out_3}
            - {source: split_25.out_1, target: out_2}
            - {source: split_26.out_0, target: lelbow_1.thru_0}
            - {source: split_26.out_remainder, target: merge_27.in_remainder}
            - {source: split_3.out_0, target: merge_4.in_0}
            - {source: split_3.out_1, target: merge_4.in_1}
            - {source: split_5.out_0, target: GidneyAdd_compute_0.in_0}
            - {source: split_5.out_remainder, target: merge_6.in_remainder}
            - {source: split_7.out_0, target: merge_8.in_0}
            - {source: split_7.out_1, target: merge_8.in_1}
            - {source: split_9.out_0, target: x_2.thru_0}
            - {source: split_9.out_remainder, target: merge_10.in_remainder}
            - {source: x_0.thru_0, target: s_inv_0.thru_0}
            - {source: x_1.thru_0, target: merge_2.in_0}
            - {source: x_1.thru_1, target: x_2.thru_1}
            - {source: x_2.thru_0, target: merge_10.in_0}
            - {source: x_2.thru_1, target: had_1.thru_0}
            - {source: x_3.thru_0, target: merge_16.in_0}
            - {source: x_3.thru_1, target: x_4.thru_1}
            - {source: x_4.thru_0, target: merge_24.in_0}
            - {source: x_4.thru_1, target: had_3.thru_0}
            - {source: z_0.thru_0, target: merge_13.in_0}
            - {source: z_0.thru_1, target: s_inv_1.thru_0}
            - {source: z_1.thru_0, target: Repeated_had_2_repetition.in_1}
            - {source: z_1.thru_1, target: out_5}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: MultiplexedSparseDataLookupDF_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_1
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_0
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*b_mas
                      + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1) + 0.75*ceiling(log2(R)))
                      + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
                - {name: in_2, direction: input, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
                - {name: out_2, direction: output, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*b_mas
                    + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1) + 0.75*ceiling(log2(R)))
                    + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(b_mas + (b_mas
                    + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
                    b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                    - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: SwapUp_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: (-1 + (b_mas + (b_mas
                      + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
                      + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                      - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas
                      + ceiling(log2(R)))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
                - {name: in_2, direction: input, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
                - {name: out_2, direction: output, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: (-1 + (b_mas + (b_mas
                    + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas +
                    ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))}
                - {name: qubit_highwater, type: qubits, value: b_mas + (b_mas + ceiling(log2(R)))*(lambda
                    - 1) + ceiling(log2(R)) + ceiling(log2(lambda))}
                - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                    - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas +
                    ceiling(log2(R)))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: (3*b_mas + 3*ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '(-1 + (b_mas + (b_mas
                  + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas
                  + 55*ceiling(log2(R))) + (3*b_mas + 3*ceiling(log2(R)))*(lambda
                  - 1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
                  - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
                  - 1)}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                  Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
                  b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                  - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                  - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))}
              connections:
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_2.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: SwapUp_compute_0.in_1}
              - {source: GoogleSelectOptimized_compute_0.out_2, target: SwapUp_compute_0.in_2}
              - {source: SwapUp_compute_0.out_0, target: merge_6.in_0}
              - {source: SwapUp_compute_0.out_1, target: out_1}
              - {source: SwapUp_compute_0.out_2, target: had_0.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: in_0, target: merge_0.in_1}
              - {source: in_1, target: merge_0.in_0}
              - {source: merge_0.out_0, target: split_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: qubits_alloc_0.out_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: qubits_alloc_1.out_0, target: GoogleSelectOptimized_compute_0.in_2}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_1.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_1.out_remainder, target: merge_2.in_remainder}
              - {source: split_3.out_0, target: merge_4.in_0}
              - {source: split_3.out_1, target: merge_4.in_1}
              - {source: split_5.out_0, target: SwapUp_compute_0.in_0}
              - {source: split_5.out_remainder, target: merge_6.in_remainder}
              - {source: split_7.out_0, target: out_2}
              - {source: split_7.out_1, target: out_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: M_r*(R - 1)}
            - {name: in_1, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            - {name: out_1, direction: output, size: M_r*(R - 1)}
            - {name: out_2, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '(-1 + (b_mas + (b_mas
                + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas
                + 55*ceiling(log2(R))) + (3*b_mas + 3*ceiling(log2(R)))*(lambda -
                1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
                - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda) -
                1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 114*ceiling(log2(R))
                - 120'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 2'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 2'}
            - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
                - 1)}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + ceiling(log2(R)),
                M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas +
                Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1)
                + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda -
                1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
                b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                - 1) + ceiling(log2(lambda))))'}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))}
            connections:
            - {source: DataLookupClean_compute_0.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: DataLookupClean_compute_0.out_1, target: out_0}
            - {source: DataLookupClean_compute_0.out_2, target: GidneyAdd_uncompute_0.in_2}
            - {source: GidneyAdd_compute_0.out_0, target: DataLookupClean_compute_0.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_compute_0.out_2, target: DataLookupClean_compute_0.in_1}
            - {source: GidneyAdd_uncompute_0.out_0, target: qubits_free_0.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_1}
            - {source: GidneyAdd_uncompute_0.out_2, target: out_2}
            - {source: in_0, target: GidneyAdd_compute_0.in_1}
            - {source: in_1, target: GidneyAdd_compute_0.in_2}
            - {source: qubits_alloc_0.out_0, target: GidneyAdd_compute_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: had_0
            children: []
            type: had
            ports:
            - {name: thru_0, direction: through, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 3*b_mas}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: b_mas}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_alloc_1
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_0
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_remainder, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_lelbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: qubits_alloc_0.out_0, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_2
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: 1}
            - {name: out_remainder, direction: output, size: b_mas - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: x_0
            children: []
            type: x
            ports:
            - {name: thru_0, direction: through, size: 1}
            - {name: thru_1, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 4}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_3
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: 1}
            - {name: in_remainder, direction: input, size: b_mas - 1}
            - {name: out_0, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_uncompute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_relbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_relbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: qubits_free_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_5
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_remainder, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_6
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: ceiling(log2(R))}
            - {name: out_remainder, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: swap_0
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: ceiling(log2(R))}
            - {name: thru_1, direction: through, size: 1}
            - {name: thru_2, direction: through, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: 55*ceiling(log2(R))}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*ceiling(log2(R)) + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_7
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: ceiling(log2(R))}
            - {name: in_remainder, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: in_2, direction: input, size: M_r*(R - 1)}
          - {name: in_3, direction: input, size: b_mas}
          - {name: in_4, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: in_5, direction: input, size: ceiling(log2(R))}
          - {name: in_6, direction: input, size: 1}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
          - {name: out_10, direction: output, size: 1}
          - {name: out_11, direction: output, size: 1}
          - {name: out_12, direction: output, size: 1}
          - {name: out_2, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: out_3, direction: output, size: M_r*(R - 1)}
          - {name: out_4, direction: output, size: b_mas}
          - {name: out_5, direction: output, size: b_mas}
          - {name: out_6, direction: output, size: 1}
          - {name: out_7, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: out_8, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_9, direction: output, size: ceiling(log2(R))}
          resources:
          - {name: active_volume, type: additive, value: '49*M_r + 247*b_mas + (-1
              + (b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
              + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (3*b_mas + 3*ceiling(log2(R)))*(lambda
              - 1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
              - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)
              + 3*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 114*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
              0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
              0)) + 5*Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
              0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
              0) + 47*Heaviside(ceiling(log2(R)) - 1.5, 0) - 49*Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 446*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) - 548'}
          - {name: gidney_lelbows, type: additive, value: 'M_r + 3*b_mas + Max(0,
              ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 4'}
          - {name: gidney_relbows, type: additive, value: 'M_r + 3*b_mas + Max(0,
              ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 4'}
          - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
              - 1)}
          - {name: ppms, type: additive, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r +
              b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r +
              3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R
              - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(M_r*(R
              - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas
              + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
              b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda
              - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - ceiling(log2(lambda)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
              - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 3*ceiling(log2(R))
              - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 3, M_r + b_mas + Max(Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 2, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens,
              b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas +
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas)
              + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R
              + 1)) + 1)'}
          - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
              0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
              0))'}
          - {name: t_gates, type: additive, value: 'Heaviside(2.5 - Max(b_as, b_givens,
              b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0) + 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
          - {name: toffs, type: additive, value: '(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
              - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
              + Heaviside(ceiling(log2(R)) - 1.5, 0) + ceiling(log2(R))'}
          connections:
          - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
          - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
          - {source: CompareLT_compute_0.out_2, target: split_2.in_0}
          - {source: CompareLT_uncompute_0.out_0, target: merge_5.in_0}
          - {source: CompareLT_uncompute_0.out_1, target: out_5}
          - {source: MultiplexedRealUSPDF_compute_0.out_0, target: out_2}
          - {source: MultiplexedRealUSPDF_compute_0.out_1, target: out_4}
          - {source: MultiplexedRealUSPDF_compute_0.out_2, target: out_7}
          - {source: MultiplexedRealUSPDF_compute_0.out_3, target: out_8}
          - {source: MultiplexedRealUSPDF_compute_0.out_4, target: MultiplexedSparseDataLookupDF_compute_0.in_1}
          - {source: MultiplexedRealUSPDF_compute_0.out_5, target: out_10}
          - {source: MultiplexedRealUSPDF_compute_0.out_6, target: out_12}
          - {source: MultiplexedSparseDataLookupDF_compute_0.out_0, target: split_0.in_0}
          - {source: MultiplexedSparseDataLookupDF_compute_0.out_1, target: out_3}
          - {source: MultiplexedSparseDataLookupDF_compute_0.out_2, target: swap_0.thru_2}
          - {source: had_0.thru_0, target: CompareLT_compute_0.in_1}
          - {source: in_0, target: out_0}
          - {source: in_1, target: MultiplexedRealUSPDF_compute_0.in_0}
          - {source: in_2, target: MultiplexedSparseDataLookupDF_compute_0.in_0}
          - {source: in_3, target: MultiplexedRealUSPDF_compute_0.in_1}
          - {source: in_4, target: MultiplexedRealUSPDF_compute_0.in_2}
          - {source: in_5, target: MultiplexedRealUSPDF_compute_0.in_3}
          - {source: in_6, target: out_11}
          - {source: merge_3.out_0, target: CompareLT_uncompute_0.in_2}
          - {source: merge_5.out_0, target: split_6.in_0}
          - {source: merge_7.out_0, target: out_1}
          - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
          - {source: qubits_alloc_1.out_0, target: x_0.thru_0}
          - {source: split_0.out_0, target: CompareLT_compute_0.in_0}
          - {source: split_0.out_remainder, target: merge_5.in_remainder}
          - {source: split_2.out_0, target: x_0.thru_1}
          - {source: split_2.out_remainder, target: merge_3.in_remainder}
          - {source: split_6.out_0, target: swap_0.thru_0}
          - {source: split_6.out_remainder, target: merge_7.in_remainder}
          - {source: swap_0.thru_0, target: merge_7.in_0}
          - {source: swap_0.thru_1, target: out_6}
          - {source: swap_0.thru_2, target: out_9}
          - {source: x_0.thru_0, target: swap_0.thru_1}
          - {source: x_0.thru_1, target: merge_3.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: OneElectronTermSelect_compute_0
          children:
          - name: swap_0
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: N_spatial}
            - {name: thru_1, direction: through, size: N_spatial}
            - {name: thru_2, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 55*N_spatial}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*N_spatial + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: N_spatial}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            resources:
            - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R)))'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: GidneyAdd_compute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: in_1, direction: input, size: M_r*(R - 1)}
            - {name: in_2, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: out_1, direction: output, size: M_r*(R - 1)}
            - {name: out_2, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 1)'}
            - {name: toffs, type: additive, value: 0}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: BasisRotatedMajoranaOperatorDF_compute_0
            children:
            - name: DataLookupClean_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_1
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_0
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*b_givens*(N_spatial
                      - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0,
                      ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_2, direction: input, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_2, direction: output, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*b_givens*(N_spatial
                    - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0,
                    ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
                    b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial -
                    1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                    - 2*ceiling(log2(lambda)) - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: SwapUp_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 55*b_givens*(-1 +
                      (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
                      - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  - {name: toffs, type: additive, value: b_givens*(-1 + (b_givens*(N_spatial
                      - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                      - 1)))*(N_spatial - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_2, direction: input, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_2, direction: output, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 55*b_givens*(-1 + (b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                    - 1)))*(N_spatial - 1)}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + ceiling(log2(lambda))}
                - {name: toffs, type: additive, value: b_givens*(-1 + (b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                    - 1)))*(N_spatial - 1)}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 3*b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: b_givens*(N_spatial - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '55*b_givens*(-1 + (b_givens*(N_spatial
                  - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                  - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1)
                  + (ceiling(0.75*b_givens*(N_spatial - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial
                  - 1)) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: measurements, type: additive, value: b_givens*(N_spatial -
                  1)*(lambda - 1)}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                  b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1)
                  + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                  Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda - 1) +
                  b_givens*(N_spatial - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                  + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: b_givens*(-1 + (b_givens*(N_spatial
                  - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                  - 1)))*(N_spatial - 1)}
              connections:
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_2.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: SwapUp_compute_0.in_1}
              - {source: GoogleSelectOptimized_compute_0.out_2, target: SwapUp_compute_0.in_2}
              - {source: SwapUp_compute_0.out_0, target: merge_6.in_0}
              - {source: SwapUp_compute_0.out_1, target: out_1}
              - {source: SwapUp_compute_0.out_2, target: had_0.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: in_0, target: merge_0.in_1}
              - {source: in_1, target: merge_0.in_0}
              - {source: merge_0.out_0, target: split_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: qubits_alloc_0.out_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: qubits_alloc_1.out_0, target: GoogleSelectOptimized_compute_0.in_2}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_1.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_1.out_remainder, target: merge_2.in_remainder}
              - {source: split_3.out_0, target: merge_4.in_0}
              - {source: split_3.out_1, target: merge_4.in_1}
              - {source: split_5.out_0, target: SwapUp_compute_0.in_0}
              - {source: split_5.out_remainder, target: merge_6.in_remainder}
              - {source: split_7.out_0, target: out_2}
              - {source: split_7.out_1, target: out_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: ApplyMajoranaFermionOperatorDF_compute_0
              children:
              - name: GivensRotationBasisChangeDF_compute_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_remainder, direction: output, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: N_spatial}
                  - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                  - {name: out_remainder, direction: output, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: GivensRotationFusedAdder_compute_0_repetition
                  children:
                  - name: GivensRotationFusedAdder_compute_0
                    children:
                    - name: RotationCatalystStatePrep_compute_0
                      children:
                      - name: qubits_alloc_0
                        children: []
                        type: qubits_alloc
                        ports:
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: had_0
                        children: []
                        type: had
                        ports:
                        - {name: thru_0, direction: through, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        resources:
                        - {name: active_volume, type: additive, value: '3*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppm_x_weight, type: other, value: 0}
                        - {name: ppm_z_weight, type: other, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: ppr_x_weight, type: other, value: 0}
                        - {name: ppr_z_weight, type: other, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: rotations, type: additive, value: 0}
                        - {name: t_gates, type: additive, value: 0}
                        - {name: toffs, type: additive, value: 0}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: merge_0
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_2, direction: input, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_1
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 1}
                        - {name: out_remainder, direction: output, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: Repeated_s_inv_0_repetition
                        children:
                        - name: Repeated_s_inv_0
                          children:
                          - name: s_inv_0
                            children: []
                            type: s_inv
                            ports:
                            - {name: thru_0, direction: through, size: 1}
                            resources:
                            - {name: active_volume, type: additive, value: 5}
                            - {name: gidney_lelbows, type: additive, value: 0}
                            - {name: gidney_relbows, type: additive, value: 0}
                            - {name: measurements, type: additive, value: 0}
                            - {name: ppm_x_weight, type: other, value: 0}
                            - {name: ppm_z_weight, type: other, value: 0}
                            - {name: ppms, type: additive, value: 0}
                            - {name: ppr_x_weight, type: other, value: 0}
                            - {name: ppr_z_weight, type: other, value: 0}
                            - {name: pprs, type: additive, value: 0}
                            - {name: qubit_highwater, type: qubits, value: 1}
                            - {name: rotations, type: additive, value: 0}
                            - {name: t_gates, type: additive, value: 0}
                            - {name: toffs, type: additive, value: 0}
                            connections: []
                            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                              lambda]
                            local_variables: {}
                            linked_params: []
                            repetition: null
                            meta: {}
                          type: qubrick
                          ports:
                          - {name: in_0, direction: input, size: 1}
                          - {name: out_0, direction: output, size: 1}
                          resources:
                          - {name: active_volume, type: additive, value: 5}
                          - {name: gidney_lelbows, type: additive, value: 0}
                          - {name: gidney_relbows, type: additive, value: 0}
                          - {name: measurements, type: additive, value: 0}
                          - {name: ppms, type: additive, value: 0}
                          - {name: pprs, type: additive, value: 0}
                          - {name: qubit_highwater, type: qubits, value: 1}
                          - {name: rotations, type: additive, value: 0}
                          - {name: t_gates, type: additive, value: 0}
                          - {name: toffs, type: additive, value: 0}
                          connections:
                          - {source: in_0, target: s_inv_0.thru_0}
                          - {source: s_inv_0.thru_0, target: out_0}
                          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                            lambda]
                          local_variables: {}
                          linked_params: []
                          repetition: null
                          meta: {}
                        type: qubrick
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: out_0, direction: output, size: 1}
                        resources:
                        - {name: active_volume, type: additive, value: '5*Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0)'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 1}
                        - {name: rotations, type: additive, value: 0}
                        - {name: t_gates, type: additive, value: 0}
                        - {name: toffs, type: additive, value: 0}
                        connections:
                        - {source: Repeated_s_inv_0.out_0, target: out_0}
                        - {source: in_0, target: Repeated_s_inv_0.in_0}
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)
                          sequence: {type: constant, multiplier: 1}
                        meta: {}
                      - name: merge_2
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: in_remainder, direction: input, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_3
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_2, direction: output, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: merge_4
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_2, direction: input, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_5
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 1}
                        - {name: out_remainder, direction: output, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: Repeated_t_inv_0_repetition
                        children:
                        - name: Repeated_t_inv_0
                          children:
                          - name: t_inv_0
                            children: []
                            type: t_inv
                            ports:
                            - {name: thru_0, direction: through, size: 1}
                            resources:
                            - {name: active_volume, type: additive, value: 28.5}
                            - {name: gidney_lelbows, type: additive, value: 0}
                            - {name: gidney_relbows, type: additive, value: 0}
                            - {name: measurements, type: additive, value: 0}
                            - {name: ppm_x_weight, type: other, value: 0}
                            - {name: ppm_z_weight, type: other, value: 0}
                            - {name: ppms, type: additive, value: 0}
                            - {name: ppr_x_weight, type: other, value: 0}
                            - {name: ppr_z_weight, type: other, value: 0}
                            - {name: pprs, type: additive, value: 0}
                            - {name: qubit_highwater, type: qubits, value: 1}
                            - {name: rotations, type: additive, value: 0}
                            - {name: t_gates, type: additive, value: 1}
                            - {name: toffs, type: additive, value: 0}
                            connections: []
                            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                              lambda]
                            local_variables: {}
                            linked_params: []
                            repetition: null
                            meta: {}
                          type: qubrick
                          ports:
                          - {name: in_0, direction: input, size: 1}
                          - {name: out_0, direction: output, size: 1}
                          resources:
                          - {name: active_volume, type: additive, value: 28.5}
                          - {name: gidney_lelbows, type: additive, value: 0}
                          - {name: gidney_relbows, type: additive, value: 0}
                          - {name: measurements, type: additive, value: 0}
                          - {name: ppms, type: additive, value: 0}
                          - {name: pprs, type: additive, value: 0}
                          - {name: qubit_highwater, type: qubits, value: 1}
                          - {name: rotations, type: additive, value: 0}
                          - {name: t_gates, type: additive, value: 1}
                          - {name: toffs, type: additive, value: 0}
                          connections:
                          - {source: in_0, target: t_inv_0.thru_0}
                          - {source: t_inv_0.thru_0, target: out_0}
                          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                            lambda]
                          local_variables: {}
                          linked_params: []
                          repetition: null
                          meta: {}
                        type: qubrick
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: out_0, direction: output, size: 1}
                        resources:
                        - {name: active_volume, type: additive, value: '28.5*Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0)'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 1}
                        - {name: rotations, type: additive, value: 0}
                        - {name: t_gates, type: additive, value: 'Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0)'}
                        - {name: toffs, type: additive, value: 0}
                        connections:
                        - {source: Repeated_t_inv_0.out_0, target: out_0}
                        - {source: in_0, target: Repeated_t_inv_0.in_0}
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                          sequence: {type: constant, multiplier: 1}
                        meta: {}
                      - name: merge_6
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: in_remainder, direction: input, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_7
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_2, direction: output, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: merge_8
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_2, direction: input, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_9
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 1}
                        - {name: out_remainder, direction: output, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: Repeated_phase_0_repetition
                        children:
                        - name: Repeated_phase_0
                          children:
                          - name: phase_0
                            children: []
                            type: phase
                            ports:
                            - {name: thru_0, direction: through, size: 1}
                            resources:
                            - {name: active_volume, type: additive, value: 1397}
                            - {name: gidney_lelbows, type: additive, value: 0}
                            - {name: gidney_relbows, type: additive, value: 0}
                            - {name: measurements, type: additive, value: 0}
                            - {name: ppm_x_weight, type: other, value: 0}
                            - {name: ppm_z_weight, type: other, value: 0}
                            - {name: ppms, type: additive, value: 0}
                            - {name: ppr_x_weight, type: other, value: 0}
                            - {name: ppr_z_weight, type: other, value: 0}
                            - {name: pprs, type: additive, value: 0}
                            - {name: qubit_highwater, type: qubits, value: 1}
                            - {name: rotations, type: additive, value: 1}
                            - {name: t_gates, type: additive, value: 0}
                            - {name: toffs, type: additive, value: 0}
                            connections: []
                            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                              lambda]
                            local_variables: {}
                            linked_params: []
                            repetition: null
                            meta: {}
                          type: qubrick
                          ports:
                          - {name: in_0, direction: input, size: 1}
                          - {name: out_0, direction: output, size: 1}
                          resources:
                          - {name: active_volume, type: additive, value: 1397}
                          - {name: gidney_lelbows, type: additive, value: 0}
                          - {name: gidney_relbows, type: additive, value: 0}
                          - {name: measurements, type: additive, value: 0}
                          - {name: ppms, type: additive, value: 0}
                          - {name: pprs, type: additive, value: 0}
                          - {name: qubit_highwater, type: qubits, value: 1}
                          - {name: rotations, type: additive, value: 1}
                          - {name: t_gates, type: additive, value: 0}
                          - {name: toffs, type: additive, value: 0}
                          connections:
                          - {source: in_0, target: phase_0.thru_0}
                          - {source: phase_0.thru_0, target: out_0}
                          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                            lambda]
                          local_variables: {}
                          linked_params: []
                          repetition: null
                          meta: {}
                        type: qubrick
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: out_0, direction: output, size: 1}
                        resources:
                        - {name: active_volume, type: additive, value: '1397*Max(0,
                            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                            + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0))'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 1}
                        - {name: rotations, type: additive, value: 'Max(0, Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                            + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0))'}
                        - {name: t_gates, type: additive, value: 0}
                        - {name: toffs, type: additive, value: 0}
                        connections:
                        - {source: Repeated_phase_0.out_0, target: out_0}
                        - {source: in_0, target: Repeated_phase_0.in_0}
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition:
                          count: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0))
                          sequence: {type: constant, multiplier: 1}
                        meta: {}
                      - name: merge_10
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: in_remainder, direction: input, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_11
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_2, direction: output, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      type: qubrick
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_2, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: active_volume, type: additive, value: '3*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas) - 2.5, 0)) + 5*Heaviside(-Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas) - 2.5, 0)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas))'}
                      - {name: rotations, type: additive, value: 'Max(0, Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas) - 2.5, 0))'}
                      - {name: t_gates, type: additive, value: 'Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas) - 2.5, 0)'}
                      - {name: toffs, type: additive, value: 0}
                      connections:
                      - {source: Repeated_phase_0_repetition.out_0, target: merge_10.in_0}
                      - {source: Repeated_s_inv_0_repetition.out_0, target: merge_2.in_0}
                      - {source: Repeated_t_inv_0_repetition.out_0, target: merge_6.in_0}
                      - {source: had_0.thru_0, target: merge_0.in_0}
                      - {source: in_0, target: merge_0.in_1}
                      - {source: in_1, target: merge_0.in_2}
                      - {source: merge_0.out_0, target: split_1.in_0}
                      - {source: merge_10.out_0, target: split_11.in_0}
                      - {source: merge_2.out_0, target: split_3.in_0}
                      - {source: merge_4.out_0, target: split_5.in_0}
                      - {source: merge_6.out_0, target: split_7.in_0}
                      - {source: merge_8.out_0, target: split_9.in_0}
                      - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
                      - {source: split_1.out_0, target: Repeated_s_inv_0_repetition.in_0}
                      - {source: split_1.out_remainder, target: merge_2.in_remainder}
                      - {source: split_11.out_0, target: out_0}
                      - {source: split_11.out_1, target: out_1}
                      - {source: split_11.out_2, target: out_2}
                      - {source: split_3.out_0, target: merge_4.in_0}
                      - {source: split_3.out_1, target: merge_4.in_1}
                      - {source: split_3.out_2, target: merge_4.in_2}
                      - {source: split_5.out_0, target: Repeated_t_inv_0_repetition.in_0}
                      - {source: split_5.out_remainder, target: merge_6.in_remainder}
                      - {source: split_7.out_0, target: merge_8.in_0}
                      - {source: split_7.out_1, target: merge_8.in_1}
                      - {source: split_7.out_2, target: merge_8.in_2}
                      - {source: split_9.out_0, target: Repeated_phase_0_repetition.in_0}
                      - {source: split_9.out_remainder, target: merge_10.in_remainder}
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: ppr_0
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_0
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_1
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_0
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_2
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_3
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_4
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_1
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_5
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_6
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: GidneyAdd_compute_0
                      children:
                      - name: cost_event
                        children: []
                        type: intrinsic_cost
                        ports: []
                        resources:
                        - {name: active_volume, type: additive, value: '100*Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56'}
                        - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: local_ancillae, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      type: qubrick
                      ports:
                      - {name: in_0, direction: input, size: b_givens}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_4, direction: input, size: 1}
                      - {name: out_0, direction: output, size: b_givens}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_4, direction: output, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '100*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56'}
                      - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: qubit_highwater, type: qubits, value: 'Max(b_givens
                          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens
                          + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))'}
                      - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)'}
                      connections:
                      - {source: in_0, target: out_0}
                      - {source: in_1, target: out_1}
                      - {source: in_2, target: out_2}
                      - {source: in_3, target: out_3}
                      - {source: in_4, target: out_4}
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_7
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_8
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_2
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_9
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_10
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_11
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_3
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_12
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_13
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: ppr_1
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    type: qubrick
                    ports:
                    - {name: in_0, direction: input, size: b_givens}
                    - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                    - {name: in_3, direction: input, size: 'Mod(2, N_spatial)'}
                    - {name: out_0, direction: output, size: b_givens}
                    - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                        b_mas)'}
                    - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: out_4, direction: output, size: 'Mod(2, N_spatial)'}
                    resources:
                    - {name: active_volume, type: additive, value: '108*Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
                        b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 2.5, 0) - 48'}
                    - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: pprs, type: additive, value: 2}
                    - {name: qubit_highwater, type: qubits, value: 'Max(b_givens +
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                        b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial),
                        Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
                        + Mod(2, N_spatial) - 1)'}
                    - {name: rotations, type: additive, value: 'Max(0, Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 2.5, 0))'}
                    - {name: t_gates, type: additive, value: 'Heaviside(-Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                        + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - 2.5, 0)'}
                    - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                        b_givens, b_mas)'}
                    connections:
                    - {source: GidneyAdd_compute_0.out_0, target: out_0}
                    - {source: GidneyAdd_compute_0.out_1, target: merge_11.in_1}
                    - {source: GidneyAdd_compute_0.out_2, target: merge_11.in_0}
                    - {source: GidneyAdd_compute_0.out_3, target: x_3.thru_1}
                    - {source: GidneyAdd_compute_0.out_4, target: merge_7.in_0}
                    - {source: RotationCatalystStatePrep_compute_0.out_0, target: x_0.thru_1}
                    - {source: RotationCatalystStatePrep_compute_0.out_1, target: merge_1.in_0}
                    - {source: RotationCatalystStatePrep_compute_0.out_2, target: merge_1.in_1}
                    - {source: in_0, target: GidneyAdd_compute_0.in_0}
                    - {source: in_1, target: RotationCatalystStatePrep_compute_0.in_0}
                    - {source: in_2, target: RotationCatalystStatePrep_compute_0.in_1}
                    - {source: in_3, target: ppr_0.thru_0}
                    - {source: merge_1.out_0, target: x_0.thru_0}
                    - {source: merge_11.out_0, target: x_3.thru_0}
                    - {source: merge_13.out_0, target: ppr_1.thru_0}
                    - {source: merge_3.out_0, target: split_4.in_0}
                    - {source: merge_5.out_0, target: split_6.in_0}
                    - {source: merge_7.out_0, target: split_8.in_0}
                    - {source: merge_9.out_0, target: split_10.in_0}
                    - {source: ppr_0.thru_0, target: split_0.in_0}
                    - {source: ppr_1.thru_0, target: out_4}
                    - {source: split_0.out_0, target: x_0.thru_2}
                    - {source: split_0.out_remainder, target: merge_3.in_remainder}
                    - {source: split_10.out_0, target: x_3.thru_2}
                    - {source: split_10.out_remainder, target: merge_13.in_remainder}
                    - {source: split_12.out_0, target: out_2}
                    - {source: split_12.out_1, target: out_1}
                    - {source: split_2.out_0, target: GidneyAdd_compute_0.in_2}
                    - {source: split_2.out_1, target: GidneyAdd_compute_0.in_1}
                    - {source: split_4.out_0, target: x_1.thru_0}
                    - {source: split_4.out_1, target: x_1.thru_1}
                    - {source: split_4.out_remainder, target: merge_5.in_remainder}
                    - {source: split_6.out_0, target: GidneyAdd_compute_0.in_4}
                    - {source: split_6.out_remainder, target: merge_7.in_remainder}
                    - {source: split_8.out_0, target: x_2.thru_0}
                    - {source: split_8.out_1, target: x_2.thru_1}
                    - {source: split_8.out_remainder, target: merge_9.in_remainder}
                    - {source: x_0.thru_0, target: split_2.in_0}
                    - {source: x_0.thru_1, target: GidneyAdd_compute_0.in_3}
                    - {source: x_0.thru_2, target: merge_3.in_0}
                    - {source: x_1.thru_0, target: merge_5.in_0}
                    - {source: x_1.thru_1, target: merge_5.in_1}
                    - {source: x_2.thru_0, target: merge_9.in_0}
                    - {source: x_2.thru_1, target: merge_9.in_1}
                    - {source: x_3.thru_0, target: split_12.in_0}
                    - {source: x_3.thru_1, target: out_3}
                    - {source: x_3.thru_2, target: merge_13.in_0}
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: in_3, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: out_4, direction: output, size: 'Mod(2, N_spatial)'}
                  resources:
                  - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens -
                      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                      + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as, b_givens,
                      b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0) - 48)'}
                  - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 2*N_spatial - 2}
                  - {name: qubit_highwater, type: qubits, value: 'Max(b_givens + Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                      + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                      b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                      b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                      b_givens + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                      Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                      b_mas)) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                      b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
                      b_givens, b_mas)) + Mod(2, N_spatial) - 1))'}
                  - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0,
                      Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0))'}
                  - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0)'}
                  - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas))'}
                  connections:
                  - {source: GivensRotationFusedAdder_compute_0.out_0, target: out_0}
                  - {source: GivensRotationFusedAdder_compute_0.out_1, target: out_1}
                  - {source: GivensRotationFusedAdder_compute_0.out_2, target: out_2}
                  - {source: GivensRotationFusedAdder_compute_0.out_3, target: out_3}
                  - {source: GivensRotationFusedAdder_compute_0.out_4, target: out_4}
                  - {source: in_0, target: GivensRotationFusedAdder_compute_0.in_0}
                  - {source: in_1, target: GivensRotationFusedAdder_compute_0.in_1}
                  - {source: in_2, target: GivensRotationFusedAdder_compute_0.in_2}
                  - {source: in_3, target: GivensRotationFusedAdder_compute_0.in_3}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition:
                    count: N_spatial - 1
                    sequence: {type: constant, multiplier: 1}
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: in_remainder, direction: input, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  - {name: out_0, direction: output, size: N_spatial}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_remainder, direction: input, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: in_3, direction: input, size: N_spatial}
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_4, direction: output, size: N_spatial}
                resources:
                - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                    + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                    + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0) - 48)'}
                - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 2*N_spatial - 2}
                - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + b_givens*(N_spatial
                    - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) + Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
                    - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
                    + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                    + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
                    b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial))'}
                - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0,
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                    + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0)'}
                - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas))'}
                connections:
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_0, target: merge_3.in_0}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_1, target: out_1}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_2, target: out_2}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_3, target: out_3}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_4, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: GivensRotationFusedAdder_compute_0_repetition.in_1}
                - {source: in_2, target: GivensRotationFusedAdder_compute_0_repetition.in_2}
                - {source: in_3, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_4}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: GivensRotationFusedAdder_compute_0_repetition.in_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: GivensRotationFusedAdder_compute_0_repetition.in_3}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: N_spatial}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: N_spatial - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: N_spatial}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: z_0
                children: []
                type: z
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: N_spatial - 1}
                - {name: out_0, direction: output, size: N_spatial}
                resources:
                - {name: qubit_highwater, type: qubits, value: N_spatial}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GivensRotationBasisChangeDF_uncompute_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_remainder, direction: output, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: N_spatial}
                  - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                  - {name: out_remainder, direction: output, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: GivensRotationFusedAdder_uncompute_0_repetition
                  children:
                  - name: GivensRotationFusedAdder_uncompute_0
                    children:
                    - name: ppr_0
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_0
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_1
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_0
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_2
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_3
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_4
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_1
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_5
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_6
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: GidneyAdd_uncompute_0
                      children:
                      - name: cost_event
                        children: []
                        type: intrinsic_cost
                        ports: []
                        resources:
                        - {name: active_volume, type: additive, value: '100*Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56'}
                        - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: local_ancillae, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                            b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      type: qubrick
                      ports:
                      - {name: in_0, direction: input, size: b_givens}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_4, direction: input, size: 1}
                      - {name: out_0, direction: output, size: b_givens}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_4, direction: output, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '100*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56'}
                      - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: qubit_highwater, type: qubits, value: 'Max(b_givens
                          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens
                          + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))'}
                      - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)'}
                      connections:
                      - {source: in_0, target: out_0}
                      - {source: in_1, target: out_1}
                      - {source: in_2, target: out_2}
                      - {source: in_3, target: out_3}
                      - {source: in_4, target: out_4}
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_7
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_8
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_2
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_9
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_10
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_11
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_3
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_12
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_13
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: ppr_1
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: RotationCatalystStatePrep_uncompute_0
                      children: []
                      type: qubrick
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    type: qubrick
                    ports:
                    - {name: in_0, direction: input, size: b_givens}
                    - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                    - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: in_3, direction: input, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: in_4, direction: input, size: 'Mod(2, N_spatial)'}
                    - {name: out_0, direction: output, size: b_givens}
                    - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                        b_mas)'}
                    - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: out_4, direction: output, size: 'Mod(2, N_spatial)'}
                    resources:
                    - {name: active_volume, type: additive, value: '108*Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48'}
                    - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: pprs, type: additive, value: 2}
                    - {name: qubit_highwater, type: qubits, value: 'Max(b_givens +
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                        Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
                        + Mod(2, N_spatial) - 1)'}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                        b_givens, b_mas)'}
                    connections:
                    - {source: GidneyAdd_uncompute_0.out_0, target: out_0}
                    - {source: GidneyAdd_uncompute_0.out_1, target: merge_11.in_1}
                    - {source: GidneyAdd_uncompute_0.out_2, target: merge_11.in_0}
                    - {source: GidneyAdd_uncompute_0.out_3, target: x_3.thru_1}
                    - {source: GidneyAdd_uncompute_0.out_4, target: merge_7.in_0}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_0, target: out_3}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_1, target: out_2}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_2, target: out_1}
                    - {source: in_0, target: GidneyAdd_uncompute_0.in_0}
                    - {source: in_1, target: merge_1.in_1}
                    - {source: in_2, target: merge_1.in_0}
                    - {source: in_3, target: x_0.thru_1}
                    - {source: in_4, target: ppr_0.thru_0}
                    - {source: merge_1.out_0, target: x_0.thru_0}
                    - {source: merge_11.out_0, target: x_3.thru_0}
                    - {source: merge_13.out_0, target: ppr_1.thru_0}
                    - {source: merge_3.out_0, target: split_4.in_0}
                    - {source: merge_5.out_0, target: split_6.in_0}
                    - {source: merge_7.out_0, target: split_8.in_0}
                    - {source: merge_9.out_0, target: split_10.in_0}
                    - {source: ppr_0.thru_0, target: split_0.in_0}
                    - {source: ppr_1.thru_0, target: out_4}
                    - {source: split_0.out_0, target: x_0.thru_2}
                    - {source: split_0.out_remainder, target: merge_3.in_remainder}
                    - {source: split_10.out_0, target: x_3.thru_2}
                    - {source: split_10.out_remainder, target: merge_13.in_remainder}
                    - {source: split_12.out_0, target: RotationCatalystStatePrep_uncompute_0.thru_1}
                    - {source: split_12.out_1, target: RotationCatalystStatePrep_uncompute_0.thru_2}
                    - {source: split_2.out_0, target: GidneyAdd_uncompute_0.in_2}
                    - {source: split_2.out_1, target: GidneyAdd_uncompute_0.in_1}
                    - {source: split_4.out_0, target: x_1.thru_0}
                    - {source: split_4.out_1, target: x_1.thru_1}
                    - {source: split_4.out_remainder, target: merge_5.in_remainder}
                    - {source: split_6.out_0, target: GidneyAdd_uncompute_0.in_4}
                    - {source: split_6.out_remainder, target: merge_7.in_remainder}
                    - {source: split_8.out_0, target: x_2.thru_0}
                    - {source: split_8.out_1, target: x_2.thru_1}
                    - {source: split_8.out_remainder, target: merge_9.in_remainder}
                    - {source: x_0.thru_0, target: split_2.in_0}
                    - {source: x_0.thru_1, target: GidneyAdd_uncompute_0.in_3}
                    - {source: x_0.thru_2, target: merge_3.in_0}
                    - {source: x_1.thru_0, target: merge_5.in_0}
                    - {source: x_1.thru_1, target: merge_5.in_1}
                    - {source: x_2.thru_0, target: merge_9.in_0}
                    - {source: x_2.thru_1, target: merge_9.in_1}
                    - {source: x_3.thru_0, target: split_12.in_0}
                    - {source: x_3.thru_1, target: RotationCatalystStatePrep_uncompute_0.thru_0}
                    - {source: x_3.thru_2, target: merge_13.in_0}
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: in_3, direction: input, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: in_4, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: out_4, direction: output, size: 'Mod(2, N_spatial)'}
                  resources:
                  - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens -
                      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48)'}
                  - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 2*N_spatial - 2}
                  - {name: qubit_highwater, type: qubits, value: 'Max(b_givens + Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1))'}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas))'}
                  connections:
                  - {source: GivensRotationFusedAdder_uncompute_0.out_0, target: out_0}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_1, target: out_1}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_2, target: out_2}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_3, target: out_3}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_4, target: out_4}
                  - {source: in_0, target: GivensRotationFusedAdder_uncompute_0.in_0}
                  - {source: in_1, target: GivensRotationFusedAdder_uncompute_0.in_1}
                  - {source: in_2, target: GivensRotationFusedAdder_uncompute_0.in_2}
                  - {source: in_3, target: GivensRotationFusedAdder_uncompute_0.in_3}
                  - {source: in_4, target: GivensRotationFusedAdder_uncompute_0.in_4}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition:
                    count: N_spatial - 1
                    sequence: {type: constant, multiplier: 1}
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: in_remainder, direction: input, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  - {name: out_0, direction: output, size: N_spatial}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_remainder, direction: input, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_3, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: in_4, direction: input, size: N_spatial}
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_4, direction: output, size: N_spatial}
                resources:
                - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + 108*Max(b_as, b_givens, b_mas) - 48)'}
                - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 2*N_spatial - 2}
                - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + b_givens*(N_spatial
                    - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
                    - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                    2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
                    + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial))'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas))'}
                connections:
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_0,
                  target: merge_3.in_0}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_1,
                  target: out_1}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_2,
                  target: out_2}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_3,
                  target: out_3}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_4,
                  target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: GivensRotationFusedAdder_uncompute_0_repetition.in_1}
                - {source: in_2, target: GivensRotationFusedAdder_uncompute_0_repetition.in_2}
                - {source: in_3, target: GivensRotationFusedAdder_uncompute_0_repetition.in_3}
                - {source: in_4, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_4}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: GivensRotationFusedAdder_uncompute_0_repetition.in_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: GivensRotationFusedAdder_uncompute_0_repetition.in_4}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: N_spatial}
              - {name: in_4, direction: input, size: 1}
              - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_4, direction: output, size: N_spatial}
              - {name: out_5, direction: output, size: 1}
              resources:
              - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                  0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
                  b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0) - 48) + 4'}
              - {name: gidney_lelbows, type: additive, value: '(2*N_spatial - 2)*(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1)'}
              - {name: gidney_relbows, type: additive, value: '(2*N_spatial - 2)*(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1)'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 4*N_spatial - 4}
              - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + b_givens*(N_spatial
                  - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) +
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial -
                  1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
                  N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
                  N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens
                  + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1))
                  - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial -
                  1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas), N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                  N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens +
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
                  + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
                  + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens
                  + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
                  b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial))
                  + 1)'}
              - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0))'}
              - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
              - {name: toffs, type: additive, value: '(2*N_spatial - 2)*(Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas))'}
              connections:
              - {source: GivensRotationBasisChangeDF_compute_0.out_0, target: GivensRotationBasisChangeDF_uncompute_0.in_0}
              - {source: GivensRotationBasisChangeDF_compute_0.out_1, target: GivensRotationBasisChangeDF_uncompute_0.in_1}
              - {source: GivensRotationBasisChangeDF_compute_0.out_2, target: GivensRotationBasisChangeDF_uncompute_0.in_2}
              - {source: GivensRotationBasisChangeDF_compute_0.out_3, target: GivensRotationBasisChangeDF_uncompute_0.in_3}
              - {source: GivensRotationBasisChangeDF_compute_0.out_4, target: split_0.in_0}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_0, target: out_0}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_1, target: out_1}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_2, target: out_2}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_3, target: out_3}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_4, target: out_4}
              - {source: in_0, target: GivensRotationBasisChangeDF_compute_0.in_0}
              - {source: in_1, target: GivensRotationBasisChangeDF_compute_0.in_2}
              - {source: in_2, target: GivensRotationBasisChangeDF_compute_0.in_1}
              - {source: in_3, target: GivensRotationBasisChangeDF_compute_0.in_3}
              - {source: in_4, target: z_0.thru_1}
              - {source: merge_1.out_0, target: GivensRotationBasisChangeDF_uncompute_0.in_4}
              - {source: split_0.out_0, target: z_0.thru_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: z_0.thru_0, target: merge_1.in_0}
              - {source: z_0.thru_1, target: out_5}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_uncompute_0
              children:
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: active_volume, type: additive, value: 3*b_givens*(N_spatial
                    - 1)}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: b_givens*(N_spatial
                    - 1)}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_lelbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_lelbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_1
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                      + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                    + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(lambda + Max(0,
                    -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) -
                    ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                    + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_9
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_2
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_11
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_uncompute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_relbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_relbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_12
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_13
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_14
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_1
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_15
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_1
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: b_givens*(N_spatial - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '3*b_givens*(N_spatial
                  - 1) + 24*lambda + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda)
                  - 1) - 18'}
              - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: measurements, type: additive, value: b_givens*(N_spatial -
                  1)}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                  Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
                  ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                  - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: BinaryToUnaryUncomputation_compute_0.out_0, target: merge_4.in_0}
              - {source: BinaryToUnaryUncomputation_compute_0.out_1, target: had_1.thru_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_0, target: merge_12.in_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_1, target: split_14.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_8.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: had_2.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: had_1.thru_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: had_2.thru_0, target: BinaryToUnaryUncomputation_uncompute_0.in_1}
              - {source: in_0, target: merge_2.in_1}
              - {source: in_1, target: had_0.thru_0}
              - {source: in_2, target: merge_2.in_0}
              - {source: merge_1.out_0, target: BinaryToUnaryUncomputation_compute_0.in_1}
              - {source: merge_10.out_0, target: split_11.in_0}
              - {source: merge_12.out_0, target: split_13.in_0}
              - {source: merge_15.out_0, target: qubits_free_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_9.in_0}
              - {source: qubits_alloc_0.out_0, target: split_0.in_0}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_0.out_0, target: x_0.thru_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_11.out_0, target: BinaryToUnaryUncomputation_uncompute_0.in_0}
              - {source: split_11.out_remainder, target: merge_12.in_remainder}
              - {source: split_13.out_0, target: out_1}
              - {source: split_13.out_1, target: out_0}
              - {source: split_14.out_0, target: x_1.thru_0}
              - {source: split_14.out_remainder, target: merge_15.in_remainder}
              - {source: split_3.out_0, target: BinaryToUnaryUncomputation_compute_0.in_0}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_5.out_0, target: merge_6.in_0}
              - {source: split_5.out_1, target: merge_6.in_1}
              - {source: split_7.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: split_9.out_0, target: merge_10.in_0}
              - {source: split_9.out_1, target: merge_10.in_1}
              - {source: x_0.thru_0, target: merge_1.in_0}
              - {source: x_1.thru_0, target: merge_15.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_3, direction: input, size: ceiling(log2(R))}
            - {name: in_4, direction: input, size: N_spatial}
            - {name: in_5, direction: input, size: 1}
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_3, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: out_4, direction: output, size: ceiling(log2(R))}
            - {name: out_5, direction: output, size: N_spatial}
            - {name: out_6, direction: output, size: 1}
            resources:
            - {name: active_volume, type: additive, value: '55*b_givens*(-1 + (b_givens*(N_spatial
                - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1) +
                3*b_givens*(N_spatial - 1) + 24*lambda + (N_spatial - 1)*(108*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2.5, 0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + (ceiling(0.75*lambda)
                + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + (ceiling(0.75*b_givens*(N_spatial
                - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lambda)
                - 1) - 14'}
            - {name: gidney_lelbows, type: additive, value: 'lambda + (2*N_spatial
                - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lambda)
                - 1) - 1'}
            - {name: gidney_relbows, type: additive, value: 'lambda + (2*N_spatial
                - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lambda)
                - 1) - 1'}
            - {name: measurements, type: additive, value: b_givens*(N_spatial - 1)*(lambda
                - 1) + b_givens*(N_spatial - 1)}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 4*N_spatial - 4}
            - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
                + 1, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial -
                1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))
                + 1, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial -
                1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(b_givens*(N_spatial
                - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
                b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) +
                2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(N_spatial + b_givens*(N_spatial
                - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2,
                N_spatial) - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial
                - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas), N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
                Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2,
                N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
                b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) +
                1) + ceiling(log2(R)))'}
            - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 2.5, 0))'}
            - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
            - {name: toffs, type: additive, value: 'b_givens*(-1 + (b_givens*(N_spatial
                - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                - 1)))*(N_spatial - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))'}
            connections:
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_0, target: DataLookupClean_uncompute_0.in_1}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_1, target: out_1}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_2, target: out_2}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_3, target: out_3}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_4, target: out_5}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_5, target: out_6}
            - {source: DataLookupClean_compute_0.out_0, target: DataLookupClean_uncompute_0.in_0}
            - {source: DataLookupClean_compute_0.out_1, target: ApplyMajoranaFermionOperatorDF_compute_0.in_0}
            - {source: DataLookupClean_compute_0.out_2, target: DataLookupClean_uncompute_0.in_2}
            - {source: DataLookupClean_uncompute_0.out_0, target: out_0}
            - {source: DataLookupClean_uncompute_0.out_1, target: out_4}
            - {source: in_0, target: DataLookupClean_compute_0.in_0}
            - {source: in_1, target: ApplyMajoranaFermionOperatorDF_compute_0.in_1}
            - {source: in_2, target: ApplyMajoranaFermionOperatorDF_compute_0.in_2}
            - {source: in_3, target: DataLookupClean_compute_0.in_1}
            - {source: in_4, target: ApplyMajoranaFermionOperatorDF_compute_0.in_3}
            - {source: in_5, target: ApplyMajoranaFermionOperatorDF_compute_0.in_4}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: GidneyAdd_uncompute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: in_1, direction: input, size: M_r*(R - 1)}
            - {name: in_2, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: out_1, direction: output, size: M_r*(R - 1)}
            - {name: out_2, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 1)'}
            - {name: toffs, type: additive, value: 0}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            resources:
            - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R)))'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: swap_1
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: N_spatial}
            - {name: thru_1, direction: through, size: N_spatial}
            - {name: thru_2, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 55*N_spatial}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*N_spatial + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: N_spatial}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: in_10, direction: input, size: 1}
          - {name: in_2, direction: input, size: M_r*(R - 1)}
          - {name: in_3, direction: input, size: b_mas}
          - {name: in_4, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: in_5, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: in_6, direction: input, size: ceiling(log2(R))}
          - {name: in_7, direction: input, size: N_spatial}
          - {name: in_8, direction: input, size: N_spatial}
          - {name: in_9, direction: input, size: 1}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: out_10, direction: output, size: 1}
          - {name: out_11, direction: output, size: 1}
          - {name: out_2, direction: output, size: M_r*(R - 1)}
          - {name: out_3, direction: output, size: b_mas}
          - {name: out_4, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: out_6, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_7, direction: output, size: ceiling(log2(R))}
          - {name: out_8, direction: output, size: N_spatial}
          - {name: out_9, direction: output, size: N_spatial}
          resources:
          - {name: active_volume, type: additive, value: '110*N_spatial + 55*b_givens*(-1
              + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
              - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1) + 3*b_givens*(N_spatial
              - 1) + 24*lambda + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48)
              + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
              111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
              0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
              0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0) - 48) + (ceiling(0.75*lambda) + 49)*Max(0,
              ceiling(M_r*R/lambda) - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lambda
              - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lambda)
              - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 114*ceiling(log2(R))
              - 134'}
          - {name: gidney_lelbows, type: additive, value: 'lambda + (2*N_spatial -
              2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lambda) - 1)
              + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 3'}
          - {name: gidney_relbows, type: additive, value: 'lambda + (2*N_spatial -
              2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lambda) - 1)
              + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 3'}
          - {name: measurements, type: additive, value: b_givens*(N_spatial - 1)*(lambda
              - 1) + b_givens*(N_spatial - 1)}
          - {name: ppms, type: additive, value: 0}
          - {name: pprs, type: additive, value: 4*N_spatial - 4}
          - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r +
              2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas +
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas +
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 3, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R + 1)) + 3, M_r + 2*N_spatial + b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) +
              Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
              + 3, M_r*(R - 1) + M_r + N_spatial + b_mas + Max(N_spatial + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) +
              1, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
              lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, N_spatial
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
              + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
              - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1)
              + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
              - ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
              - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(N_spatial + b_givens*(N_spatial
              - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
              N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) -
              Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial
              + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
              - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens +
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
              N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
              Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
              b_givens + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
              + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1) + ceiling(log2(R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2)'}
          - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)
              - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
          - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
              0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
          - {name: toffs, type: additive, value: '2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial
              - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial -
              1)))*(N_spatial - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))'}
          connections:
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_0, target: GidneyAdd_uncompute_0.in_0}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_1, target: out_4}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_2, target: out_6}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_3, target: out_5}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_4, target: GidneyAdd_uncompute_0.in_2}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_5, target: swap_1.thru_0}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_6, target: out_11}
          - {source: GidneyAdd_compute_0.out_0, target: BasisRotatedMajoranaOperatorDF_compute_0.in_0}
          - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
          - {source: GidneyAdd_compute_0.out_2, target: BasisRotatedMajoranaOperatorDF_compute_0.in_3}
          - {source: GidneyAdd_uncompute_0.out_0, target: qubits_free_0.in_0}
          - {source: GidneyAdd_uncompute_0.out_1, target: out_2}
          - {source: GidneyAdd_uncompute_0.out_2, target: out_7}
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: in_10, target: BasisRotatedMajoranaOperatorDF_compute_0.in_5}
          - {source: in_2, target: GidneyAdd_compute_0.in_1}
          - {source: in_3, target: out_3}
          - {source: in_4, target: BasisRotatedMajoranaOperatorDF_compute_0.in_1}
          - {source: in_5, target: BasisRotatedMajoranaOperatorDF_compute_0.in_2}
          - {source: in_6, target: GidneyAdd_compute_0.in_2}
          - {source: in_7, target: swap_0.thru_0}
          - {source: in_8, target: swap_0.thru_1}
          - {source: in_9, target: swap_0.thru_2}
          - {source: qubits_alloc_0.out_0, target: GidneyAdd_compute_0.in_0}
          - {source: swap_0.thru_0, target: BasisRotatedMajoranaOperatorDF_compute_0.in_4}
          - {source: swap_0.thru_1, target: swap_1.thru_1}
          - {source: swap_0.thru_2, target: swap_1.thru_2}
          - {source: swap_1.thru_0, target: out_8}
          - {source: swap_1.thru_1, target: out_9}
          - {source: swap_1.thru_2, target: out_10}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: MultiplexedAliasSamplingDF_uncompute_0
          children:
          - name: split_0
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: ceiling(log2(R))}
            - {name: out_remainder, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: swap_0
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: ceiling(log2(R))}
            - {name: thru_1, direction: through, size: 1}
            - {name: thru_2, direction: through, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: 55*ceiling(log2(R))}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*ceiling(log2(R)) + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_1
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: ceiling(log2(R))}
            - {name: in_remainder, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_2
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_remainder, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_lelbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: qubits_alloc_0.out_0, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_4
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: 1}
            - {name: out_remainder, direction: output, size: b_mas - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: x_0
            children: []
            type: x
            ports:
            - {name: thru_0, direction: through, size: 1}
            - {name: thru_1, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 4}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_5
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: 1}
            - {name: in_remainder, direction: input, size: b_mas - 1}
            - {name: out_0, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_uncompute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_relbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_relbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: qubits_free_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_7
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_remainder, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: had_0
            children: []
            type: had
            ports:
            - {name: thru_0, direction: through, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 3*b_mas}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: b_mas}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_1
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: MultiplexedSparseDataLookupDF_uncompute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_uncompute_0
              children:
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 3*b_mas + 3*ceiling(log2(R))}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_lelbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_lelbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_1
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                      + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                    + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(lambda + Max(0,
                    -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) -
                    ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                    + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_9
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_2
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_11
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_uncompute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_relbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_relbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_12
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_13
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_14
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_1
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_15
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_1
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '3*b_mas + 24*lambda
                  + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)
                  + 3*ceiling(log2(R)) - 18'}
              - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(lambda + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
                  lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: BinaryToUnaryUncomputation_compute_0.out_0, target: merge_4.in_0}
              - {source: BinaryToUnaryUncomputation_compute_0.out_1, target: had_1.thru_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_0, target: merge_12.in_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_1, target: split_14.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_8.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: had_2.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: had_1.thru_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: had_2.thru_0, target: BinaryToUnaryUncomputation_uncompute_0.in_1}
              - {source: in_0, target: merge_2.in_1}
              - {source: in_1, target: had_0.thru_0}
              - {source: in_2, target: merge_2.in_0}
              - {source: merge_1.out_0, target: BinaryToUnaryUncomputation_compute_0.in_1}
              - {source: merge_10.out_0, target: split_11.in_0}
              - {source: merge_12.out_0, target: split_13.in_0}
              - {source: merge_15.out_0, target: qubits_free_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_9.in_0}
              - {source: qubits_alloc_0.out_0, target: split_0.in_0}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_0.out_0, target: x_0.thru_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_11.out_0, target: BinaryToUnaryUncomputation_uncompute_0.in_0}
              - {source: split_11.out_remainder, target: merge_12.in_remainder}
              - {source: split_13.out_0, target: out_1}
              - {source: split_13.out_1, target: out_0}
              - {source: split_14.out_0, target: x_1.thru_0}
              - {source: split_14.out_remainder, target: merge_15.in_remainder}
              - {source: split_3.out_0, target: BinaryToUnaryUncomputation_compute_0.in_0}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_5.out_0, target: merge_6.in_0}
              - {source: split_5.out_1, target: merge_6.in_1}
              - {source: split_7.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: split_9.out_0, target: merge_10.in_0}
              - {source: split_9.out_1, target: merge_10.in_1}
              - {source: x_0.thru_0, target: merge_1.in_0}
              - {source: x_1.thru_0, target: merge_15.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: in_1, direction: input, size: M_r*(R - 1)}
            - {name: in_2, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: M_r*(R - 1)}
            - {name: out_1, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '3*b_mas + 24*lambda +
                (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + 114*Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 117*ceiling(log2(R)) -
                138'}
            - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 3'}
            - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 3'}
            - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + ceiling(log2(R)),
                M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas +
                Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1)
                + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                - 1) + ceiling(log2(lambda))))'}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections:
            - {source: DataLookupClean_uncompute_0.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: DataLookupClean_uncompute_0.out_1, target: GidneyAdd_uncompute_0.in_2}
            - {source: GidneyAdd_compute_0.out_0, target: DataLookupClean_uncompute_0.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_compute_0.out_2, target: DataLookupClean_uncompute_0.in_2}
            - {source: GidneyAdd_uncompute_0.out_0, target: qubits_free_0.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_0}
            - {source: GidneyAdd_uncompute_0.out_2, target: out_1}
            - {source: in_0, target: DataLookupClean_uncompute_0.in_1}
            - {source: in_1, target: GidneyAdd_compute_0.in_1}
            - {source: in_2, target: GidneyAdd_compute_0.in_2}
            - {source: qubits_alloc_0.out_0, target: GidneyAdd_compute_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: MultiplexedRealUSPDF_uncompute_0
            children:
            - name: CompareLT_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_0
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: relbow_0
              children: []
              type: relbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_1
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Contiguizer_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: lelbow_0
                children: []
                type: lelbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_3
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: lelbow_0
                    children: []
                    type: lelbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 44}
                    - {name: gidney_lelbows, type: additive, value: 1}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 44}
                  - {name: gidney_lelbows, type: additive, value: 1}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: lelbow_0.thru_0}
                  - {source: in_1, target: lelbow_0.thru_1}
                  - {source: in_2, target: lelbow_0.thru_2}
                  - {source: lelbow_0.thru_0, target: out_0}
                  - {source: lelbow_0.thru_1, target: out_1}
                  - {source: lelbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1,
                    ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                    (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                    + 1) - 1) + 2*M_r + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_9
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_10
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_9.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_8.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_8.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_11.in_0}
              - {source: in_0, target: split_0.in_0}
              - {source: lelbow_0.thru_0, target: merge_3.in_0}
              - {source: lelbow_0.thru_1, target: x_0.thru_0}
              - {source: merge_11.out_0, target: out_1}
              - {source: merge_3.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_10.in_0}
              - {source: merge_9.out_0, target: out_0}
              - {source: qubits_alloc_0.out_0, target: split_1.in_0}
              - {source: split_0.out_0, target: lelbow_0.thru_0}
              - {source: split_0.out_remainder, target: merge_3.in_remainder}
              - {source: split_1.out_0, target: lelbow_0.thru_1}
              - {source: split_1.out_remainder, target: merge_5.in_remainder}
              - {source: split_10.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_10.out_remainder, target: merge_11.in_remainder}
              - {source: split_6.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_6.out_remainder, target: merge_9.in_remainder}
              - {source: split_7.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_7.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: x_0.thru_0, target: merge_5.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_0_repetition
              children:
              - name: Repeated_had_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_0.out_0, target: out_0}
              - {source: Repeated_had_0.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_0.in_0}
              - {source: in_1, target: Repeated_had_0.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: z_0
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: ceiling(log2(R))}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R))
                  - 1.5, 0) + 49*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R)) - Min(2,
                  ceiling(log2(R)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R)) -
                  Min(2, ceiling(log2(R))) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) -
                  1.5, 0)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_1_repetition
              children:
              - name: Repeated_had_1
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_1.out_0, target: out_0}
              - {source: Repeated_had_1.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_1.in_0}
              - {source: in_1, target: Repeated_had_1.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: CompareLT_compute_1
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_0
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_0
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_2
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_3
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_0
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_4
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_5
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_6
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_7
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_8
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_9
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_10
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_11
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_1
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_12
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_13
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_1
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_0
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_14
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: z_1
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_15
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_1
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_2
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_16
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_17
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_2
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_18
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_19
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_20
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_21
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_22
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_23
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_24
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_25
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_3
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_26
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_27
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_3
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_1
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_1
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_2_repetition
              children:
              - name: Repeated_had_2
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_2.out_0, target: out_0}
              - {source: Repeated_had_2.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_2.in_0}
              - {source: in_1, target: Repeated_had_2.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: Contiguizer_uncompute_0
              children:
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_2
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: relbow_0
                    children: []
                    type: relbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 1}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 1}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: relbow_0.thru_0}
                  - {source: in_1, target: relbow_0.thru_1}
                  - {source: in_2, target: relbow_0.thru_2}
                  - {source: relbow_0.thru_0, target: out_0}
                  - {source: relbow_0.thru_1, target: out_1}
                  - {source: relbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_8
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: relbow_0
                children: []
                type: relbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_5.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_4.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_4.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_1.in_0}
              - {source: in_0, target: split_2.in_0}
              - {source: in_1, target: split_0.in_0}
              - {source: merge_1.out_0, target: split_3.in_0}
              - {source: merge_10.out_0, target: qubits_free_0.in_0}
              - {source: merge_11.out_0, target: out_0}
              - {source: merge_4.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_8.in_0}
              - {source: relbow_0.thru_0, target: merge_11.in_0}
              - {source: relbow_0.thru_1, target: merge_10.in_0}
              - {source: split_0.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_2.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_2.out_remainder, target: merge_5.in_remainder}
              - {source: split_3.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_3.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_6.out_0, target: x_0.thru_0}
              - {source: split_6.out_remainder, target: merge_10.in_remainder}
              - {source: split_8.out_0, target: relbow_0.thru_0}
              - {source: split_8.out_remainder, target: merge_11.in_remainder}
              - {source: x_0.thru_0, target: relbow_0.thru_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: RotationCatalystStatePrep_uncompute_0
              children: []
              type: qubrick
              ports:
              - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas))'}
              - {name: thru_1, direction: through, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_4
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: relbow_1
              children: []
              type: relbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_1
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + 1'}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_4, direction: input, size: ceiling(log2(R))}
            - {name: in_5, direction: input, size: 1}
            - {name: in_6, direction: input, size: 1}
            - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1'}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_4, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '49*M_r + 130*b_mas + 47*Heaviside(ceiling(log2(R))
                - 1.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R)) - 49*Min(2,
                ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                - 312'}
            - {name: gidney_lelbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: gidney_relbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: measurements, type: additive, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
                ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
                ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
                ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
                ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas +
                Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
                + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
                (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r
                + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
                + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: '6*Min(M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1, ceiling(log2(R)))'}
            - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) - 1.5,
                0)'}
            connections:
            - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
            - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
            - {source: CompareLT_compute_0.out_2, target: split_0.in_0}
            - {source: CompareLT_compute_1.out_0, target: CompareLT_uncompute_1.in_0}
            - {source: CompareLT_compute_1.out_1, target: CompareLT_uncompute_1.in_1}
            - {source: CompareLT_compute_1.out_2, target: split_14.in_0}
            - {source: CompareLT_uncompute_0.out_0, target: Contiguizer_compute_0.in_0}
            - {source: CompareLT_uncompute_0.out_1, target: Repeated_had_0_repetition.in_1}
            - {source: CompareLT_uncompute_1.out_0, target: Contiguizer_uncompute_0.in_0}
            - {source: CompareLT_uncompute_1.out_1, target: Repeated_had_2_repetition.in_1}
            - {source: Contiguizer_compute_0.out_0, target: CompareLT_compute_1.in_0}
            - {source: Contiguizer_compute_0.out_1, target: Repeated_had_0_repetition.in_0}
            - {source: Contiguizer_uncompute_0.out_0, target: out_0}
            - {source: GidneyAdd_compute_0.out_0, target: merge_8.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_uncompute_0.out_0, target: merge_22.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_1}
            - {source: Repeated_had_0_repetition.out_0, target: Repeated_had_1_repetition.in_0}
            - {source: Repeated_had_0_repetition.out_1, target: z_0.thru_0}
            - {source: Repeated_had_1_repetition.out_0, target: Repeated_had_2_repetition.in_0}
            - {source: Repeated_had_1_repetition.out_1, target: CompareLT_compute_1.in_1}
            - {source: Repeated_had_2_repetition.out_0, target: Contiguizer_uncompute_0.in_1}
            - {source: Repeated_had_2_repetition.out_1, target: out_4}
            - {source: RotationCatalystStatePrep_uncompute_0.thru_0, target: out_3}
            - {source: RotationCatalystStatePrep_uncompute_0.thru_1, target: out_2}
            - {source: had_0.thru_0, target: x_0.thru_1}
            - {source: had_1.thru_0, target: s_0.thru_0}
            - {source: had_2.thru_0, target: x_2.thru_1}
            - {source: had_3.thru_0, target: s_1.thru_0}
            - {source: in_0, target: CompareLT_compute_0.in_0}
            - {source: in_1, target: GidneyAdd_compute_0.in_1}
            - {source: in_2, target: merge_2.in_1}
            - {source: in_3, target: merge_2.in_0}
            - {source: in_4, target: CompareLT_compute_0.in_1}
            - {source: in_5, target: z_0.thru_1}
            - {source: in_6, target: relbow_0.thru_1}
            - {source: merge_1.out_0, target: CompareLT_uncompute_0.in_2}
            - {source: merge_10.out_0, target: split_11.in_0}
            - {source: merge_12.out_0, target: split_13.in_0}
            - {source: merge_15.out_0, target: CompareLT_uncompute_1.in_2}
            - {source: merge_16.out_0, target: split_17.in_0}
            - {source: merge_18.out_0, target: split_19.in_0}
            - {source: merge_2.out_0, target: split_3.in_0}
            - {source: merge_20.out_0, target: split_21.in_0}
            - {source: merge_22.out_0, target: split_23.in_0}
            - {source: merge_24.out_0, target: split_25.in_0}
            - {source: merge_26.out_0, target: split_27.in_0}
            - {source: merge_4.out_0, target: split_5.in_0}
            - {source: merge_6.out_0, target: split_7.in_0}
            - {source: merge_8.out_0, target: split_9.in_0}
            - {source: relbow_0.thru_0, target: merge_1.in_0}
            - {source: relbow_0.thru_1, target: qubits_free_0.in_0}
            - {source: relbow_1.thru_0, target: qubits_free_1.in_0}
            - {source: s_0.thru_0, target: z_1.thru_1}
            - {source: s_1.thru_0, target: x_4.thru_0}
            - {source: s_inv_0.thru_0, target: had_0.thru_0}
            - {source: s_inv_1.thru_0, target: had_2.thru_0}
            - {source: split_0.out_0, target: relbow_0.thru_0}
            - {source: split_0.out_remainder, target: merge_1.in_remainder}
            - {source: split_11.out_0, target: x_1.thru_0}
            - {source: split_11.out_remainder, target: merge_12.in_remainder}
            - {source: split_13.out_0, target: merge_16.in_0}
            - {source: split_13.out_1, target: merge_16.in_1}
            - {source: split_14.out_0, target: z_1.thru_0}
            - {source: split_14.out_remainder, target: merge_15.in_remainder}
            - {source: split_17.out_0, target: x_2.thru_0}
            - {source: split_17.out_remainder, target: merge_18.in_remainder}
            - {source: split_19.out_0, target: merge_20.in_0}
            - {source: split_19.out_1, target: merge_20.in_1}
            - {source: split_21.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: split_21.out_remainder, target: merge_22.in_remainder}
            - {source: split_23.out_0, target: merge_24.in_0}
            - {source: split_23.out_1, target: merge_24.in_1}
            - {source: split_25.out_0, target: x_3.thru_0}
            - {source: split_25.out_remainder, target: merge_26.in_remainder}
            - {source: split_27.out_0, target: RotationCatalystStatePrep_uncompute_0.thru_0}
            - {source: split_27.out_1, target: RotationCatalystStatePrep_uncompute_0.thru_1}
            - {source: split_3.out_0, target: x_0.thru_0}
            - {source: split_3.out_remainder, target: merge_4.in_remainder}
            - {source: split_5.out_0, target: merge_6.in_0}
            - {source: split_5.out_1, target: merge_6.in_1}
            - {source: split_7.out_0, target: GidneyAdd_compute_0.in_0}
            - {source: split_7.out_remainder, target: merge_8.in_remainder}
            - {source: split_9.out_0, target: merge_10.in_0}
            - {source: split_9.out_1, target: merge_10.in_1}
            - {source: x_0.thru_0, target: merge_4.in_0}
            - {source: x_0.thru_1, target: x_1.thru_1}
            - {source: x_1.thru_0, target: merge_12.in_0}
            - {source: x_1.thru_1, target: had_1.thru_0}
            - {source: x_2.thru_0, target: merge_18.in_0}
            - {source: x_2.thru_1, target: x_3.thru_1}
            - {source: x_3.thru_0, target: merge_26.in_0}
            - {source: x_3.thru_1, target: had_3.thru_0}
            - {source: x_4.thru_0, target: relbow_1.thru_0}
            - {source: z_0.thru_0, target: Repeated_had_1_repetition.in_1}
            - {source: z_0.thru_1, target: s_inv_0.thru_0}
            - {source: z_1.thru_0, target: merge_15.in_0}
            - {source: z_1.thru_1, target: s_inv_1.thru_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
          - {name: in_10, direction: input, size: 1}
          - {name: in_11, direction: input, size: 1}
          - {name: in_12, direction: input, size: 1}
          - {name: in_2, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: in_3, direction: input, size: M_r*(R - 1)}
          - {name: in_4, direction: input, size: b_mas}
          - {name: in_5, direction: input, size: b_mas}
          - {name: in_6, direction: input, size: 1}
          - {name: in_7, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: in_8, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: in_9, direction: input, size: ceiling(log2(R))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: out_2, direction: output, size: M_r*(R - 1)}
          - {name: out_3, direction: output, size: b_mas}
          - {name: out_4, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: out_5, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_6, direction: output, size: ceiling(log2(R))}
          - {name: out_7, direction: output, size: 1}
          resources:
          - {name: active_volume, type: additive, value: '49*M_r + 250*b_mas + 24*lambda
              + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + 114*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 47*Heaviside(ceiling(log2(R))
              - 1.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 449*ceiling(log2(R)) - 49*Min(2,
              ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - 566'}
          - {name: gidney_lelbows, type: additive, value: 'M_r + 3*b_mas + lambda
              + Max(0, ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 5'}
          - {name: gidney_relbows, type: additive, value: 'M_r + 3*b_mas + lambda
              + Max(0, ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 5'}
          - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
          - {name: ppms, type: additive, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r +
              b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r +
              4*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r + b_mas + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
              - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
              - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)),
              M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
              ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
              - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
              + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              1, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
              1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
              + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3,
              2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
              1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
              + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2,
              ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1)'}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: '6*Min(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 1, ceiling(log2(R)))'}
          - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) - 1.5,
              0) + ceiling(log2(R))'}
          connections:
          - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
          - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
          - {source: CompareLT_compute_0.out_2, target: split_4.in_0}
          - {source: CompareLT_uncompute_0.out_0, target: merge_7.in_0}
          - {source: CompareLT_uncompute_0.out_1, target: had_0.thru_0}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_0, target: out_1}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_1, target: out_3}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_2, target: out_4}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_3, target: out_5}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_4, target: out_6}
          - {source: MultiplexedSparseDataLookupDF_uncompute_0.out_0, target: out_2}
          - {source: MultiplexedSparseDataLookupDF_uncompute_0.out_1, target: MultiplexedRealUSPDF_uncompute_0.in_4}
          - {source: had_0.thru_0, target: qubits_free_1.in_0}
          - {source: in_0, target: out_0}
          - {source: in_1, target: split_0.in_0}
          - {source: in_10, target: MultiplexedRealUSPDF_uncompute_0.in_5}
          - {source: in_11, target: out_7}
          - {source: in_12, target: MultiplexedRealUSPDF_uncompute_0.in_6}
          - {source: in_2, target: MultiplexedRealUSPDF_uncompute_0.in_0}
          - {source: in_3, target: MultiplexedSparseDataLookupDF_uncompute_0.in_1}
          - {source: in_4, target: MultiplexedRealUSPDF_uncompute_0.in_1}
          - {source: in_5, target: CompareLT_compute_0.in_1}
          - {source: in_6, target: swap_0.thru_1}
          - {source: in_7, target: MultiplexedRealUSPDF_uncompute_0.in_2}
          - {source: in_8, target: MultiplexedRealUSPDF_uncompute_0.in_3}
          - {source: in_9, target: swap_0.thru_2}
          - {source: merge_1.out_0, target: split_2.in_0}
          - {source: merge_5.out_0, target: CompareLT_uncompute_0.in_2}
          - {source: merge_7.out_0, target: MultiplexedSparseDataLookupDF_uncompute_0.in_0}
          - {source: split_0.out_0, target: swap_0.thru_0}
          - {source: split_0.out_remainder, target: merge_1.in_remainder}
          - {source: split_2.out_0, target: CompareLT_compute_0.in_0}
          - {source: split_2.out_remainder, target: merge_7.in_remainder}
          - {source: split_4.out_0, target: x_0.thru_1}
          - {source: split_4.out_remainder, target: merge_5.in_remainder}
          - {source: swap_0.thru_0, target: merge_1.in_0}
          - {source: swap_0.thru_1, target: x_0.thru_0}
          - {source: swap_0.thru_2, target: MultiplexedSparseDataLookupDF_uncompute_0.in_2}
          - {source: x_0.thru_0, target: qubits_free_0.in_0}
          - {source: x_0.thru_1, target: merge_5.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_1
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 3}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: in_2, direction: input, size: M_r*(R - 1)}
        - {name: in_3, direction: input, size: b_mas}
        - {name: in_4, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
        - {name: in_5, direction: input, size: ceiling(log2(R))}
        - {name: in_6, direction: input, size: N_spatial}
        - {name: in_7, direction: input, size: N_spatial}
        - {name: in_8, direction: input, size: 1}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: out_10, direction: output, size: 1}
        - {name: out_2, direction: output, size: M_r*(R - 1)}
        - {name: out_3, direction: output, size: b_mas}
        - {name: out_4, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
        - {name: out_5, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
            b_mas))'}
        - {name: out_6, direction: output, size: 'Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
        - {name: out_7, direction: output, size: ceiling(log2(R))}
        - {name: out_8, direction: output, size: N_spatial}
        - {name: out_9, direction: output, size: N_spatial}
        resources:
        - {name: active_volume, type: additive, value: '98*M_r + 110*N_spatial + 55*b_givens*(-1
            + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
            - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1) + 3*b_givens*(N_spatial
            - 1) + 497*b_mas + 48*lambda + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
            - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
            + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0,
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
            0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
            + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 2.5, 0) - 48) + (3*b_mas + 3*ceiling(log2(R)))*(lambda
            - 1) + (2*ceiling(0.75*lambda) + 98)*Max(0, ceiling(M_r*R/lambda) - 1)
            + (ceiling(0.75*b_givens*(N_spatial - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial
            - 1)) + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + (ceiling(0.75*b_mas +
            (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1) + 0.75*ceiling(log2(R)))
            + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + 3*Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + 342*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0,
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
            b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens,
            b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 2.5, 0)) + 5*Heaviside(1.5 - Max(b_as, b_givens, b_mas),
            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
            0) + 94*Heaviside(ceiling(log2(R)) - 1.5, 0) - 98*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1009*ceiling(log2(R))
            - 98*Min(2, ceiling(log2(R))) + 462*Min(M_r - Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - 1242'}
        - {name: gidney_lelbows, type: additive, value: '2*M_r + 6*b_mas + 2*lambda
            + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 4*Max(0, ceiling(M_r*R/lambda)
            - 1) + 6*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) - 2*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 12*ceiling(log2(R))
            - 2*Min(2, ceiling(log2(R))) - 12'}
        - {name: gidney_relbows, type: additive, value: '2*M_r + 6*b_mas + 2*lambda
            + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 4*Max(0, ceiling(M_r*R/lambda)
            - 1) + 6*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) - 2*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 12*ceiling(log2(R))
            - 2*Min(2, ceiling(log2(R))) - 12'}
        - {name: measurements, type: additive, value: b_givens*(N_spatial - 1)*(lambda
            - 1) + b_givens*(N_spatial - 1) + b_mas + (b_mas + ceiling(log2(R)))*(lambda
            - 1) + ceiling(log2(R))}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 4*N_spatial - 4}
        - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r + 2*N_spatial
            + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 2, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, 2*N_spatial + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r + b_mas + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
            - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)),
            M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
            Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
            - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
            + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
            3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
            + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) +
            Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas)
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1), 2*b_mas + Max(M_r*(R
            - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
            Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r + 2*N_spatial + b_mas
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0,
            -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R -
            1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
            - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 3,
            M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
            + 3, M_r*(R - 1) + M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1,
            N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)), lambda
            + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
            - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, N_spatial
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
            + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) +
            Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) -
            ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
            - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
            - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1,
            N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, Max(N_spatial
            + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
            - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1,
            b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial))
            + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
            - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens
            + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
            N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial),
            Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
            + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1) + ceiling(log2(R)))
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2) + ceiling(log2(R)) + 2,
            2*N_spatial + Max(M_r*(R - 1) + M_r + b_mas + Max(b_as, b_givens, b_mas)
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R
            - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r + b_mas + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
            - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)),
            M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
            b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
            - ceiling(log2(lambda)), b_mas + (b_mas + ceiling(log2(R)))*(lambda -
            1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 3*ceiling(log2(R))
            - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
            + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 1, M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, M_r
            + b_mas + Max(Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, 2*M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
            + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
            3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
            + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) +
            Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas)
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1))'}
        - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) -
            Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + Max(0, Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
            b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2.5, 0))'}
        - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(2.5 - Max(b_as, b_givens,
            b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 2.5, 0) + 12*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
        - {name: toffs, type: additive, value: '2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial
            - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
            - 1) + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
            + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + (2*N_spatial - 2)*(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas)) + 2*Heaviside(ceiling(log2(R)) - 1.5, 0) + 2*ceiling(log2(R))'}
        connections:
        - {source: MultiplexedAliasSamplingDF_compute_0.out_0, target: OneElectronTermSelect_compute_0.in_0}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_1, target: MultiplexedAliasSamplingDF_uncompute_0.in_1}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_10, target: MultiplexedAliasSamplingDF_uncompute_0.in_10}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_11, target: OneElectronTermSelect_compute_0.in_9}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_12, target: OneElectronTermSelect_compute_0.in_10}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_2, target: OneElectronTermSelect_compute_0.in_1}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_3, target: OneElectronTermSelect_compute_0.in_2}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_4, target: OneElectronTermSelect_compute_0.in_3}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_5, target: MultiplexedAliasSamplingDF_uncompute_0.in_5}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_6, target: MultiplexedAliasSamplingDF_uncompute_0.in_6}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_7, target: OneElectronTermSelect_compute_0.in_4}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_8, target: OneElectronTermSelect_compute_0.in_5}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_9, target: OneElectronTermSelect_compute_0.in_6}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_0, target: out_0}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_1, target: out_1}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_2, target: out_2}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_3, target: out_3}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_4, target: out_4}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_5, target: out_5}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_6, target: out_7}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_7, target: had_1.thru_0}
        - {source: OneElectronTermSelect_compute_0.out_0, target: MultiplexedAliasSamplingDF_uncompute_0.in_0}
        - {source: OneElectronTermSelect_compute_0.out_1, target: MultiplexedAliasSamplingDF_uncompute_0.in_2}
        - {source: OneElectronTermSelect_compute_0.out_10, target: MultiplexedAliasSamplingDF_uncompute_0.in_11}
        - {source: OneElectronTermSelect_compute_0.out_11, target: MultiplexedAliasSamplingDF_uncompute_0.in_12}
        - {source: OneElectronTermSelect_compute_0.out_2, target: MultiplexedAliasSamplingDF_uncompute_0.in_3}
        - {source: OneElectronTermSelect_compute_0.out_3, target: MultiplexedAliasSamplingDF_uncompute_0.in_4}
        - {source: OneElectronTermSelect_compute_0.out_4, target: MultiplexedAliasSamplingDF_uncompute_0.in_7}
        - {source: OneElectronTermSelect_compute_0.out_5, target: out_6}
        - {source: OneElectronTermSelect_compute_0.out_6, target: MultiplexedAliasSamplingDF_uncompute_0.in_8}
        - {source: OneElectronTermSelect_compute_0.out_7, target: MultiplexedAliasSamplingDF_uncompute_0.in_9}
        - {source: OneElectronTermSelect_compute_0.out_8, target: out_8}
        - {source: OneElectronTermSelect_compute_0.out_9, target: out_9}
        - {source: had_0.thru_0, target: MultiplexedAliasSamplingDF_compute_0.in_6}
        - {source: had_1.thru_0, target: out_10}
        - {source: in_0, target: MultiplexedAliasSamplingDF_compute_0.in_0}
        - {source: in_1, target: MultiplexedAliasSamplingDF_compute_0.in_1}
        - {source: in_2, target: MultiplexedAliasSamplingDF_compute_0.in_2}
        - {source: in_3, target: MultiplexedAliasSamplingDF_compute_0.in_3}
        - {source: in_4, target: MultiplexedAliasSamplingDF_compute_0.in_4}
        - {source: in_5, target: MultiplexedAliasSamplingDF_compute_0.in_5}
        - {source: in_6, target: OneElectronTermSelect_compute_0.in_7}
        - {source: in_7, target: OneElectronTermSelect_compute_0.in_8}
        - {source: in_8, target: had_0.thru_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_1
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: in_1, direction: input, size: M_r*(R - 1)}
        - {name: in_2, direction: input, size: b_mas}
        - {name: in_remainder, direction: input, size: '-M_r*(R - 1) - M_r - b_mas
            + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)) - 1'}
        - {name: out_0, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_2
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        - {name: out_0, direction: output, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: out_remainder, direction: output, size: '-Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))'}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_3
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R))}
        - {name: in_1, direction: input, size: 1}
        - {name: out_0, direction: output, size: ceiling(log2(R)) + 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(R)) + 1}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: z_0
        children: []
        type: z
        ports:
        - {name: thru_0, direction: through, size: ceiling(log2(R)) + 1}
        - {name: thru_1, direction: through, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        resources:
        - {name: active_volume, type: additive, value: '47*Heaviside(Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) -
            1.5, 0) + 49*(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)))) + 49*ceiling(log2(R)) - 49*Min(2, Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)))'}
        - {name: gidney_lelbows, type: additive, value: 'Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) -
            Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
            2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)))'}
        - {name: gidney_relbows, type: additive, value: 'Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) -
            Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
            2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)))'}
        - {name: local_ancillae, type: qubits, value: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - Min(2,
            Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)))'}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: '2*(Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) + 2*ceiling(log2(R))
            - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) + 1'}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 'Heaviside(Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) -
            1.5, 0)'}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_4
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R)) + 1}
        - {name: out_0, direction: output, size: ceiling(log2(R))}
        - {name: out_1, direction: output, size: 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(R)) + 1}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_5
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: in_remainder, direction: input, size: '-Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))'}
        - {name: out_0, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_6
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        - {name: out_0, direction: output, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: out_2, direction: output, size: M_r*(R - 1)}
        - {name: out_3, direction: output, size: b_mas}
        - {name: out_remainder, direction: output, size: -M_r*(R - 1) - M_r - b_mas
            + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
            - 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: OneElectronTermBlockEncoding_compute_1
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: 1}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: lelbow_0
          children: []
          type: lelbow
          ports:
          - {name: thru_0, direction: through, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
          - {name: thru_1, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: '44*Heaviside(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - 1.5, 0) + 49*(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 49*Min(2, Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: gidney_lelbows, type: additive, value: 'Heaviside(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - 1.5, 0) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: gidney_relbows, type: additive, value: 'Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: local_ancillae, type: qubits, value: 'Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: '2*(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
              - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1)))) + 1'}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 3}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: MultiplexedAliasSamplingDF_compute_0
          children:
          - name: MultiplexedRealUSPDF_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: lelbow_0
              children: []
              type: lelbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_0
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: RotationCatalystStatePrep_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))'}
                resources:
                - {name: active_volume, type: additive, value: '3*Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_0
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_s_inv_0_repetition
                children:
                - name: Repeated_s_inv_0
                  children:
                  - name: s_inv_0
                    children: []
                    type: s_inv
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: s_inv_0.thru_0}
                  - {source: s_inv_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '5*Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1.5, 0)'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_s_inv_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_s_inv_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 1.5, 0)
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_t_inv_0_repetition
                children:
                - name: Repeated_t_inv_0
                  children:
                  - name: t_inv_0
                    children: []
                    type: t_inv
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 28.5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 1}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 28.5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 1}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: t_inv_0.thru_0}
                  - {source: t_inv_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '28.5*Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 2.5, 0)'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 'Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 2.5, 0)'}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_t_inv_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_t_inv_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 2.5, 0)
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_9
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_phase_0_repetition
                children:
                - name: Repeated_phase_0
                  children:
                  - name: phase_0
                    children: []
                    type: phase
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 1397}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 1}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 1397}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 1}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: phase_0.thru_0}
                  - {source: phase_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '1397*Max(0, Max(0,
                    b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_phase_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_phase_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_11
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              resources:
              - {name: active_volume, type: additive, value: '1397*Max(0, Max(0, b_mas
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                  0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0)'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas))'}
              - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                  0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0))'}
              - {name: t_gates, type: additive, value: 'Heaviside(-Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_phase_0_repetition.out_0, target: merge_10.in_0}
              - {source: Repeated_s_inv_0_repetition.out_0, target: merge_2.in_0}
              - {source: Repeated_t_inv_0_repetition.out_0, target: merge_6.in_0}
              - {source: had_0.thru_0, target: merge_0.in_0}
              - {source: in_0, target: merge_0.in_1}
              - {source: in_1, target: merge_0.in_2}
              - {source: in_2, target: merge_0.in_3}
              - {source: merge_0.out_0, target: split_1.in_0}
              - {source: merge_10.out_0, target: split_11.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_9.in_0}
              - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
              - {source: split_1.out_0, target: Repeated_s_inv_0_repetition.in_0}
              - {source: split_1.out_remainder, target: merge_2.in_remainder}
              - {source: split_11.out_0, target: out_3}
              - {source: split_11.out_1, target: out_1}
              - {source: split_11.out_2, target: out_0}
              - {source: split_11.out_3, target: out_2}
              - {source: split_3.out_0, target: merge_4.in_0}
              - {source: split_3.out_1, target: merge_4.in_1}
              - {source: split_3.out_2, target: merge_4.in_2}
              - {source: split_3.out_3, target: merge_4.in_3}
              - {source: split_5.out_0, target: Repeated_t_inv_0_repetition.in_0}
              - {source: split_5.out_remainder, target: merge_6.in_remainder}
              - {source: split_7.out_0, target: merge_8.in_0}
              - {source: split_7.out_1, target: merge_8.in_1}
              - {source: split_7.out_2, target: merge_8.in_2}
              - {source: split_7.out_3, target: merge_8.in_3}
              - {source: split_9.out_0, target: Repeated_phase_0_repetition.in_0}
              - {source: split_9.out_remainder, target: merge_10.in_remainder}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Contiguizer_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: lelbow_0
                children: []
                type: lelbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_3
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: lelbow_0
                    children: []
                    type: lelbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 44}
                    - {name: gidney_lelbows, type: additive, value: 1}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 44}
                  - {name: gidney_lelbows, type: additive, value: 1}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: lelbow_0.thru_0}
                  - {source: in_1, target: lelbow_0.thru_1}
                  - {source: in_2, target: lelbow_0.thru_2}
                  - {source: lelbow_0.thru_0, target: out_0}
                  - {source: lelbow_0.thru_1, target: out_1}
                  - {source: lelbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1,
                    ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                    (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                    + 1) - 1) + 2*M_r + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_9
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_10
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_9.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_8.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_8.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_11.in_0}
              - {source: in_0, target: split_0.in_0}
              - {source: lelbow_0.thru_0, target: merge_3.in_0}
              - {source: lelbow_0.thru_1, target: x_0.thru_0}
              - {source: merge_11.out_0, target: out_1}
              - {source: merge_3.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_10.in_0}
              - {source: merge_9.out_0, target: out_0}
              - {source: qubits_alloc_0.out_0, target: split_1.in_0}
              - {source: split_0.out_0, target: lelbow_0.thru_0}
              - {source: split_0.out_remainder, target: merge_3.in_remainder}
              - {source: split_1.out_0, target: lelbow_0.thru_1}
              - {source: split_1.out_remainder, target: merge_5.in_remainder}
              - {source: split_10.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_10.out_remainder, target: merge_11.in_remainder}
              - {source: split_6.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_6.out_remainder, target: merge_9.in_remainder}
              - {source: split_7.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_7.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: x_0.thru_0, target: merge_5.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_0_repetition
              children:
              - name: Repeated_had_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_0.out_0, target: out_0}
              - {source: Repeated_had_0.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_0.in_0}
              - {source: in_1, target: Repeated_had_0.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: CompareLT_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_0
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_0
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_0
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_1
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_1
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_2
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_3
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_4
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_5
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_6
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_7
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_8
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_9
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_2
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_10
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_11
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_1
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_0
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_12
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: z_0
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_13
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_1
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_2
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_14
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_15
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_3
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_16
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_17
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_18
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_19
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_20
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_21
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_22
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_23
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_4
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_24
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_25
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_3
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_1
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_1_repetition
              children:
              - name: Repeated_had_1
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_1.out_0, target: out_0}
              - {source: Repeated_had_1.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_1.in_0}
              - {source: in_1, target: Repeated_had_1.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: z_1
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: ceiling(log2(R))}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R))
                  - 1.5, 0) + 49*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R)) - Min(2,
                  ceiling(log2(R)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R)) -
                  Min(2, ceiling(log2(R))) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) -
                  1.5, 0)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_2_repetition
              children:
              - name: Repeated_had_2
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_2.out_0, target: out_0}
              - {source: Repeated_had_2.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_2.in_0}
              - {source: in_1, target: Repeated_had_2.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: Contiguizer_uncompute_0
              children:
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_2
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: relbow_0
                    children: []
                    type: relbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 1}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 1}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: relbow_0.thru_0}
                  - {source: in_1, target: relbow_0.thru_1}
                  - {source: in_2, target: relbow_0.thru_2}
                  - {source: relbow_0.thru_0, target: out_0}
                  - {source: relbow_0.thru_1, target: out_1}
                  - {source: relbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_8
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: relbow_0
                children: []
                type: relbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_5.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_4.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_4.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_1.in_0}
              - {source: in_0, target: split_2.in_0}
              - {source: in_1, target: split_0.in_0}
              - {source: merge_1.out_0, target: split_3.in_0}
              - {source: merge_10.out_0, target: qubits_free_0.in_0}
              - {source: merge_11.out_0, target: out_0}
              - {source: merge_4.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_8.in_0}
              - {source: relbow_0.thru_0, target: merge_11.in_0}
              - {source: relbow_0.thru_1, target: merge_10.in_0}
              - {source: split_0.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_2.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_2.out_remainder, target: merge_5.in_remainder}
              - {source: split_3.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_3.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_6.out_0, target: x_0.thru_0}
              - {source: split_6.out_remainder, target: merge_10.in_remainder}
              - {source: split_8.out_0, target: relbow_0.thru_0}
              - {source: split_8.out_remainder, target: merge_11.in_remainder}
              - {source: x_0.thru_0, target: relbow_0.thru_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_alloc_1
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_compute_1
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_26
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: lelbow_1
              children: []
              type: lelbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_27
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_1
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + 1'}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: in_5, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1'}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_4, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: out_6, direction: output, size: ceiling(log2(R))}
            - {name: out_7, direction: output, size: 1}
            - {name: out_8, direction: output, size: 1}
            resources:
            - {name: active_volume, type: additive, value: '49*M_r + 130*b_mas + 1397*Max(0,
                Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 47*Heaviside(ceiling(log2(R)) - 1.5, 0) + 5*Heaviside(-Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R))
                - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1, ceiling(log2(R))) - 312'}
            - {name: gidney_lelbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: gidney_relbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: measurements, type: additive, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
                + 1, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
                + 3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
                + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) -
                2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, M_r + b_mas + Max(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
                + 2, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
                b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) + 2, M_r
                + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
            - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 2.5, 0))'}
            - {name: t_gates, type: additive, value: 'Heaviside(-Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2.5, 0) + 6*Min(M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + 1, ceiling(log2(R)))'}
            - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) - 1.5,
                0)'}
            connections:
            - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
            - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
            - {source: CompareLT_compute_0.out_2, target: split_12.in_0}
            - {source: CompareLT_compute_1.out_0, target: CompareLT_uncompute_1.in_0}
            - {source: CompareLT_compute_1.out_1, target: CompareLT_uncompute_1.in_1}
            - {source: CompareLT_compute_1.out_2, target: split_26.in_0}
            - {source: CompareLT_uncompute_0.out_0, target: Contiguizer_uncompute_0.in_0}
            - {source: CompareLT_uncompute_0.out_1, target: Repeated_had_1_repetition.in_1}
            - {source: CompareLT_uncompute_1.out_0, target: out_0}
            - {source: CompareLT_uncompute_1.out_1, target: out_6}
            - {source: Contiguizer_compute_0.out_0, target: CompareLT_compute_0.in_0}
            - {source: Contiguizer_compute_0.out_1, target: Repeated_had_0_repetition.in_0}
            - {source: Contiguizer_uncompute_0.out_0, target: CompareLT_compute_1.in_0}
            - {source: GidneyAdd_compute_0.out_0, target: merge_6.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_uncompute_0.out_0, target: merge_20.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_1}
            - {source: Repeated_had_0_repetition.out_0, target: Repeated_had_1_repetition.in_0}
            - {source: Repeated_had_0_repetition.out_1, target: CompareLT_compute_0.in_1}
            - {source: Repeated_had_1_repetition.out_0, target: Repeated_had_2_repetition.in_0}
            - {source: Repeated_had_1_repetition.out_1, target: z_1.thru_0}
            - {source: Repeated_had_2_repetition.out_0, target: Contiguizer_uncompute_0.in_1}
            - {source: Repeated_had_2_repetition.out_1, target: CompareLT_compute_1.in_1}
            - {source: RotationCatalystStatePrep_compute_0.out_0, target: merge_0.in_2}
            - {source: RotationCatalystStatePrep_compute_0.out_1, target: merge_0.in_1}
            - {source: RotationCatalystStatePrep_compute_0.out_2, target: merge_0.in_3}
            - {source: RotationCatalystStatePrep_compute_0.out_3, target: merge_0.in_0}
            - {source: had_0.thru_0, target: x_1.thru_1}
            - {source: had_1.thru_0, target: s_0.thru_0}
            - {source: had_2.thru_0, target: x_3.thru_1}
            - {source: had_3.thru_0, target: s_1.thru_0}
            - {source: in_0, target: Contiguizer_compute_0.in_0}
            - {source: in_1, target: GidneyAdd_compute_0.in_1}
            - {source: in_2, target: RotationCatalystStatePrep_compute_0.in_2}
            - {source: in_3, target: RotationCatalystStatePrep_compute_0.in_1}
            - {source: in_4, target: RotationCatalystStatePrep_compute_0.in_0}
            - {source: in_5, target: Repeated_had_0_repetition.in_1}
            - {source: lelbow_0.thru_0, target: x_0.thru_0}
            - {source: lelbow_1.thru_0, target: merge_27.in_0}
            - {source: lelbow_1.thru_1, target: out_8}
            - {source: merge_0.out_0, target: split_1.in_0}
            - {source: merge_10.out_0, target: split_11.in_0}
            - {source: merge_13.out_0, target: CompareLT_uncompute_0.in_2}
            - {source: merge_14.out_0, target: split_15.in_0}
            - {source: merge_16.out_0, target: split_17.in_0}
            - {source: merge_18.out_0, target: split_19.in_0}
            - {source: merge_2.out_0, target: split_3.in_0}
            - {source: merge_20.out_0, target: split_21.in_0}
            - {source: merge_22.out_0, target: split_23.in_0}
            - {source: merge_24.out_0, target: split_25.in_0}
            - {source: merge_27.out_0, target: CompareLT_uncompute_1.in_2}
            - {source: merge_4.out_0, target: split_5.in_0}
            - {source: merge_6.out_0, target: split_7.in_0}
            - {source: merge_8.out_0, target: split_9.in_0}
            - {source: qubits_alloc_0.out_0, target: lelbow_0.thru_0}
            - {source: qubits_alloc_1.out_0, target: lelbow_1.thru_1}
            - {source: s_0.thru_0, target: z_0.thru_1}
            - {source: s_1.thru_0, target: z_1.thru_1}
            - {source: s_inv_0.thru_0, target: had_0.thru_0}
            - {source: s_inv_1.thru_0, target: had_2.thru_0}
            - {source: split_1.out_0, target: x_1.thru_0}
            - {source: split_1.out_remainder, target: merge_2.in_remainder}
            - {source: split_11.out_0, target: merge_14.in_0}
            - {source: split_11.out_1, target: merge_14.in_1}
            - {source: split_11.out_2, target: merge_14.in_2}
            - {source: split_11.out_3, target: merge_14.in_3}
            - {source: split_12.out_0, target: z_0.thru_0}
            - {source: split_12.out_remainder, target: merge_13.in_remainder}
            - {source: split_15.out_0, target: x_3.thru_0}
            - {source: split_15.out_remainder, target: merge_16.in_remainder}
            - {source: split_17.out_0, target: merge_18.in_0}
            - {source: split_17.out_1, target: merge_18.in_1}
            - {source: split_17.out_2, target: merge_18.in_2}
            - {source: split_17.out_3, target: merge_18.in_3}
            - {source: split_19.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: split_19.out_remainder, target: merge_20.in_remainder}
            - {source: split_21.out_0, target: merge_22.in_0}
            - {source: split_21.out_1, target: merge_22.in_1}
            - {source: split_21.out_2, target: merge_22.in_2}
            - {source: split_21.out_3, target: merge_22.in_3}
            - {source: split_23.out_0, target: x_4.thru_0}
            - {source: split_23.out_remainder, target: merge_24.in_remainder}
            - {source: split_25.out_0, target: out_4}
            - {source: split_25.out_1, target: out_5}
            - {source: split_25.out_2, target: out_3}
            - {source: split_25.out_3, target: out_2}
            - {source: split_26.out_0, target: lelbow_1.thru_0}
            - {source: split_26.out_remainder, target: merge_27.in_remainder}
            - {source: split_3.out_0, target: merge_4.in_0}
            - {source: split_3.out_1, target: merge_4.in_1}
            - {source: split_3.out_2, target: merge_4.in_2}
            - {source: split_3.out_3, target: merge_4.in_3}
            - {source: split_5.out_0, target: GidneyAdd_compute_0.in_0}
            - {source: split_5.out_remainder, target: merge_6.in_remainder}
            - {source: split_7.out_0, target: merge_8.in_0}
            - {source: split_7.out_1, target: merge_8.in_1}
            - {source: split_7.out_2, target: merge_8.in_2}
            - {source: split_7.out_3, target: merge_8.in_3}
            - {source: split_9.out_0, target: x_2.thru_0}
            - {source: split_9.out_remainder, target: merge_10.in_remainder}
            - {source: x_0.thru_0, target: s_inv_0.thru_0}
            - {source: x_1.thru_0, target: merge_2.in_0}
            - {source: x_1.thru_1, target: x_2.thru_1}
            - {source: x_2.thru_0, target: merge_10.in_0}
            - {source: x_2.thru_1, target: had_1.thru_0}
            - {source: x_3.thru_0, target: merge_16.in_0}
            - {source: x_3.thru_1, target: x_4.thru_1}
            - {source: x_4.thru_0, target: merge_24.in_0}
            - {source: x_4.thru_1, target: had_3.thru_0}
            - {source: z_0.thru_0, target: merge_13.in_0}
            - {source: z_0.thru_1, target: s_inv_1.thru_0}
            - {source: z_1.thru_0, target: Repeated_had_2_repetition.in_1}
            - {source: z_1.thru_1, target: out_7}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: MultiplexedSparseDataLookupDF_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_1
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_0
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*b_mas
                      + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1) + 0.75*ceiling(log2(R)))
                      + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
                - {name: in_2, direction: input, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
                - {name: out_2, direction: output, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*b_mas
                    + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1) + 0.75*ceiling(log2(R)))
                    + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(b_mas + (b_mas
                    + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
                    b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                    - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: SwapUp_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: (-1 + (b_mas + (b_mas
                      + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
                      + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                      - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas
                      + ceiling(log2(R)))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
                - {name: in_2, direction: input, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
                - {name: out_2, direction: output, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: (-1 + (b_mas + (b_mas
                    + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas +
                    ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))}
                - {name: qubit_highwater, type: qubits, value: b_mas + (b_mas + ceiling(log2(R)))*(lambda
                    - 1) + ceiling(log2(R)) + ceiling(log2(lambda))}
                - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                    - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas +
                    ceiling(log2(R)))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: (3*b_mas + 3*ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: (b_mas + ceiling(log2(R)))*(lambda
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '(-1 + (b_mas + (b_mas
                  + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas
                  + 55*ceiling(log2(R))) + (3*b_mas + 3*ceiling(log2(R)))*(lambda
                  - 1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
                  - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
                  - 1)}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                  Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
                  b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                  - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                  - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))}
              connections:
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_2.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: SwapUp_compute_0.in_1}
              - {source: GoogleSelectOptimized_compute_0.out_2, target: SwapUp_compute_0.in_2}
              - {source: SwapUp_compute_0.out_0, target: merge_6.in_0}
              - {source: SwapUp_compute_0.out_1, target: out_1}
              - {source: SwapUp_compute_0.out_2, target: had_0.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: in_0, target: merge_0.in_1}
              - {source: in_1, target: merge_0.in_0}
              - {source: merge_0.out_0, target: split_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: qubits_alloc_0.out_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: qubits_alloc_1.out_0, target: GoogleSelectOptimized_compute_0.in_2}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_1.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_1.out_remainder, target: merge_2.in_remainder}
              - {source: split_3.out_0, target: merge_4.in_0}
              - {source: split_3.out_1, target: merge_4.in_1}
              - {source: split_5.out_0, target: SwapUp_compute_0.in_0}
              - {source: split_5.out_remainder, target: merge_6.in_remainder}
              - {source: split_7.out_0, target: out_2}
              - {source: split_7.out_1, target: out_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: M_r*(R - 1)}
            - {name: in_1, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            - {name: out_1, direction: output, size: M_r*(R - 1)}
            - {name: out_2, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '(-1 + (b_mas + (b_mas
                + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas
                + 55*ceiling(log2(R))) + (3*b_mas + 3*ceiling(log2(R)))*(lambda -
                1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
                - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda) -
                1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 114*ceiling(log2(R))
                - 120'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 2'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 2'}
            - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
                - 1)}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + ceiling(log2(R)),
                M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas +
                Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1)
                + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda -
                1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
                b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                - 1) + ceiling(log2(lambda))))'}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
                - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))}
            connections:
            - {source: DataLookupClean_compute_0.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: DataLookupClean_compute_0.out_1, target: out_0}
            - {source: DataLookupClean_compute_0.out_2, target: GidneyAdd_uncompute_0.in_2}
            - {source: GidneyAdd_compute_0.out_0, target: DataLookupClean_compute_0.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_compute_0.out_2, target: DataLookupClean_compute_0.in_1}
            - {source: GidneyAdd_uncompute_0.out_0, target: qubits_free_0.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_1}
            - {source: GidneyAdd_uncompute_0.out_2, target: out_2}
            - {source: in_0, target: GidneyAdd_compute_0.in_1}
            - {source: in_1, target: GidneyAdd_compute_0.in_2}
            - {source: qubits_alloc_0.out_0, target: GidneyAdd_compute_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: had_0
            children: []
            type: had
            ports:
            - {name: thru_0, direction: through, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 3*b_mas}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: b_mas}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_alloc_1
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_0
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_remainder, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_lelbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: qubits_alloc_0.out_0, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_2
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: 1}
            - {name: out_remainder, direction: output, size: b_mas - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: x_0
            children: []
            type: x
            ports:
            - {name: thru_0, direction: through, size: 1}
            - {name: thru_1, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 4}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_3
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: 1}
            - {name: in_remainder, direction: input, size: b_mas - 1}
            - {name: out_0, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_uncompute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_relbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_relbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: qubits_free_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_5
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_remainder, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_6
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: ceiling(log2(R))}
            - {name: out_remainder, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: swap_0
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: ceiling(log2(R))}
            - {name: thru_1, direction: through, size: 1}
            - {name: thru_2, direction: through, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: 55*ceiling(log2(R))}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*ceiling(log2(R)) + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_7
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: ceiling(log2(R))}
            - {name: in_remainder, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: in_2, direction: input, size: M_r*(R - 1)}
          - {name: in_3, direction: input, size: b_mas}
          - {name: in_4, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: in_5, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: in_6, direction: input, size: 'Max(0, b_givens - Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: in_7, direction: input, size: ceiling(log2(R))}
          - {name: in_8, direction: input, size: 1}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: b_mas + ceiling(log2(R))}
          - {name: out_10, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: out_11, direction: output, size: ceiling(log2(R))}
          - {name: out_12, direction: output, size: 1}
          - {name: out_13, direction: output, size: 1}
          - {name: out_14, direction: output, size: 1}
          - {name: out_2, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: out_3, direction: output, size: M_r*(R - 1)}
          - {name: out_4, direction: output, size: b_mas}
          - {name: out_5, direction: output, size: b_mas}
          - {name: out_6, direction: output, size: 1}
          - {name: out_7, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: out_8, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_9, direction: output, size: 'Max(0, b_mas - Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas))'}
          resources:
          - {name: active_volume, type: additive, value: '49*M_r + 247*b_mas + (-1
              + (b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
              + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (3*b_mas + 3*ceiling(log2(R)))*(lambda
              - 1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
              - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)
              + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0,
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
              1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
              + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + 47*Heaviside(ceiling(log2(R))
              - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)
              + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 49*Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 446*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) - 548'}
          - {name: gidney_lelbows, type: additive, value: 'M_r + 3*b_mas + Max(0,
              ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 4'}
          - {name: gidney_relbows, type: additive, value: 'M_r + 3*b_mas + Max(0,
              ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 4'}
          - {name: measurements, type: additive, value: (b_mas + ceiling(log2(R)))*(lambda
              - 1)}
          - {name: ppms, type: additive, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r +
              b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r +
              3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) +
              5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas)
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1))
              + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)),
              M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)),
              M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
              ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1)
              + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
              Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)),
              b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda))
              - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
              + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 1, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas
              - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 3, M_r + b_mas + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
              Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              2, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas)
              + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1)'}
          - {name: rotations, type: additive, value: 'Max(0, Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)
              - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
          - {name: t_gates, type: additive, value: 'Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
              2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - 2.5, 0) + 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
          - {name: toffs, type: additive, value: '(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
              - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
              + Heaviside(ceiling(log2(R)) - 1.5, 0) + ceiling(log2(R))'}
          connections:
          - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
          - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
          - {source: CompareLT_compute_0.out_2, target: split_2.in_0}
          - {source: CompareLT_uncompute_0.out_0, target: merge_5.in_0}
          - {source: CompareLT_uncompute_0.out_1, target: out_5}
          - {source: MultiplexedRealUSPDF_compute_0.out_0, target: out_2}
          - {source: MultiplexedRealUSPDF_compute_0.out_1, target: out_4}
          - {source: MultiplexedRealUSPDF_compute_0.out_2, target: out_7}
          - {source: MultiplexedRealUSPDF_compute_0.out_3, target: out_8}
          - {source: MultiplexedRealUSPDF_compute_0.out_4, target: out_9}
          - {source: MultiplexedRealUSPDF_compute_0.out_5, target: out_10}
          - {source: MultiplexedRealUSPDF_compute_0.out_6, target: MultiplexedSparseDataLookupDF_compute_0.in_1}
          - {source: MultiplexedRealUSPDF_compute_0.out_7, target: out_12}
          - {source: MultiplexedRealUSPDF_compute_0.out_8, target: out_14}
          - {source: MultiplexedSparseDataLookupDF_compute_0.out_0, target: split_0.in_0}
          - {source: MultiplexedSparseDataLookupDF_compute_0.out_1, target: out_3}
          - {source: MultiplexedSparseDataLookupDF_compute_0.out_2, target: swap_0.thru_2}
          - {source: had_0.thru_0, target: CompareLT_compute_0.in_1}
          - {source: in_0, target: out_0}
          - {source: in_1, target: MultiplexedRealUSPDF_compute_0.in_0}
          - {source: in_2, target: MultiplexedSparseDataLookupDF_compute_0.in_0}
          - {source: in_3, target: MultiplexedRealUSPDF_compute_0.in_1}
          - {source: in_4, target: MultiplexedRealUSPDF_compute_0.in_2}
          - {source: in_5, target: MultiplexedRealUSPDF_compute_0.in_3}
          - {source: in_6, target: MultiplexedRealUSPDF_compute_0.in_4}
          - {source: in_7, target: MultiplexedRealUSPDF_compute_0.in_5}
          - {source: in_8, target: out_13}
          - {source: merge_3.out_0, target: CompareLT_uncompute_0.in_2}
          - {source: merge_5.out_0, target: split_6.in_0}
          - {source: merge_7.out_0, target: out_1}
          - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
          - {source: qubits_alloc_1.out_0, target: x_0.thru_0}
          - {source: split_0.out_0, target: CompareLT_compute_0.in_0}
          - {source: split_0.out_remainder, target: merge_5.in_remainder}
          - {source: split_2.out_0, target: x_0.thru_1}
          - {source: split_2.out_remainder, target: merge_3.in_remainder}
          - {source: split_6.out_0, target: swap_0.thru_0}
          - {source: split_6.out_remainder, target: merge_7.in_remainder}
          - {source: swap_0.thru_0, target: merge_7.in_0}
          - {source: swap_0.thru_1, target: out_6}
          - {source: swap_0.thru_2, target: out_11}
          - {source: x_0.thru_0, target: swap_0.thru_1}
          - {source: x_0.thru_1, target: merge_3.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: OneElectronTermSelect_compute_0
          children:
          - name: swap_0
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: N_spatial}
            - {name: thru_1, direction: through, size: N_spatial}
            - {name: thru_2, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 55*N_spatial}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*N_spatial + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: N_spatial}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            resources:
            - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R)))'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: GidneyAdd_compute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: in_1, direction: input, size: M_r*(R - 1)}
            - {name: in_2, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: out_1, direction: output, size: M_r*(R - 1)}
            - {name: out_2, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 1)'}
            - {name: toffs, type: additive, value: 0}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: BasisRotatedMajoranaOperatorDF_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: lelbow_0
              children: []
              type: lelbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              - {name: thru_2, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 44}
              - {name: gidney_lelbows, type: additive, value: 1}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: local_ancillae, type: qubits, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 3}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_1
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_0
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*b_givens*(N_spatial
                      - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0,
                      ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_2, direction: input, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_2, direction: output, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*b_givens*(N_spatial
                    - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0,
                    ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
                    b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial -
                    1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                    - 2*ceiling(log2(lambda)) - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: SwapUp_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 55*b_givens*(-1 +
                      (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
                      - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  - {name: toffs, type: additive, value: b_givens*(-1 + (b_givens*(N_spatial
                      - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                      - 1)))*(N_spatial - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_2, direction: input, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_2, direction: output, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 55*b_givens*(-1 + (b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                    - 1)))*(N_spatial - 1)}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + ceiling(log2(lambda))}
                - {name: toffs, type: additive, value: b_givens*(-1 + (b_givens*(N_spatial
                    - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                    - 1)))*(N_spatial - 1)}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: in_2, target: out_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 3*b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)*(lambda
                    - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)*(lambda - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: b_givens*(N_spatial - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '55*b_givens*(-1 + (b_givens*(N_spatial
                  - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                  - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1)
                  + (ceiling(0.75*b_givens*(N_spatial - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial
                  - 1)) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                  - 1)'}
              - {name: measurements, type: additive, value: b_givens*(N_spatial -
                  1)*(lambda - 1)}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                  b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1)
                  + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                  Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda - 1) +
                  b_givens*(N_spatial - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                  + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: b_givens*(-1 + (b_givens*(N_spatial
                  - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                  - 1)))*(N_spatial - 1)}
              connections:
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_2.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: SwapUp_compute_0.in_1}
              - {source: GoogleSelectOptimized_compute_0.out_2, target: SwapUp_compute_0.in_2}
              - {source: SwapUp_compute_0.out_0, target: merge_6.in_0}
              - {source: SwapUp_compute_0.out_1, target: out_1}
              - {source: SwapUp_compute_0.out_2, target: had_0.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: in_0, target: merge_0.in_1}
              - {source: in_1, target: merge_0.in_0}
              - {source: merge_0.out_0, target: split_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: qubits_alloc_0.out_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: qubits_alloc_1.out_0, target: GoogleSelectOptimized_compute_0.in_2}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_1.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_1.out_remainder, target: merge_2.in_remainder}
              - {source: split_3.out_0, target: merge_4.in_0}
              - {source: split_3.out_1, target: merge_4.in_1}
              - {source: split_5.out_0, target: SwapUp_compute_0.in_0}
              - {source: split_5.out_remainder, target: merge_6.in_remainder}
              - {source: split_7.out_0, target: out_2}
              - {source: split_7.out_1, target: out_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: ApplyMajoranaFermionOperatorDF_compute_0
              children:
              - name: GivensRotationBasisChangeDF_compute_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_remainder, direction: output, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: N_spatial}
                  - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                  - {name: out_remainder, direction: output, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: GivensRotationFusedAdder_compute_0_repetition
                  children:
                  - name: GivensRotationFusedAdder_compute_0
                    children:
                    - name: RotationCatalystStatePrep_compute_0
                      children:
                      - name: qubits_alloc_0
                        children: []
                        type: qubits_alloc
                        ports:
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: had_0
                        children: []
                        type: had
                        ports:
                        - {name: thru_0, direction: through, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        resources:
                        - {name: active_volume, type: additive, value: '3*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppm_x_weight, type: other, value: 0}
                        - {name: ppm_z_weight, type: other, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: ppr_x_weight, type: other, value: 0}
                        - {name: ppr_z_weight, type: other, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: rotations, type: additive, value: 0}
                        - {name: t_gates, type: additive, value: 0}
                        - {name: toffs, type: additive, value: 0}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: merge_0
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: in_2, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_4, direction: input, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_1
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 1}
                        - {name: out_remainder, direction: output, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: Repeated_s_inv_0_repetition
                        children:
                        - name: Repeated_s_inv_0
                          children:
                          - name: s_inv_0
                            children: []
                            type: s_inv
                            ports:
                            - {name: thru_0, direction: through, size: 1}
                            resources:
                            - {name: active_volume, type: additive, value: 5}
                            - {name: gidney_lelbows, type: additive, value: 0}
                            - {name: gidney_relbows, type: additive, value: 0}
                            - {name: measurements, type: additive, value: 0}
                            - {name: ppm_x_weight, type: other, value: 0}
                            - {name: ppm_z_weight, type: other, value: 0}
                            - {name: ppms, type: additive, value: 0}
                            - {name: ppr_x_weight, type: other, value: 0}
                            - {name: ppr_z_weight, type: other, value: 0}
                            - {name: pprs, type: additive, value: 0}
                            - {name: qubit_highwater, type: qubits, value: 1}
                            - {name: rotations, type: additive, value: 0}
                            - {name: t_gates, type: additive, value: 0}
                            - {name: toffs, type: additive, value: 0}
                            connections: []
                            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                              lambda]
                            local_variables: {}
                            linked_params: []
                            repetition: null
                            meta: {}
                          type: qubrick
                          ports:
                          - {name: in_0, direction: input, size: 1}
                          - {name: out_0, direction: output, size: 1}
                          resources:
                          - {name: active_volume, type: additive, value: 5}
                          - {name: gidney_lelbows, type: additive, value: 0}
                          - {name: gidney_relbows, type: additive, value: 0}
                          - {name: measurements, type: additive, value: 0}
                          - {name: ppms, type: additive, value: 0}
                          - {name: pprs, type: additive, value: 0}
                          - {name: qubit_highwater, type: qubits, value: 1}
                          - {name: rotations, type: additive, value: 0}
                          - {name: t_gates, type: additive, value: 0}
                          - {name: toffs, type: additive, value: 0}
                          connections:
                          - {source: in_0, target: s_inv_0.thru_0}
                          - {source: s_inv_0.thru_0, target: out_0}
                          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                            lambda]
                          local_variables: {}
                          linked_params: []
                          repetition: null
                          meta: {}
                        type: qubrick
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: out_0, direction: output, size: 1}
                        resources:
                        - {name: active_volume, type: additive, value: '5*Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 1}
                        - {name: rotations, type: additive, value: 0}
                        - {name: t_gates, type: additive, value: 0}
                        - {name: toffs, type: additive, value: 0}
                        connections:
                        - {source: Repeated_s_inv_0.out_0, target: out_0}
                        - {source: in_0, target: Repeated_s_inv_0.in_0}
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)
                          sequence: {type: constant, multiplier: 1}
                        meta: {}
                      - name: merge_2
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: in_remainder, direction: input, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_3
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: out_2, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_4, direction: output, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: merge_4
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: in_2, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_4, direction: input, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_5
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 1}
                        - {name: out_remainder, direction: output, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: Repeated_t_inv_0_repetition
                        children:
                        - name: Repeated_t_inv_0
                          children:
                          - name: t_inv_0
                            children: []
                            type: t_inv
                            ports:
                            - {name: thru_0, direction: through, size: 1}
                            resources:
                            - {name: active_volume, type: additive, value: 28.5}
                            - {name: gidney_lelbows, type: additive, value: 0}
                            - {name: gidney_relbows, type: additive, value: 0}
                            - {name: measurements, type: additive, value: 0}
                            - {name: ppm_x_weight, type: other, value: 0}
                            - {name: ppm_z_weight, type: other, value: 0}
                            - {name: ppms, type: additive, value: 0}
                            - {name: ppr_x_weight, type: other, value: 0}
                            - {name: ppr_z_weight, type: other, value: 0}
                            - {name: pprs, type: additive, value: 0}
                            - {name: qubit_highwater, type: qubits, value: 1}
                            - {name: rotations, type: additive, value: 0}
                            - {name: t_gates, type: additive, value: 1}
                            - {name: toffs, type: additive, value: 0}
                            connections: []
                            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                              lambda]
                            local_variables: {}
                            linked_params: []
                            repetition: null
                            meta: {}
                          type: qubrick
                          ports:
                          - {name: in_0, direction: input, size: 1}
                          - {name: out_0, direction: output, size: 1}
                          resources:
                          - {name: active_volume, type: additive, value: 28.5}
                          - {name: gidney_lelbows, type: additive, value: 0}
                          - {name: gidney_relbows, type: additive, value: 0}
                          - {name: measurements, type: additive, value: 0}
                          - {name: ppms, type: additive, value: 0}
                          - {name: pprs, type: additive, value: 0}
                          - {name: qubit_highwater, type: qubits, value: 1}
                          - {name: rotations, type: additive, value: 0}
                          - {name: t_gates, type: additive, value: 1}
                          - {name: toffs, type: additive, value: 0}
                          connections:
                          - {source: in_0, target: t_inv_0.thru_0}
                          - {source: t_inv_0.thru_0, target: out_0}
                          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                            lambda]
                          local_variables: {}
                          linked_params: []
                          repetition: null
                          meta: {}
                        type: qubrick
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: out_0, direction: output, size: 1}
                        resources:
                        - {name: active_volume, type: additive, value: '28.5*Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 1}
                        - {name: rotations, type: additive, value: 0}
                        - {name: t_gates, type: additive, value: 'Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)'}
                        - {name: toffs, type: additive, value: 0}
                        connections:
                        - {source: Repeated_t_inv_0.out_0, target: out_0}
                        - {source: in_0, target: Repeated_t_inv_0.in_0}
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                          sequence: {type: constant, multiplier: 1}
                        meta: {}
                      - name: merge_6
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: in_remainder, direction: input, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_7
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: out_2, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_4, direction: output, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: merge_8
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: in_1, direction: input, size: 'Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: in_2, direction: input, size: 'Max(0, b_givens -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: in_4, direction: input, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_9
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 1}
                        - {name: out_remainder, direction: output, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: Repeated_phase_0_repetition
                        children:
                        - name: Repeated_phase_0
                          children:
                          - name: phase_0
                            children: []
                            type: phase
                            ports:
                            - {name: thru_0, direction: through, size: 1}
                            resources:
                            - {name: active_volume, type: additive, value: 1397}
                            - {name: gidney_lelbows, type: additive, value: 0}
                            - {name: gidney_relbows, type: additive, value: 0}
                            - {name: measurements, type: additive, value: 0}
                            - {name: ppm_x_weight, type: other, value: 0}
                            - {name: ppm_z_weight, type: other, value: 0}
                            - {name: ppms, type: additive, value: 0}
                            - {name: ppr_x_weight, type: other, value: 0}
                            - {name: ppr_z_weight, type: other, value: 0}
                            - {name: pprs, type: additive, value: 0}
                            - {name: qubit_highwater, type: qubits, value: 1}
                            - {name: rotations, type: additive, value: 1}
                            - {name: t_gates, type: additive, value: 0}
                            - {name: toffs, type: additive, value: 0}
                            connections: []
                            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                              lambda]
                            local_variables: {}
                            linked_params: []
                            repetition: null
                            meta: {}
                          type: qubrick
                          ports:
                          - {name: in_0, direction: input, size: 1}
                          - {name: out_0, direction: output, size: 1}
                          resources:
                          - {name: active_volume, type: additive, value: 1397}
                          - {name: gidney_lelbows, type: additive, value: 0}
                          - {name: gidney_relbows, type: additive, value: 0}
                          - {name: measurements, type: additive, value: 0}
                          - {name: ppms, type: additive, value: 0}
                          - {name: pprs, type: additive, value: 0}
                          - {name: qubit_highwater, type: qubits, value: 1}
                          - {name: rotations, type: additive, value: 1}
                          - {name: t_gates, type: additive, value: 0}
                          - {name: toffs, type: additive, value: 0}
                          connections:
                          - {source: in_0, target: phase_0.thru_0}
                          - {source: phase_0.thru_0, target: out_0}
                          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas,
                            lambda]
                          local_variables: {}
                          linked_params: []
                          repetition: null
                          meta: {}
                        type: qubrick
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: out_0, direction: output, size: 1}
                        resources:
                        - {name: active_volume, type: additive, value: '1397*Max(0,
                            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0))'}
                        - {name: gidney_lelbows, type: additive, value: 0}
                        - {name: gidney_relbows, type: additive, value: 0}
                        - {name: measurements, type: additive, value: 0}
                        - {name: ppms, type: additive, value: 0}
                        - {name: pprs, type: additive, value: 0}
                        - {name: qubit_highwater, type: qubits, value: 1}
                        - {name: rotations, type: additive, value: 'Max(0, Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0))'}
                        - {name: t_gates, type: additive, value: 0}
                        - {name: toffs, type: additive, value: 0}
                        connections:
                        - {source: Repeated_phase_0.out_0, target: out_0}
                        - {source: in_0, target: Repeated_phase_0.in_0}
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition:
                          count: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0))
                          sequence: {type: constant, multiplier: 1}
                        meta: {}
                      - name: merge_10
                        children: []
                        type: merge
                        ports:
                        - {name: in_0, direction: input, size: 1}
                        - {name: in_remainder, direction: input, size: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      - name: split_11
                        children: []
                        type: split
                        ports:
                        - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        - {name: out_0, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                        - {name: out_2, direction: output, size: 'Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas))'}
                        - {name: out_4, direction: output, size: 'Max(b_as, b_givens,
                            b_mas)'}
                        resources:
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      type: qubrick
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_2, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_0, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_1, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_4, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      resources:
                      - {name: active_volume, type: additive, value: '1397*Max(0,
                          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas))'}
                      - {name: rotations, type: additive, value: 'Max(0, Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                      - {name: t_gates, type: additive, value: 'Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                      - {name: toffs, type: additive, value: 0}
                      connections:
                      - {source: Repeated_phase_0_repetition.out_0, target: merge_10.in_0}
                      - {source: Repeated_s_inv_0_repetition.out_0, target: merge_2.in_0}
                      - {source: Repeated_t_inv_0_repetition.out_0, target: merge_6.in_0}
                      - {source: had_0.thru_0, target: merge_0.in_0}
                      - {source: in_0, target: merge_0.in_3}
                      - {source: in_1, target: merge_0.in_2}
                      - {source: in_2, target: merge_0.in_4}
                      - {source: in_3, target: merge_0.in_1}
                      - {source: merge_0.out_0, target: split_1.in_0}
                      - {source: merge_10.out_0, target: split_11.in_0}
                      - {source: merge_2.out_0, target: split_3.in_0}
                      - {source: merge_4.out_0, target: split_5.in_0}
                      - {source: merge_6.out_0, target: split_7.in_0}
                      - {source: merge_8.out_0, target: split_9.in_0}
                      - {source: qubits_alloc_0.out_0, target: had_0.thru_0}
                      - {source: split_1.out_0, target: Repeated_s_inv_0_repetition.in_0}
                      - {source: split_1.out_remainder, target: merge_2.in_remainder}
                      - {source: split_11.out_0, target: out_4}
                      - {source: split_11.out_1, target: out_2}
                      - {source: split_11.out_2, target: out_3}
                      - {source: split_11.out_3, target: out_1}
                      - {source: split_11.out_4, target: out_0}
                      - {source: split_3.out_0, target: merge_4.in_0}
                      - {source: split_3.out_1, target: merge_4.in_1}
                      - {source: split_3.out_2, target: merge_4.in_2}
                      - {source: split_3.out_3, target: merge_4.in_3}
                      - {source: split_3.out_4, target: merge_4.in_4}
                      - {source: split_5.out_0, target: Repeated_t_inv_0_repetition.in_0}
                      - {source: split_5.out_remainder, target: merge_6.in_remainder}
                      - {source: split_7.out_0, target: merge_8.in_0}
                      - {source: split_7.out_1, target: merge_8.in_1}
                      - {source: split_7.out_2, target: merge_8.in_2}
                      - {source: split_7.out_3, target: merge_8.in_3}
                      - {source: split_7.out_4, target: merge_8.in_4}
                      - {source: split_9.out_0, target: Repeated_phase_0_repetition.in_0}
                      - {source: split_9.out_remainder, target: merge_10.in_remainder}
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: ppr_0
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_0
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_1
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_0
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_2
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_3
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_4
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_1
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_5
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_6
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: GidneyAdd_compute_0
                      children:
                      - name: cost_event
                        children: []
                        type: intrinsic_cost
                        ports: []
                        resources:
                        - {name: active_volume, type: additive, value: '100*Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(0, b_mas - Max(0, b_mas -
                            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56'}
                        - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: local_ancillae, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      type: qubrick
                      ports:
                      - {name: in_0, direction: input, size: b_givens}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_6, direction: input, size: 1}
                      - {name: out_0, direction: output, size: b_givens}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_4, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_5, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_6, direction: output, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '100*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 100*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 100*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) + 100*Max(b_as, b_givens,
                          b_mas) - 56'}
                      - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: qubit_highwater, type: qubits, value: 'Max(b_givens
                          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 2*Max(b_as, b_givens, b_mas))'}
                      - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections:
                      - {source: in_0, target: out_0}
                      - {source: in_1, target: out_1}
                      - {source: in_2, target: out_2}
                      - {source: in_3, target: out_3}
                      - {source: in_4, target: out_4}
                      - {source: in_5, target: out_5}
                      - {source: in_6, target: out_6}
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_7
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_8
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_2
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_9
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_10
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_11
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_3
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_12
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_13
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: ppr_1
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    type: qubrick
                    ports:
                    - {name: in_0, direction: input, size: b_givens}
                    - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                    - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: in_5, direction: input, size: 'Mod(2, N_spatial)'}
                    - {name: out_0, direction: output, size: b_givens}
                    - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                        b_mas)'}
                    - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: out_6, direction: output, size: 'Mod(2, N_spatial)'}
                    resources:
                    - {name: active_volume, type: additive, value: '108*Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                        + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48'}
                    - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: pprs, type: additive, value: 2}
                    - {name: qubit_highwater, type: qubits, value: 'Max(b_givens +
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                        b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                        b_givens + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial),
                        Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens,
                        b_mas)) + Mod(2, N_spatial) - 1)'}
                    - {name: rotations, type: additive, value: 'Max(0, Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                    - {name: t_gates, type: additive, value: 'Heaviside(-Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                    - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas)'}
                    connections:
                    - {source: GidneyAdd_compute_0.out_0, target: out_0}
                    - {source: GidneyAdd_compute_0.out_1, target: merge_11.in_3}
                    - {source: GidneyAdd_compute_0.out_2, target: merge_11.in_2}
                    - {source: GidneyAdd_compute_0.out_3, target: merge_11.in_0}
                    - {source: GidneyAdd_compute_0.out_4, target: merge_11.in_1}
                    - {source: GidneyAdd_compute_0.out_5, target: x_3.thru_1}
                    - {source: GidneyAdd_compute_0.out_6, target: merge_7.in_0}
                    - {source: RotationCatalystStatePrep_compute_0.out_0, target: merge_1.in_3}
                    - {source: RotationCatalystStatePrep_compute_0.out_1, target: merge_1.in_2}
                    - {source: RotationCatalystStatePrep_compute_0.out_2, target: merge_1.in_0}
                    - {source: RotationCatalystStatePrep_compute_0.out_3, target: merge_1.in_1}
                    - {source: RotationCatalystStatePrep_compute_0.out_4, target: x_0.thru_1}
                    - {source: in_0, target: GidneyAdd_compute_0.in_0}
                    - {source: in_1, target: RotationCatalystStatePrep_compute_0.in_2}
                    - {source: in_2, target: RotationCatalystStatePrep_compute_0.in_0}
                    - {source: in_3, target: RotationCatalystStatePrep_compute_0.in_3}
                    - {source: in_4, target: RotationCatalystStatePrep_compute_0.in_1}
                    - {source: in_5, target: ppr_0.thru_0}
                    - {source: merge_1.out_0, target: x_0.thru_0}
                    - {source: merge_11.out_0, target: x_3.thru_0}
                    - {source: merge_13.out_0, target: ppr_1.thru_0}
                    - {source: merge_3.out_0, target: split_4.in_0}
                    - {source: merge_5.out_0, target: split_6.in_0}
                    - {source: merge_7.out_0, target: split_8.in_0}
                    - {source: merge_9.out_0, target: split_10.in_0}
                    - {source: ppr_0.thru_0, target: split_0.in_0}
                    - {source: ppr_1.thru_0, target: out_6}
                    - {source: split_0.out_0, target: x_0.thru_2}
                    - {source: split_0.out_remainder, target: merge_3.in_remainder}
                    - {source: split_10.out_0, target: x_3.thru_2}
                    - {source: split_10.out_remainder, target: merge_13.in_remainder}
                    - {source: split_12.out_0, target: out_3}
                    - {source: split_12.out_1, target: out_4}
                    - {source: split_12.out_2, target: out_2}
                    - {source: split_12.out_3, target: out_1}
                    - {source: split_2.out_0, target: GidneyAdd_compute_0.in_3}
                    - {source: split_2.out_1, target: GidneyAdd_compute_0.in_4}
                    - {source: split_2.out_2, target: GidneyAdd_compute_0.in_2}
                    - {source: split_2.out_3, target: GidneyAdd_compute_0.in_1}
                    - {source: split_4.out_0, target: x_1.thru_0}
                    - {source: split_4.out_1, target: x_1.thru_1}
                    - {source: split_4.out_remainder, target: merge_5.in_remainder}
                    - {source: split_6.out_0, target: GidneyAdd_compute_0.in_6}
                    - {source: split_6.out_remainder, target: merge_7.in_remainder}
                    - {source: split_8.out_0, target: x_2.thru_0}
                    - {source: split_8.out_1, target: x_2.thru_1}
                    - {source: split_8.out_remainder, target: merge_9.in_remainder}
                    - {source: x_0.thru_0, target: split_2.in_0}
                    - {source: x_0.thru_1, target: GidneyAdd_compute_0.in_5}
                    - {source: x_0.thru_2, target: merge_3.in_0}
                    - {source: x_1.thru_0, target: merge_5.in_0}
                    - {source: x_1.thru_1, target: merge_5.in_1}
                    - {source: x_2.thru_0, target: merge_9.in_0}
                    - {source: x_2.thru_1, target: merge_9.in_1}
                    - {source: x_3.thru_0, target: split_12.in_0}
                    - {source: x_3.thru_1, target: out_5}
                    - {source: x_3.thru_2, target: merge_13.in_0}
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: in_5, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: out_6, direction: output, size: 'Mod(2, N_spatial)'}
                  resources:
                  - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens -
                      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48)'}
                  - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 2*N_spatial - 2}
                  - {name: qubit_highwater, type: qubits, value: 'Max(b_givens + Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens +
                      Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
                      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens +
                      Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                      + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
                      1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                      2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
                      + Mod(2, N_spatial) - 1))'}
                  - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0,
                      Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                  - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                  - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas))'}
                  connections:
                  - {source: GivensRotationFusedAdder_compute_0.out_0, target: out_0}
                  - {source: GivensRotationFusedAdder_compute_0.out_1, target: out_1}
                  - {source: GivensRotationFusedAdder_compute_0.out_2, target: out_2}
                  - {source: GivensRotationFusedAdder_compute_0.out_3, target: out_3}
                  - {source: GivensRotationFusedAdder_compute_0.out_4, target: out_4}
                  - {source: GivensRotationFusedAdder_compute_0.out_5, target: out_5}
                  - {source: GivensRotationFusedAdder_compute_0.out_6, target: out_6}
                  - {source: in_0, target: GivensRotationFusedAdder_compute_0.in_0}
                  - {source: in_1, target: GivensRotationFusedAdder_compute_0.in_1}
                  - {source: in_2, target: GivensRotationFusedAdder_compute_0.in_2}
                  - {source: in_3, target: GivensRotationFusedAdder_compute_0.in_3}
                  - {source: in_4, target: GivensRotationFusedAdder_compute_0.in_4}
                  - {source: in_5, target: GivensRotationFusedAdder_compute_0.in_5}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition:
                    count: N_spatial - 1
                    sequence: {type: constant, multiplier: 1}
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: in_remainder, direction: input, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  - {name: out_0, direction: output, size: N_spatial}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_remainder, direction: input, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: in_5, direction: input, size: N_spatial}
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_6, direction: output, size: N_spatial}
                resources:
                - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                    0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
                    b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 2.5, 0) - 48)'}
                - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 2*N_spatial - 2}
                - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + b_givens*(N_spatial
                    - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial -
                    1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                    N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
                    + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
                    N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
                    N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens
                    + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                    2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) -
                    1)) - Mod(2, N_spatial))'}
                - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0,
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
                - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
                - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))'}
                connections:
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_0, target: merge_3.in_0}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_1, target: out_1}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_2, target: out_2}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_3, target: out_3}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_4, target: out_4}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_5, target: out_5}
                - {source: GivensRotationFusedAdder_compute_0_repetition.out_6, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: GivensRotationFusedAdder_compute_0_repetition.in_1}
                - {source: in_2, target: GivensRotationFusedAdder_compute_0_repetition.in_2}
                - {source: in_3, target: GivensRotationFusedAdder_compute_0_repetition.in_3}
                - {source: in_4, target: GivensRotationFusedAdder_compute_0_repetition.in_4}
                - {source: in_5, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_6}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: GivensRotationFusedAdder_compute_0_repetition.in_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: GivensRotationFusedAdder_compute_0_repetition.in_5}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: N_spatial}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: N_spatial - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: N_spatial}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: z_0
                children: []
                type: z
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: N_spatial - 1}
                - {name: out_0, direction: output, size: N_spatial}
                resources:
                - {name: qubit_highwater, type: qubits, value: N_spatial}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GivensRotationBasisChangeDF_uncompute_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_remainder, direction: output, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: N_spatial}
                  - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                  - {name: out_remainder, direction: output, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: GivensRotationFusedAdder_uncompute_0_repetition
                  children:
                  - name: GivensRotationFusedAdder_uncompute_0
                    children:
                    - name: ppr_0
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_0
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_1
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_0
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_2
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_3
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_4
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_1
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_5
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_6
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: GidneyAdd_uncompute_0
                      children:
                      - name: cost_event
                        children: []
                        type: intrinsic_cost
                        ports: []
                        resources:
                        - {name: active_volume, type: additive, value: '100*Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(0, b_mas - Max(0, b_mas -
                            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56'}
                        - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: local_ancillae, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                        - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
                        connections: []
                        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                        local_variables: {}
                        linked_params: []
                        repetition: null
                        meta: {}
                      type: qubrick
                      ports:
                      - {name: in_0, direction: input, size: b_givens}
                      - {name: in_1, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_6, direction: input, size: 1}
                      - {name: out_0, direction: output, size: b_givens}
                      - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_4, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_5, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_6, direction: output, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '100*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 100*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 100*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) + 100*Max(b_as, b_givens,
                          b_mas) - 56'}
                      - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1'}
                      - {name: qubit_highwater, type: qubits, value: 'Max(b_givens
                          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 2*Max(b_as, b_givens, b_mas))'}
                      - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections:
                      - {source: in_0, target: out_0}
                      - {source: in_1, target: out_1}
                      - {source: in_2, target: out_2}
                      - {source: in_3, target: out_3}
                      - {source: in_4, target: out_4}
                      - {source: in_5, target: out_5}
                      - {source: in_6, target: out_6}
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_7
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_8
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_1, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 2'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_2
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 1}
                      - {name: thru_1, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: 4}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 2}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_9
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_1, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 2'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_10
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                      - {name: out_0, direction: output, size: 1}
                      - {name: out_remainder, direction: output, size: 'Mod(2, N_spatial)
                          - 1'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_11
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: in_3, direction: input, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: x_3
                      children: []
                      type: x
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 1}
                      resources:
                      - {name: active_volume, type: additive, value: '4*Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 4*Max(b_as, b_givens, b_mas)'}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 0}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 0}
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) + 1'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: split_12
                      children: []
                      type: split
                      ports:
                      - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          + Max(b_as, b_givens, b_mas)'}
                      - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: out_1, direction: output, size: 'Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))'}
                      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: out_3, direction: output, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: merge_13
                      children: []
                      type: merge
                      ports:
                      - {name: in_0, direction: input, size: 1}
                      - {name: in_remainder, direction: input, size: 'Mod(2, N_spatial)
                          - 1'}
                      - {name: out_0, direction: output, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: ppr_1
                      children: []
                      type: ppr
                      ports:
                      - {name: thru_0, direction: through, size: 'Mod(2, N_spatial)'}
                      resources:
                      - {name: active_volume, type: additive, value: 0}
                      - {name: gidney_lelbows, type: additive, value: 0}
                      - {name: gidney_relbows, type: additive, value: 0}
                      - {name: measurements, type: additive, value: 0}
                      - {name: ppm_x_weight, type: other, value: 0}
                      - {name: ppm_z_weight, type: other, value: 0}
                      - {name: ppms, type: additive, value: 0}
                      - {name: ppr_x_weight, type: other, value: 3}
                      - {name: ppr_z_weight, type: other, value: 0}
                      - {name: pprs, type: additive, value: 1}
                      - {name: qubit_highwater, type: qubits, value: 'Mod(2, N_spatial)'}
                      - {name: rotations, type: additive, value: 0}
                      - {name: t_gates, type: additive, value: 0}
                      - {name: toffs, type: additive, value: 0}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    - name: RotationCatalystStatePrep_uncompute_0
                      children: []
                      type: qubrick
                      ports:
                      - {name: thru_0, direction: through, size: 'Max(b_as, b_givens,
                          b_mas)'}
                      - {name: thru_1, direction: through, size: 'Max(0, b_mas - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_2, direction: through, size: 'Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))'}
                      - {name: thru_3, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas))'}
                      - {name: thru_4, direction: through, size: 'Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                      resources:
                      - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas)'}
                      connections: []
                      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                      local_variables: {}
                      linked_params: []
                      repetition: null
                      meta: {}
                    type: qubrick
                    ports:
                    - {name: in_0, direction: input, size: b_givens}
                    - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                    - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: in_6, direction: input, size: 'Mod(2, N_spatial)'}
                    - {name: out_0, direction: output, size: b_givens}
                    - {name: out_1, direction: output, size: 'Max(b_as, b_givens,
                        b_mas)'}
                    - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas))'}
                    - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas))'}
                    - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas))'}
                    - {name: out_6, direction: output, size: 'Mod(2, N_spatial)'}
                    resources:
                    - {name: active_volume, type: additive, value: '108*Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48'}
                    - {name: gidney_lelbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: gidney_relbows, type: additive, value: 'Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1'}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: pprs, type: additive, value: 2}
                    - {name: qubit_highwater, type: qubits, value: 'Max(b_givens +
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                        Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens,
                        b_mas)) + Mod(2, N_spatial) - 1)'}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 'Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas)'}
                    connections:
                    - {source: GidneyAdd_uncompute_0.out_0, target: out_0}
                    - {source: GidneyAdd_uncompute_0.out_1, target: merge_11.in_3}
                    - {source: GidneyAdd_uncompute_0.out_2, target: merge_11.in_2}
                    - {source: GidneyAdd_uncompute_0.out_3, target: merge_11.in_0}
                    - {source: GidneyAdd_uncompute_0.out_4, target: merge_11.in_1}
                    - {source: GidneyAdd_uncompute_0.out_5, target: x_3.thru_1}
                    - {source: GidneyAdd_uncompute_0.out_6, target: merge_7.in_0}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_0, target: out_1}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_1, target: out_2}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_2, target: out_3}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_3, target: out_4}
                    - {source: RotationCatalystStatePrep_uncompute_0.thru_4, target: out_5}
                    - {source: in_0, target: GidneyAdd_uncompute_0.in_0}
                    - {source: in_1, target: merge_1.in_3}
                    - {source: in_2, target: merge_1.in_2}
                    - {source: in_3, target: merge_1.in_0}
                    - {source: in_4, target: merge_1.in_1}
                    - {source: in_5, target: x_0.thru_1}
                    - {source: in_6, target: ppr_0.thru_0}
                    - {source: merge_1.out_0, target: x_0.thru_0}
                    - {source: merge_11.out_0, target: x_3.thru_0}
                    - {source: merge_13.out_0, target: ppr_1.thru_0}
                    - {source: merge_3.out_0, target: split_4.in_0}
                    - {source: merge_5.out_0, target: split_6.in_0}
                    - {source: merge_7.out_0, target: split_8.in_0}
                    - {source: merge_9.out_0, target: split_10.in_0}
                    - {source: ppr_0.thru_0, target: split_0.in_0}
                    - {source: ppr_1.thru_0, target: out_6}
                    - {source: split_0.out_0, target: x_0.thru_2}
                    - {source: split_0.out_remainder, target: merge_3.in_remainder}
                    - {source: split_10.out_0, target: x_3.thru_2}
                    - {source: split_10.out_remainder, target: merge_13.in_remainder}
                    - {source: split_12.out_0, target: RotationCatalystStatePrep_uncompute_0.thru_2}
                    - {source: split_12.out_1, target: RotationCatalystStatePrep_uncompute_0.thru_3}
                    - {source: split_12.out_2, target: RotationCatalystStatePrep_uncompute_0.thru_1}
                    - {source: split_12.out_3, target: RotationCatalystStatePrep_uncompute_0.thru_0}
                    - {source: split_2.out_0, target: GidneyAdd_uncompute_0.in_3}
                    - {source: split_2.out_1, target: GidneyAdd_uncompute_0.in_4}
                    - {source: split_2.out_2, target: GidneyAdd_uncompute_0.in_2}
                    - {source: split_2.out_3, target: GidneyAdd_uncompute_0.in_1}
                    - {source: split_4.out_0, target: x_1.thru_0}
                    - {source: split_4.out_1, target: x_1.thru_1}
                    - {source: split_4.out_remainder, target: merge_5.in_remainder}
                    - {source: split_6.out_0, target: GidneyAdd_uncompute_0.in_6}
                    - {source: split_6.out_remainder, target: merge_7.in_remainder}
                    - {source: split_8.out_0, target: x_2.thru_0}
                    - {source: split_8.out_1, target: x_2.thru_1}
                    - {source: split_8.out_remainder, target: merge_9.in_remainder}
                    - {source: x_0.thru_0, target: split_2.in_0}
                    - {source: x_0.thru_1, target: GidneyAdd_uncompute_0.in_5}
                    - {source: x_0.thru_2, target: merge_3.in_0}
                    - {source: x_1.thru_0, target: merge_5.in_0}
                    - {source: x_1.thru_1, target: merge_5.in_1}
                    - {source: x_2.thru_0, target: merge_9.in_0}
                    - {source: x_2.thru_1, target: merge_9.in_1}
                    - {source: x_3.thru_0, target: split_12.in_0}
                    - {source: x_3.thru_1, target: RotationCatalystStatePrep_uncompute_0.thru_4}
                    - {source: x_3.thru_2, target: merge_13.in_0}
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: in_6, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: out_0, direction: output, size: b_givens}
                  - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                  - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                      b_givens, b_mas))'}
                  - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                  - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))'}
                  - {name: out_6, direction: output, size: 'Mod(2, N_spatial)'}
                  resources:
                  - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens -
                      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + 108*Max(b_as, b_givens, b_mas) - 48)'}
                  - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1)'}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 2*N_spatial - 2}
                  - {name: qubit_highwater, type: qubits, value: 'Max(b_givens + Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1))'}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas))'}
                  connections:
                  - {source: GivensRotationFusedAdder_uncompute_0.out_0, target: out_0}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_1, target: out_1}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_2, target: out_2}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_3, target: out_3}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_4, target: out_4}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_5, target: out_5}
                  - {source: GivensRotationFusedAdder_uncompute_0.out_6, target: out_6}
                  - {source: in_0, target: GivensRotationFusedAdder_uncompute_0.in_0}
                  - {source: in_1, target: GivensRotationFusedAdder_uncompute_0.in_1}
                  - {source: in_2, target: GivensRotationFusedAdder_uncompute_0.in_2}
                  - {source: in_3, target: GivensRotationFusedAdder_uncompute_0.in_3}
                  - {source: in_4, target: GivensRotationFusedAdder_uncompute_0.in_4}
                  - {source: in_5, target: GivensRotationFusedAdder_uncompute_0.in_5}
                  - {source: in_6, target: GivensRotationFusedAdder_uncompute_0.in_6}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition:
                    count: N_spatial - 1
                    sequence: {type: constant, multiplier: 1}
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 'Mod(2, N_spatial)'}
                  - {name: in_remainder, direction: input, size: 'N_spatial - Mod(2,
                      N_spatial)'}
                  - {name: out_0, direction: output, size: N_spatial}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: N_spatial}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: b_givens}
                  - {name: in_remainder, direction: input, size: b_givens*(N_spatial
                      - 1) - b_givens}
                  - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                      - 1)}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: in_4, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas))'}
                - {name: in_6, direction: input, size: N_spatial}
                - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
                - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
                - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas))'}
                - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
                - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas))'}
                - {name: out_6, direction: output, size: N_spatial}
                resources:
                - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
                    b_givens, b_mas) - 48)'}
                - {name: gidney_lelbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: gidney_relbows, type: additive, value: '(N_spatial - 1)*(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 2*N_spatial - 2}
                - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + b_givens*(N_spatial
                    - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                    N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
                    + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                    + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                    2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) -
                    1)) - Mod(2, N_spatial))'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: '(N_spatial - 1)*(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))'}
                connections:
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_0,
                  target: merge_3.in_0}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_1,
                  target: out_1}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_2,
                  target: out_2}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_3,
                  target: out_3}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_4,
                  target: out_4}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_5,
                  target: out_5}
                - {source: GivensRotationFusedAdder_uncompute_0_repetition.out_6,
                  target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: GivensRotationFusedAdder_uncompute_0_repetition.in_1}
                - {source: in_2, target: GivensRotationFusedAdder_uncompute_0_repetition.in_2}
                - {source: in_3, target: GivensRotationFusedAdder_uncompute_0_repetition.in_3}
                - {source: in_4, target: GivensRotationFusedAdder_uncompute_0_repetition.in_4}
                - {source: in_5, target: GivensRotationFusedAdder_uncompute_0_repetition.in_5}
                - {source: in_6, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_6}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: GivensRotationFusedAdder_uncompute_0_repetition.in_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: GivensRotationFusedAdder_uncompute_0_repetition.in_6}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
              - {name: in_1, direction: input, size: 1}
              - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_4, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_6, direction: input, size: N_spatial}
              - {name: out_0, direction: output, size: b_givens*(N_spatial - 1)}
              - {name: out_1, direction: output, size: 1}
              - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_4, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_6, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_7, direction: output, size: N_spatial}
              resources:
              - {name: active_volume, type: additive, value: '(N_spatial - 1)*(108*Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial
                  - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) +
                  4'}
              - {name: gidney_lelbows, type: additive, value: '(2*N_spatial - 2)*(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 1)'}
              - {name: gidney_relbows, type: additive, value: '(2*N_spatial - 2)*(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 1)'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 4*N_spatial - 4}
              - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + b_givens*(N_spatial
                  - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) + 1, Max(N_spatial + b_givens*(N_spatial
                  - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
                  - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                  Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
                  Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial)
                  - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial
                  - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) + Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial -
                  1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens +
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
                  N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial),
                  Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial)
                  - 1)) - Mod(2, N_spatial)) + 1)'}
              - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
              - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
              - {name: toffs, type: additive, value: '(2*N_spatial - 2)*(Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas))'}
              connections:
              - {source: GivensRotationBasisChangeDF_compute_0.out_0, target: GivensRotationBasisChangeDF_uncompute_0.in_0}
              - {source: GivensRotationBasisChangeDF_compute_0.out_1, target: GivensRotationBasisChangeDF_uncompute_0.in_1}
              - {source: GivensRotationBasisChangeDF_compute_0.out_2, target: GivensRotationBasisChangeDF_uncompute_0.in_2}
              - {source: GivensRotationBasisChangeDF_compute_0.out_3, target: GivensRotationBasisChangeDF_uncompute_0.in_3}
              - {source: GivensRotationBasisChangeDF_compute_0.out_4, target: GivensRotationBasisChangeDF_uncompute_0.in_4}
              - {source: GivensRotationBasisChangeDF_compute_0.out_5, target: GivensRotationBasisChangeDF_uncompute_0.in_5}
              - {source: GivensRotationBasisChangeDF_compute_0.out_6, target: split_0.in_0}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_0, target: out_0}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_1, target: out_2}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_2, target: out_3}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_3, target: out_4}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_4, target: out_5}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_5, target: out_6}
              - {source: GivensRotationBasisChangeDF_uncompute_0.out_6, target: out_7}
              - {source: in_0, target: GivensRotationBasisChangeDF_compute_0.in_0}
              - {source: in_1, target: z_0.thru_0}
              - {source: in_2, target: GivensRotationBasisChangeDF_compute_0.in_1}
              - {source: in_3, target: GivensRotationBasisChangeDF_compute_0.in_2}
              - {source: in_4, target: GivensRotationBasisChangeDF_compute_0.in_3}
              - {source: in_5, target: GivensRotationBasisChangeDF_compute_0.in_4}
              - {source: in_6, target: GivensRotationBasisChangeDF_compute_0.in_5}
              - {source: merge_1.out_0, target: GivensRotationBasisChangeDF_uncompute_0.in_6}
              - {source: split_0.out_0, target: z_0.thru_1}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: z_0.thru_0, target: out_1}
              - {source: z_0.thru_1, target: merge_1.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_uncompute_0
              children:
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: active_volume, type: additive, value: 3*b_givens*(N_spatial
                    - 1)}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: b_givens*(N_spatial
                    - 1)}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: b_givens*(N_spatial - 1)}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_givens*(N_spatial
                    - 1)}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_lelbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_lelbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_1
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                      + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                    + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(lambda + Max(0,
                    -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) -
                    ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                    + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_9
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_2
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_11
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_uncompute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_relbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_relbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_12
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_13
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_14
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_1
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_15
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_1
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: b_givens*(N_spatial - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '3*b_givens*(N_spatial
                  - 1) + 24*lambda + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda)
                  - 1) - 18'}
              - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: measurements, type: additive, value: b_givens*(N_spatial -
                  1)}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
                  - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                  Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
                  ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                  - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: BinaryToUnaryUncomputation_compute_0.out_0, target: merge_4.in_0}
              - {source: BinaryToUnaryUncomputation_compute_0.out_1, target: had_1.thru_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_0, target: merge_12.in_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_1, target: split_14.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_8.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: had_2.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: had_1.thru_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: had_2.thru_0, target: BinaryToUnaryUncomputation_uncompute_0.in_1}
              - {source: in_0, target: merge_2.in_1}
              - {source: in_1, target: had_0.thru_0}
              - {source: in_2, target: merge_2.in_0}
              - {source: merge_1.out_0, target: BinaryToUnaryUncomputation_compute_0.in_1}
              - {source: merge_10.out_0, target: split_11.in_0}
              - {source: merge_12.out_0, target: split_13.in_0}
              - {source: merge_15.out_0, target: qubits_free_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_9.in_0}
              - {source: qubits_alloc_0.out_0, target: split_0.in_0}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_0.out_0, target: x_0.thru_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_11.out_0, target: BinaryToUnaryUncomputation_uncompute_0.in_0}
              - {source: split_11.out_remainder, target: merge_12.in_remainder}
              - {source: split_13.out_0, target: out_1}
              - {source: split_13.out_1, target: out_0}
              - {source: split_14.out_0, target: x_1.thru_0}
              - {source: split_14.out_remainder, target: merge_15.in_remainder}
              - {source: split_3.out_0, target: BinaryToUnaryUncomputation_compute_0.in_0}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_5.out_0, target: merge_6.in_0}
              - {source: split_5.out_1, target: merge_6.in_1}
              - {source: split_7.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: split_9.out_0, target: merge_10.in_0}
              - {source: split_9.out_1, target: merge_10.in_1}
              - {source: x_0.thru_0, target: merge_1.in_0}
              - {source: x_1.thru_0, target: merge_15.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: relbow_0
              children: []
              type: relbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              - {name: thru_2, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 1}
              - {name: local_ancillae, type: qubits, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 3}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: in_1, direction: input, size: 1}
            - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_4, direction: input, size: 'Max(0, b_mas - Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: in_6, direction: input, size: ceiling(log2(R))}
            - {name: in_7, direction: input, size: N_spatial}
            - {name: in_8, direction: input, size: 1}
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: out_1, direction: output, size: 1}
            - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_4, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: out_6, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: out_7, direction: output, size: ceiling(log2(R))}
            - {name: out_8, direction: output, size: N_spatial}
            - {name: out_9, direction: output, size: 1}
            resources:
            - {name: active_volume, type: additive, value: '55*b_givens*(-1 + (b_givens*(N_spatial
                - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1) +
                3*b_givens*(N_spatial - 1) + 24*lambda + (N_spatial - 1)*(108*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + (ceiling(0.75*lambda)
                + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + (ceiling(0.75*b_givens*(N_spatial
                - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lambda)
                - 1) + 35'}
            - {name: gidney_lelbows, type: additive, value: 'lambda + (2*N_spatial
                - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lambda)
                - 1)'}
            - {name: gidney_relbows, type: additive, value: 'lambda + (2*N_spatial
                - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lambda)
                - 1)'}
            - {name: measurements, type: additive, value: b_givens*(N_spatial - 1)*(lambda
                - 1) + b_givens*(N_spatial - 1)}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 4*N_spatial - 4}
            - {name: qubit_highwater, type: qubits, value: 'Max(N_spatial + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + ceiling(log2(R)) + 2, N_spatial + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 2, N_spatial
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
                + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial -
                1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(b_givens*(N_spatial
                - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
                b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) +
                2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 3, N_spatial
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial -
                1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
                Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))
                + 3, Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(N_spatial
                + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial
                + b_givens*(N_spatial - 1) - b_givens + Max(b_givens + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
                N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2,
                N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
                N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
                - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
                + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2,
                N_spatial)) + 1) + ceiling(log2(R)) + 2)'}
            - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
            - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)'}
            - {name: toffs, type: additive, value: 'b_givens*(-1 + (b_givens*(N_spatial
                - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
                - 1)))*(N_spatial - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas))'}
            connections:
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_0, target: DataLookupClean_uncompute_0.in_1}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_1, target: relbow_0.thru_0}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_2, target: out_2}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_3, target: out_3}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_4, target: out_4}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_5, target: out_5}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_6, target: out_6}
            - {source: ApplyMajoranaFermionOperatorDF_compute_0.out_7, target: out_8}
            - {source: DataLookupClean_compute_0.out_0, target: DataLookupClean_uncompute_0.in_0}
            - {source: DataLookupClean_compute_0.out_1, target: ApplyMajoranaFermionOperatorDF_compute_0.in_0}
            - {source: DataLookupClean_compute_0.out_2, target: DataLookupClean_uncompute_0.in_2}
            - {source: DataLookupClean_uncompute_0.out_0, target: out_0}
            - {source: DataLookupClean_uncompute_0.out_1, target: out_7}
            - {source: in_0, target: DataLookupClean_compute_0.in_0}
            - {source: in_1, target: lelbow_0.thru_1}
            - {source: in_2, target: ApplyMajoranaFermionOperatorDF_compute_0.in_2}
            - {source: in_3, target: ApplyMajoranaFermionOperatorDF_compute_0.in_3}
            - {source: in_4, target: ApplyMajoranaFermionOperatorDF_compute_0.in_4}
            - {source: in_5, target: ApplyMajoranaFermionOperatorDF_compute_0.in_5}
            - {source: in_6, target: DataLookupClean_compute_0.in_1}
            - {source: in_7, target: ApplyMajoranaFermionOperatorDF_compute_0.in_6}
            - {source: in_8, target: lelbow_0.thru_2}
            - {source: lelbow_0.thru_0, target: ApplyMajoranaFermionOperatorDF_compute_0.in_1}
            - {source: lelbow_0.thru_1, target: relbow_0.thru_1}
            - {source: lelbow_0.thru_2, target: relbow_0.thru_2}
            - {source: qubits_alloc_0.out_0, target: lelbow_0.thru_0}
            - {source: relbow_0.thru_0, target: qubits_free_0.in_0}
            - {source: relbow_0.thru_1, target: out_1}
            - {source: relbow_0.thru_2, target: out_9}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: GidneyAdd_uncompute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: in_1, direction: input, size: M_r*(R - 1)}
            - {name: in_2, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            - {name: out_1, direction: output, size: M_r*(R - 1)}
            - {name: out_2, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 1)'}
            - {name: toffs, type: additive, value: 0}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
            resources:
            - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R)))'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: swap_1
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: N_spatial}
            - {name: thru_1, direction: through, size: N_spatial}
            - {name: thru_2, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 55*N_spatial}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*N_spatial + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: N_spatial}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: in_10, direction: input, size: N_spatial}
          - {name: in_11, direction: input, size: N_spatial}
          - {name: in_12, direction: input, size: 1}
          - {name: in_13, direction: input, size: 1}
          - {name: in_2, direction: input, size: M_r*(R - 1)}
          - {name: in_3, direction: input, size: b_mas}
          - {name: in_4, direction: input, size: 1}
          - {name: in_5, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: in_6, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: in_7, direction: input, size: 'Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: in_8, direction: input, size: 'Max(0, b_givens - Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: in_9, direction: input, size: ceiling(log2(R))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: out_10, direction: output, size: ceiling(log2(R))}
          - {name: out_11, direction: output, size: N_spatial}
          - {name: out_12, direction: output, size: N_spatial}
          - {name: out_13, direction: output, size: 1}
          - {name: out_14, direction: output, size: 1}
          - {name: out_2, direction: output, size: M_r*(R - 1)}
          - {name: out_3, direction: output, size: b_mas}
          - {name: out_4, direction: output, size: 1}
          - {name: out_5, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: out_6, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_7, direction: output, size: 'Max(0, b_mas - Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_8, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: out_9, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          resources:
          - {name: active_volume, type: additive, value: '110*N_spatial + 55*b_givens*(-1
              + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
              - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1) + 3*b_givens*(N_spatial
              - 1) + 24*lambda + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
              Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial
              - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
              b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              2.5, 0) - 48) + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda)
              - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial
              - 1)) + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + 114*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 114*ceiling(log2(R)) - 85'}
          - {name: gidney_lelbows, type: additive, value: 'lambda + (2*N_spatial -
              2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              1) + 2*Max(0, ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2'}
          - {name: gidney_relbows, type: additive, value: 'lambda + (2*N_spatial -
              2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              1) + 2*Max(0, ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2'}
          - {name: measurements, type: additive, value: b_givens*(N_spatial - 1)*(lambda
              - 1) + b_givens*(N_spatial - 1)}
          - {name: ppms, type: additive, value: 0}
          - {name: pprs, type: additive, value: 4*N_spatial - 4}
          - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r +
              2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 4,
              M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + N_spatial + b_mas +
              Max(N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
              + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
              + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              ceiling(log2(R)) + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1)
              + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(b_givens*(N_spatial
              - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
              b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + 2*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
              - 1) + ceiling(log2(lambda))) + 3, N_spatial + Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1)
              + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
              - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))
              + 3, Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(N_spatial
              + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
              - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2,
              N_spatial) - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial
              - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
              N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
              - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              Mod(2, N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
              1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
              b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1)
              + ceiling(log2(R)) + 2) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
              + 2)'}
          - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
              1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
          - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              2.5, 0)'}
          - {name: toffs, type: additive, value: '2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial
              - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial -
              1)))*(N_spatial - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas))'}
          connections:
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_0, target: GidneyAdd_uncompute_0.in_0}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_1, target: out_4}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_2, target: out_5}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_3, target: out_6}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_4, target: out_7}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_5, target: out_8}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_6, target: out_9}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_7, target: GidneyAdd_uncompute_0.in_2}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_8, target: swap_1.thru_0}
          - {source: BasisRotatedMajoranaOperatorDF_compute_0.out_9, target: out_14}
          - {source: GidneyAdd_compute_0.out_0, target: BasisRotatedMajoranaOperatorDF_compute_0.in_0}
          - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
          - {source: GidneyAdd_compute_0.out_2, target: BasisRotatedMajoranaOperatorDF_compute_0.in_6}
          - {source: GidneyAdd_uncompute_0.out_0, target: qubits_free_0.in_0}
          - {source: GidneyAdd_uncompute_0.out_1, target: out_2}
          - {source: GidneyAdd_uncompute_0.out_2, target: out_10}
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: in_10, target: swap_0.thru_0}
          - {source: in_11, target: swap_0.thru_1}
          - {source: in_12, target: swap_0.thru_2}
          - {source: in_13, target: BasisRotatedMajoranaOperatorDF_compute_0.in_8}
          - {source: in_2, target: GidneyAdd_compute_0.in_1}
          - {source: in_3, target: out_3}
          - {source: in_4, target: BasisRotatedMajoranaOperatorDF_compute_0.in_1}
          - {source: in_5, target: BasisRotatedMajoranaOperatorDF_compute_0.in_2}
          - {source: in_6, target: BasisRotatedMajoranaOperatorDF_compute_0.in_3}
          - {source: in_7, target: BasisRotatedMajoranaOperatorDF_compute_0.in_4}
          - {source: in_8, target: BasisRotatedMajoranaOperatorDF_compute_0.in_5}
          - {source: in_9, target: GidneyAdd_compute_0.in_2}
          - {source: qubits_alloc_0.out_0, target: GidneyAdd_compute_0.in_0}
          - {source: swap_0.thru_0, target: BasisRotatedMajoranaOperatorDF_compute_0.in_7}
          - {source: swap_0.thru_1, target: swap_1.thru_1}
          - {source: swap_0.thru_2, target: swap_1.thru_2}
          - {source: swap_1.thru_0, target: out_11}
          - {source: swap_1.thru_1, target: out_12}
          - {source: swap_1.thru_2, target: out_13}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: MultiplexedAliasSamplingDF_uncompute_0
          children:
          - name: split_0
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: ceiling(log2(R))}
            - {name: out_remainder, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: swap_0
            children: []
            type: swap
            ports:
            - {name: thru_0, direction: through, size: ceiling(log2(R))}
            - {name: thru_1, direction: through, size: 1}
            - {name: thru_2, direction: through, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: 55*ceiling(log2(R))}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2*ceiling(log2(R)) + 1}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_1
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: ceiling(log2(R))}
            - {name: in_remainder, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_2
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_remainder, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_compute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_lelbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: qubits_alloc_0.out_0, target: out_2}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: split_4
            children: []
            type: split
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: 1}
            - {name: out_remainder, direction: output, size: b_mas - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: x_0
            children: []
            type: x
            ports:
            - {name: thru_0, direction: through, size: 1}
            - {name: thru_1, direction: through, size: 1}
            resources:
            - {name: active_volume, type: additive, value: 4}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 2}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_5
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: 1}
            - {name: in_remainder, direction: input, size: b_mas - 1}
            - {name: out_0, direction: output, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: CompareLT_uncompute_0
            children:
            - name: cost_event
              children: []
              type: intrinsic_cost
              ports: []
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_relbows, type: additive, value: b_mas}
              - {name: qubit_highwater, type: qubits, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: b_mas}
              resources:
              - {name: qubit_highwater, type: qubits, value: b_mas}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: b_mas}
            - {name: out_0, direction: output, size: b_mas}
            - {name: out_1, direction: output, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 57*b_mas - 60}
            - {name: gidney_relbows, type: additive, value: b_mas}
            - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas)'}
            connections:
            - {source: in_0, target: out_0}
            - {source: in_1, target: out_1}
            - {source: in_2, target: qubits_free_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: merge_7
            children: []
            type: merge
            ports:
            - {name: in_0, direction: input, size: b_mas}
            - {name: in_remainder, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: b_mas + ceiling(log2(R))}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: had_0
            children: []
            type: had
            ports:
            - {name: thru_0, direction: through, size: b_mas}
            resources:
            - {name: active_volume, type: additive, value: 3*b_mas}
            - {name: gidney_lelbows, type: additive, value: 0}
            - {name: gidney_relbows, type: additive, value: 0}
            - {name: measurements, type: additive, value: 0}
            - {name: ppm_x_weight, type: other, value: 0}
            - {name: ppm_z_weight, type: other, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: ppr_x_weight, type: other, value: 0}
            - {name: ppr_z_weight, type: other, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: b_mas}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_1
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: b_mas}
            resources:
            - {name: qubit_highwater, type: qubits, value: b_mas}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: MultiplexedSparseDataLookupDF_uncompute_0
            children:
            - name: qubits_alloc_0
              children: []
              type: qubits_alloc
              ports:
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: DataLookupClean_uncompute_0
              children:
              - name: had_0
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 3*b_mas + 3*ceiling(log2(R))}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: read_0
                children: []
                type: read
                ports:
                - {name: thru_0, direction: through, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 0}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: b_mas + ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_2
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_compute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_lelbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_lelbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_5
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_1
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_6
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: GoogleSelectOptimized_compute_0
                children:
                - name: qubits_alloc_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: qubits_free_0
                  children: []
                  type: qubits_alloc
                  ports:
                  - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                      + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))
                      - 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                      + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                  - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                      - 1)'}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                    + 49)*Max(0, ceiling(M_r*R/lambda) - 1)'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(M_r*R/lambda)
                    - 1)'}
                - {name: qubit_highwater, type: qubits, value: 'Max(lambda + Max(0,
                    -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) -
                    ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                    + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)'}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_9
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: had_2
                children: []
                type: had
                ports:
                - {name: thru_0, direction: through, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 3*lambda}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: lambda}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                - {name: in_1, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R)))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_11
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_remainder, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: BinaryToUnaryUncomputation_uncompute_0
                children:
                - name: cost_event
                  children: []
                  type: intrinsic_cost
                  ports: []
                  resources:
                  - {name: active_volume, type: additive, value: 9*lambda - 9}
                  - {name: gidney_relbows, type: additive, value: lambda - 1}
                  - {name: qubit_highwater, type: qubits, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_1, direction: input, size: lambda}
                - {name: out_0, direction: output, size: ceiling(log2(lambda))}
                - {name: out_1, direction: output, size: lambda}
                resources:
                - {name: active_volume, type: additive, value: 9*lambda - 9}
                - {name: gidney_relbows, type: additive, value: lambda - 1}
                - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
                connections:
                - {source: in_0, target: out_0}
                - {source: in_1, target: out_1}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_12
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(lambda))}
                - {name: in_remainder, direction: input, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda))'}
                - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_13
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) +
                    ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                - {name: out_1, direction: output, size: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R))'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_14
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: lambda}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: lambda - 1}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_1
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_15
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: lambda - 1}
                - {name: out_0, direction: output, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_1
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: lambda}
                resources:
                - {name: qubit_highwater, type: qubits, value: lambda}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '3*b_mas + 24*lambda
                  + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)
                  + 3*ceiling(log2(R)) - 18'}
              - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                  - 1) - 1'}
              - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(lambda + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
                  lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: BinaryToUnaryUncomputation_compute_0.out_0, target: merge_4.in_0}
              - {source: BinaryToUnaryUncomputation_compute_0.out_1, target: had_1.thru_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_0, target: merge_12.in_0}
              - {source: BinaryToUnaryUncomputation_uncompute_0.out_1, target: split_14.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_8.in_0}
              - {source: GoogleSelectOptimized_compute_0.out_1, target: had_2.thru_0}
              - {source: had_0.thru_0, target: read_0.thru_0}
              - {source: had_1.thru_0, target: GoogleSelectOptimized_compute_0.in_1}
              - {source: had_2.thru_0, target: BinaryToUnaryUncomputation_uncompute_0.in_1}
              - {source: in_0, target: merge_2.in_1}
              - {source: in_1, target: had_0.thru_0}
              - {source: in_2, target: merge_2.in_0}
              - {source: merge_1.out_0, target: BinaryToUnaryUncomputation_compute_0.in_1}
              - {source: merge_10.out_0, target: split_11.in_0}
              - {source: merge_12.out_0, target: split_13.in_0}
              - {source: merge_15.out_0, target: qubits_free_1.in_0}
              - {source: merge_2.out_0, target: split_3.in_0}
              - {source: merge_4.out_0, target: split_5.in_0}
              - {source: merge_6.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_9.in_0}
              - {source: qubits_alloc_0.out_0, target: split_0.in_0}
              - {source: read_0.thru_0, target: qubits_free_0.in_0}
              - {source: split_0.out_0, target: x_0.thru_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_11.out_0, target: BinaryToUnaryUncomputation_uncompute_0.in_0}
              - {source: split_11.out_remainder, target: merge_12.in_remainder}
              - {source: split_13.out_0, target: out_1}
              - {source: split_13.out_1, target: out_0}
              - {source: split_14.out_0, target: x_1.thru_0}
              - {source: split_14.out_remainder, target: merge_15.in_remainder}
              - {source: split_3.out_0, target: BinaryToUnaryUncomputation_compute_0.in_0}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_5.out_0, target: merge_6.in_0}
              - {source: split_5.out_1, target: merge_6.in_1}
              - {source: split_7.out_0, target: GoogleSelectOptimized_compute_0.in_0}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: split_9.out_0, target: merge_10.in_0}
              - {source: split_9.out_1, target: merge_10.in_1}
              - {source: x_0.thru_0, target: merge_1.in_0}
              - {source: x_1.thru_0, target: merge_15.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
                - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: local_ancillae, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                    + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              - {name: in_1, direction: input, size: M_r*(R - 1)}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'Max(0, -ceiling(log2(R)) +
                  ceiling(log2(M_r*R)))'}
              - {name: out_1, direction: output, size: M_r*(R - 1)}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '57*Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + 57*ceiling(log2(R)) - 60'}
              - {name: gidney_lelbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: gidney_relbows, type: additive, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R))) + ceiling(log2(R)) - 1'}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + Max(0,
                  -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
                  - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 'Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, -ceiling(log2(R))
                  + ceiling(log2(M_r*R)))'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: b_mas + ceiling(log2(R))}
            - {name: in_1, direction: input, size: M_r*(R - 1)}
            - {name: in_2, direction: input, size: ceiling(log2(R))}
            - {name: out_0, direction: output, size: M_r*(R - 1)}
            - {name: out_1, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '3*b_mas + 24*lambda +
                (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + 114*Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 117*ceiling(log2(R)) -
                138'}
            - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 3'}
            - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(M_r*R/lambda)
                - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
                - 3'}
            - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + ceiling(log2(R)),
                M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas +
                Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
                Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0,
                -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1)
                + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 2*ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
                - 1) + ceiling(log2(lambda))))'}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: 0}
            - {name: toffs, type: additive, value: 0}
            connections:
            - {source: DataLookupClean_uncompute_0.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: DataLookupClean_uncompute_0.out_1, target: GidneyAdd_uncompute_0.in_2}
            - {source: GidneyAdd_compute_0.out_0, target: DataLookupClean_uncompute_0.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_compute_0.out_2, target: DataLookupClean_uncompute_0.in_2}
            - {source: GidneyAdd_uncompute_0.out_0, target: qubits_free_0.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_0}
            - {source: GidneyAdd_uncompute_0.out_2, target: out_1}
            - {source: in_0, target: DataLookupClean_uncompute_0.in_1}
            - {source: in_1, target: GidneyAdd_compute_0.in_1}
            - {source: in_2, target: GidneyAdd_compute_0.in_2}
            - {source: qubits_alloc_0.out_0, target: GidneyAdd_compute_0.in_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: MultiplexedRealUSPDF_uncompute_0
            children:
            - name: CompareLT_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_0
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: relbow_0
              children: []
              type: relbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_1
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_0
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Contiguizer_compute_0
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_1
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: lelbow_0
                children: []
                type: lelbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_3
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_7
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: lelbow_0
                    children: []
                    type: lelbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 44}
                    - {name: gidney_lelbows, type: additive, value: 1}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 44}
                  - {name: gidney_lelbows, type: additive, value: 1}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: lelbow_0.thru_0}
                  - {source: in_1, target: lelbow_0.thru_1}
                  - {source: in_2, target: lelbow_0.thru_2}
                  - {source: lelbow_0.thru_0, target: out_0}
                  - {source: lelbow_0.thru_1, target: out_1}
                  - {source: lelbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1,
                    ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                    (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                    + 1) - 1) + 2*M_r + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_8
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_9
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_10
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '44*M_r - 44*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_9.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_8.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_8.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_11.in_0}
              - {source: in_0, target: split_0.in_0}
              - {source: lelbow_0.thru_0, target: merge_3.in_0}
              - {source: lelbow_0.thru_1, target: x_0.thru_0}
              - {source: merge_11.out_0, target: out_1}
              - {source: merge_3.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_7.in_0}
              - {source: merge_8.out_0, target: split_10.in_0}
              - {source: merge_9.out_0, target: out_0}
              - {source: qubits_alloc_0.out_0, target: split_1.in_0}
              - {source: split_0.out_0, target: lelbow_0.thru_0}
              - {source: split_0.out_remainder, target: merge_3.in_remainder}
              - {source: split_1.out_0, target: lelbow_0.thru_1}
              - {source: split_1.out_remainder, target: merge_5.in_remainder}
              - {source: split_10.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_10.out_remainder, target: merge_11.in_remainder}
              - {source: split_6.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_6.out_remainder, target: merge_9.in_remainder}
              - {source: split_7.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_7.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_7.out_remainder, target: merge_8.in_remainder}
              - {source: x_0.thru_0, target: merge_5.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_0_repetition
              children:
              - name: Repeated_had_0
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_0.out_0, target: out_0}
              - {source: Repeated_had_0.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_0.in_0}
              - {source: in_1, target: Repeated_had_0.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: z_0
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: ceiling(log2(R))}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R))
                  - 1.5, 0) + 49*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R)) -
                  Min(2, ceiling(log2(R)))'}
              - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R)) - Min(2,
                  ceiling(log2(R)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R)) -
                  Min(2, ceiling(log2(R))) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) -
                  1.5, 0)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_1_repetition
              children:
              - name: Repeated_had_1
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_1.out_0, target: out_0}
              - {source: Repeated_had_1.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_1.in_0}
              - {source: in_1, target: Repeated_had_1.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: CompareLT_compute_1
              children:
              - name: qubits_alloc_0
                children: []
                type: qubits_alloc
                ports:
                - {name: out_0, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              - {name: out_2, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_lelbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: qubits_alloc_0.out_0, target: out_2}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_0
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_0
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_2
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_3
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_0
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_4
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_5
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_6
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_7
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_compute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_8
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_9
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_10
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_11
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_1
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_12
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_13
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_1
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_0
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_14
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 1}
              - {name: out_remainder, direction: output, size: ceiling(log2(R)) -
                  1}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: z_1
              children: []
              type: z
              ports:
              - {name: thru_0, direction: through, size: 1}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 2}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_15
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 1}
              - {name: in_remainder, direction: input, size: ceiling(log2(R)) - 1}
              - {name: out_0, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_inv_1
              children: []
              type: s_inv
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_2
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_16
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_17
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_2
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_18
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_19
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_20
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_21
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: GidneyAdd_uncompute_0
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*b_mas - 60}
                - {name: gidney_lelbows, type: additive, value: b_mas - 1}
                - {name: gidney_relbows, type: additive, value: b_mas - 1}
                - {name: local_ancillae, type: qubits, value: b_mas - 1}
                - {name: qubit_highwater, type: qubits, value: b_mas - 1}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_1, direction: input, size: b_mas}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_1, direction: output, size: b_mas}
              resources:
              - {name: active_volume, type: additive, value: 57*b_mas - 60}
              - {name: gidney_lelbows, type: additive, value: b_mas - 1}
              - {name: gidney_relbows, type: additive, value: b_mas - 1}
              - {name: qubit_highwater, type: qubits, value: 'Max(2*b_mas, 3*b_mas
                  - 1)'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_22
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_23
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_24
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: in_1, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: in_2, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: in_3, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_25
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: b_mas}
              - {name: out_remainder, direction: output, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_3
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: b_mas}
              - {name: thru_1, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 4*b_mas}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: b_mas + 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: merge_26
              children: []
              type: merge
              ports:
              - {name: in_0, direction: input, size: b_mas}
              - {name: in_remainder, direction: input, size: '-b_mas + Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: split_27
              children: []
              type: split
              ports:
              - {name: in_0, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas)'}
              - {name: out_0, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: out_1, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                  b_mas))'}
              - {name: out_3, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: had_3
              children: []
              type: had
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 3}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: s_1
              children: []
              type: s
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: active_volume, type: additive, value: 5}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: CompareLT_uncompute_1
              children:
              - name: cost_event
                children: []
                type: intrinsic_cost
                ports: []
                resources:
                - {name: active_volume, type: additive, value: 57*ceiling(log2(R))
                    - 60}
                - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
                - {name: qubit_highwater, type: qubits, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: ceiling(log2(R))}
                resources:
                - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: in_2, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: 57*ceiling(log2(R)) -
                  60}
              - {name: gidney_relbows, type: additive, value: ceiling(log2(R))}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                  + 1)'}
              connections:
              - {source: in_0, target: out_0}
              - {source: in_1, target: out_1}
              - {source: in_2, target: qubits_free_0.in_0}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: Repeated_had_2_repetition
              children:
              - name: Repeated_had_2
                children:
                - name: split_0
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: split_1
                  children: []
                  type: split
                  ports:
                  - {name: in_0, direction: input, size: ceiling(log2(R))}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_remainder, direction: output, size: ceiling(log2(R))
                      - 1}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: had_0
                  children: []
                  type: had
                  ports:
                  - {name: thru_0, direction: through, size: 1}
                  - {name: thru_1, direction: through, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 77}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppm_x_weight, type: other, value: 0}
                  - {name: ppm_z_weight, type: other, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: ppr_x_weight, type: other, value: 0}
                  - {name: ppr_z_weight, type: other, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 2}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 2}
                  - {name: toffs, type: additive, value: 0}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_2
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: ceiling(log2(R))
                      - 1}
                  - {name: out_0, direction: output, size: ceiling(log2(R))}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: ceiling(log2(R))}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                - name: merge_3
                  children: []
                  type: merge
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1)))'}
                  - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  resources:
                  - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                      + 1))) + 1'}
                  connections: []
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: in_1, direction: input, size: ceiling(log2(R))}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_1, direction: output, size: ceiling(log2(R))}
                resources:
                - {name: active_volume, type: additive, value: 77}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + ceiling(log2(R)) + 1'}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 2}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: had_0.thru_0, target: merge_3.in_0}
                - {source: had_0.thru_1, target: merge_2.in_0}
                - {source: in_0, target: split_0.in_0}
                - {source: in_1, target: split_1.in_0}
                - {source: merge_2.out_0, target: out_1}
                - {source: merge_3.out_0, target: out_0}
                - {source: split_0.out_0, target: had_0.thru_0}
                - {source: split_0.out_remainder, target: merge_3.in_remainder}
                - {source: split_1.out_0, target: had_0.thru_1}
                - {source: split_1.out_remainder, target: merge_2.in_remainder}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: ceiling(log2(R))}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_1, direction: output, size: ceiling(log2(R))}
              resources:
              - {name: active_volume, type: additive, value: '77*Min(M_r - Mod(1,
                  ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + ceiling(log2(R)) + 1'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: '2*Min(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, ceiling(log2(R)))'}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_had_2.out_0, target: out_0}
              - {source: Repeated_had_2.out_1, target: out_1}
              - {source: in_0, target: Repeated_had_2.in_0}
              - {source: in_1, target: Repeated_had_2.in_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence: {type: constant, multiplier: 1}
              meta: {}
            - name: Contiguizer_uncompute_0
              children:
              - name: split_0
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_x_0_repetition
                children:
                - name: Repeated_x_0
                  children:
                  - name: x_0
                    children: []
                    type: x
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    resources:
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 1}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  resources:
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 0}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 1}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: x_0.thru_0}
                  - {source: x_0.thru_0, target: out_0}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_x_0.out_0, target: out_0}
                - {source: in_0, target: Repeated_x_0.in_0}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_1
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_2
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_3
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: Repeated_lelbow_0_repetition
                children:
                - name: Repeated_lelbow_0
                  children:
                  - name: relbow_0
                    children: []
                    type: relbow
                    ports:
                    - {name: thru_0, direction: through, size: 1}
                    - {name: thru_1, direction: through, size: 1}
                    - {name: thru_2, direction: through, size: 1}
                    resources:
                    - {name: active_volume, type: additive, value: 5}
                    - {name: gidney_lelbows, type: additive, value: 0}
                    - {name: gidney_relbows, type: additive, value: 1}
                    - {name: local_ancillae, type: qubits, value: 0}
                    - {name: measurements, type: additive, value: 0}
                    - {name: ppm_x_weight, type: other, value: 0}
                    - {name: ppm_z_weight, type: other, value: 0}
                    - {name: ppms, type: additive, value: 0}
                    - {name: ppr_x_weight, type: other, value: 0}
                    - {name: ppr_z_weight, type: other, value: 0}
                    - {name: pprs, type: additive, value: 0}
                    - {name: qubit_highwater, type: qubits, value: 3}
                    - {name: rotations, type: additive, value: 0}
                    - {name: t_gates, type: additive, value: 0}
                    - {name: toffs, type: additive, value: 0}
                    connections: []
                    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                    local_variables: {}
                    linked_params: []
                    repetition: null
                    meta: {}
                  type: qubrick
                  ports:
                  - {name: in_0, direction: input, size: 1}
                  - {name: in_1, direction: input, size: 1}
                  - {name: in_2, direction: input, size: 1}
                  - {name: out_0, direction: output, size: 1}
                  - {name: out_1, direction: output, size: 1}
                  - {name: out_2, direction: output, size: 1}
                  resources:
                  - {name: active_volume, type: additive, value: 5}
                  - {name: gidney_lelbows, type: additive, value: 0}
                  - {name: gidney_relbows, type: additive, value: 1}
                  - {name: measurements, type: additive, value: 0}
                  - {name: ppms, type: additive, value: 0}
                  - {name: pprs, type: additive, value: 0}
                  - {name: qubit_highwater, type: qubits, value: 3}
                  - {name: rotations, type: additive, value: 0}
                  - {name: t_gates, type: additive, value: 0}
                  - {name: toffs, type: additive, value: 0}
                  connections:
                  - {source: in_0, target: relbow_0.thru_0}
                  - {source: in_1, target: relbow_0.thru_1}
                  - {source: in_2, target: relbow_0.thru_2}
                  - {source: relbow_0.thru_0, target: out_0}
                  - {source: relbow_0.thru_1, target: out_1}
                  - {source: relbow_0.thru_2, target: out_2}
                  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                  local_variables: {}
                  linked_params: []
                  repetition: null
                  meta: {}
                type: qubrick
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_2, direction: input, size: 1}
                - {name: out_0, direction: output, size: 1}
                - {name: out_1, direction: output, size: 1}
                - {name: out_2, direction: output, size: 1}
                resources:
                - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: measurements, type: additive, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 3}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections:
                - {source: Repeated_lelbow_0.out_0, target: out_0}
                - {source: Repeated_lelbow_0.out_1, target: out_1}
                - {source: Repeated_lelbow_0.out_2, target: out_2}
                - {source: in_0, target: Repeated_lelbow_0.in_0}
                - {source: in_1, target: Repeated_lelbow_0.in_1}
                - {source: in_2, target: Repeated_lelbow_0.in_2}
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence: {type: constant, multiplier: 1}
                meta: {}
              - name: merge_4
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_1, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) - 1'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_5
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_6
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: x_0
                children: []
                type: x
                ports:
                - {name: thru_0, direction: through, size: 1}
                resources:
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 1}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: split_8
                children: []
                type: split
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                - {name: out_0, direction: output, size: 1}
                - {name: out_remainder, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: relbow_0
                children: []
                type: relbow
                ports:
                - {name: thru_0, direction: through, size: 1}
                - {name: thru_1, direction: through, size: 1}
                resources:
                - {name: active_volume, type: additive, value: 4}
                - {name: gidney_lelbows, type: additive, value: 0}
                - {name: gidney_relbows, type: additive, value: 0}
                - {name: measurements, type: additive, value: 0}
                - {name: ppm_x_weight, type: other, value: 0}
                - {name: ppm_z_weight, type: other, value: 0}
                - {name: ppms, type: additive, value: 0}
                - {name: ppr_x_weight, type: other, value: 0}
                - {name: ppr_z_weight, type: other, value: 0}
                - {name: pprs, type: additive, value: 0}
                - {name: qubit_highwater, type: qubits, value: 2}
                - {name: rotations, type: additive, value: 0}
                - {name: t_gates, type: additive, value: 0}
                - {name: toffs, type: additive, value: 0}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_10
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: merge_11
                children: []
                type: merge
                ports:
                - {name: in_0, direction: input, size: 1}
                - {name: in_remainder, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1)))'}
                - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              - name: qubits_free_0
                children: []
                type: qubits_alloc
                ports:
                - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                resources:
                - {name: qubit_highwater, type: qubits, value: 'M_r - Mod(1, ceiling(log2(2
                    ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                    + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                    + 1))) + 1'}
                connections: []
                input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
                local_variables: {}
                linked_params: []
                repetition: null
                meta: {}
              type: qubrick
              ports:
              - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1'}
              resources:
              - {name: active_volume, type: additive, value: '5*M_r - 5*Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 4'}
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 'M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1)))'}
              - {name: measurements, type: additive, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 'Max(M_r - Mod(1, ceiling(log2(2
                  ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                  + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r
                  + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                  + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections:
              - {source: Repeated_lelbow_0_repetition.out_0, target: merge_5.in_0}
              - {source: Repeated_lelbow_0_repetition.out_1, target: merge_4.in_0}
              - {source: Repeated_lelbow_0_repetition.out_2, target: merge_4.in_1}
              - {source: Repeated_x_0_repetition.out_0, target: merge_1.in_0}
              - {source: in_0, target: split_2.in_0}
              - {source: in_1, target: split_0.in_0}
              - {source: merge_1.out_0, target: split_3.in_0}
              - {source: merge_10.out_0, target: qubits_free_0.in_0}
              - {source: merge_11.out_0, target: out_0}
              - {source: merge_4.out_0, target: split_6.in_0}
              - {source: merge_5.out_0, target: split_8.in_0}
              - {source: relbow_0.thru_0, target: merge_11.in_0}
              - {source: relbow_0.thru_1, target: merge_10.in_0}
              - {source: split_0.out_0, target: Repeated_x_0_repetition.in_0}
              - {source: split_0.out_remainder, target: merge_1.in_remainder}
              - {source: split_2.out_0, target: Repeated_lelbow_0_repetition.in_0}
              - {source: split_2.out_remainder, target: merge_5.in_remainder}
              - {source: split_3.out_0, target: Repeated_lelbow_0_repetition.in_1}
              - {source: split_3.out_1, target: Repeated_lelbow_0_repetition.in_2}
              - {source: split_3.out_remainder, target: merge_4.in_remainder}
              - {source: split_6.out_0, target: x_0.thru_0}
              - {source: split_6.out_remainder, target: merge_10.in_remainder}
              - {source: split_8.out_0, target: relbow_0.thru_0}
              - {source: split_8.out_remainder, target: merge_11.in_remainder}
              - {source: x_0.thru_0, target: relbow_0.thru_1}
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: RotationCatalystStatePrep_uncompute_0
              children: []
              type: qubrick
              ports:
              - {name: thru_0, direction: through, size: 'Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas))'}
              - {name: thru_1, direction: through, size: 'Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
              - {name: thru_2, direction: through, size: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas))'}
              - {name: thru_3, direction: through, size: 'Max(b_as, b_givens, b_mas)'}
              resources:
              - {name: qubit_highwater, type: qubits, value: 'Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas)'}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: x_4
              children: []
              type: x
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: relbow_1
              children: []
              type: relbow
              ports:
              - {name: thru_0, direction: through, size: 1}
              resources:
              - {name: gidney_lelbows, type: additive, value: 0}
              - {name: gidney_relbows, type: additive, value: 0}
              - {name: measurements, type: additive, value: 0}
              - {name: ppm_x_weight, type: other, value: 0}
              - {name: ppm_z_weight, type: other, value: 0}
              - {name: ppms, type: additive, value: 0}
              - {name: ppr_x_weight, type: other, value: 0}
              - {name: ppr_z_weight, type: other, value: 0}
              - {name: pprs, type: additive, value: 0}
              - {name: qubit_highwater, type: qubits, value: 1}
              - {name: rotations, type: additive, value: 0}
              - {name: t_gates, type: additive, value: 0}
              - {name: toffs, type: additive, value: 0}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            - name: qubits_free_1
              children: []
              type: qubits_alloc
              ports:
              - {name: in_0, direction: input, size: 1}
              resources:
              - {name: qubit_highwater, type: qubits, value: 1}
              connections: []
              input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
              local_variables: {}
              linked_params: []
              repetition: null
              meta: {}
            type: qubrick
            ports:
            - {name: in_0, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                + 1'}
            - {name: in_1, direction: input, size: b_mas}
            - {name: in_2, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: in_3, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_4, direction: input, size: 'Max(0, b_mas - Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas))'}
            - {name: in_5, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: in_6, direction: input, size: ceiling(log2(R))}
            - {name: in_7, direction: input, size: 1}
            - {name: in_8, direction: input, size: 1}
            - {name: out_0, direction: output, size: 'M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1'}
            - {name: out_1, direction: output, size: b_mas}
            - {name: out_2, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
            - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_4, direction: output, size: 'Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas))'}
            - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
            - {name: out_6, direction: output, size: ceiling(log2(R))}
            resources:
            - {name: active_volume, type: additive, value: '49*M_r + 130*b_mas + 47*Heaviside(ceiling(log2(R))
                - 1.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R)) - 49*Min(2,
                ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                - 312'}
            - {name: gidney_lelbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: gidney_relbows, type: additive, value: 'M_r + 2*b_mas - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 3*ceiling(log2(R)) - Min(2, ceiling(log2(R))) - 2'}
            - {name: measurements, type: additive, value: 0}
            - {name: ppms, type: additive, value: 0}
            - {name: pprs, type: additive, value: 0}
            - {name: qubit_highwater, type: qubits, value: 'Max(M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas + Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
                2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas +
                Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r +
                b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r
                + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
                + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
                3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas
                + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
                ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
                + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
                + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
                b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
                1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)'}
            - {name: rotations, type: additive, value: 0}
            - {name: t_gates, type: additive, value: '6*Min(M_r - Mod(1, ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 1, ceiling(log2(R)))'}
            - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) - 1.5,
                0)'}
            connections:
            - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
            - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
            - {source: CompareLT_compute_0.out_2, target: split_0.in_0}
            - {source: CompareLT_compute_1.out_0, target: CompareLT_uncompute_1.in_0}
            - {source: CompareLT_compute_1.out_1, target: CompareLT_uncompute_1.in_1}
            - {source: CompareLT_compute_1.out_2, target: split_14.in_0}
            - {source: CompareLT_uncompute_0.out_0, target: Contiguizer_compute_0.in_0}
            - {source: CompareLT_uncompute_0.out_1, target: Repeated_had_0_repetition.in_1}
            - {source: CompareLT_uncompute_1.out_0, target: Contiguizer_uncompute_0.in_0}
            - {source: CompareLT_uncompute_1.out_1, target: Repeated_had_2_repetition.in_1}
            - {source: Contiguizer_compute_0.out_0, target: CompareLT_compute_1.in_0}
            - {source: Contiguizer_compute_0.out_1, target: Repeated_had_0_repetition.in_0}
            - {source: Contiguizer_uncompute_0.out_0, target: out_0}
            - {source: GidneyAdd_compute_0.out_0, target: merge_8.in_0}
            - {source: GidneyAdd_compute_0.out_1, target: GidneyAdd_uncompute_0.in_1}
            - {source: GidneyAdd_uncompute_0.out_0, target: merge_22.in_0}
            - {source: GidneyAdd_uncompute_0.out_1, target: out_1}
            - {source: Repeated_had_0_repetition.out_0, target: Repeated_had_1_repetition.in_0}
            - {source: Repeated_had_0_repetition.out_1, target: z_0.thru_0}
            - {source: Repeated_had_1_repetition.out_0, target: Repeated_had_2_repetition.in_0}
            - {source: Repeated_had_1_repetition.out_1, target: CompareLT_compute_1.in_1}
            - {source: Repeated_had_2_repetition.out_0, target: Contiguizer_uncompute_0.in_1}
            - {source: Repeated_had_2_repetition.out_1, target: out_6}
            - {source: RotationCatalystStatePrep_uncompute_0.thru_0, target: out_4}
            - {source: RotationCatalystStatePrep_uncompute_0.thru_1, target: out_5}
            - {source: RotationCatalystStatePrep_uncompute_0.thru_2, target: out_3}
            - {source: RotationCatalystStatePrep_uncompute_0.thru_3, target: out_2}
            - {source: had_0.thru_0, target: x_0.thru_1}
            - {source: had_1.thru_0, target: s_0.thru_0}
            - {source: had_2.thru_0, target: x_2.thru_1}
            - {source: had_3.thru_0, target: s_1.thru_0}
            - {source: in_0, target: CompareLT_compute_0.in_0}
            - {source: in_1, target: GidneyAdd_compute_0.in_1}
            - {source: in_2, target: merge_2.in_3}
            - {source: in_3, target: merge_2.in_2}
            - {source: in_4, target: merge_2.in_0}
            - {source: in_5, target: merge_2.in_1}
            - {source: in_6, target: CompareLT_compute_0.in_1}
            - {source: in_7, target: z_0.thru_1}
            - {source: in_8, target: relbow_0.thru_1}
            - {source: merge_1.out_0, target: CompareLT_uncompute_0.in_2}
            - {source: merge_10.out_0, target: split_11.in_0}
            - {source: merge_12.out_0, target: split_13.in_0}
            - {source: merge_15.out_0, target: CompareLT_uncompute_1.in_2}
            - {source: merge_16.out_0, target: split_17.in_0}
            - {source: merge_18.out_0, target: split_19.in_0}
            - {source: merge_2.out_0, target: split_3.in_0}
            - {source: merge_20.out_0, target: split_21.in_0}
            - {source: merge_22.out_0, target: split_23.in_0}
            - {source: merge_24.out_0, target: split_25.in_0}
            - {source: merge_26.out_0, target: split_27.in_0}
            - {source: merge_4.out_0, target: split_5.in_0}
            - {source: merge_6.out_0, target: split_7.in_0}
            - {source: merge_8.out_0, target: split_9.in_0}
            - {source: relbow_0.thru_0, target: merge_1.in_0}
            - {source: relbow_0.thru_1, target: qubits_free_0.in_0}
            - {source: relbow_1.thru_0, target: qubits_free_1.in_0}
            - {source: s_0.thru_0, target: z_1.thru_1}
            - {source: s_1.thru_0, target: x_4.thru_0}
            - {source: s_inv_0.thru_0, target: had_0.thru_0}
            - {source: s_inv_1.thru_0, target: had_2.thru_0}
            - {source: split_0.out_0, target: relbow_0.thru_0}
            - {source: split_0.out_remainder, target: merge_1.in_remainder}
            - {source: split_11.out_0, target: x_1.thru_0}
            - {source: split_11.out_remainder, target: merge_12.in_remainder}
            - {source: split_13.out_0, target: merge_16.in_0}
            - {source: split_13.out_1, target: merge_16.in_1}
            - {source: split_13.out_2, target: merge_16.in_2}
            - {source: split_13.out_3, target: merge_16.in_3}
            - {source: split_14.out_0, target: z_1.thru_0}
            - {source: split_14.out_remainder, target: merge_15.in_remainder}
            - {source: split_17.out_0, target: x_2.thru_0}
            - {source: split_17.out_remainder, target: merge_18.in_remainder}
            - {source: split_19.out_0, target: merge_20.in_0}
            - {source: split_19.out_1, target: merge_20.in_1}
            - {source: split_19.out_2, target: merge_20.in_2}
            - {source: split_19.out_3, target: merge_20.in_3}
            - {source: split_21.out_0, target: GidneyAdd_uncompute_0.in_0}
            - {source: split_21.out_remainder, target: merge_22.in_remainder}
            - {source: split_23.out_0, target: merge_24.in_0}
            - {source: split_23.out_1, target: merge_24.in_1}
            - {source: split_23.out_2, target: merge_24.in_2}
            - {source: split_23.out_3, target: merge_24.in_3}
            - {source: split_25.out_0, target: x_3.thru_0}
            - {source: split_25.out_remainder, target: merge_26.in_remainder}
            - {source: split_27.out_0, target: RotationCatalystStatePrep_uncompute_0.thru_0}
            - {source: split_27.out_1, target: RotationCatalystStatePrep_uncompute_0.thru_1}
            - {source: split_27.out_2, target: RotationCatalystStatePrep_uncompute_0.thru_2}
            - {source: split_27.out_3, target: RotationCatalystStatePrep_uncompute_0.thru_3}
            - {source: split_3.out_0, target: x_0.thru_0}
            - {source: split_3.out_remainder, target: merge_4.in_remainder}
            - {source: split_5.out_0, target: merge_6.in_0}
            - {source: split_5.out_1, target: merge_6.in_1}
            - {source: split_5.out_2, target: merge_6.in_2}
            - {source: split_5.out_3, target: merge_6.in_3}
            - {source: split_7.out_0, target: GidneyAdd_compute_0.in_0}
            - {source: split_7.out_remainder, target: merge_8.in_remainder}
            - {source: split_9.out_0, target: merge_10.in_0}
            - {source: split_9.out_1, target: merge_10.in_1}
            - {source: split_9.out_2, target: merge_10.in_2}
            - {source: split_9.out_3, target: merge_10.in_3}
            - {source: x_0.thru_0, target: merge_4.in_0}
            - {source: x_0.thru_1, target: x_1.thru_1}
            - {source: x_1.thru_0, target: merge_12.in_0}
            - {source: x_1.thru_1, target: had_1.thru_0}
            - {source: x_2.thru_0, target: merge_18.in_0}
            - {source: x_2.thru_1, target: x_3.thru_1}
            - {source: x_3.thru_0, target: merge_26.in_0}
            - {source: x_3.thru_1, target: had_3.thru_0}
            - {source: x_4.thru_0, target: relbow_1.thru_0}
            - {source: z_0.thru_0, target: Repeated_had_1_repetition.in_1}
            - {source: z_0.thru_1, target: s_inv_0.thru_0}
            - {source: z_1.thru_0, target: merge_15.in_0}
            - {source: z_1.thru_1, target: s_inv_1.thru_0}
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: b_mas + ceiling(log2(R))}
          - {name: in_10, direction: input, size: 'Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: in_11, direction: input, size: ceiling(log2(R))}
          - {name: in_12, direction: input, size: 1}
          - {name: in_13, direction: input, size: 1}
          - {name: in_14, direction: input, size: 1}
          - {name: in_2, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: in_3, direction: input, size: M_r*(R - 1)}
          - {name: in_4, direction: input, size: b_mas}
          - {name: in_5, direction: input, size: b_mas}
          - {name: in_6, direction: input, size: 1}
          - {name: in_7, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: in_8, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: in_9, direction: input, size: 'Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
          - {name: out_2, direction: output, size: M_r*(R - 1)}
          - {name: out_3, direction: output, size: b_mas}
          - {name: out_4, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
          - {name: out_5, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_6, direction: output, size: 'Max(0, b_mas - Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas))'}
          - {name: out_7, direction: output, size: 'Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
          - {name: out_8, direction: output, size: ceiling(log2(R))}
          - {name: out_9, direction: output, size: 1}
          resources:
          - {name: active_volume, type: additive, value: '49*M_r + 250*b_mas + 24*lambda
              + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(M_r*R/lambda) - 1) + 114*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 47*Heaviside(ceiling(log2(R))
              - 1.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 449*ceiling(log2(R)) - 49*Min(2,
              ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - 566'}
          - {name: gidney_lelbows, type: additive, value: 'M_r + 3*b_mas + lambda
              + Max(0, ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 5'}
          - {name: gidney_relbows, type: additive, value: 'M_r + 3*b_mas + lambda
              + Max(0, ceiling(M_r*R/lambda) - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - 5'}
          - {name: measurements, type: additive, value: b_mas + ceiling(log2(R))}
          - {name: ppms, type: additive, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r +
              b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2,
              M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r +
              b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
              + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) +
              b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) +
              ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(M_r*(R
              - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda
              + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
              b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
              Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
              - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r
              + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
              ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas
              - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
              + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas)
              + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas
              + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
              1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
              b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1)'}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: '6*Min(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 1, ceiling(log2(R)))'}
          - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) - 1.5,
              0) + ceiling(log2(R))'}
          connections:
          - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
          - {source: CompareLT_compute_0.out_1, target: CompareLT_uncompute_0.in_1}
          - {source: CompareLT_compute_0.out_2, target: split_4.in_0}
          - {source: CompareLT_uncompute_0.out_0, target: merge_7.in_0}
          - {source: CompareLT_uncompute_0.out_1, target: had_0.thru_0}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_0, target: out_1}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_1, target: out_3}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_2, target: out_4}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_3, target: out_5}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_4, target: out_6}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_5, target: out_7}
          - {source: MultiplexedRealUSPDF_uncompute_0.out_6, target: out_8}
          - {source: MultiplexedSparseDataLookupDF_uncompute_0.out_0, target: out_2}
          - {source: MultiplexedSparseDataLookupDF_uncompute_0.out_1, target: MultiplexedRealUSPDF_uncompute_0.in_6}
          - {source: had_0.thru_0, target: qubits_free_1.in_0}
          - {source: in_0, target: out_0}
          - {source: in_1, target: split_0.in_0}
          - {source: in_10, target: MultiplexedRealUSPDF_uncompute_0.in_5}
          - {source: in_11, target: swap_0.thru_2}
          - {source: in_12, target: MultiplexedRealUSPDF_uncompute_0.in_7}
          - {source: in_13, target: out_9}
          - {source: in_14, target: MultiplexedRealUSPDF_uncompute_0.in_8}
          - {source: in_2, target: MultiplexedRealUSPDF_uncompute_0.in_0}
          - {source: in_3, target: MultiplexedSparseDataLookupDF_uncompute_0.in_1}
          - {source: in_4, target: MultiplexedRealUSPDF_uncompute_0.in_1}
          - {source: in_5, target: CompareLT_compute_0.in_1}
          - {source: in_6, target: swap_0.thru_1}
          - {source: in_7, target: MultiplexedRealUSPDF_uncompute_0.in_2}
          - {source: in_8, target: MultiplexedRealUSPDF_uncompute_0.in_3}
          - {source: in_9, target: MultiplexedRealUSPDF_uncompute_0.in_4}
          - {source: merge_1.out_0, target: split_2.in_0}
          - {source: merge_5.out_0, target: CompareLT_uncompute_0.in_2}
          - {source: merge_7.out_0, target: MultiplexedSparseDataLookupDF_uncompute_0.in_0}
          - {source: split_0.out_0, target: swap_0.thru_0}
          - {source: split_0.out_remainder, target: merge_1.in_remainder}
          - {source: split_2.out_0, target: CompareLT_compute_0.in_0}
          - {source: split_2.out_remainder, target: merge_7.in_remainder}
          - {source: split_4.out_0, target: x_0.thru_1}
          - {source: split_4.out_remainder, target: merge_5.in_remainder}
          - {source: swap_0.thru_0, target: merge_1.in_0}
          - {source: swap_0.thru_1, target: x_0.thru_0}
          - {source: swap_0.thru_2, target: MultiplexedSparseDataLookupDF_uncompute_0.in_2}
          - {source: x_0.thru_0, target: qubits_free_0.in_0}
          - {source: x_0.thru_1, target: merge_5.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_1
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 3}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: relbow_0
          children: []
          type: relbow
          ports:
          - {name: thru_0, direction: through, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
          - {name: thru_1, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: '5*Heaviside(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - 1.5, 0) + 49*(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 49*Min(2, Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: gidney_lelbows, type: additive, value: 'Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: gidney_relbows, type: additive, value: 'Heaviside(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - 1.5, 0) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: local_ancillae, type: qubits, value: 'Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))'}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: '2*(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
              - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1)))) + 1'}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: 1}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: in_1, direction: input, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: in_10, direction: input, size: N_spatial}
        - {name: in_11, direction: input, size: 1}
        - {name: in_2, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: in_3, direction: input, size: M_r*(R - 1)}
        - {name: in_4, direction: input, size: b_mas}
        - {name: in_5, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
        - {name: in_6, direction: input, size: 'Max(0, b_mas - Max(b_as, b_givens,
            b_mas))'}
        - {name: in_7, direction: input, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
        - {name: in_8, direction: input, size: ceiling(log2(R))}
        - {name: in_9, direction: input, size: N_spatial}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        - {name: out_1, direction: output, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: out_10, direction: output, size: ceiling(log2(R))}
        - {name: out_11, direction: output, size: N_spatial}
        - {name: out_12, direction: output, size: N_spatial}
        - {name: out_13, direction: output, size: 1}
        - {name: out_2, direction: output, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: out_3, direction: output, size: M_r*(R - 1)}
        - {name: out_4, direction: output, size: b_mas}
        - {name: out_5, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
        - {name: out_6, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
            b_mas))'}
        - {name: out_7, direction: output, size: 'Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
        - {name: out_8, direction: output, size: 'Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
        - {name: out_9, direction: output, size: 'Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
        resources:
        - {name: active_volume, type: additive, value: '98*M_r + 110*N_spatial + 55*b_givens*(-1
            + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
            - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial - 1)*(lambda - 1) + 3*b_givens*(N_spatial
            - 1) + 497*b_mas + 48*lambda + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda
            - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
            + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
            b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) +
            108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens,
            b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48)
            + (3*b_mas + 3*ceiling(log2(R)))*(lambda - 1) + (2*ceiling(0.75*lambda)
            + 98)*Max(0, ceiling(M_r*R/lambda) - 1) + (ceiling(0.75*b_givens*(N_spatial
            - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lambda)
            - 1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda
            - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lambda) - 1)
            + 342*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + 49*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
            1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 94*Heaviside(ceiling(log2(R))
            - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2.5, 0) + 1009*ceiling(log2(R)) - 98*Min(2,
            Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
            - 98*Min(2, ceiling(log2(R))) + 462*Min(M_r - Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - 1193'}
        - {name: gidney_lelbows, type: additive, value: '2*M_r + 6*b_mas + 2*lambda
            + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 1) + 4*Max(0, ceiling(M_r*R/lambda) - 1) + 6*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 12*ceiling(log2(R))
            - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)))) - 2*Min(2, ceiling(log2(R))) - 11'}
        - {name: gidney_relbows, type: additive, value: '2*M_r + 6*b_mas + 2*lambda
            + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 1) + 4*Max(0, ceiling(M_r*R/lambda) - 1) + 6*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 12*ceiling(log2(R))
            - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)))) - 2*Min(2, ceiling(log2(R))) - 11'}
        - {name: measurements, type: additive, value: b_givens*(N_spatial - 1)*(lambda
            - 1) + b_givens*(N_spatial - 1) + b_mas + (b_mas + ceiling(log2(R)))*(lambda
            - 1) + ceiling(log2(R))}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 4*N_spatial - 4}
        - {name: qubit_highwater, type: qubits, value: 'Max(M_r*(R - 1) + M_r + 2*N_spatial
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1))
            + 2, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
            + ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas +
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R +
            1)) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)))) + 3, M_r*(R - 1) + M_r + 2*N_spatial
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
            + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 2*N_spatial + b_mas +
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
            + ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas +
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + ceiling(log2(R)) + ceiling(log2(R + 1)) - Min(2, Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) + 3, 2*N_spatial +
            Max(M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas)
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
            - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)),
            M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
            b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
            - ceiling(log2(lambda)), b_mas + (b_mas + ceiling(log2(R)))*(lambda -
            1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 3*ceiling(log2(R))
            - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
            + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            1, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2,
            ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 3, M_r + b_mas + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, b_mas
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
            b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1))
            + 1) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
            2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1, 2*N_spatial + Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas)
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
            - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
            - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)),
            M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
            Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
            - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
            - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
            (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
            - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            1, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2,
            ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
            b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
            + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1))
            + 1) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
            2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1, 2*b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial
            + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R +
            1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
            M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
            - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4,
            M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
            + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R +
            1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
            + 4, M_r*(R - 1) + M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + ceiling(log2(R)) + 2, N_spatial + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + ceiling(log2(R)) + 2, N_spatial + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) +
            ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0,
            -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
            - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(b_givens*(N_spatial -
            1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)), b_givens*(N_spatial
            - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + 2*Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
            - 1) + ceiling(log2(lambda))) + 3, N_spatial + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
            + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1) +
            Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(lambda
            + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
            - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))
            + 3, Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(N_spatial
            + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, Max(N_spatial
            + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
            N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
            + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial
            - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial
            + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
            + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
            b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2,
            N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
            + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial),
            Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1,
            b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens,
            b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1) + ceiling(log2(R))
            + 2) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
            2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2) + Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) +
            2)'}
        - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) +
            Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) -
            Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))'}
        - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2.5, 0) + 12*Min(M_r - Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
        - {name: toffs, type: additive, value: '2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial
            - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
            - 1) + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
            + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + (2*N_spatial - 2)*(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + 2*Heaviside(ceiling(log2(R))
            - 1.5, 0) + 2*ceiling(log2(R))'}
        connections:
        - {source: MultiplexedAliasSamplingDF_compute_0.out_0, target: OneElectronTermSelect_compute_0.in_0}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_1, target: MultiplexedAliasSamplingDF_uncompute_0.in_1}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_10, target: OneElectronTermSelect_compute_0.in_8}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_11, target: OneElectronTermSelect_compute_0.in_9}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_12, target: MultiplexedAliasSamplingDF_uncompute_0.in_12}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_13, target: OneElectronTermSelect_compute_0.in_12}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_14, target: OneElectronTermSelect_compute_0.in_13}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_2, target: OneElectronTermSelect_compute_0.in_1}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_3, target: OneElectronTermSelect_compute_0.in_2}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_4, target: OneElectronTermSelect_compute_0.in_3}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_5, target: MultiplexedAliasSamplingDF_uncompute_0.in_5}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_6, target: MultiplexedAliasSamplingDF_uncompute_0.in_6}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_7, target: OneElectronTermSelect_compute_0.in_5}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_8, target: OneElectronTermSelect_compute_0.in_6}
        - {source: MultiplexedAliasSamplingDF_compute_0.out_9, target: OneElectronTermSelect_compute_0.in_7}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_0, target: out_0}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_1, target: out_2}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_2, target: out_3}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_3, target: out_4}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_4, target: out_5}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_5, target: out_6}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_6, target: out_7}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_7, target: out_8}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_8, target: out_10}
        - {source: MultiplexedAliasSamplingDF_uncompute_0.out_9, target: had_1.thru_0}
        - {source: OneElectronTermSelect_compute_0.out_0, target: MultiplexedAliasSamplingDF_uncompute_0.in_0}
        - {source: OneElectronTermSelect_compute_0.out_1, target: MultiplexedAliasSamplingDF_uncompute_0.in_2}
        - {source: OneElectronTermSelect_compute_0.out_10, target: MultiplexedAliasSamplingDF_uncompute_0.in_11}
        - {source: OneElectronTermSelect_compute_0.out_11, target: out_11}
        - {source: OneElectronTermSelect_compute_0.out_12, target: out_12}
        - {source: OneElectronTermSelect_compute_0.out_13, target: MultiplexedAliasSamplingDF_uncompute_0.in_13}
        - {source: OneElectronTermSelect_compute_0.out_14, target: MultiplexedAliasSamplingDF_uncompute_0.in_14}
        - {source: OneElectronTermSelect_compute_0.out_2, target: MultiplexedAliasSamplingDF_uncompute_0.in_3}
        - {source: OneElectronTermSelect_compute_0.out_3, target: MultiplexedAliasSamplingDF_uncompute_0.in_4}
        - {source: OneElectronTermSelect_compute_0.out_4, target: relbow_0.thru_1}
        - {source: OneElectronTermSelect_compute_0.out_5, target: MultiplexedAliasSamplingDF_uncompute_0.in_7}
        - {source: OneElectronTermSelect_compute_0.out_6, target: MultiplexedAliasSamplingDF_uncompute_0.in_8}
        - {source: OneElectronTermSelect_compute_0.out_7, target: MultiplexedAliasSamplingDF_uncompute_0.in_9}
        - {source: OneElectronTermSelect_compute_0.out_8, target: MultiplexedAliasSamplingDF_uncompute_0.in_10}
        - {source: OneElectronTermSelect_compute_0.out_9, target: out_9}
        - {source: had_0.thru_0, target: MultiplexedAliasSamplingDF_compute_0.in_8}
        - {source: had_1.thru_0, target: out_13}
        - {source: in_0, target: MultiplexedAliasSamplingDF_compute_0.in_0}
        - {source: in_1, target: lelbow_0.thru_0}
        - {source: in_10, target: OneElectronTermSelect_compute_0.in_11}
        - {source: in_11, target: had_0.thru_0}
        - {source: in_2, target: MultiplexedAliasSamplingDF_compute_0.in_1}
        - {source: in_3, target: MultiplexedAliasSamplingDF_compute_0.in_2}
        - {source: in_4, target: MultiplexedAliasSamplingDF_compute_0.in_3}
        - {source: in_5, target: MultiplexedAliasSamplingDF_compute_0.in_4}
        - {source: in_6, target: MultiplexedAliasSamplingDF_compute_0.in_5}
        - {source: in_7, target: MultiplexedAliasSamplingDF_compute_0.in_6}
        - {source: in_8, target: MultiplexedAliasSamplingDF_compute_0.in_7}
        - {source: in_9, target: OneElectronTermSelect_compute_0.in_10}
        - {source: lelbow_0.thru_0, target: relbow_0.thru_0}
        - {source: lelbow_0.thru_1, target: OneElectronTermSelect_compute_0.in_4}
        - {source: qubits_alloc_0.out_0, target: lelbow_0.thru_1}
        - {source: relbow_0.thru_0, target: out_1}
        - {source: relbow_0.thru_1, target: qubits_free_0.in_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_7
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: 'Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: in_1, direction: input, size: 'M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1'}
        - {name: in_2, direction: input, size: M_r*(R - 1)}
        - {name: in_3, direction: input, size: b_mas}
        - {name: in_remainder, direction: input, size: -M_r*(R - 1) - M_r - b_mas
            + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
            - 1}
        - {name: out_0, direction: output, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: DataLookupClean_uncompute_0
        children:
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: read_0
          children: []
          type: read
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: active_volume, type: additive, value: 0}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_0
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: lambda}
          - {name: out_0, direction: output, size: 1}
          - {name: out_remainder, direction: output, size: lambda - 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: x_0
          children: []
          type: x
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_1
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: 1}
          - {name: in_remainder, direction: input, size: lambda - 1}
          - {name: out_0, direction: output, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_2
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_remainder, direction: output, size: -ceiling(log2(lambda))
              + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: BinaryToUnaryUncomputation_compute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 9*lambda - 9}
            - {name: gidney_lelbows, type: additive, value: lambda - 1}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_1, direction: input, size: lambda}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_1, direction: output, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 9*lambda - 9}
          - {name: gidney_lelbows, type: additive, value: lambda - 1}
          - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_3
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_remainder, direction: input, size: -ceiling(log2(lambda)) +
              ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_1
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 3*lambda}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: lambda}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_4
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: GoogleSelectOptimized_compute_0
          children:
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                + 49)*Max(0, ceiling(R/lambda) - 1)'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(R/lambda)
                - 1)'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(R/lambda)
                - 1)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_1, direction: input, size: lambda}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_1, direction: output, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda) +
              49)*Max(0, ceiling(R/lambda) - 1)'}
          - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling(R/lambda)
              - 1)'}
          - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling(R/lambda)
              - 1)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(lambda - ceiling(log2(lambda))
              + ceiling(log2(R + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R
              + 1)) - 1)'}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_5
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_2
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 3*lambda}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: lambda}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_6
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_remainder, direction: output, size: -ceiling(log2(lambda))
              + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: BinaryToUnaryUncomputation_uncompute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 9*lambda - 9}
            - {name: gidney_relbows, type: additive, value: lambda - 1}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_1, direction: input, size: lambda}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_1, direction: output, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 9*lambda - 9}
          - {name: gidney_relbows, type: additive, value: lambda - 1}
          - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_7
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_remainder, direction: input, size: -ceiling(log2(lambda)) +
              ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_8
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: lambda}
          - {name: out_0, direction: output, size: 1}
          - {name: out_remainder, direction: output, size: lambda - 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: x_1
          children: []
          type: x
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_9
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: 1}
          - {name: in_remainder, direction: input, size: lambda - 1}
          - {name: out_0, direction: output, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_1
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: in_1, direction: input, size: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        resources:
        - {name: active_volume, type: additive, value: '24*lambda + (ceiling(0.75*lambda)
            + 49)*Max(0, ceiling(R/lambda) - 1) + 3*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 18'}
        - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling(R/lambda)
            - 1) - 1'}
        - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling(R/lambda)
            - 1) - 1'}
        - {name: measurements, type: additive, value: ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
            lambda + ceiling(log2(R + 1)), Max(lambda - ceiling(log2(lambda)) + ceiling(log2(R
            + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)) - 1)
            + ceiling(log2(lambda)), ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))'}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections:
        - {source: BinaryToUnaryUncomputation_compute_0.out_0, target: merge_3.in_0}
        - {source: BinaryToUnaryUncomputation_compute_0.out_1, target: had_1.thru_0}
        - {source: BinaryToUnaryUncomputation_uncompute_0.out_0, target: merge_7.in_0}
        - {source: BinaryToUnaryUncomputation_uncompute_0.out_1, target: split_8.in_0}
        - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_5.in_0}
        - {source: GoogleSelectOptimized_compute_0.out_1, target: had_2.thru_0}
        - {source: had_0.thru_0, target: read_0.thru_0}
        - {source: had_1.thru_0, target: GoogleSelectOptimized_compute_0.in_1}
        - {source: had_2.thru_0, target: BinaryToUnaryUncomputation_uncompute_0.in_1}
        - {source: in_0, target: split_2.in_0}
        - {source: in_1, target: had_0.thru_0}
        - {source: merge_1.out_0, target: BinaryToUnaryUncomputation_compute_0.in_1}
        - {source: merge_3.out_0, target: split_4.in_0}
        - {source: merge_5.out_0, target: split_6.in_0}
        - {source: merge_7.out_0, target: out_0}
        - {source: merge_9.out_0, target: qubits_free_1.in_0}
        - {source: qubits_alloc_0.out_0, target: split_0.in_0}
        - {source: read_0.thru_0, target: qubits_free_0.in_0}
        - {source: split_0.out_0, target: x_0.thru_0}
        - {source: split_0.out_remainder, target: merge_1.in_remainder}
        - {source: split_2.out_0, target: BinaryToUnaryUncomputation_compute_0.in_0}
        - {source: split_2.out_remainder, target: merge_3.in_remainder}
        - {source: split_4.out_0, target: GoogleSelectOptimized_compute_0.in_0}
        - {source: split_4.out_remainder, target: merge_5.in_remainder}
        - {source: split_6.out_0, target: BinaryToUnaryUncomputation_uncompute_0.in_0}
        - {source: split_6.out_remainder, target: merge_7.in_remainder}
        - {source: split_8.out_0, target: x_1.thru_0}
        - {source: split_8.out_remainder, target: merge_9.in_remainder}
        - {source: x_0.thru_0, target: merge_1.in_0}
        - {source: x_1.thru_0, target: merge_9.in_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      type: qubrick
      ports:
      - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
      - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
      - {name: in_2, direction: input, size: ceiling(log2(R))}
      - {name: in_3, direction: input, size: N_spatial}
      - {name: in_4, direction: input, size: N_spatial}
      - {name: in_5, direction: input, size: 1}
      - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
      - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
      - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens,
          b_mas))'}
      - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
      - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
      - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas))'}
      - {name: out_6, direction: output, size: ceiling(log2(R))}
      - {name: out_7, direction: output, size: N_spatial}
      - {name: out_8, direction: output, size: N_spatial}
      - {name: out_9, direction: output, size: 1}
      resources:
      - {name: active_volume, type: additive, value: '196*M_r + 220*N_spatial + 110*b_givens*(-1
          + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial
          - 1)))*(N_spatial - 1) + 6*b_givens*(N_spatial - 1)*(lambda - 1) + 6*b_givens*(N_spatial
          - 1) + 994*b_mas + 120*lambda + (-2 + 2*(b_mas + (b_mas + ceiling(log2(R)))*(lambda
          - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
          + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0,
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
          b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48)
          + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
          b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0) - 48) + (6*b_mas + 6*ceiling(log2(R)))*(lambda
          - 1) + (3*lambda - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1)) + ((55*(lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 55*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + (ceiling(0.75*lambda) + 49)*Max(0,
          ceiling(R/lambda) - 1) + (4*ceiling(0.75*lambda) + 196)*Max(0, ceiling(M_r*R/lambda)
          - 1) + (ceiling((0.75*lambda - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lambda)
          - 1) + (2*ceiling(0.75*b_givens*(N_spatial - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial
          - 1)) + 98)*Max(0, ceiling(M_r*R/lambda) - 1) + (2*ceiling(0.75*b_mas +
          (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1) + 0.75*ceiling(log2(R)))
          + 98)*Max(0, ceiling(M_r*R/lambda) - 1) + 3*Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + 684*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0,
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
          b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - 2.5, 0)) + 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 5*Heaviside(1.5
          - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as,
          b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0) + 49*Heaviside(Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 188*Heaviside(ceiling(log2(R))
          - 1.5, 0) + 47*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
          1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
          1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) +
          5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2067*ceiling(log2(R)) + 3*ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 49*Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) -
          98*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
          + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1)))) - 196*Min(2, ceiling(log2(R))) + 924*Min(M_r -
          Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 1, ceiling(log2(R))) - 2453'}
      - {name: gidney_lelbows, type: additive, value: '4*M_r + 12*b_mas + 5*lambda
          + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - 1) + (2*N_spatial - 2)*(Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1) + 2*Max(0, ceiling(R/lambda) - 1) + 8*Max(0, ceiling(M_r*R/lambda)
          - 1) + 12*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Heaviside(Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          - 1.5, 0) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
          + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) - Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) -
          2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 24'}
      - {name: gidney_relbows, type: additive, value: '4*M_r + 12*b_mas + 5*lambda
          + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - 1) + (2*N_spatial - 2)*(Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1) + 2*Max(0, ceiling(R/lambda) - 1) + 8*Max(0, ceiling(M_r*R/lambda)
          - 1) + 12*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Heaviside(Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          - 1.5, 0) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
          + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) - Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) -
          2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 24'}
      - {name: measurements, type: additive, value: 2*b_givens*(N_spatial - 1)*(lambda
          - 1) + 2*b_givens*(N_spatial - 1) + 2*b_mas + (2*b_mas + 2*ceiling(log2(R)))*(lambda
          - 1) + (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
          1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1)) + 2*ceiling(log2(R)) + ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
      - {name: ppms, type: additive, value: 0}
      - {name: pprs, type: additive, value: 8*N_spatial - 8}
      - {name: qubit_highwater, type: qubits, value: 'Max(2*N_spatial + Max(b_as,
          b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial
          + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) +
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) +
          1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) +
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) +
          1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
          + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) -
          Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
          ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
          1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) + 1, 2*N_spatial + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) +
          1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R + 1)),
          lambda + ceiling(log2(R + 1)), Max(lambda - ceiling(log2(lambda)) + ceiling(log2(R
          + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)) - 1) +
          ceiling(log2(lambda)), ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, 2*N_spatial
          + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R + 1)), ceiling(log2(R
          + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)),
          (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
          ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
          1) - 1) + 2*M_r + 1)) + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), Max((lambda - 1)*ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - ceiling(log2(lambda))
          + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1)), (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R
          + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) -
          1) + ceiling(log2(lambda))) + ceiling(log2(R)) + 1, -M_r*(R - 1) - M_r -
          b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(b_as, b_givens,
          b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2,
          M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 2, 2*N_spatial + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + M_r + b_mas +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R +
          1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas
          + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R
          - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
          Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
          - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
          M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
          M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r
          + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
          + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
          + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
          3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
          M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
          ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
          1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas)
          + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1), 2*b_mas
          + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
          + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial
          + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r + 2*N_spatial + b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0,
          -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1)
          + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 3, M_r
          + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
          + 3, M_r*(R - 1) + M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)), lambda
          + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, N_spatial +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0,
          -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
          b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + 2*Max(0,
          -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
          - 1) + ceiling(log2(lambda))) + 1, Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial
          - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
          N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) -
          1)) - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial - 1) +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
          N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
          - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) -
          1)) - Mod(2, N_spatial)) + 1) + ceiling(log2(R))) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
          + 2) + ceiling(log2(R)) + 2, 2*N_spatial + Max(M_r*(R - 1) + M_r + b_mas
          + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          ceiling(log2(R + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)),
          M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0,
          -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(M_r*(R
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
          Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)), b_mas
          + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R)) +
          ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)
          + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R
          - 1) + Max(M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
          M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r +
          b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
          (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
          - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, M_r + b_mas + Max(Max(b_as,
          b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, 2*M_r + b_mas +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
          (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
          - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R))) + 3,
          2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
          3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
          M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
          ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
          1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas)
          + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1)) + Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) -
          1, -M_r*(R - 1) - M_r - b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R -
          1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + ceiling(log2(R + 1)) - Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) + 3, M_r*(R - 1) + M_r
          + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
          + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r*(R -
          1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1)))) + 3, 2*N_spatial + Max(M_r*(R - 1) + M_r
          + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4,
          M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
          3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
          - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
          2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R
          - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
          b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - ceiling(log2(lambda)), b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1)
          + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 3*ceiling(log2(R))
          - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1))
          + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
          M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r +
          b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
          M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
          2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) -
          Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
          3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, M_r
          + b_mas + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + 2, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
          + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1) + Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 1, 2*N_spatial + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2,
          M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R +
          1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
          3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
          - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) +
          2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R
          - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
          b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
          Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
          - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r +
          b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2,
          M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
          M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
          2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) +
          3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) -
          Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
          3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
          b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1,
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as,
          b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
          M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
          ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
          1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 2) + ceiling(log2(R + 1)) + 1) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*b_mas + Max(M_r*(R - 1)
          + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial
          + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
          + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0,
          -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1)
          + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R
          - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0,
          -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1)
          + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R
          - 1) + M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
          + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
          + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda
          - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
          - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
          - ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
          - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 3, N_spatial +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
          + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)), lambda
          + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
          - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 3, Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) +
          Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + 1, Max(N_spatial + b_givens*(N_spatial
          - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial -
          1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
          Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
          b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial
          + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
          N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
          N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens + Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens
          + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
          b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1) +
          ceiling(log2(R)) + 2) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2) + Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2)
          + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) -
          1)'}
      - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0)) + (N_spatial - 1)*Max(0, Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) +
          Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
          b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens,
          b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0))'}
      - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0) + (N_spatial - 1)*Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0) + Heaviside(2.5 - Max(b_as, b_givens, b_mas),
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - 2.5, 0) + Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0) + 24*Min(M_r - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
      - {name: toffs, type: additive, value: '4*N_spatial + 2*b_givens*(-1 + (b_givens*(N_spatial
          - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
          - 1) + (-2 + 2*(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
          + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + (2*N_spatial - 2)*(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
          + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + (((lambda
          - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) +
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 4*Heaviside(ceiling(log2(R))
          - 1.5, 0) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + 4*ceiling(log2(R))'}
      connections:
      - {source: DataLookupClean_compute_0.out_0, target: OneElectronTermBlockEncoding_compute_0.in_0}
      - {source: DataLookupClean_compute_0.out_1, target: split_0.in_0}
      - {source: DataLookupClean_uncompute_0.out_0, target: out_0}
      - {source: OneElectronTermBlockEncoding_compute_0.out_0, target: OneElectronTermBlockEncoding_compute_1.in_0}
      - {source: OneElectronTermBlockEncoding_compute_0.out_1, target: merge_1.in_0}
      - {source: OneElectronTermBlockEncoding_compute_0.out_10, target: merge_3.in_1}
      - {source: OneElectronTermBlockEncoding_compute_0.out_2, target: merge_1.in_1}
      - {source: OneElectronTermBlockEncoding_compute_0.out_3, target: merge_1.in_2}
      - {source: OneElectronTermBlockEncoding_compute_0.out_4, target: OneElectronTermBlockEncoding_compute_1.in_5}
      - {source: OneElectronTermBlockEncoding_compute_0.out_5, target: OneElectronTermBlockEncoding_compute_1.in_6}
      - {source: OneElectronTermBlockEncoding_compute_0.out_6, target: OneElectronTermBlockEncoding_compute_1.in_7}
      - {source: OneElectronTermBlockEncoding_compute_0.out_7, target: merge_3.in_0}
      - {source: OneElectronTermBlockEncoding_compute_0.out_8, target: OneElectronTermBlockEncoding_compute_1.in_9}
      - {source: OneElectronTermBlockEncoding_compute_0.out_9, target: OneElectronTermBlockEncoding_compute_1.in_10}
      - {source: OneElectronTermBlockEncoding_compute_1.out_0, target: DataLookupClean_uncompute_0.in_0}
      - {source: OneElectronTermBlockEncoding_compute_1.out_1, target: merge_7.in_0}
      - {source: OneElectronTermBlockEncoding_compute_1.out_10, target: out_6}
      - {source: OneElectronTermBlockEncoding_compute_1.out_11, target: out_7}
      - {source: OneElectronTermBlockEncoding_compute_1.out_12, target: out_8}
      - {source: OneElectronTermBlockEncoding_compute_1.out_13, target: out_9}
      - {source: OneElectronTermBlockEncoding_compute_1.out_2, target: merge_7.in_1}
      - {source: OneElectronTermBlockEncoding_compute_1.out_3, target: merge_7.in_2}
      - {source: OneElectronTermBlockEncoding_compute_1.out_4, target: merge_7.in_3}
      - {source: OneElectronTermBlockEncoding_compute_1.out_5, target: out_1}
      - {source: OneElectronTermBlockEncoding_compute_1.out_6, target: out_2}
      - {source: OneElectronTermBlockEncoding_compute_1.out_7, target: out_3}
      - {source: OneElectronTermBlockEncoding_compute_1.out_8, target: out_4}
      - {source: OneElectronTermBlockEncoding_compute_1.out_9, target: out_5}
      - {source: in_0, target: DataLookupClean_compute_0.in_0}
      - {source: in_1, target: OneElectronTermBlockEncoding_compute_0.in_4}
      - {source: in_2, target: OneElectronTermBlockEncoding_compute_0.in_5}
      - {source: in_3, target: OneElectronTermBlockEncoding_compute_0.in_6}
      - {source: in_4, target: OneElectronTermBlockEncoding_compute_0.in_7}
      - {source: in_5, target: OneElectronTermBlockEncoding_compute_0.in_8}
      - {source: merge_1.out_0, target: split_2.in_0}
      - {source: merge_3.out_0, target: z_0.thru_0}
      - {source: merge_5.out_0, target: split_6.in_0}
      - {source: merge_7.out_0, target: DataLookupClean_uncompute_0.in_1}
      - {source: split_0.out_0, target: OneElectronTermBlockEncoding_compute_0.in_1}
      - {source: split_0.out_1, target: OneElectronTermBlockEncoding_compute_0.in_2}
      - {source: split_0.out_2, target: OneElectronTermBlockEncoding_compute_0.in_3}
      - {source: split_0.out_remainder, target: merge_1.in_remainder}
      - {source: split_2.out_0, target: z_0.thru_1}
      - {source: split_2.out_remainder, target: merge_5.in_remainder}
      - {source: split_4.out_0, target: OneElectronTermBlockEncoding_compute_1.in_8}
      - {source: split_4.out_1, target: OneElectronTermBlockEncoding_compute_1.in_11}
      - {source: split_6.out_0, target: OneElectronTermBlockEncoding_compute_1.in_1}
      - {source: split_6.out_1, target: OneElectronTermBlockEncoding_compute_1.in_2}
      - {source: split_6.out_2, target: OneElectronTermBlockEncoding_compute_1.in_3}
      - {source: split_6.out_3, target: OneElectronTermBlockEncoding_compute_1.in_4}
      - {source: split_6.out_remainder, target: merge_7.in_remainder}
      - {source: z_0.thru_0, target: split_4.in_0}
      - {source: z_0.thru_1, target: merge_5.in_0}
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    - name: AliasSampling_uncompute_0
      children:
      - name: split_0
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: b_as + ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        - {name: out_remainder, direction: output, size: b_as}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: swap_0
        children: []
        type: swap
        ports:
        - {name: thru_0, direction: through, size: ceiling(log2(R + 1))}
        - {name: thru_1, direction: through, size: ceiling(log2(R + 1))}
        - {name: thru_2, direction: through, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 55*ceiling(log2(R + 1))}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 2*ceiling(log2(R + 1)) + 1}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_1
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: in_remainder, direction: input, size: b_as}
        - {name: out_0, direction: output, size: b_as + ceiling(log2(R + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_2
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: b_as + ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: b_as}
        - {name: out_remainder, direction: output, size: ceiling(log2(R + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: CompareGE_compute_0
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: b_as}
          resources:
          - {name: qubit_highwater, type: qubits, value: b_as}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: cost_event
          children: []
          type: intrinsic_cost
          ports: []
          resources:
          - {name: active_volume, type: additive, value: 57*b_as - 60}
          - {name: gidney_lelbows, type: additive, value: b_as}
          - {name: qubit_highwater, type: qubits, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: in_1, direction: input, size: b_as}
        - {name: out_0, direction: output, size: b_as}
        - {name: out_1, direction: output, size: b_as}
        - {name: out_2, direction: output, size: b_as}
        resources:
        - {name: active_volume, type: additive, value: 57*b_as - 60}
        - {name: gidney_lelbows, type: additive, value: b_as}
        - {name: qubit_highwater, type: qubits, value: 'Max(2*b_as, 3*b_as)'}
        connections:
        - {source: in_0, target: out_0}
        - {source: in_1, target: out_1}
        - {source: qubits_alloc_0.out_0, target: out_2}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: split_4
        children: []
        type: split
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: out_0, direction: output, size: 1}
        - {name: out_remainder, direction: output, size: b_as - 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: x_0
        children: []
        type: x
        ports:
        - {name: thru_0, direction: through, size: 1}
        - {name: thru_1, direction: through, size: 1}
        resources:
        - {name: active_volume, type: additive, value: 4}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 2}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_5
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: 1}
        - {name: in_remainder, direction: input, size: b_as - 1}
        - {name: out_0, direction: output, size: b_as}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: CompareGE_uncompute_0
        children:
        - name: cost_event
          children: []
          type: intrinsic_cost
          ports: []
          resources:
          - {name: active_volume, type: additive, value: 57*b_as - 60}
          - {name: gidney_relbows, type: additive, value: b_as}
          - {name: qubit_highwater, type: qubits, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: b_as}
          resources:
          - {name: qubit_highwater, type: qubits, value: b_as}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: in_1, direction: input, size: b_as}
        - {name: in_2, direction: input, size: b_as}
        - {name: out_0, direction: output, size: b_as}
        - {name: out_1, direction: output, size: b_as}
        resources:
        - {name: active_volume, type: additive, value: 57*b_as - 60}
        - {name: gidney_relbows, type: additive, value: b_as}
        - {name: qubit_highwater, type: qubits, value: 'Max(2*b_as, 3*b_as)'}
        connections:
        - {source: in_0, target: out_0}
        - {source: in_1, target: out_1}
        - {source: in_2, target: qubits_free_0.in_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: merge_7
        children: []
        type: merge
        ports:
        - {name: in_0, direction: input, size: b_as}
        - {name: in_remainder, direction: input, size: ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: b_as + ceiling(log2(R + 1))}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: qubits_free_0
        children: []
        type: qubits_alloc
        ports:
        - {name: in_0, direction: input, size: 1}
        resources:
        - {name: qubit_highwater, type: qubits, value: 1}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: had_0
        children: []
        type: had
        ports:
        - {name: thru_0, direction: through, size: b_as}
        resources:
        - {name: active_volume, type: additive, value: 3*b_as}
        - {name: gidney_lelbows, type: additive, value: 0}
        - {name: gidney_relbows, type: additive, value: 0}
        - {name: measurements, type: additive, value: 0}
        - {name: ppm_x_weight, type: other, value: 0}
        - {name: ppm_z_weight, type: other, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: ppr_x_weight, type: other, value: 0}
        - {name: ppr_z_weight, type: other, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: b_as}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: qubits_free_1
        children: []
        type: qubits_alloc
        ports:
        - {name: in_0, direction: input, size: b_as}
        resources:
        - {name: qubit_highwater, type: qubits, value: b_as}
        connections: []
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: DataLookupClean_uncompute_0
        children:
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: b_as + ceiling(log2(R + 1))}
          resources:
          - {name: active_volume, type: additive, value: 3*b_as + 3*ceiling(log2(R
              + 1))}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: read_0
          children: []
          type: read
          ports:
          - {name: thru_0, direction: through, size: b_as + ceiling(log2(R + 1))}
          resources:
          - {name: active_volume, type: additive, value: 0}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: b_as + ceiling(log2(R + 1))}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: b_as + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: b_as + ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_0
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: lambda}
          - {name: out_0, direction: output, size: 1}
          - {name: out_remainder, direction: output, size: lambda - 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: x_0
          children: []
          type: x
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_1
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: 1}
          - {name: in_remainder, direction: input, size: lambda - 1}
          - {name: out_0, direction: output, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_2
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_remainder, direction: output, size: -ceiling(log2(lambda))
              + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: BinaryToUnaryUncomputation_compute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 9*lambda - 9}
            - {name: gidney_lelbows, type: additive, value: lambda - 1}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_1, direction: input, size: lambda}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_1, direction: output, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 9*lambda - 9}
          - {name: gidney_lelbows, type: additive, value: lambda - 1}
          - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_3
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_remainder, direction: input, size: -ceiling(log2(lambda)) +
              ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_1
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 3*lambda}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: lambda}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_4
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_remainder, direction: output, size: ceiling(log2(lambda))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: GoogleSelectOptimized_compute_0
          children:
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
                + 1)) - 1}
            resources:
            - {name: qubit_highwater, type: qubits, value: -ceiling(log2(lambda))
                + ceiling(log2(R + 1)) - 1}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda)
                + 49)*Max(0, ceiling((R + 1)/lambda) - 1)'}
            - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
                - 1)'}
            - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
                - 1)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_1, direction: input, size: lambda}
          - {name: out_0, direction: output, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: out_1, direction: output, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: '(ceiling(0.75*lambda) +
              49)*Max(0, ceiling((R + 1)/lambda) - 1)'}
          - {name: gidney_lelbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
              - 1)'}
          - {name: gidney_relbows, type: additive, value: 'Max(0, ceiling((R + 1)/lambda)
              - 1)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(lambda - ceiling(log2(lambda))
              + ceiling(log2(R + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R
              + 1)) - 1)'}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          - {source: qubits_alloc_0.out_0, target: qubits_free_0.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_5
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: -ceiling(log2(lambda)) + ceiling(log2(R
              + 1))}
          - {name: in_remainder, direction: input, size: ceiling(log2(lambda))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_2
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 3*lambda}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: lambda}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_6
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_remainder, direction: output, size: -ceiling(log2(lambda))
              + ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: BinaryToUnaryUncomputation_uncompute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 9*lambda - 9}
            - {name: gidney_relbows, type: additive, value: lambda - 1}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_1, direction: input, size: lambda}
          - {name: out_0, direction: output, size: ceiling(log2(lambda))}
          - {name: out_1, direction: output, size: lambda}
          resources:
          - {name: active_volume, type: additive, value: 9*lambda - 9}
          - {name: gidney_relbows, type: additive, value: lambda - 1}
          - {name: qubit_highwater, type: qubits, value: lambda + ceiling(log2(lambda))}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: out_1}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_7
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(lambda))}
          - {name: in_remainder, direction: input, size: -ceiling(log2(lambda)) +
              ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_8
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: lambda}
          - {name: out_0, direction: output, size: 1}
          - {name: out_remainder, direction: output, size: lambda - 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: x_1
          children: []
          type: x
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_9
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: 1}
          - {name: in_remainder, direction: input, size: lambda - 1}
          - {name: out_0, direction: output, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_1
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: lambda}
          resources:
          - {name: qubit_highwater, type: qubits, value: lambda}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: in_1, direction: input, size: b_as + ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        resources:
        - {name: active_volume, type: additive, value: '3*b_as + 24*lambda + (ceiling(0.75*lambda)
            + 49)*Max(0, ceiling((R + 1)/lambda) - 1) + 3*ceiling(log2(R + 1)) - 18'}
        - {name: gidney_lelbows, type: additive, value: 'lambda + Max(0, ceiling((R
            + 1)/lambda) - 1) - 1'}
        - {name: gidney_relbows, type: additive, value: 'lambda + Max(0, ceiling((R
            + 1)/lambda) - 1) - 1'}
        - {name: measurements, type: additive, value: b_as + ceiling(log2(R + 1))}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
            lambda + ceiling(log2(R + 1)), b_as + 2*ceiling(log2(R + 1)), Max(lambda
            - ceiling(log2(lambda)) + ceiling(log2(R + 1)), lambda - 2*ceiling(log2(lambda))
            + 2*ceiling(log2(R + 1)) - 1) + ceiling(log2(lambda)))'}
        - {name: rotations, type: additive, value: 0}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 0}
        connections:
        - {source: BinaryToUnaryUncomputation_compute_0.out_0, target: merge_3.in_0}
        - {source: BinaryToUnaryUncomputation_compute_0.out_1, target: had_1.thru_0}
        - {source: BinaryToUnaryUncomputation_uncompute_0.out_0, target: merge_7.in_0}
        - {source: BinaryToUnaryUncomputation_uncompute_0.out_1, target: split_8.in_0}
        - {source: GoogleSelectOptimized_compute_0.out_0, target: merge_5.in_0}
        - {source: GoogleSelectOptimized_compute_0.out_1, target: had_2.thru_0}
        - {source: had_0.thru_0, target: read_0.thru_0}
        - {source: had_1.thru_0, target: GoogleSelectOptimized_compute_0.in_1}
        - {source: had_2.thru_0, target: BinaryToUnaryUncomputation_uncompute_0.in_1}
        - {source: in_0, target: split_2.in_0}
        - {source: in_1, target: had_0.thru_0}
        - {source: merge_1.out_0, target: BinaryToUnaryUncomputation_compute_0.in_1}
        - {source: merge_3.out_0, target: split_4.in_0}
        - {source: merge_5.out_0, target: split_6.in_0}
        - {source: merge_7.out_0, target: out_0}
        - {source: merge_9.out_0, target: qubits_free_1.in_0}
        - {source: qubits_alloc_0.out_0, target: split_0.in_0}
        - {source: read_0.thru_0, target: qubits_free_0.in_0}
        - {source: split_0.out_0, target: x_0.thru_0}
        - {source: split_0.out_remainder, target: merge_1.in_remainder}
        - {source: split_2.out_0, target: BinaryToUnaryUncomputation_compute_0.in_0}
        - {source: split_2.out_remainder, target: merge_3.in_remainder}
        - {source: split_4.out_0, target: GoogleSelectOptimized_compute_0.in_0}
        - {source: split_4.out_remainder, target: merge_5.in_remainder}
        - {source: split_6.out_0, target: BinaryToUnaryUncomputation_uncompute_0.in_0}
        - {source: split_6.out_remainder, target: merge_7.in_remainder}
        - {source: split_8.out_0, target: x_1.thru_0}
        - {source: split_8.out_remainder, target: merge_9.in_remainder}
        - {source: x_0.thru_0, target: merge_1.in_0}
        - {source: x_1.thru_0, target: merge_9.in_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      - name: RealUSP_uncompute_0
        children:
        - name: qubits_alloc_0
          children: []
          type: qubits_alloc
          ports:
          - {name: out_0, direction: output, size: 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: 1}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: lelbow_0
          children: []
          type: lelbow
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: x_0
          children: []
          type: x
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_0
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1)) - nlz(R +
              1)}
          - {name: out_remainder, direction: output, size: nlz(R + 1)}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_0
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(R + 1)) -
              3*nlz(R + 1)}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: z_0
          children: []
          type: z
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          - {name: thru_1, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R
              + 1)) - nlz(R + 1) - 1.5, 0) + 49*ceiling(log2(R + 1)) - 49*nlz(R +
              1) - 49*Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R + 1)) -
              nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R + 1)) -
              nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R + 1)) - nlz(R
              + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1))'}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R + 1)) -
              2*nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 1'}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R + 1)) -
              nlz(R + 1) - 1.5, 0)'}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_1
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(R + 1)) -
              3*nlz(R + 1)}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1)) - nlz(R
              + 1)}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_5
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1)) - nlz(R + 1)}
          - {name: in_remainder, direction: input, size: nlz(R + 1)}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: ry_0
          children: []
          type: ry
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 1399}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 1}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: CompareLT_compute_0
          children:
          - name: qubits_alloc_0
            children: []
            type: qubits_alloc
            ports:
            - {name: out_0, direction: output, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) - 0.5, 0)'}
            resources:
            - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1))
                - 60}
            - {name: gidney_lelbows, type: additive, value: '((ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R +
                1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          - {name: out_1, direction: output, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          resources:
          - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1)) -
              60}
          - {name: gidney_lelbows, type: additive, value: '((ceiling(log2(R + 1))
              - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2
              ** ceiling(log2(R + 1)))) + 0.5, 0)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
              (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
              1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
              Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R
              + 1)))'}
          connections:
          - {source: in_0, target: out_0}
          - {source: qubits_alloc_0.out_0, target: out_1}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: split_6
          children: []
          type: split
          ports:
          - {name: in_0, direction: input, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          - {name: out_0, direction: output, size: 1}
          - {name: out_remainder, direction: output, size: '(ceiling(log2(R + 1))
              - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) - 1'}
          resources:
          - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1)) -
              nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: z_1
          children: []
          type: z
          ports:
          - {name: thru_0, direction: through, size: 1}
          - {name: thru_1, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 4}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 2}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: merge_7
          children: []
          type: merge
          ports:
          - {name: in_0, direction: input, size: 1}
          - {name: in_remainder, direction: input, size: '(ceiling(log2(R + 1)) -
              nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) - 1'}
          - {name: out_0, direction: output, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          resources:
          - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1)) -
              nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: CompareLT_uncompute_0
          children:
          - name: cost_event
            children: []
            type: intrinsic_cost
            ports: []
            resources:
            - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1))
                - 60}
            - {name: gidney_relbows, type: additive, value: '((ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R +
                1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)'}
            - {name: qubit_highwater, type: qubits, value: 0}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          - name: qubits_free_0
            children: []
            type: qubits_alloc
            ports:
            - {name: in_0, direction: input, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
                ceiling(log2(R + 1)))) - 0.5, 0)'}
            resources:
            - {name: qubit_highwater, type: qubits, value: '(ceiling(log2(R + 1))
                - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
                + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)'}
            connections: []
            input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
            local_variables: {}
            linked_params: []
            repetition: null
            meta: {}
          type: qubrick
          ports:
          - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
          - {name: in_1, direction: input, size: '(ceiling(log2(R + 1)) - nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 **
              ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R
              + 1)))) - 0.5, 0)'}
          - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
          resources:
          - {name: active_volume, type: additive, value: 57*ceiling(log2(R + 1)) -
              60}
          - {name: gidney_relbows, type: additive, value: '((ceiling(log2(R + 1))
              - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R +
              1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2
              ** ceiling(log2(R + 1)))) + 0.5, 0)'}
          - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
              (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
              1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
              Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R
              + 1)))'}
          connections:
          - {source: in_0, target: out_0}
          - {source: in_1, target: qubits_free_0.in_0}
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: ry_1
          children: []
          type: ry
          ports:
          - {name: thru_0, direction: through, size: 1}
          resources:
          - {name: active_volume, type: additive, value: 1399}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: 1}
          - {name: rotations, type: additive, value: 1}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: had_2
          children: []
          type: had
          ports:
          - {name: thru_0, direction: through, size: ceiling(log2(R + 1))}
          resources:
          - {name: active_volume, type: additive, value: 3*ceiling(log2(R + 1))}
          - {name: gidney_lelbows, type: additive, value: 0}
          - {name: gidney_relbows, type: additive, value: 0}
          - {name: measurements, type: additive, value: 0}
          - {name: ppm_x_weight, type: other, value: 0}
          - {name: ppm_z_weight, type: other, value: 0}
          - {name: ppms, type: additive, value: 0}
          - {name: ppr_x_weight, type: other, value: 0}
          - {name: ppr_z_weight, type: other, value: 0}
          - {name: pprs, type: additive, value: 0}
          - {name: qubit_highwater, type: qubits, value: ceiling(log2(R + 1))}
          - {name: rotations, type: additive, value: 0}
          - {name: t_gates, type: additive, value: 0}
          - {name: toffs, type: additive, value: 0}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        - name: qubits_free_0
          children: []
          type: qubits_alloc
          ports:
          - {name: in_0, direction: input, size: 1}
          resources:
          - {name: qubit_highwater, type: qubits, value: 1}
          connections: []
          input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
          local_variables: {}
          linked_params: []
          repetition: null
          meta: {}
        type: qubrick
        ports:
        - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
        - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
        resources:
        - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R
            + 1)) - nlz(R + 1) - 1.5, 0) + 172*ceiling(log2(R + 1)) - 55*nlz(R + 1)
            - 49*Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 2682'}
        - {name: gidney_lelbows, type: additive, value: '((ceiling(log2(R + 1)) -
            nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R +
            1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
            ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
            + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R
            + 1)) - nlz(R + 1))'}
        - {name: gidney_relbows, type: additive, value: '((ceiling(log2(R + 1)) -
            nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R +
            1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
            ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
            + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R
            + 1)) - nlz(R + 1))'}
        - {name: measurements, type: additive, value: 0}
        - {name: ppms, type: additive, value: 0}
        - {name: pprs, type: additive, value: 0}
        - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)),
            ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R + 1)) - nlz(R + 1) - Min(2,
            ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R + 1)) - nlz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
            + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
            - 0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R + 1)), (ceiling(log2(R
            + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1,
            2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1)'}
        - {name: rotations, type: additive, value: 2}
        - {name: t_gates, type: additive, value: 0}
        - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R + 1)) - nlz(R
            + 1) - 1.5, 0)'}
        connections:
        - {source: CompareLT_compute_0.out_0, target: CompareLT_uncompute_0.in_0}
        - {source: CompareLT_compute_0.out_1, target: split_6.in_0}
        - {source: CompareLT_uncompute_0.out_0, target: had_2.thru_0}
        - {source: had_0.thru_0, target: z_0.thru_0}
        - {source: had_1.thru_0, target: merge_5.in_0}
        - {source: had_2.thru_0, target: out_0}
        - {source: in_0, target: split_0.in_0}
        - {source: lelbow_0.thru_0, target: x_0.thru_0}
        - {source: merge_5.out_0, target: CompareLT_compute_0.in_0}
        - {source: merge_7.out_0, target: CompareLT_uncompute_0.in_1}
        - {source: qubits_alloc_0.out_0, target: lelbow_0.thru_0}
        - {source: ry_0.thru_0, target: z_1.thru_1}
        - {source: ry_1.thru_0, target: qubits_free_0.in_0}
        - {source: split_0.out_0, target: had_0.thru_0}
        - {source: split_0.out_remainder, target: merge_5.in_remainder}
        - {source: split_6.out_0, target: z_1.thru_0}
        - {source: split_6.out_remainder, target: merge_7.in_remainder}
        - {source: x_0.thru_0, target: z_0.thru_1}
        - {source: z_0.thru_0, target: had_1.thru_0}
        - {source: z_0.thru_1, target: ry_0.thru_0}
        - {source: z_1.thru_0, target: merge_7.in_0}
        - {source: z_1.thru_1, target: ry_1.thru_0}
        input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
        local_variables: {}
        linked_params: []
        repetition: null
        meta: {}
      type: qubrick
      ports:
      - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
      - {name: in_1, direction: input, size: b_as + ceiling(log2(R + 1))}
      - {name: in_2, direction: input, size: b_as}
      - {name: in_3, direction: input, size: 1}
      - {name: in_4, direction: input, size: ceiling(log2(R))}
      - {name: in_5, direction: input, size: 1}
      - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
      - {name: out_1, direction: output, size: ceiling(log2(R))}
      - {name: out_2, direction: output, size: 1}
      resources:
      - {name: active_volume, type: additive, value: '120*b_as + 24*lambda + (ceiling(0.75*lambda)
          + 49)*Max(0, ceiling((R + 1)/lambda) - 1) + 47*Heaviside(ceiling(log2(R
          + 1)) - nlz(R + 1) - 1.5, 0) + 230*ceiling(log2(R + 1)) - 55*nlz(R + 1)
          - 49*Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 2548'}
      - {name: gidney_lelbows, type: additive, value: 'b_as + lambda + ((ceiling(log2(R
          + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
          ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) + 0.5, 0) + Max(0, ceiling((R + 1)/lambda) - 1) + ceiling(log2(R
          + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) - 1'}
      - {name: gidney_relbows, type: additive, value: 'b_as + lambda + ((ceiling(log2(R
          + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2
          ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) + 0.5, 0) + Max(0, ceiling((R + 1)/lambda) - 1) + ceiling(log2(R
          + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) - 1'}
      - {name: measurements, type: additive, value: b_as + ceiling(log2(R + 1))}
      - {name: ppms, type: additive, value: 0}
      - {name: pprs, type: additive, value: 0}
      - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R)) + ceiling(log2(R
          + 1)) + 1, 2*b_as + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 1, 2*b_as
          + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, 3*b_as + ceiling(log2(R))
          + 2*ceiling(log2(R + 1)) + 2, Max(2*b_as, 3*b_as) + ceiling(log2(R)) + 2*ceiling(log2(R
          + 1)) + 2, Max(ceiling(log2(R + 1)), lambda + ceiling(log2(R + 1)), b_as
          + 2*ceiling(log2(R + 1)), Max(lambda - ceiling(log2(lambda)) + ceiling(log2(R
          + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)) - 1) +
          ceiling(log2(lambda))) + ceiling(log2(R)) + 1, Max(ceiling(log2(R + 1)),
          ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R
          + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
          0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R
          + 1)) + 1, Max(ceiling(log2(R + 1)), (ceiling(log2(R + 1)) - nlz(Mod(R +
          1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
          - 0.5, 0) + ceiling(log2(R + 1))) + 1) + ceiling(log2(R)) + 1)'}
      - {name: rotations, type: additive, value: 2}
      - {name: t_gates, type: additive, value: 0}
      - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R + 1)) - nlz(R
          + 1) - 1.5, 0) + ceiling(log2(R + 1))'}
      connections:
      - {source: CompareGE_compute_0.out_0, target: CompareGE_uncompute_0.in_0}
      - {source: CompareGE_compute_0.out_1, target: CompareGE_uncompute_0.in_1}
      - {source: CompareGE_compute_0.out_2, target: split_4.in_0}
      - {source: CompareGE_uncompute_0.out_0, target: merge_7.in_0}
      - {source: CompareGE_uncompute_0.out_1, target: had_0.thru_0}
      - {source: DataLookupClean_uncompute_0.out_0, target: RealUSP_uncompute_0.in_0}
      - {source: RealUSP_uncompute_0.out_0, target: out_0}
      - {source: had_0.thru_0, target: qubits_free_1.in_0}
      - {source: in_0, target: swap_0.thru_0}
      - {source: in_1, target: split_0.in_0}
      - {source: in_2, target: CompareGE_compute_0.in_1}
      - {source: in_3, target: swap_0.thru_2}
      - {source: in_4, target: out_1}
      - {source: in_5, target: out_2}
      - {source: merge_1.out_0, target: split_2.in_0}
      - {source: merge_5.out_0, target: CompareGE_uncompute_0.in_2}
      - {source: merge_7.out_0, target: DataLookupClean_uncompute_0.in_1}
      - {source: split_0.out_0, target: swap_0.thru_1}
      - {source: split_0.out_remainder, target: merge_1.in_remainder}
      - {source: split_2.out_0, target: CompareGE_compute_0.in_0}
      - {source: split_2.out_remainder, target: merge_7.in_remainder}
      - {source: split_4.out_0, target: x_0.thru_1}
      - {source: split_4.out_remainder, target: merge_5.in_remainder}
      - {source: swap_0.thru_0, target: DataLookupClean_uncompute_0.in_0}
      - {source: swap_0.thru_1, target: merge_1.in_0}
      - {source: swap_0.thru_2, target: x_0.thru_0}
      - {source: x_0.thru_0, target: qubits_free_0.in_0}
      - {source: x_0.thru_1, target: merge_5.in_0}
      input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
      local_variables: {}
      linked_params: []
      repetition: null
      meta: {}
    type: qubrick
    ports:
    - {name: in_0, direction: input, size: ceiling(log2(R + 1))}
    - {name: in_1, direction: input, size: 'Max(b_as, b_givens, b_mas)'}
    - {name: in_2, direction: input, size: ceiling(log2(R))}
    - {name: in_3, direction: input, size: N_spatial}
    - {name: in_4, direction: input, size: N_spatial}
    - {name: in_5, direction: input, size: 1}
    - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
    - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
    - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens, b_mas))'}
    - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
    - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
    - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
    - {name: out_6, direction: output, size: ceiling(log2(R))}
    - {name: out_7, direction: output, size: N_spatial}
    - {name: out_8, direction: output, size: N_spatial}
    - {name: out_9, direction: output, size: 1}
    resources:
    - {name: active_volume, type: additive, value: '196*M_r + 220*N_spatial + 237*b_as
        + 110*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
        - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 6*b_givens*(N_spatial
        - 1)*(lambda - 1) + 6*b_givens*(N_spatial - 1) + 994*b_mas + 144*lambda +
        (-2 + 2*(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
        + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (-1 + (b_as + (b_as
        + ceiling(log2(R + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
        + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + (N_spatial - 1)*(108*Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
        b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48)
        + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
        b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2.5, 0) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
        b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + (3*b_as + 3*ceiling(log2(R
        + 1)))*(lambda - 1) + (6*b_mas + 6*ceiling(log2(R)))*(lambda - 1) + (3*lambda
        - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ((55*(lambda
        - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 55*ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + (ceiling(0.75*lambda) + 49)*Max(0,
        ceiling(R/lambda) - 1) + (ceiling(0.75*lambda) + 49)*Max(0, ceiling((R + 1)/lambda)
        - 1) + (4*ceiling(0.75*lambda) + 196)*Max(0, ceiling(M_r*R/lambda) - 1) +
        (ceiling((0.75*lambda - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lambda) - 1) + (2*ceiling(0.75*b_givens*(N_spatial
        - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 98)*Max(0, ceiling(M_r*R/lambda)
        - 1) + (ceiling(0.75*b_as + (0.75*b_as + 0.75*ceiling(log2(R + 1)))*(lambda
        - 1) + 0.75*ceiling(log2(R + 1))) + 49)*Max(0, ceiling((R + 1)/lambda) - 1)
        + (2*ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1)
        + 0.75*ceiling(log2(R))) + 98)*Max(0, ceiling(M_r*R/lambda) - 1) + 3*Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + 684*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 -
        Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as,
        b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 1397*Max(0, Max(0, b_mas - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + 5*Heaviside(1.5 - Max(b_as, b_givens,
        b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas),
        0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - 2.5, 0) + 49*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 188*Heaviside(ceiling(log2(R))
        - 1.5, 0) + 47*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + 94*Heaviside(ceiling(log2(R
        + 1)) - nlz(R + 1) - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2067*ceiling(log2(R)) + 457*ceiling(log2(R
        + 1)) + 3*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 110*nlz(R
        + 1) - 49*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 98*Min(2, ceiling(log2(R +
        1)) - nlz(R + 1)) - 98*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 196*Min(2, ceiling(log2(R))) +
        924*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
        + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) + 2661'}
    - {name: gidney_lelbows, type: additive, value: '4*M_r + 2*b_as + 12*b_mas + 6*lambda
        + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + (2*(ceiling(log2(R
        + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
        + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + 2*Heaviside(-nlz(Mod(R + 1, 2
        ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
        + 1)))) + 0.5, 0) + 2*Max(0, ceiling(R/lambda) - 1) + 2*Max(0, ceiling((R
        + 1)/lambda) - 1) + 8*Max(0, ceiling(M_r*R/lambda) - 1) + 12*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) +
        2*ceiling(log2(R + 1)) - 2*nlz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
        + 1)) - nlz(R + 1)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 25'}
    - {name: gidney_relbows, type: additive, value: '4*M_r + 2*b_as + 12*b_mas + 6*lambda
        + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + (2*(ceiling(log2(R
        + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
        + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + 2*Heaviside(-nlz(Mod(R + 1, 2
        ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
        + 1)))) + 0.5, 0) + 2*Max(0, ceiling(R/lambda) - 1) + 2*Max(0, ceiling((R
        + 1)/lambda) - 1) + 8*Max(0, ceiling(M_r*R/lambda) - 1) + 12*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) +
        2*ceiling(log2(R + 1)) - 2*nlz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
        + 1)) - nlz(R + 1)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 25'}
    - {name: measurements, type: additive, value: b_as + 2*b_givens*(N_spatial - 1)*(lambda
        - 1) + 2*b_givens*(N_spatial - 1) + 2*b_mas + (b_as + ceiling(log2(R + 1)))*(lambda
        - 1) + (2*b_mas + 2*ceiling(log2(R)))*(lambda - 1) + (lambda - 1)*ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
    - {name: ppms, type: additive, value: 0}
    - {name: pprs, type: additive, value: 8*N_spatial - 8}
    - {name: qubit_highwater, type: qubits, value: 'Max(2*N_spatial + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(b_as,
        b_givens, b_mas) + Max(ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*b_as
        + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 1, 2*b_as + ceiling(log2(R))
        + 2*ceiling(log2(R + 1)) + 2, 3*b_as + ceiling(log2(R)) + 2*ceiling(log2(R
        + 1)) + 2, Max(2*b_as, 3*b_as) + ceiling(log2(R)) + 2*ceiling(log2(R + 1))
        + 2, Max(ceiling(log2(R + 1)), b_as + 2*ceiling(log2(R + 1)), b_as + (b_as
        + ceiling(log2(R + 1)))*(lambda - 1) + 2*ceiling(log2(R + 1)), Max(b_as +
        (b_as + ceiling(log2(R + 1)))*(lambda - 1) - ceiling(log2(lambda)) + 2*ceiling(log2(R
        + 1)), b_as + (b_as + ceiling(log2(R + 1)))*(lambda - 1) - 2*ceiling(log2(lambda))
        + 3*ceiling(log2(R + 1)) - 1) + ceiling(log2(lambda))) + ceiling(log2(R))
        + 1, Max(ceiling(log2(R + 1)), ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R
        + 1)) - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R
        + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
        + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
        ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R
        + 1)), (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
        - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
        + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1) +
        ceiling(log2(R)) + 1), 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R))
        + ceiling(log2(R + 1)) + 1, 2*b_as + ceiling(log2(R)) + 2*ceiling(log2(R +
        1)) + 1, 2*b_as + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, 3*b_as +
        ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, Max(2*b_as, 3*b_as) + ceiling(log2(R))
        + 2*ceiling(log2(R + 1)) + 2, Max(ceiling(log2(R + 1)), lambda + ceiling(log2(R
        + 1)), b_as + 2*ceiling(log2(R + 1)), Max(lambda - ceiling(log2(lambda)) +
        ceiling(log2(R + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R
        + 1)) - 1) + ceiling(log2(lambda))) + ceiling(log2(R)) + 1, Max(ceiling(log2(R
        + 1)), ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R + 1)) - nlz(R + 1) - Min(2,
        ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R + 1)) - nlz(Mod(R
        + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
        + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
        - 0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R + 1)), (ceiling(log2(R
        + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
        + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
        ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1) + ceiling(log2(R))
        + 1), 2*b_as + Max(2*N_spatial + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 1,
        2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - Min(2,
        Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R))) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R
        + 1)), lambda + ceiling(log2(R + 1)), Max(lambda - ceiling(log2(lambda)) +
        ceiling(log2(R + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R
        + 1)) - 1) + ceiling(log2(lambda)), ceiling(log2(R + 1)) + ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
        2*N_spatial + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R + 1)), ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), (lambda
        - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), Max((lambda
        - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - ceiling(log2(lambda))
        + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)), (lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)
        + ceiling(log2(lambda))) + ceiling(log2(R)) + 1, -M_r*(R - 1) - M_r - b_mas
        + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 2*N_spatial
        + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, 2*N_spatial
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas
        + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R
        - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
        Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
        - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
        M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
        ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
        - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
        M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
        ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
        - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
        2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
        2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
        1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2,
        ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
        + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas)
        + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
        + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
        + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
        + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1),
        2*b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(b_as,
        b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r*(R
        - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 3, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) +
        3, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) +
        3, M_r*(R - 1) + M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)
        + ceiling(log2(lambda))) + 1, N_spatial + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) +
        ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda
        - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
        - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
        - ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
        - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 1, Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, N_spatial
        + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) + 1, Max(N_spatial + b_givens*(N_spatial
        - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2,
        N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
        - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens
        + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas),
        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas)) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas))
        + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1) + ceiling(log2(R))) -
        Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R + 1)) + 2) + ceiling(log2(R)) + 2, 2*N_spatial + Max(M_r*(R
        - 1) + M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas
        + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R
        - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
        b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda
        - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - ceiling(log2(lambda)), b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) +
        2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 3*ceiling(log2(R)) -
        2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) +
        4, M_r*(R - 1) + Max(M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
        M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r +
        b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, M_r + b_mas
        + Max(Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, 2*M_r + b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) - Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as,
        b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
        + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
        + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1))
        + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1,
        -M_r*(R - 1) - M_r - b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas +
        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r +
        2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R +
        1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
        1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)))) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r +
        2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3,
        M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
        1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)))) + 3, 2*N_spatial + Max(M_r*(R - 1) + M_r + b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
        ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
        - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R
        - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas +
        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
        - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
        - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
        Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
        - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
        Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)), b_mas
        + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
        M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r +
        b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
        b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3,
        2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3,
        2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2,
        ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas - 1)
        + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, M_r + b_mas
        + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2,
        b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
        b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
        M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
        (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) -
        1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) +
        2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R +
        1)) + 1) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
        2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
        1) - 1) + 2*M_r + 1))) + 1, 2*N_spatial + Max(0, b_givens - Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas +
        Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) +
        Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R
        - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R
        - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
        Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)), lambda
        + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) +
        4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 1, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) - Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3,
        b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
        b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1,
        M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
        (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) -
        1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) +
        2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R +
        1)) + 1) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
        2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
        1) - 1) + 2*M_r + 1))) + 1, 2*b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial
        + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
        b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 **
        (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r + 2*N_spatial + b_mas + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
        M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R
        - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
        + 1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas)
        - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + N_spatial + b_mas + Max(N_spatial
        + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) +
        ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + ceiling(log2(R)) + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
        + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0,
        -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
        - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) +
        ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(b_givens*(N_spatial - 1)*(lambda
        - 1) + b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)) - ceiling(log2(lambda)), b_givens*(N_spatial - 1)*(lambda
        - 1) + b_givens*(N_spatial - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))
        + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
        + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) +
        ceiling(log2(M_r*R))) + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)), lambda
        + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
        - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))) + 3, Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial - 1) + Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
        - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
        Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2,
        N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas), N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
        - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
        Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
        b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
        Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2,
        N_spatial)) + 1) + ceiling(log2(R)) + 2) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2) + Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) + 2) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) - 1) + ceiling(log2(R + 1)) + 1)'}
    - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2.5, 0)) + (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
        0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)
        - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + Max(0,
        Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 4'}
    - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2.5, 0) + (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(2.5 - Max(b_as, b_givens,
        b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) - 2.5, 0) + Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) + 24*Min(M_r - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
    - {name: toffs, type: additive, value: '4*N_spatial + 2*b_givens*(-1 + (b_givens*(N_spatial
        - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
        - 1) + (-2 + 2*(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
        + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + (-1 + (b_as + (b_as + ceiling(log2(R
        + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as
        + ceiling(log2(R + 1))) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + (2*N_spatial - 2)*(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas)) + (((lambda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) + 4*Heaviside(ceiling(log2(R)) - 1.5, 0) + Heaviside(Mod(1,
        ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) +
        ceiling(log2(R)) - 1.5, 0) + 2*Heaviside(ceiling(log2(R + 1)) - nlz(R + 1)
        - 1.5, 0) + 4*ceiling(log2(R)) + 2*ceiling(log2(R + 1))'}
    connections:
    - {source: AliasSampling_compute_0.out_0, target: DoubleFactorizationSelect_compute_0.in_0}
    - {source: AliasSampling_compute_0.out_1, target: AliasSampling_uncompute_0.in_1}
    - {source: AliasSampling_compute_0.out_2, target: AliasSampling_uncompute_0.in_2}
    - {source: AliasSampling_compute_0.out_3, target: AliasSampling_uncompute_0.in_3}
    - {source: AliasSampling_compute_0.out_4, target: DoubleFactorizationSelect_compute_0.in_2}
    - {source: AliasSampling_compute_0.out_5, target: DoubleFactorizationSelect_compute_0.in_5}
    - {source: AliasSampling_uncompute_0.out_0, target: out_0}
    - {source: AliasSampling_uncompute_0.out_1, target: out_6}
    - {source: AliasSampling_uncompute_0.out_2, target: out_9}
    - {source: DoubleFactorizationSelect_compute_0.out_0, target: AliasSampling_uncompute_0.in_0}
    - {source: DoubleFactorizationSelect_compute_0.out_1, target: out_1}
    - {source: DoubleFactorizationSelect_compute_0.out_2, target: out_2}
    - {source: DoubleFactorizationSelect_compute_0.out_3, target: out_3}
    - {source: DoubleFactorizationSelect_compute_0.out_4, target: out_4}
    - {source: DoubleFactorizationSelect_compute_0.out_5, target: out_5}
    - {source: DoubleFactorizationSelect_compute_0.out_6, target: AliasSampling_uncompute_0.in_4}
    - {source: DoubleFactorizationSelect_compute_0.out_7, target: out_7}
    - {source: DoubleFactorizationSelect_compute_0.out_8, target: out_8}
    - {source: DoubleFactorizationSelect_compute_0.out_9, target: AliasSampling_uncompute_0.in_5}
    - {source: in_0, target: AliasSampling_compute_0.in_0}
    - {source: in_1, target: DoubleFactorizationSelect_compute_0.in_1}
    - {source: in_2, target: AliasSampling_compute_0.in_1}
    - {source: in_3, target: DoubleFactorizationSelect_compute_0.in_3}
    - {source: in_4, target: DoubleFactorizationSelect_compute_0.in_4}
    - {source: in_5, target: AliasSampling_compute_0.in_2}
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  - name: z_0
    children: []
    type: z
    ports:
    - {name: thru_0, direction: through, size: ceiling(log2(R + 1))}
    - {name: thru_1, direction: through, size: ceiling(log2(R))}
    resources:
    - {name: active_volume, type: additive, value: '47*Heaviside(ceiling(log2(R))
        + ceiling(log2(R + 1)) - 2.5, 0) + 49*ceiling(log2(R)) + 49*ceiling(log2(R
        + 1)) - 49*Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) - 49'}
    - {name: gidney_lelbows, type: additive, value: 'ceiling(log2(R)) + ceiling(log2(R
        + 1)) - Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) - 1'}
    - {name: gidney_relbows, type: additive, value: 'ceiling(log2(R)) + ceiling(log2(R
        + 1)) - Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) - 1'}
    - {name: local_ancillae, type: qubits, value: 'ceiling(log2(R)) + ceiling(log2(R
        + 1)) - Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) - 1'}
    - {name: measurements, type: additive, value: 0}
    - {name: ppm_x_weight, type: other, value: 0}
    - {name: ppm_z_weight, type: other, value: 0}
    - {name: ppms, type: additive, value: 0}
    - {name: ppr_x_weight, type: other, value: 0}
    - {name: ppr_z_weight, type: other, value: 0}
    - {name: pprs, type: additive, value: 0}
    - {name: qubit_highwater, type: qubits, value: '2*ceiling(log2(R)) + 2*ceiling(log2(R
        + 1)) - Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) - 1'}
    - {name: rotations, type: additive, value: 0}
    - {name: t_gates, type: additive, value: 0}
    - {name: toffs, type: additive, value: 'Heaviside(ceiling(log2(R)) + ceiling(log2(R
        + 1)) - 2.5, 0)'}
    connections: []
    input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
    local_variables: {}
    linked_params: []
    repetition: null
    meta: {}
  type: root
  ports:
  - {name: out_0, direction: output, size: ceiling(log2(R + 1))}
  - {name: out_1, direction: output, size: 'Max(b_as, b_givens, b_mas)'}
  - {name: out_2, direction: output, size: 'Max(0, b_mas - Max(b_as, b_givens, b_mas))'}
  - {name: out_3, direction: output, size: 'Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
  - {name: out_4, direction: output, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
  - {name: out_5, direction: output, size: 'Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))'}
  - {name: out_6, direction: output, size: ceiling(log2(R))}
  - {name: out_7, direction: output, size: N_spatial}
  - {name: out_8, direction: output, size: N_spatial}
  - {name: out_9, direction: output, size: 1}
  resources:
  - {name: active_volume, type: additive, value: '196*M_r + 220*N_spatial + 237*b_as
      + 110*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
      - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 6*b_givens*(N_spatial -
      1)*(lambda - 1) + 6*b_givens*(N_spatial - 1) + 994*b_mas + 144*lambda + (-2
      + 2*(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
      + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (-1 + (b_as + (b_as
      + ceiling(log2(R + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
      + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + (N_spatial - 1)*(108*Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas)
      - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
      + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0) - 48) + (3*b_as + 3*ceiling(log2(R + 1)))*(lambda
      - 1) + (6*b_mas + 6*ceiling(log2(R)))*(lambda - 1) + (3*lambda - 3)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ((55*(lambda - 1)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 55*ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) + (ceiling(0.75*lambda) + 49)*Max(0, ceiling(R/lambda)
      - 1) + (ceiling(0.75*lambda) + 49)*Max(0, ceiling((R + 1)/lambda) - 1) + (4*ceiling(0.75*lambda)
      + 196)*Max(0, ceiling(M_r*R/lambda) - 1) + (ceiling((0.75*lambda - 0.75)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lambda) - 1) + (2*ceiling(0.75*b_givens*(N_spatial
      - 1)*(lambda - 1) + 0.75*b_givens*(N_spatial - 1)) + 98)*Max(0, ceiling(M_r*R/lambda)
      - 1) + (ceiling(0.75*b_as + (0.75*b_as + 0.75*ceiling(log2(R + 1)))*(lambda
      - 1) + 0.75*ceiling(log2(R + 1))) + 49)*Max(0, ceiling((R + 1)/lambda) - 1)
      + (2*ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lambda - 1)
      + 0.75*ceiling(log2(R))) + 98)*Max(0, ceiling(M_r*R/lambda) - 1) + 3*Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + 684*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
      b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
      0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - 2.5, 0)) + 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(b_as, b_givens, b_mas)
      - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens,
      b_mas) - 1.5, 0) - 1) + 3*Max(b_as, b_givens, b_mas) + 5*Heaviside(1.5 - Max(b_as,
      b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens,
      b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0) + 28.5*Heaviside(Max(b_as, b_givens, b_mas) - 2.5,
      0) + 5*Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) + 49*Heaviside(Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5,
      0) + 188*Heaviside(ceiling(log2(R)) - 1.5, 0) + 47*Heaviside(Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5,
      0) + 47*Heaviside(ceiling(log2(R)) + ceiling(log2(R + 1)) - 2.5, 0) + 94*Heaviside(ceiling(log2(R
      + 1)) - nlz(R + 1) - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
      + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
      1) - 1) + 2*M_r + 1))) + 2116*ceiling(log2(R)) + 506*ceiling(log2(R + 1)) +
      3*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 110*nlz(R
      + 1) - 49*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
      1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 98*Min(2, ceiling(log2(R + 1))
      - nlz(R + 1)) - 49*Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) - 98*Min(2,
      Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 196*Min(2,
      ceiling(log2(R))) + 924*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) + 2612'}
  - {name: gidney_lelbows, type: additive, value: '4*M_r + 2*b_as + 12*b_mas + 6*lambda
      + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 1) + (2*(ceiling(log2(R + 1)) - nlz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
      + 1)))) + 0.5, 0) + 2*Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
      - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
      2*Max(0, ceiling(R/lambda) - 1) + 2*Max(0, ceiling((R + 1)/lambda) - 1) + 8*Max(0,
      ceiling(M_r*R/lambda) - 1) + 12*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
      2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
      - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 26*ceiling(log2(R)) + 3*ceiling(log2(R
      + 1)) - 2*nlz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
      + 1)) - nlz(R + 1)) - Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) -
      2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
      (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1)
      + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 26'}
  - {name: gidney_relbows, type: additive, value: '4*M_r + 2*b_as + 12*b_mas + 6*lambda
      + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 1) + (2*(ceiling(log2(R + 1)) - nlz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
      + 1)))) + 0.5, 0) + 2*Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
      - 0.5, 0))*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
      2*Max(0, ceiling(R/lambda) - 1) + 2*Max(0, ceiling((R + 1)/lambda) - 1) + 8*Max(0,
      ceiling(M_r*R/lambda) - 1) + 12*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
      2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
      - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 26*ceiling(log2(R)) + 3*ceiling(log2(R
      + 1)) - 2*nlz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
      + 1)) - nlz(R + 1)) - Min(2, ceiling(log2(R)) + ceiling(log2(R + 1)) - 1) -
      2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
      (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1)
      + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 26'}
  - {name: measurements, type: additive, value: b_as + 2*b_givens*(N_spatial - 1)*(lambda
      - 1) + 2*b_givens*(N_spatial - 1) + 2*b_mas + (b_as + ceiling(log2(R + 1)))*(lambda
      - 1) + (2*b_mas + 2*ceiling(log2(R)))*(lambda - 1) + (lambda - 1)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 2*ceiling(log2(R)) + ceiling(log2(R
      + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))}
  - {name: ppms, type: additive, value: 0}
  - {name: pprs, type: additive, value: 8*N_spatial - 8}
  - {name: qubit_highwater, type: qubits, value: 'Max(ceiling(log2(R + 1)), ceiling(log2(R))
      + ceiling(log2(R + 1)), ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, N_spatial
      + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1,
      2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + 2*ceiling(log2(R)) + 2*ceiling(log2(R + 1)) - Min(2, ceiling(log2(R))
      + ceiling(log2(R + 1)) - 1), Max(2*N_spatial + Max(b_as, b_givens, b_mas) +
      ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 1, 2*N_spatial + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R)) + ceiling(log2(R
      + 1)) + 1, 2*b_as + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 1, 2*b_as +
      ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, 3*b_as + ceiling(log2(R)) + 2*ceiling(log2(R
      + 1)) + 2, Max(2*b_as, 3*b_as) + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) +
      2, Max(ceiling(log2(R + 1)), b_as + 2*ceiling(log2(R + 1)), b_as + (b_as + ceiling(log2(R
      + 1)))*(lambda - 1) + 2*ceiling(log2(R + 1)), Max(b_as + (b_as + ceiling(log2(R
      + 1)))*(lambda - 1) - ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)), b_as +
      (b_as + ceiling(log2(R + 1)))*(lambda - 1) - 2*ceiling(log2(lambda)) + 3*ceiling(log2(R
      + 1)) - 1) + ceiling(log2(lambda))) + ceiling(log2(R)) + 1, Max(ceiling(log2(R
      + 1)), ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R + 1)) - nlz(R + 1) - Min(2,
      ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R + 1)) - nlz(Mod(R +
      1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R
      + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
      0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R + 1)), (ceiling(log2(R
      + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
      ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1) + ceiling(log2(R))
      + 1), 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + Max(ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*b_as +
      ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 1, 2*b_as + ceiling(log2(R)) + 2*ceiling(log2(R
      + 1)) + 2, 3*b_as + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, Max(2*b_as,
      3*b_as) + ceiling(log2(R)) + 2*ceiling(log2(R + 1)) + 2, Max(ceiling(log2(R
      + 1)), lambda + ceiling(log2(R + 1)), b_as + 2*ceiling(log2(R + 1)), Max(lambda
      - ceiling(log2(lambda)) + ceiling(log2(R + 1)), lambda - 2*ceiling(log2(lambda))
      + 2*ceiling(log2(R + 1)) - 1) + ceiling(log2(lambda))) + ceiling(log2(R)) +
      1, Max(ceiling(log2(R + 1)), ceiling(log2(R + 1)) + 1, 2*ceiling(log2(R + 1))
      - nlz(R + 1) - Min(2, ceiling(log2(R + 1)) - nlz(R + 1)) + 1, (ceiling(log2(R
      + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(nlz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R + 1, 2 **
      ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1)) + 1, Max(ceiling(log2(R
      + 1)), (ceiling(log2(R + 1)) - nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
      1)*Heaviside(nlz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Heaviside(-nlz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) + ceiling(log2(R + 1))) + 1) + ceiling(log2(R))
      + 1), 2*b_as + Max(2*N_spatial + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 1, 2*N_spatial + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
      1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) + 1, 2*N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R
      + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 1,
      2*N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - Min(2, Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) + 1, 2*N_spatial
      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 1, 2*N_spatial
      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1)) + ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 1, 2*N_spatial + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(ceiling(log2(R
      + 1)), lambda + ceiling(log2(R + 1)), Max(lambda - ceiling(log2(lambda)) + ceiling(log2(R
      + 1)), lambda - 2*ceiling(log2(lambda)) + 2*ceiling(log2(R + 1)) - 1) + ceiling(log2(lambda)),
      ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
      + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
      1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, 2*N_spatial + Max(b_as, b_givens,
      b_mas) + Max(ceiling(log2(R + 1)), ceiling(log2(R + 1)) + ceiling(log2(2 **
      (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), (lambda - 1)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(R + 1)) + ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), Max((lambda - 1)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - ceiling(log2(lambda)) + ceiling(log2(R
      + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)), (lambda
      - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 2*ceiling(log2(lambda))
      + 2*ceiling(log2(R + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) - 1) + ceiling(log2(lambda))) + ceiling(log2(R)) + 1,
      -M_r*(R - 1) - M_r - b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R
      - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 2, 2*N_spatial + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + M_r + b_mas + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
      + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1))
      + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1))
      + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1))
      + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(2*b_mas, 3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
      + 1)) + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas +
      2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R
      - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
      Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
      - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R
      + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + 3, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
      (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1)
      + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 **
      (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R))) + 3,
      2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas
      - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + 1) + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
      + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1), 2*b_mas
      + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(b_as, b_givens,
      b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
      (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1)
      + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 3, M_r*(R - 1) +
      M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 3, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
      - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 3, M_r + 2*N_spatial
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R
      - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
      - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 3, M_r*(R - 1) +
      M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(b_as, b_givens,
      b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 1, N_spatial + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Max(Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), lambda + Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_givens*(N_spatial
      - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
      - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))
      + 1, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
      - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
      b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + 2*Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
      - 1) + ceiling(log2(lambda))) + 1, Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + 1, N_spatial + b_givens*(N_spatial -
      1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial
      - 1) - b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial)
      - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial + b_givens*(N_spatial - 1) + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial
      + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) -
      b_givens + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens
      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) +
      Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + Mod(2,
      N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial)
      - 1)) - Mod(2, N_spatial)) + 1) + ceiling(log2(R))) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2)
      + ceiling(log2(R)) + 2, 2*N_spatial + Max(M_r*(R - 1) + M_r + b_mas + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R
      - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r*(R
      - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R
      - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r*(R
      - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(2*b_mas,
      3*b_mas) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1))
      + 5, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R - 1) + b_mas + 2*ceiling(log2(R)),
      M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
      Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
      - 1), b_mas + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)) - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
      - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)),
      Max(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - ceiling(log2(lambda)), b_mas
      + (b_mas + ceiling(log2(R)))*(lambda - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 3*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda))))
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R
      + 1)) + 4, M_r*(R - 1) + Max(M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + 1, M_r + b_mas + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3,
      M_r + b_mas + Max(Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas)) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, 2*M_r + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      - Min(2, ceiling(log2(R))) + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + 3, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
      b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
      2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
      - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens,
      b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(M_r
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + 1, M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
      ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) -
      1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1) + Max(b_as, b_givens, b_mas) - Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2)
      + ceiling(log2(R + 1)) + 1)) + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1, -M_r*(R - 1) - M_r - b_mas + Max(M_r*(R
      - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 2, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + ceiling(log2(R
      + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
      + 1)) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
      + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
      1) - 1) + 2*M_r + 1)))) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 2, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 3, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + ceiling(log2(R + 1)) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)))) + 3, 2*N_spatial + Max(M_r*(R - 1) + M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 2, M_r*(R
      - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R
      + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R
      - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) +
      ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) +
      Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
      - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
      - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)), b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(b_mas +
      (b_mas + ceiling(log2(R)))*(lambda - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)) - ceiling(log2(lambda)), b_mas + (b_mas + ceiling(log2(R)))*(lambda
      - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 3*ceiling(log2(R))
      - 2*ceiling(log2(lambda)) - 1) + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4,
      M_r*(R - 1) + Max(M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas +
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
      ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) -
      1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R))) + 3, 2*M_r
      - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens, b_mas) - 2*Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + 3, M_r + b_mas + Max(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) - Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + 2, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
      + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
      + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1) + Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1,
      2*N_spatial + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
      Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R
      - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R
      + 1)) + 2, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 3*b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + 4*b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + ceiling(log2(R + 1)) + 5, M_r*(R - 1) + M_r + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + ceiling(log2(R + 1)) + 5, M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + Max(M_r*(R - 1) + ceiling(log2(R)), M_r*(R
      - 1) + b_mas + 2*ceiling(log2(R)), M_r*(R - 1) + Max(0, -ceiling(log2(R)) +
      ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + b_mas + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)), Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1), b_mas + Max(M_r*(R - 1) +
      Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R
      - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
      - 1) + ceiling(log2(R)), M_r*(R - 1) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), b_mas + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 2*ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)
      + ceiling(log2(lambda)))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + Max(M_r +
      b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 2, M_r + b_mas + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
      (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1)
      + 2*M_r + 1))) + ceiling(log2(R)) + 3, M_r + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R))
      + 3, 2*M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 3, 2*M_r
      + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, 2*M_r + b_mas +
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) - Min(2, ceiling(log2(R)))
      + 3, 2*M_r - b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(2*b_mas, 3*b_mas - 1) + Max(b_as, b_givens,
      b_mas) - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
      ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) -
      1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 3, b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, 2*M_r - 2*Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + Max(b_as, b_givens,
      b_mas) + ceiling(log2(R)) + 1, b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
      + Max(b_as, b_givens, b_mas) + 2, M_r + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + 1, M_r - Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2*ceiling(log2(R)) + 1)
      + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2) + ceiling(log2(R + 1)) + 1) + Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1,
      2*b_mas + Max(M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + ceiling(log2(R + 1)) + 4, M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + ceiling(log2(R)), M_r*(R - 1) + 2*Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 1) + Max(b_as, b_givens, b_mas)
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R
      + 1)) + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1))
      + 4, M_r*(R - 1) + M_r + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) + ceiling(log2(R + 1)) + 4, M_r
      + 2*N_spatial + b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(M_r*(R - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      M_r*(R - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
      - 1) + Max(b_as, b_givens, b_mas) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 4, M_r*(R - 1) +
      M_r + N_spatial + b_mas + Max(N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + ceiling(log2(R))
      + 2, N_spatial + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + ceiling(log2(R)) + 2, N_spatial + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) + ceiling(log2(R)) + 3, N_spatial + Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial
      - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)),
      Max(b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R)) - ceiling(log2(lambda)),
      b_givens*(N_spatial - 1)*(lambda - 1) + b_givens*(N_spatial - 1) + 2*Max(0,
      -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda))
      - 1) + ceiling(log2(lambda))) + 3, N_spatial + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) + Max(Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), b_givens*(N_spatial - 1) + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)), Max(lambda + Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + ceiling(log2(R)) - ceiling(log2(lambda)), lambda + 2*Max(0, -ceiling(log2(R))
      + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2*ceiling(log2(lambda)) - 1)
      + ceiling(log2(lambda))) + 3, Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Max(N_spatial + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, N_spatial
      + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) + 1, Max(N_spatial + b_givens*(N_spatial - 1) +
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens + Max(b_givens
      + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens
      + 2*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0,
      b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(b_as,
      b_givens, b_mas)) + Mod(2, N_spatial) - 1)) - Mod(2, N_spatial)) + 1, Max(N_spatial
      + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas), N_spatial
      + b_givens*(N_spatial - 1) + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas), N_spatial + b_givens*(N_spatial - 1) - b_givens
      + Max(b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial),
      b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      + Mod(2, N_spatial), b_givens + Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) + Mod(2, N_spatial), b_givens + Max(Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas), Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas)) + Mod(2, N_spatial), Max(b_givens + Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) + 1, b_givens + 2*Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + 2*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 2*Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + 2*Max(b_as, b_givens, b_mas)) + Mod(2, N_spatial) - 1))
      - Mod(2, N_spatial)) + 1) + ceiling(log2(R)) + 2) - Mod(1, ceiling(log2(2 **
      (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R + 1)) + 2)
      + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      + 2) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)
      + ceiling(log2(R + 1)) + 1))'}
  - {name: rotations, type: additive, value: '(N_spatial - 1)*Max(0, Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
      + (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as,
      b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + Max(0,
      Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
      - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1) + 4'}
  - {name: t_gates, type: additive, value: '(N_spatial - 1)*Heaviside(-Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0) + (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
      + Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(Max(b_as,
      b_givens, b_mas) - 2.5, 0) + Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0) + 24*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))'}
  - {name: toffs, type: additive, value: '4*N_spatial + 2*b_givens*(-1 + (b_givens*(N_spatial
      - 1)*(lambda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
      - 1) + (-2 + 2*(b_mas + (b_mas + ceiling(log2(R)))*(lambda - 1) + ceiling(log2(R)))/(b_mas
      + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + (-1 + (b_as + (b_as + ceiling(log2(R
      + 1)))*(lambda - 1) + ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as
      + ceiling(log2(R + 1))) + (2*N_spatial - 2)*(Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + (2*N_spatial - 2)*(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + (((lambda
      - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)) + 4*Heaviside(ceiling(log2(R)) - 1.5, 0) +
      Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
      ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) -
      1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + Heaviside(ceiling(log2(R))
      + ceiling(log2(R + 1)) - 2.5, 0) + 2*Heaviside(ceiling(log2(R + 1)) - nlz(R
      + 1) - 1.5, 0) + 4*ceiling(log2(R)) + 2*ceiling(log2(R + 1))'}
  connections:
  - {source: LCU_compute_0.out_0, target: z_0.thru_0}
  - {source: LCU_compute_0.out_1, target: out_1}
  - {source: LCU_compute_0.out_2, target: out_2}
  - {source: LCU_compute_0.out_3, target: out_3}
  - {source: LCU_compute_0.out_4, target: out_4}
  - {source: LCU_compute_0.out_5, target: out_5}
  - {source: LCU_compute_0.out_6, target: z_0.thru_1}
  - {source: LCU_compute_0.out_7, target: out_7}
  - {source: LCU_compute_0.out_8, target: out_8}
  - {source: LCU_compute_0.out_9, target: out_9}
  - {source: RotationCatalystStatePrep_compute_0.out_0, target: LCU_compute_0.in_1}
  - {source: qubits_alloc_0.out_0, target: LCU_compute_0.in_0}
  - {source: qubits_alloc_1.out_0, target: LCU_compute_0.in_2}
  - {source: qubits_alloc_2.out_0, target: LCU_compute_0.in_5}
  - {source: qubits_alloc_3.out_0, target: LCU_compute_0.in_3}
  - {source: qubits_alloc_4.out_0, target: LCU_compute_0.in_4}
  - {source: z_0.thru_0, target: out_0}
  - {source: z_0.thru_1, target: out_6}
  input_params: [M_r, N_spatial, R, b_as, b_givens, b_mas, lambda]
  local_variables: {}
  linked_params: []
  repetition: null
  meta: {}
