program:
  children:
  - input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: qubits_alloc_0
    ports:
    - direction: output
      name: out_0
      size: ceiling(log2(R + 1))
    repetition: null
    type: qubits_alloc
  - input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: qubits_alloc_1
    ports:
    - direction: output
      name: out_0
      size: ceiling(log2(R))
    repetition: null
    type: qubits_alloc
  - input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: qubits_alloc_2
    ports:
    - direction: output
      name: out_0
      size: 1
    repetition: null
    type: qubits_alloc
  - input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: qubits_alloc_3
    ports:
    - direction: output
      name: out_0
      size: N_spatial
    repetition: null
    type: qubits_alloc
  - input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: qubits_alloc_4
    ports:
    - direction: output
      name: out_0
      size: N_spatial
    repetition: null
    type: qubits_alloc
  - children:
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: qubits_alloc_0
      ports:
      - direction: output
        name: out_0
        size: Max(b_as, b_givens, b_mas)
      repetition: null
      type: qubits_alloc
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: had_0
      ports:
      - direction: through
        name: thru_0
        size: Max(b_as, b_givens, b_mas)
      repetition: null
      resources:
      - name: active_volume
        type: additive
        value: 3*Max(b_as, b_givens, b_mas)
      - name: gidney_lelbows
        type: additive
        value: 0
      - name: gidney_relbows
        type: additive
        value: 0
      - name: measurements
        type: additive
        value: 0
      - name: ppm_x_weight
        type: other
        value: 0
      - name: ppm_z_weight
        type: other
        value: 0
      - name: ppms
        type: additive
        value: 0
      - name: ppr_x_weight
        type: other
        value: 0
      - name: ppr_z_weight
        type: other
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: 0
      - name: t_gates
        type: additive
        value: 0
      - name: toffs
        type: additive
        value: 0
      type: had
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: split_0
      ports:
      - direction: input
        name: in_0
        size: Max(b_as, b_givens, b_mas)
      - direction: output
        name: out_0
        size: 1
      - direction: output
        name: out_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      repetition: null
      type: split
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: z_0
      ports:
      - direction: through
        name: thru_0
        size: 1
      repetition: null
      resources:
      - name: gidney_lelbows
        type: additive
        value: 0
      - name: gidney_relbows
        type: additive
        value: 0
      - name: measurements
        type: additive
        value: 0
      - name: ppm_x_weight
        type: other
        value: 0
      - name: ppm_z_weight
        type: other
        value: 0
      - name: ppms
        type: additive
        value: 0
      - name: ppr_x_weight
        type: other
        value: 0
      - name: ppr_z_weight
        type: other
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: 0
      - name: t_gates
        type: additive
        value: 0
      - name: toffs
        type: additive
        value: 0
      type: z
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: merge_1
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: input
        name: in_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      - direction: output
        name: out_0
        size: Max(b_as, b_givens, b_mas)
      repetition: null
      type: merge
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: split_2
      ports:
      - direction: input
        name: in_0
        size: Max(b_as, b_givens, b_mas)
      - direction: output
        name: out_0
        size: 1
      - direction: output
        name: out_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      repetition: null
      type: split
    - children:
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: s_inv_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 5
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: s_inv
        connections:
        - source: in_0
          target: s_inv_0.thru_0
        - source: s_inv_0.thru_0
          target: out_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: Repeated_s_inv_0
        ports:
        - direction: input
          name: in_0
          size: 1
        - direction: output
          name: out_0
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 5
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: qubrick
      connections:
      - source: Repeated_s_inv_0.out_0
        target: out_0
      - source: in_0
        target: Repeated_s_inv_0.in_0
      input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: Repeated_s_inv_0_repetition
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: output
        name: out_0
        size: 1
      repetition:
        count: Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0)
        sequence:
          multiplier: 1
          type: constant
      resources:
      - name: active_volume
        type: additive
        value: 5*Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0)
      - name: gidney_lelbows
        type: additive
        value: 0
      - name: gidney_relbows
        type: additive
        value: 0
      - name: measurements
        type: additive
        value: 0
      - name: ppms
        type: additive
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: 0
      - name: t_gates
        type: additive
        value: 0
      - name: toffs
        type: additive
        value: 0
      type: qubrick
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: merge_3
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: input
        name: in_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      - direction: output
        name: out_0
        size: Max(b_as, b_givens, b_mas)
      repetition: null
      type: merge
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: split_4
      ports:
      - direction: input
        name: in_0
        size: Max(b_as, b_givens, b_mas)
      - direction: output
        name: out_0
        size: 1
      - direction: output
        name: out_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      repetition: null
      type: split
    - children:
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: t_inv_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 28.5
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 1
          - name: toffs
            type: additive
            value: 0
          type: t_inv
        connections:
        - source: in_0
          target: t_inv_0.thru_0
        - source: t_inv_0.thru_0
          target: out_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: Repeated_t_inv_0
        ports:
        - direction: input
          name: in_0
          size: 1
        - direction: output
          name: out_0
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 28.5
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 1
        - name: toffs
          type: additive
          value: 0
        type: qubrick
      connections:
      - source: Repeated_t_inv_0.out_0
        target: out_0
      - source: in_0
        target: Repeated_t_inv_0.in_0
      input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: Repeated_t_inv_0_repetition
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: output
        name: out_0
        size: 1
      repetition:
        count: Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
        sequence:
          multiplier: 1
          type: constant
      resources:
      - name: active_volume
        type: additive
        value: 28.5*Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
      - name: gidney_lelbows
        type: additive
        value: 0
      - name: gidney_relbows
        type: additive
        value: 0
      - name: measurements
        type: additive
        value: 0
      - name: ppms
        type: additive
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: 0
      - name: t_gates
        type: additive
        value: Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
      - name: toffs
        type: additive
        value: 0
      type: qubrick
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: merge_5
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: input
        name: in_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      - direction: output
        name: out_0
        size: Max(b_as, b_givens, b_mas)
      repetition: null
      type: merge
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: split_6
      ports:
      - direction: input
        name: in_0
        size: Max(b_as, b_givens, b_mas)
      - direction: output
        name: out_0
        size: 1
      - direction: output
        name: out_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      repetition: null
      type: split
    - children:
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: phase_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 1397
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 1
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: phase
        connections:
        - source: in_0
          target: phase_0.thru_0
        - source: phase_0.thru_0
          target: out_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: Repeated_phase_0
        ports:
        - direction: input
          name: in_0
          size: 1
        - direction: output
          name: out_0
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 1397
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 1
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: qubrick
      connections:
      - source: Repeated_phase_0.out_0
        target: out_0
      - source: in_0
        target: Repeated_phase_0.in_0
      input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: Repeated_phase_0_repetition
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: output
        name: out_0
        size: 1
      repetition:
        count: Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens, b_mas)
          - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1)
        sequence:
          multiplier: 1
          type: constant
      resources:
      - name: active_volume
        type: additive
        value: 1397*Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens,
          b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1)
      - name: gidney_lelbows
        type: additive
        value: 0
      - name: gidney_relbows
        type: additive
        value: 0
      - name: measurements
        type: additive
        value: 0
      - name: ppms
        type: additive
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens, b_mas)
          - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1)
      - name: t_gates
        type: additive
        value: 0
      - name: toffs
        type: additive
        value: 0
      type: qubrick
    - input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: merge_7
      ports:
      - direction: input
        name: in_0
        size: 1
      - direction: input
        name: in_remainder
        size: Max(b_as, b_givens, b_mas) - 1
      - direction: output
        name: out_0
        size: Max(b_as, b_givens, b_mas)
      repetition: null
      type: merge
    connections:
    - source: Repeated_phase_0_repetition.out_0
      target: merge_7.in_0
    - source: Repeated_s_inv_0_repetition.out_0
      target: merge_3.in_0
    - source: Repeated_t_inv_0_repetition.out_0
      target: merge_5.in_0
    - source: had_0.thru_0
      target: split_0.in_0
    - source: merge_1.out_0
      target: split_2.in_0
    - source: merge_3.out_0
      target: split_4.in_0
    - source: merge_5.out_0
      target: split_6.in_0
    - source: merge_7.out_0
      target: out_0
    - source: qubits_alloc_0.out_0
      target: had_0.thru_0
    - source: split_0.out_0
      target: z_0.thru_0
    - source: split_0.out_remainder
      target: merge_1.in_remainder
    - source: split_2.out_0
      target: Repeated_s_inv_0_repetition.in_0
    - source: split_2.out_remainder
      target: merge_3.in_remainder
    - source: split_4.out_0
      target: Repeated_t_inv_0_repetition.in_0
    - source: split_4.out_remainder
      target: merge_5.in_remainder
    - source: split_6.out_0
      target: Repeated_phase_0_repetition.in_0
    - source: split_6.out_remainder
      target: merge_7.in_remainder
    - source: z_0.thru_0
      target: merge_1.in_0
    input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: RotationCatalystStatePrep_compute_0
    ports:
    - direction: output
      name: out_0
      size: Max(b_as, b_givens, b_mas)
    repetition: null
    resources:
    - name: active_volume
      type: additive
      value: 1397*Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens,
        b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1) + 3*Max(b_as,
        b_givens, b_mas) + 28.5*Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) + 5*Heaviside(Max(b_as,
        b_givens, b_mas) - 1.5, 0)
    - name: gidney_lelbows
      type: additive
      value: 0
    - name: gidney_relbows
      type: additive
      value: 0
    - name: measurements
      type: additive
      value: 0
    - name: ppms
      type: additive
      value: 0
    - name: pprs
      type: additive
      value: 0
    - name: rotations
      type: additive
      value: Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens, b_mas)
        - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1)
    - name: t_gates
      type: additive
      value: Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
    - name: toffs
      type: additive
      value: 0
    type: qubrick
  - children:
    - children:
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: 1
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(R + 1))
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: ry_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 1399
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 1
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: ry
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
                - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
                + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*ceiling(log2(R + 1)) - 60
            - name: gidney_lelbows
              type: additive
              value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R +
                1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) +
                0.5, 0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
                0.5, 0))*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
                0)
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: qubits_alloc_0.out_0
            target: out_1
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: CompareLT_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*ceiling(log2(R + 1)) - 60
          - name: gidney_lelbows
            type: additive
            value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_0
          ports:
          - direction: input
            name: in_0
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) -
              1
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: z_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          - direction: through
            name: thru_1
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 4
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: z
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_1
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) -
              1
          - direction: output
            name: out_0
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          repetition: null
          type: merge
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*ceiling(log2(R + 1)) - 60
            - name: gidney_relbows
              type: additive
              value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R +
                1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) +
                0.5, 0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
                0.5, 0))*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
                0)
            type: intrinsic_cost
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
                - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
                + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
            repetition: null
            type: qubits_alloc
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: qubits_free_0.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: CompareLT_uncompute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*ceiling(log2(R + 1)) - 60
          - name: gidney_relbows
            type: additive
            value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: ry_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 1399
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 1
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: ry
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_2
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          - direction: output
            name: out_remainder
            size: ntz(R + 1)
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_1
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(R + 1)) - 3*ntz(R + 1)
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: z_1
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          - direction: through
            name: thru_1
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 47*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + 49*ceiling(log2(R
              + 1)) - 49*ntz(R + 1) - 49*Min(2, ceiling(log2(R + 1)) - ntz(R + 1))
          - name: gidney_lelbows
            type: additive
            value: ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1))
              - ntz(R + 1))
          - name: gidney_relbows
            type: additive
            value: ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1))
              - ntz(R + 1))
          - name: local_ancillae
            type: qubits
            value: ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1))
              - ntz(R + 1))
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0)
          type: z
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_2
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(R + 1)) - 3*ntz(R + 1)
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_7
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          - direction: input
            name: in_remainder
            size: ntz(R + 1)
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: x_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: x
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: relbow_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: relbow
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: 1
          repetition: null
          type: qubits_alloc
        connections:
        - source: CompareLT_compute_0.out_0
          target: CompareLT_uncompute_0.in_0
        - source: CompareLT_compute_0.out_1
          target: split_0.in_0
        - source: CompareLT_uncompute_0.out_0
          target: split_2.in_0
        - source: had_0.thru_0
          target: CompareLT_compute_0.in_0
        - source: had_1.thru_0
          target: z_1.thru_0
        - source: had_2.thru_0
          target: merge_7.in_0
        - source: in_0
          target: had_0.thru_0
        - source: merge_1.out_0
          target: CompareLT_uncompute_0.in_1
        - source: merge_7.out_0
          target: out_0
        - source: qubits_alloc_0.out_0
          target: ry_0.thru_0
        - source: relbow_0.thru_0
          target: qubits_free_0.in_0
        - source: ry_0.thru_0
          target: z_0.thru_1
        - source: ry_1.thru_0
          target: z_1.thru_1
        - source: split_0.out_0
          target: z_0.thru_0
        - source: split_0.out_remainder
          target: merge_1.in_remainder
        - source: split_2.out_0
          target: had_1.thru_0
        - source: split_2.out_remainder
          target: merge_7.in_remainder
        - source: x_0.thru_0
          target: relbow_0.thru_0
        - source: z_0.thru_0
          target: merge_1.in_0
        - source: z_0.thru_1
          target: ry_1.thru_0
        - source: z_1.thru_0
          target: had_2.thru_0
        - source: z_1.thru_1
          target: x_0.thru_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: RealUSP_compute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 47*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + 172*ceiling(log2(R
            + 1)) - 55*ntz(R + 1) - 49*Min(2, ceiling(log2(R + 1)) - ntz(R + 1)) +
            2682
        - name: gidney_lelbows
          type: additive
          value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
            - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
            Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - ntz(R
            + 1) - Min(2, ceiling(log2(R + 1)) - ntz(R + 1))
        - name: gidney_relbows
          type: additive
          value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
            - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
            Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - ntz(R
            + 1) - Min(2, ceiling(log2(R + 1)) - ntz(R + 1))
        - name: measurements
          type: additive
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 2
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0)
        type: qubrick
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_1
          ports:
          - direction: output
            name: out_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1)) - 1
          - direction: output
            name: out_remainder
            size: 1
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: ceiling(log2(R + 1)) - 2
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: ceiling(log2(R + 1)) - 2
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (ceiling(1.5*b_as + 1.5*ceiling(log2(R + 1))) + 49)*Max(0, ceiling(R/2
                + 1/2) - 1)
            - name: gidney_lelbows
              type: additive
              value: Max(0, ceiling(R/2 + 1/2) - 1)
            - name: gidney_relbows
              type: additive
              value: Max(0, ceiling(R/2 + 1/2) - 1)
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: in_2
            target: out_2
          - source: qubits_alloc_0.out_0
            target: qubits_free_0.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: GoogleSelectOptimized_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1)) - 1
          - direction: input
            name: in_1
            size: b_as + ceiling(log2(R + 1))
          - direction: input
            name: in_2
            size: b_as + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1)) - 1
          - direction: output
            name: out_1
            size: b_as + ceiling(log2(R + 1))
          - direction: output
            name: out_2
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (ceiling(1.5*b_as + 1.5*ceiling(log2(R + 1))) + 49)*Max(0, ceiling(R/2
              + 1/2) - 1)
          - name: gidney_lelbows
            type: additive
            value: Max(0, ceiling(R/2 + 1/2) - 1)
          - name: gidney_relbows
            type: additive
            value: Max(0, ceiling(R/2 + 1/2) - 1)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_1
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1)) - 1
          - direction: input
            name: in_remainder
            size: 1
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_2
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: ceiling(log2(R + 1)) - 1
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
                + 1))))*(55*b_as + 55*ceiling(log2(R + 1)))
            - name: toffs
              type: additive
              value: (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
                + 1))))*(b_as + ceiling(log2(R + 1)))
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: in_2
            target: out_2
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: SwapUp_compute_0
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_1
            size: b_as + ceiling(log2(R + 1))
          - direction: input
            name: in_2
            size: b_as + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_1
            size: b_as + ceiling(log2(R + 1))
          - direction: output
            name: out_2
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
              + 1))))*(55*b_as + 55*ceiling(log2(R + 1)))
          - name: toffs
            type: additive
            value: (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
              + 1))))*(b_as + ceiling(log2(R + 1)))
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_3
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: ceiling(log2(R + 1)) - 1
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*b_as + 3*ceiling(log2(R + 1))
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: read_0
          ports:
          - direction: through
            name: thru_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: b_as + ceiling(log2(R + 1))
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: read
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          type: qubits_alloc
        connections:
        - source: GoogleSelectOptimized_compute_0.out_0
          target: merge_1.in_0
        - source: GoogleSelectOptimized_compute_0.out_1
          target: SwapUp_compute_0.in_1
        - source: GoogleSelectOptimized_compute_0.out_2
          target: SwapUp_compute_0.in_2
        - source: SwapUp_compute_0.out_0
          target: merge_3.in_0
        - source: SwapUp_compute_0.out_1
          target: out_1
        - source: SwapUp_compute_0.out_2
          target: had_0.thru_0
        - source: had_0.thru_0
          target: read_0.thru_0
        - source: in_0
          target: split_0.in_0
        - source: merge_1.out_0
          target: split_2.in_0
        - source: merge_3.out_0
          target: out_0
        - source: qubits_alloc_0.out_0
          target: GoogleSelectOptimized_compute_0.in_1
        - source: qubits_alloc_1.out_0
          target: GoogleSelectOptimized_compute_0.in_2
        - source: read_0.thru_0
          target: qubits_free_0.in_0
        - source: split_0.out_0
          target: GoogleSelectOptimized_compute_0.in_0
        - source: split_0.out_remainder
          target: merge_1.in_remainder
        - source: split_2.out_0
          target: SwapUp_compute_0.in_0
        - source: split_2.out_remainder
          target: merge_3.in_remainder
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: DataLookupClean_compute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_1
          size: b_as + ceiling(log2(R + 1))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 3*b_as + (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
            + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + (ceiling(1.5*b_as + 1.5*ceiling(log2(R
            + 1))) + 49)*Max(0, ceiling(R/2 + 1/2) - 1) + 3*ceiling(log2(R + 1))
        - name: gidney_lelbows
          type: additive
          value: Max(0, ceiling(R/2 + 1/2) - 1)
        - name: gidney_relbows
          type: additive
          value: Max(0, ceiling(R/2 + 1/2) - 1)
        - name: measurements
          type: additive
          value: b_as + ceiling(log2(R + 1))
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R +
            1))))*(b_as + ceiling(log2(R + 1)))
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: qubits_alloc_0
        ports:
        - direction: output
          name: out_0
          size: b_as
        repetition: null
        type: qubits_alloc
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: had_0
        ports:
        - direction: through
          name: thru_0
          size: b_as
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 3*b_as
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: had
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: qubits_alloc_1
        ports:
        - direction: output
          name: out_0
          size: 1
        repetition: null
        type: qubits_alloc
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_0
        ports:
        - direction: input
          name: in_0
          size: b_as + ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: b_as
        - direction: output
          name: out_remainder
          size: ceiling(log2(R + 1))
        repetition: null
        type: split
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: b_as
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: cost_event
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*b_as - 60
          - name: gidney_lelbows
            type: additive
            value: b_as
          type: intrinsic_cost
        connections:
        - source: in_0
          target: out_0
        - source: in_1
          target: out_1
        - source: qubits_alloc_0.out_0
          target: out_2
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: CompareGE_compute_0
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: input
          name: in_1
          size: b_as
        - direction: output
          name: out_0
          size: b_as
        - direction: output
          name: out_1
          size: b_as
        - direction: output
          name: out_2
          size: b_as
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 57*b_as - 60
        - name: gidney_lelbows
          type: additive
          value: b_as
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_2
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: output
          name: out_0
          size: 1
        - direction: output
          name: out_remainder
          size: b_as - 1
        repetition: null
        type: split
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: x_0
        ports:
        - direction: through
          name: thru_0
          size: 1
        - direction: through
          name: thru_1
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 4
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: x
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_3
        ports:
        - direction: input
          name: in_0
          size: 1
        - direction: input
          name: in_remainder
          size: b_as - 1
        - direction: output
          name: out_0
          size: b_as
        repetition: null
        type: merge
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: cost_event
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*b_as - 60
          - name: gidney_relbows
            type: additive
            value: b_as
          type: intrinsic_cost
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: b_as
          repetition: null
          type: qubits_alloc
        connections:
        - source: in_0
          target: out_0
        - source: in_1
          target: out_1
        - source: in_2
          target: qubits_free_0.in_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: CompareGE_uncompute_0
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: input
          name: in_1
          size: b_as
        - direction: input
          name: in_2
          size: b_as
        - direction: output
          name: out_0
          size: b_as
        - direction: output
          name: out_1
          size: b_as
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 57*b_as - 60
        - name: gidney_relbows
          type: additive
          value: b_as
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_5
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: input
          name: in_remainder
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: b_as + ceiling(log2(R + 1))
        repetition: null
        type: merge
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_6
        ports:
        - direction: input
          name: in_0
          size: b_as + ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_remainder
          size: b_as
        repetition: null
        type: split
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: swap_0
        ports:
        - direction: through
          name: thru_0
          size: ceiling(log2(R + 1))
        - direction: through
          name: thru_1
          size: ceiling(log2(R + 1))
        - direction: through
          name: thru_2
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 55*ceiling(log2(R + 1))
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: ceiling(log2(R + 1))
        type: swap
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_7
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: input
          name: in_remainder
          size: b_as
        - direction: output
          name: out_0
          size: b_as + ceiling(log2(R + 1))
        repetition: null
        type: merge
      connections:
      - source: CompareGE_compute_0.out_0
        target: CompareGE_uncompute_0.in_0
      - source: CompareGE_compute_0.out_1
        target: CompareGE_uncompute_0.in_1
      - source: CompareGE_compute_0.out_2
        target: split_2.in_0
      - source: CompareGE_uncompute_0.out_0
        target: merge_5.in_0
      - source: CompareGE_uncompute_0.out_1
        target: out_2
      - source: DataLookupClean_compute_0.out_0
        target: swap_0.thru_0
      - source: DataLookupClean_compute_0.out_1
        target: split_0.in_0
      - source: RealUSP_compute_0.out_0
        target: DataLookupClean_compute_0.in_0
      - source: had_0.thru_0
        target: CompareGE_compute_0.in_1
      - source: in_0
        target: RealUSP_compute_0.in_0
      - source: in_1
        target: out_4
      - source: in_2
        target: out_5
      - source: merge_3.out_0
        target: CompareGE_uncompute_0.in_2
      - source: merge_5.out_0
        target: split_6.in_0
      - source: merge_7.out_0
        target: out_1
      - source: qubits_alloc_0.out_0
        target: had_0.thru_0
      - source: qubits_alloc_1.out_0
        target: x_0.thru_0
      - source: split_0.out_0
        target: CompareGE_compute_0.in_0
      - source: split_0.out_remainder
        target: merge_5.in_remainder
      - source: split_2.out_0
        target: x_0.thru_1
      - source: split_2.out_remainder
        target: merge_3.in_remainder
      - source: split_6.out_0
        target: swap_0.thru_1
      - source: split_6.out_remainder
        target: merge_7.in_remainder
      - source: swap_0.thru_0
        target: out_0
      - source: swap_0.thru_1
        target: merge_7.in_0
      - source: swap_0.thru_2
        target: out_3
      - source: x_0.thru_0
        target: swap_0.thru_2
      - source: x_0.thru_1
        target: merge_3.in_0
      input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: AliasSampling_compute_0
      ports:
      - direction: input
        name: in_0
        size: ceiling(log2(R + 1))
      - direction: input
        name: in_1
        size: ceiling(log2(R))
      - direction: input
        name: in_2
        size: 1
      - direction: output
        name: out_0
        size: ceiling(log2(R + 1))
      - direction: output
        name: out_1
        size: b_as + ceiling(log2(R + 1))
      - direction: output
        name: out_2
        size: b_as
      - direction: output
        name: out_3
        size: 1
      - direction: output
        name: out_4
        size: ceiling(log2(R))
      - direction: output
        name: out_5
        size: 1
      repetition: null
      resources:
      - name: active_volume
        type: additive
        value: 120*b_as + (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
          + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + (ceiling(1.5*b_as + 1.5*ceiling(log2(R
          + 1))) + 49)*Max(0, ceiling(R/2 + 1/2) - 1) + 47*Heaviside(ceiling(log2(R
          + 1)) - ntz(R + 1) - 1.5, 0) + 230*ceiling(log2(R + 1)) - 55*ntz(R + 1)
          - 49*Min(2, ceiling(log2(R + 1)) - ntz(R + 1)) + 2566
      - name: gidney_lelbows
        type: additive
        value: b_as + ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
          0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Max(0, ceiling(R/2 + 1/2) -
          1) + ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1)) - ntz(R
          + 1))
      - name: gidney_relbows
        type: additive
        value: b_as + ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
          0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Max(0, ceiling(R/2 + 1/2) -
          1) + ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1)) - ntz(R
          + 1))
      - name: measurements
        type: additive
        value: b_as + ceiling(log2(R + 1))
      - name: ppms
        type: additive
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: 2
      - name: t_gates
        type: additive
        value: 0
      - name: toffs
        type: additive
        value: (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as
          + ceiling(log2(R + 1))) + Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) -
          1.5, 0) + ceiling(log2(R + 1))
      type: qubrick
    - children:
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_1
          ports:
          - direction: output
            name: out_0
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_remainder
            size: ceiling(log2(lamda))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: -ceiling(log2(lamda)) + ceiling(log2(R + 1)) - 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: -ceiling(log2(lamda)) + ceiling(log2(R + 1)) - 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (ceiling((0.75*lamda - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2
                ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
                + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r +
                1))) + 49)*Max(0, ceiling(R/lamda) - 1)
            - name: gidney_lelbows
              type: additive
              value: Max(0, ceiling(R/lamda) - 1)
            - name: gidney_relbows
              type: additive
              value: Max(0, ceiling(R/lamda) - 1)
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: in_2
            target: out_2
          - source: qubits_alloc_0.out_0
            target: qubits_free_0.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: GoogleSelectOptimized_compute_0
          ports:
          - direction: input
            name: in_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          - direction: input
            name: in_2
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          - direction: output
            name: out_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          - direction: output
            name: out_2
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (ceiling((0.75*lamda - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 49)*Max(0, ceiling(R/lamda) - 1)
          - name: gidney_lelbows
            type: additive
            value: Max(0, ceiling(R/lamda) - 1)
          - name: gidney_relbows
            type: additive
            value: Max(0, ceiling(R/lamda) - 1)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_1
          ports:
          - direction: input
            name: in_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: input
            name: in_remainder
            size: ceiling(log2(lamda))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_2
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (55*((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
                - 55)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))
            - name: toffs
              type: additive
              value: (((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 **
                (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
                ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
                - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
                (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
                + 1) - 1) + 2*M_r + 1))
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: in_2
            target: out_2
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: SwapUp_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_1
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          - direction: input
            name: in_2
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_1
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          - direction: output
            name: out_2
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (55*((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          - name: toffs
            type: additive
            value: (((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_3
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (3*lamda - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: read_0
          ports:
          - direction: through
            name: thru_0
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: read
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          type: qubits_alloc
        connections:
        - source: GoogleSelectOptimized_compute_0.out_0
          target: merge_1.in_0
        - source: GoogleSelectOptimized_compute_0.out_1
          target: SwapUp_compute_0.in_1
        - source: GoogleSelectOptimized_compute_0.out_2
          target: SwapUp_compute_0.in_2
        - source: SwapUp_compute_0.out_0
          target: merge_3.in_0
        - source: SwapUp_compute_0.out_1
          target: out_1
        - source: SwapUp_compute_0.out_2
          target: had_0.thru_0
        - source: had_0.thru_0
          target: read_0.thru_0
        - source: in_0
          target: split_0.in_0
        - source: merge_1.out_0
          target: split_2.in_0
        - source: merge_3.out_0
          target: out_0
        - source: qubits_alloc_0.out_0
          target: GoogleSelectOptimized_compute_0.in_1
        - source: qubits_alloc_1.out_0
          target: GoogleSelectOptimized_compute_0.in_2
        - source: read_0.thru_0
          target: qubits_free_0.in_0
        - source: split_0.out_0
          target: GoogleSelectOptimized_compute_0.in_0
        - source: split_0.out_remainder
          target: merge_1.in_remainder
        - source: split_2.out_0
          target: SwapUp_compute_0.in_0
        - source: split_2.out_remainder
          target: merge_3.in_remainder
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: DataLookupClean_compute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_1
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: (3*lamda - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)) + (55*((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + (ceiling((0.75*lamda - 0.75)*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lamda)
            - 1)
        - name: gidney_lelbows
          type: additive
          value: Max(0, ceiling(R/lamda) - 1)
        - name: gidney_relbows
          type: additive
          value: Max(0, ceiling(R/lamda) - 1)
        - name: measurements
          type: additive
          value: (lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: (((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
            1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        - direction: output
          name: out_0
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: output
          name: out_1
          size: M_r*(R - 1)
        - direction: output
          name: out_2
          size: b_mas
        - direction: output
          name: out_remainder
          size: -M_r*(R - 1) - M_r - b_mas + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1
        repetition: null
        type: split
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - children:
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: 1
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: lelbow_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: lelbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: s_inv_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: s_inv
                  connections:
                  - source: in_0
                    target: s_inv_0.thru_0
                  - source: s_inv_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_s_inv_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_s_inv_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_s_inv_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_s_inv_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1.5, 0)
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 5*Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1.5, 0)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: t_inv_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 28.5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 1
                    - name: toffs
                      type: additive
                      value: 0
                    type: t_inv
                  connections:
                  - source: in_0
                    target: t_inv_0.thru_0
                  - source: t_inv_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_t_inv_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 28.5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 1
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_t_inv_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_t_inv_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_t_inv_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 2.5, 0)
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 2.5, 0)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 2.5, 0)
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_9
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: phase_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 1397
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 1
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: phase
                  connections:
                  - source: in_0
                    target: phase_0.thru_0
                  - source: phase_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_phase_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 1397
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 1
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_phase_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_phase_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_phase_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                    - 2.5, 0))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                    - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 1
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_11
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                repetition: null
                type: split
              connections:
              - source: Repeated_phase_0_repetition.out_0
                target: merge_10.in_0
              - source: Repeated_s_inv_0_repetition.out_0
                target: merge_2.in_0
              - source: Repeated_t_inv_0_repetition.out_0
                target: merge_6.in_0
              - source: had_0.thru_0
                target: merge_0.in_0
              - source: in_0
                target: merge_0.in_1
              - source: merge_0.out_0
                target: split_1.in_0
              - source: merge_10.out_0
                target: split_11.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_9.in_0
              - source: qubits_alloc_0.out_0
                target: had_0.thru_0
              - source: split_1.out_0
                target: Repeated_s_inv_0_repetition.in_0
              - source: split_1.out_remainder
                target: merge_2.in_remainder
              - source: split_11.out_0
                target: out_0
              - source: split_11.out_1
                target: out_1
              - source: split_3.out_0
                target: merge_4.in_0
              - source: split_3.out_1
                target: merge_4.in_1
              - source: split_5.out_0
                target: Repeated_t_inv_0_repetition.in_0
              - source: split_5.out_remainder
                target: merge_6.in_remainder
              - source: split_7.out_0
                target: merge_8.in_0
              - source: split_7.out_1
                target: merge_8.in_1
              - source: split_9.out_0
                target: Repeated_phase_0_repetition.in_0
              - source: split_9.out_remainder
                target: merge_10.in_remainder
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: RotationCatalystStatePrep_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 1397*Max(0,
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
                  b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 -
                  Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 5*Heaviside(1.5
                  - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5
                  - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
                  - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                  - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
              - name: t_gates
                type: additive
                value: Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  - 2.5, 0)
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: lelbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: lelbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_3
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: lelbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 44
                    - name: gidney_lelbows
                      type: additive
                      value: 1
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: lelbow
                  connections:
                  - source: in_0
                    target: lelbow_0.thru_0
                  - source: in_1
                    target: lelbow_0.thru_1
                  - source: in_2
                    target: lelbow_0.thru_2
                  - source: lelbow_0.thru_0
                    target: out_0
                  - source: lelbow_0.thru_1
                    target: out_1
                  - source: lelbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 44
                  - name: gidney_lelbows
                    type: additive
                    value: 1
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                    + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_9
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_10
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_9.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_8.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_8.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_11.in_0
              - source: in_0
                target: split_0.in_0
              - source: lelbow_0.thru_0
                target: merge_3.in_0
              - source: lelbow_0.thru_1
                target: x_0.thru_0
              - source: merge_11.out_0
                target: out_1
              - source: merge_3.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_10.in_0
              - source: merge_9.out_0
                target: out_0
              - source: qubits_alloc_0.out_0
                target: split_1.in_0
              - source: split_0.out_0
                target: lelbow_0.thru_0
              - source: split_0.out_remainder
                target: merge_3.in_remainder
              - source: split_1.out_0
                target: lelbow_0.thru_1
              - source: split_1.out_remainder
                target: merge_5.in_remainder
              - source: split_10.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_10.out_remainder
                target: merge_11.in_remainder
              - source: split_6.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_6.out_remainder
                target: merge_9.in_remainder
              - source: split_7.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_7.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: x_0.thru_0
                target: merge_5.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_0.out_0
                target: out_0
              - source: Repeated_had_0.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_0.in_0
              - source: in_1
                target: Repeated_had_0.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_0_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_1
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_1
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_2
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_3
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_4
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_5
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_6
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_7
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_8
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_9
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_2
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_10
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_11
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_12
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: z
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_13
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_2
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_14
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_15
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_3
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_16
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_17
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_18
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_19
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_20
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_21
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_22
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_23
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_4
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_24
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_25
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_3
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_1.out_0
                target: out_0
              - source: Repeated_had_1.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_1.in_0
              - source: in_1
                target: Repeated_had_1.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_1_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_1
              ports:
              - direction: through
                name: thru_0
                size: ceiling(log2(R))
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 47*Heaviside(ceiling(log2(R)) - 1.5, 0) + 49*ceiling(log2(R))
                  - 49*Min(2, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: local_ancillae
                type: qubits
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: Heaviside(ceiling(log2(R)) - 1.5, 0)
              type: z
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_2.out_0
                target: out_0
              - source: Repeated_had_2.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_2.in_0
              - source: in_1
                target: Repeated_had_2.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_2_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: relbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 1
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: relbow
                  connections:
                  - source: in_0
                    target: relbow_0.thru_0
                  - source: in_1
                    target: relbow_0.thru_1
                  - source: in_2
                    target: relbow_0.thru_2
                  - source: relbow_0.thru_0
                    target: out_0
                  - source: relbow_0.thru_1
                    target: out_1
                  - source: relbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 1
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                    1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_8
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: relbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: relbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_5.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_4.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_4.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_1.in_0
              - source: in_0
                target: split_2.in_0
              - source: in_1
                target: split_0.in_0
              - source: merge_1.out_0
                target: split_3.in_0
              - source: merge_10.out_0
                target: qubits_free_0.in_0
              - source: merge_11.out_0
                target: out_0
              - source: merge_4.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_8.in_0
              - source: relbow_0.thru_0
                target: merge_11.in_0
              - source: relbow_0.thru_1
                target: merge_10.in_0
              - source: split_0.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_2.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_2.out_remainder
                target: merge_5.in_remainder
              - source: split_3.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_3.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_6.out_0
                target: x_0.thru_0
              - source: split_6.out_remainder
                target: merge_10.in_remainder
              - source: split_8.out_0
                target: relbow_0.thru_0
              - source: split_8.out_remainder
                target: merge_11.in_remainder
              - source: x_0.thru_0
                target: relbow_0.thru_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_1
              ports:
              - direction: output
                name: out_0
                size: 1
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_26
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: lelbow_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: lelbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_27
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            connections:
            - source: CompareLT_compute_0.out_0
              target: CompareLT_uncompute_0.in_0
            - source: CompareLT_compute_0.out_1
              target: CompareLT_uncompute_0.in_1
            - source: CompareLT_compute_0.out_2
              target: split_12.in_0
            - source: CompareLT_compute_1.out_0
              target: CompareLT_uncompute_1.in_0
            - source: CompareLT_compute_1.out_1
              target: CompareLT_uncompute_1.in_1
            - source: CompareLT_compute_1.out_2
              target: split_26.in_0
            - source: CompareLT_uncompute_0.out_0
              target: Contiguizer_uncompute_0.in_0
            - source: CompareLT_uncompute_0.out_1
              target: Repeated_had_1_repetition.in_1
            - source: CompareLT_uncompute_1.out_0
              target: out_0
            - source: CompareLT_uncompute_1.out_1
              target: out_4
            - source: Contiguizer_compute_0.out_0
              target: CompareLT_compute_0.in_0
            - source: Contiguizer_compute_0.out_1
              target: Repeated_had_0_repetition.in_0
            - source: Contiguizer_uncompute_0.out_0
              target: CompareLT_compute_1.in_0
            - source: GidneyAdd_compute_0.out_0
              target: merge_6.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_uncompute_0.out_0
              target: merge_20.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_1
            - source: Repeated_had_0_repetition.out_0
              target: Repeated_had_1_repetition.in_0
            - source: Repeated_had_0_repetition.out_1
              target: CompareLT_compute_0.in_1
            - source: Repeated_had_1_repetition.out_0
              target: Repeated_had_2_repetition.in_0
            - source: Repeated_had_1_repetition.out_1
              target: z_1.thru_0
            - source: Repeated_had_2_repetition.out_0
              target: Contiguizer_uncompute_0.in_1
            - source: Repeated_had_2_repetition.out_1
              target: CompareLT_compute_1.in_1
            - source: RotationCatalystStatePrep_compute_0.out_0
              target: merge_0.in_0
            - source: RotationCatalystStatePrep_compute_0.out_1
              target: merge_0.in_1
            - source: had_0.thru_0
              target: x_1.thru_1
            - source: had_1.thru_0
              target: s_0.thru_0
            - source: had_2.thru_0
              target: x_3.thru_1
            - source: had_3.thru_0
              target: s_1.thru_0
            - source: in_0
              target: Contiguizer_compute_0.in_0
            - source: in_1
              target: GidneyAdd_compute_0.in_1
            - source: in_2
              target: RotationCatalystStatePrep_compute_0.in_0
            - source: in_3
              target: Repeated_had_0_repetition.in_1
            - source: lelbow_0.thru_0
              target: x_0.thru_0
            - source: lelbow_1.thru_0
              target: merge_27.in_0
            - source: lelbow_1.thru_1
              target: out_6
            - source: merge_0.out_0
              target: split_1.in_0
            - source: merge_10.out_0
              target: split_11.in_0
            - source: merge_13.out_0
              target: CompareLT_uncompute_0.in_2
            - source: merge_14.out_0
              target: split_15.in_0
            - source: merge_16.out_0
              target: split_17.in_0
            - source: merge_18.out_0
              target: split_19.in_0
            - source: merge_2.out_0
              target: split_3.in_0
            - source: merge_20.out_0
              target: split_21.in_0
            - source: merge_22.out_0
              target: split_23.in_0
            - source: merge_24.out_0
              target: split_25.in_0
            - source: merge_27.out_0
              target: CompareLT_uncompute_1.in_2
            - source: merge_4.out_0
              target: split_5.in_0
            - source: merge_6.out_0
              target: split_7.in_0
            - source: merge_8.out_0
              target: split_9.in_0
            - source: qubits_alloc_0.out_0
              target: lelbow_0.thru_0
            - source: qubits_alloc_1.out_0
              target: lelbow_1.thru_1
            - source: s_0.thru_0
              target: z_0.thru_1
            - source: s_1.thru_0
              target: z_1.thru_1
            - source: s_inv_0.thru_0
              target: had_0.thru_0
            - source: s_inv_1.thru_0
              target: had_2.thru_0
            - source: split_1.out_0
              target: x_1.thru_0
            - source: split_1.out_remainder
              target: merge_2.in_remainder
            - source: split_11.out_0
              target: merge_14.in_0
            - source: split_11.out_1
              target: merge_14.in_1
            - source: split_12.out_0
              target: z_0.thru_0
            - source: split_12.out_remainder
              target: merge_13.in_remainder
            - source: split_15.out_0
              target: x_3.thru_0
            - source: split_15.out_remainder
              target: merge_16.in_remainder
            - source: split_17.out_0
              target: merge_18.in_0
            - source: split_17.out_1
              target: merge_18.in_1
            - source: split_19.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: split_19.out_remainder
              target: merge_20.in_remainder
            - source: split_21.out_0
              target: merge_22.in_0
            - source: split_21.out_1
              target: merge_22.in_1
            - source: split_23.out_0
              target: x_4.thru_0
            - source: split_23.out_remainder
              target: merge_24.in_remainder
            - source: split_25.out_0
              target: out_3
            - source: split_25.out_1
              target: out_2
            - source: split_26.out_0
              target: lelbow_1.thru_0
            - source: split_26.out_remainder
              target: merge_27.in_remainder
            - source: split_3.out_0
              target: merge_4.in_0
            - source: split_3.out_1
              target: merge_4.in_1
            - source: split_5.out_0
              target: GidneyAdd_compute_0.in_0
            - source: split_5.out_remainder
              target: merge_6.in_remainder
            - source: split_7.out_0
              target: merge_8.in_0
            - source: split_7.out_1
              target: merge_8.in_1
            - source: split_9.out_0
              target: x_2.thru_0
            - source: split_9.out_remainder
              target: merge_10.in_remainder
            - source: x_0.thru_0
              target: s_inv_0.thru_0
            - source: x_1.thru_0
              target: merge_2.in_0
            - source: x_1.thru_1
              target: x_2.thru_1
            - source: x_2.thru_0
              target: merge_10.in_0
            - source: x_2.thru_1
              target: had_1.thru_0
            - source: x_3.thru_0
              target: merge_16.in_0
            - source: x_3.thru_1
              target: x_4.thru_1
            - source: x_4.thru_0
              target: merge_24.in_0
            - source: x_4.thru_1
              target: had_3.thru_0
            - source: z_0.thru_0
              target: merge_13.in_0
            - source: z_0.thru_1
              target: s_inv_1.thru_0
            - source: z_1.thru_0
              target: Repeated_had_2_repetition.in_1
            - source: z_1.thru_1
              target: out_5
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedRealUSPDF_compute_0
            ports:
            - direction: input
              name: in_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: Max(b_as, b_givens, b_mas)
            - direction: input
              name: in_3
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: Max(b_as, b_givens, b_mas)
            - direction: output
              name: out_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_4
              size: ceiling(log2(R))
            - direction: output
              name: out_5
              size: 1
            - direction: output
              name: out_6
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 49*M_r + 130*b_mas + 3*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
                - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 5*Heaviside(1.5
                - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5
                - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + 47*Heaviside(ceiling(log2(R))
                - 1.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R)) - 49*Min(2,
                ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                - 312
            - name: gidney_lelbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: gidney_relbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: measurements
              type: additive
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
                - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
                - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
            - name: t_gates
              type: additive
              value: Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                2.5, 0) + 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - name: toffs
              type: additive
              value: Heaviside(ceiling(log2(R)) - 1.5, 0)
            type: qubrick
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_1
                ports:
                - direction: output
                  name: out_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda
                      - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lamda)
                      - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_mas + ceiling(log2(R))
                - direction: input
                  name: in_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_mas + ceiling(log2(R))
                - direction: output
                  name: out_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda
                    - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lamda)
                    - 1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) +
                      ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
                  - name: toffs
                    type: additive
                    value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) +
                      ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: SwapUp_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_mas + ceiling(log2(R))
                - direction: input
                  name: in_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_mas + ceiling(log2(R))
                - direction: output
                  name: out_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                    + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
                - name: toffs
                  type: additive
                  value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                    + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (3*b_mas + 3*ceiling(log2(R)))*(lamda - 1)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: (b_mas + ceiling(log2(R)))*(lamda - 1)
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                type: qubits_alloc
              connections:
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_2.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: SwapUp_compute_0.in_1
              - source: GoogleSelectOptimized_compute_0.out_2
                target: SwapUp_compute_0.in_2
              - source: SwapUp_compute_0.out_0
                target: merge_6.in_0
              - source: SwapUp_compute_0.out_1
                target: out_1
              - source: SwapUp_compute_0.out_2
                target: had_0.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: in_0
                target: merge_0.in_1
              - source: in_1
                target: merge_0.in_0
              - source: merge_0.out_0
                target: split_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: qubits_alloc_0.out_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: qubits_alloc_1.out_0
                target: GoogleSelectOptimized_compute_0.in_2
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_1.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_1.out_remainder
                target: merge_2.in_remainder
              - source: split_3.out_0
                target: merge_4.in_0
              - source: split_3.out_1
                target: merge_4.in_1
              - source: split_5.out_0
                target: SwapUp_compute_0.in_0
              - source: split_5.out_remainder
                target: merge_6.in_remainder
              - source: split_7.out_0
                target: out_2
              - source: split_7.out_1
                target: out_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: b_mas + ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                  + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (3*b_mas
                  + 3*ceiling(log2(R)))*(lamda - 1) + (ceiling(0.75*b_mas + (0.75*b_mas
                  + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) +
                  49)*Max(0, ceiling(M_r*R/lamda) - 1)
              - name: gidney_lelbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: gidney_relbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: measurements
                type: additive
                value: (b_mas + ceiling(log2(R)))*(lamda - 1)
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                  + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            connections:
            - source: DataLookupClean_compute_0.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: DataLookupClean_compute_0.out_1
              target: out_0
            - source: DataLookupClean_compute_0.out_2
              target: GidneyAdd_uncompute_0.in_2
            - source: GidneyAdd_compute_0.out_0
              target: DataLookupClean_compute_0.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_compute_0.out_2
              target: DataLookupClean_compute_0.in_1
            - source: GidneyAdd_uncompute_0.out_0
              target: qubits_free_0.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_1
            - source: GidneyAdd_uncompute_0.out_2
              target: out_2
            - source: in_0
              target: GidneyAdd_compute_0.in_1
            - source: in_1
              target: GidneyAdd_compute_0.in_2
            - source: qubits_alloc_0.out_0
              target: GidneyAdd_compute_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedSparseDataLookupDF_compute_0
            ports:
            - direction: input
              name: in_0
              size: M_r*(R - 1)
            - direction: input
              name: in_1
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_1
              size: M_r*(R - 1)
            - direction: output
              name: out_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (3*b_mas +
                3*ceiling(log2(R)))*(lamda - 1) + (ceiling(0.75*b_mas + (0.75*b_mas
                + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0,
                ceiling(M_r*R/lamda) - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 114*ceiling(log2(R)) - 120
            - name: gidney_lelbows
              type: additive
              value: Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2
            - name: gidney_relbows
              type: additive
              value: Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2
            - name: measurements
              type: additive
              value: (b_mas + ceiling(log2(R)))*(lamda - 1)
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: b_mas
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: had_0
            ports:
            - direction: through
              name: thru_0
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 3*b_mas
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: had
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_1
            ports:
            - direction: output
              name: out_0
              size: 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_0
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_remainder
              size: ceiling(log2(R))
            repetition: null
            type: split
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: qubits_alloc_0.out_0
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_compute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_lelbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_2
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: output
              name: out_0
              size: 1
            - direction: output
              name: out_remainder
              size: b_mas - 1
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: x_0
            ports:
            - direction: through
              name: thru_0
              size: 1
            - direction: through
              name: thru_1
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 4
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: x
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_3
            ports:
            - direction: input
              name: in_0
              size: 1
            - direction: input
              name: in_remainder
              size: b_mas - 1
            - direction: output
              name: out_0
              size: b_mas
            repetition: null
            type: merge
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_relbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: qubits_free_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_relbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_5
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_remainder
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_6
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: ceiling(log2(R))
            - direction: output
              name: out_remainder
              size: b_mas
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_0
            ports:
            - direction: through
              name: thru_0
              size: ceiling(log2(R))
            - direction: through
              name: thru_1
              size: 1
            - direction: through
              name: thru_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*ceiling(log2(R))
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: ceiling(log2(R))
            type: swap
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_7
            ports:
            - direction: input
              name: in_0
              size: ceiling(log2(R))
            - direction: input
              name: in_remainder
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          connections:
          - source: CompareLT_compute_0.out_0
            target: CompareLT_uncompute_0.in_0
          - source: CompareLT_compute_0.out_1
            target: CompareLT_uncompute_0.in_1
          - source: CompareLT_compute_0.out_2
            target: split_2.in_0
          - source: CompareLT_uncompute_0.out_0
            target: merge_5.in_0
          - source: CompareLT_uncompute_0.out_1
            target: out_5
          - source: MultiplexedRealUSPDF_compute_0.out_0
            target: out_2
          - source: MultiplexedRealUSPDF_compute_0.out_1
            target: out_4
          - source: MultiplexedRealUSPDF_compute_0.out_2
            target: out_7
          - source: MultiplexedRealUSPDF_compute_0.out_3
            target: out_8
          - source: MultiplexedRealUSPDF_compute_0.out_4
            target: MultiplexedSparseDataLookupDF_compute_0.in_1
          - source: MultiplexedRealUSPDF_compute_0.out_5
            target: out_10
          - source: MultiplexedRealUSPDF_compute_0.out_6
            target: out_12
          - source: MultiplexedSparseDataLookupDF_compute_0.out_0
            target: split_0.in_0
          - source: MultiplexedSparseDataLookupDF_compute_0.out_1
            target: out_3
          - source: MultiplexedSparseDataLookupDF_compute_0.out_2
            target: swap_0.thru_2
          - source: had_0.thru_0
            target: CompareLT_compute_0.in_1
          - source: in_0
            target: out_0
          - source: in_1
            target: MultiplexedRealUSPDF_compute_0.in_0
          - source: in_2
            target: MultiplexedSparseDataLookupDF_compute_0.in_0
          - source: in_3
            target: MultiplexedRealUSPDF_compute_0.in_1
          - source: in_4
            target: MultiplexedRealUSPDF_compute_0.in_2
          - source: in_5
            target: MultiplexedRealUSPDF_compute_0.in_3
          - source: in_6
            target: out_11
          - source: merge_3.out_0
            target: CompareLT_uncompute_0.in_2
          - source: merge_5.out_0
            target: split_6.in_0
          - source: merge_7.out_0
            target: out_1
          - source: qubits_alloc_0.out_0
            target: had_0.thru_0
          - source: qubits_alloc_1.out_0
            target: x_0.thru_0
          - source: split_0.out_0
            target: CompareLT_compute_0.in_0
          - source: split_0.out_remainder
            target: merge_5.in_remainder
          - source: split_2.out_0
            target: x_0.thru_1
          - source: split_2.out_remainder
            target: merge_3.in_remainder
          - source: split_6.out_0
            target: swap_0.thru_0
          - source: split_6.out_remainder
            target: merge_7.in_remainder
          - source: swap_0.thru_0
            target: merge_7.in_0
          - source: swap_0.thru_1
            target: out_6
          - source: swap_0.thru_2
            target: out_9
          - source: x_0.thru_0
            target: swap_0.thru_1
          - source: x_0.thru_1
            target: merge_3.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: MultiplexedAliasSamplingDF_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: input
            name: in_2
            size: M_r*(R - 1)
          - direction: input
            name: in_3
            size: b_mas
          - direction: input
            name: in_4
            size: Max(b_as, b_givens, b_mas)
          - direction: input
            name: in_5
            size: ceiling(log2(R))
          - direction: input
            name: in_6
            size: 1
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: b_mas + ceiling(log2(R))
          - direction: output
            name: out_10
            size: 1
          - direction: output
            name: out_11
            size: 1
          - direction: output
            name: out_12
            size: 1
          - direction: output
            name: out_2
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: output
            name: out_3
            size: M_r*(R - 1)
          - direction: output
            name: out_4
            size: b_mas
          - direction: output
            name: out_5
            size: b_mas
          - direction: output
            name: out_6
            size: 1
          - direction: output
            name: out_7
            size: Max(b_as, b_givens, b_mas)
          - direction: output
            name: out_8
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_9
            size: ceiling(log2(R))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 49*M_r + 247*b_mas + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
              - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
              + (3*b_mas + 3*ceiling(log2(R)))*(lamda - 1) + (ceiling(0.75*b_mas +
              (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R)))
              + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + 3*Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
              - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
              - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 5*Heaviside(1.5
              - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5
              - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + 47*Heaviside(ceiling(log2(R))
              - 1.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 446*ceiling(log2(R)) - 49*Min(2,
              ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - 548
          - name: gidney_lelbows
            type: additive
            value: M_r + 3*b_mas + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 4
          - name: gidney_relbows
            type: additive
            value: M_r + 3*b_mas + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 4
          - name: measurements
            type: additive
            value: (b_mas + ceiling(log2(R)))*(lamda - 1)
          - name: ppms
            type: additive
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5
              - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5
              - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
          - name: t_gates
            type: additive
            value: Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
              0) + 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
          - name: toffs
            type: additive
            value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
              + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + Heaviside(ceiling(log2(R))
              - 1.5, 0) + ceiling(log2(R))
          type: qubrick
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_0
            ports:
            - direction: through
              name: thru_0
              size: N_spatial
            - direction: through
              name: thru_1
              size: N_spatial
            - direction: through
              name: thru_2
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*N_spatial
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: N_spatial
            type: swap
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            repetition: null
            type: qubits_alloc
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: local_ancillae
                type: qubits
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: GidneyAdd_compute_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: input
              name: in_1
              size: M_r*(R - 1)
            - direction: input
              name: in_2
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: output
              name: out_1
              size: M_r*(R - 1)
            - direction: output
              name: out_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                - 60
            - name: gidney_lelbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: gidney_relbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: toffs
              type: additive
              value: 0
            type: qubrick
          - children:
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_1
                ports:
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
                      - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
                    - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1)
                      + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
                      - 1)
                  - name: toffs
                    type: additive
                    value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) +
                      b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
                      - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: SwapUp_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) +
                    b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
                    - 1)
                - name: toffs
                  type: additive
                  value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                    - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*b_givens*(N_spatial - 1)*(lamda - 1)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: b_givens*(N_spatial - 1)*(lamda - 1)
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                type: qubits_alloc
              connections:
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_2.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: SwapUp_compute_0.in_1
              - source: GoogleSelectOptimized_compute_0.out_2
                target: SwapUp_compute_0.in_2
              - source: SwapUp_compute_0.out_0
                target: merge_6.in_0
              - source: SwapUp_compute_0.out_1
                target: out_1
              - source: SwapUp_compute_0.out_2
                target: had_0.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: in_0
                target: merge_0.in_1
              - source: in_1
                target: merge_0.in_0
              - source: merge_0.out_0
                target: split_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: qubits_alloc_0.out_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: qubits_alloc_1.out_0
                target: GoogleSelectOptimized_compute_0.in_2
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_1.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_1.out_remainder
                target: merge_2.in_remainder
              - source: split_3.out_0
                target: merge_4.in_0
              - source: split_3.out_1
                target: merge_4.in_1
              - source: split_5.out_0
                target: SwapUp_compute_0.in_0
              - source: split_5.out_remainder
                target: merge_6.in_remainder
              - source: split_7.out_0
                target: out_2
              - source: split_7.out_1
                target: out_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: b_givens*(N_spatial - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                  - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial
                  - 1)*(lamda - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda
                  - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lamda)
                  - 1)
              - name: gidney_lelbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: gidney_relbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: measurements
                type: additive
                value: b_givens*(N_spatial - 1)*(lamda - 1)
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                  - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens*(N_spatial - 1)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: N_spatial
                  - direction: output
                    name: out_0
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  repetition: null
                  type: split
                - children:
                  - children:
                    - children:
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: qubits_alloc_0
                        ports:
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        repetition: null
                        type: qubits_alloc
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: had_0
                        ports:
                        - direction: through
                          name: thru_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        repetition: null
                        resources:
                        - name: active_volume
                          type: additive
                          value: 3*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppm_x_weight
                          type: other
                          value: 0
                        - name: ppm_z_weight
                          type: other
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: ppr_x_weight
                          type: other
                          value: 0
                        - name: ppr_z_weight
                          type: other
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: 0
                        - name: t_gates
                          type: additive
                          value: 0
                        - name: toffs
                          type: additive
                          value: 0
                        type: had
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_0
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_1
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_2
                          size: Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_1
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: 1
                        - direction: output
                          name: out_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        repetition: null
                        type: split
                      - children:
                        - children:
                          - input_params:
                            - M_r
                            - N_spatial
                            - R
                            - b_as
                            - b_givens
                            - b_mas
                            - idx
                            name: s_inv_0
                            ports:
                            - direction: through
                              name: thru_0
                              size: 1
                            repetition: null
                            resources:
                            - name: active_volume
                              type: additive
                              value: 5
                            - name: gidney_lelbows
                              type: additive
                              value: 0
                            - name: gidney_relbows
                              type: additive
                              value: 0
                            - name: measurements
                              type: additive
                              value: 0
                            - name: ppm_x_weight
                              type: other
                              value: 0
                            - name: ppm_z_weight
                              type: other
                              value: 0
                            - name: ppms
                              type: additive
                              value: 0
                            - name: ppr_x_weight
                              type: other
                              value: 0
                            - name: ppr_z_weight
                              type: other
                              value: 0
                            - name: pprs
                              type: additive
                              value: 0
                            - name: rotations
                              type: additive
                              value: 0
                            - name: t_gates
                              type: additive
                              value: 0
                            - name: toffs
                              type: additive
                              value: 0
                            type: s_inv
                          connections:
                          - source: in_0
                            target: s_inv_0.thru_0
                          - source: s_inv_0.thru_0
                            target: out_0
                          input_params:
                          - M_r
                          - N_spatial
                          - R
                          - b_as
                          - b_givens
                          - b_mas
                          - idx
                          name: Repeated_s_inv_0
                          ports:
                          - direction: input
                            name: in_0
                            size: 1
                          - direction: output
                            name: out_0
                            size: 1
                          repetition: null
                          resources:
                          - name: active_volume
                            type: additive
                            value: 5
                          - name: gidney_lelbows
                            type: additive
                            value: 0
                          - name: gidney_relbows
                            type: additive
                            value: 0
                          - name: measurements
                            type: additive
                            value: 0
                          - name: ppms
                            type: additive
                            value: 0
                          - name: pprs
                            type: additive
                            value: 0
                          - name: rotations
                            type: additive
                            value: 0
                          - name: t_gates
                            type: additive
                            value: 0
                          - name: toffs
                            type: additive
                            value: 0
                          type: qubrick
                        connections:
                        - source: Repeated_s_inv_0.out_0
                          target: out_0
                        - source: in_0
                          target: Repeated_s_inv_0.in_0
                        input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: Repeated_s_inv_0_repetition
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: output
                          name: out_0
                          size: 1
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)
                          sequence:
                            multiplier: 1
                            type: constant
                        resources:
                        - name: active_volume
                          type: additive
                          value: 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: 0
                        - name: t_gates
                          type: additive
                          value: 0
                        - name: toffs
                          type: additive
                          value: 0
                        type: qubrick
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_2
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: input
                          name: in_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_3
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_1
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_2
                          size: Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: split
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_4
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_1
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_2
                          size: Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_5
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: 1
                        - direction: output
                          name: out_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        repetition: null
                        type: split
                      - children:
                        - children:
                          - input_params:
                            - M_r
                            - N_spatial
                            - R
                            - b_as
                            - b_givens
                            - b_mas
                            - idx
                            name: t_inv_0
                            ports:
                            - direction: through
                              name: thru_0
                              size: 1
                            repetition: null
                            resources:
                            - name: active_volume
                              type: additive
                              value: 28.5
                            - name: gidney_lelbows
                              type: additive
                              value: 0
                            - name: gidney_relbows
                              type: additive
                              value: 0
                            - name: measurements
                              type: additive
                              value: 0
                            - name: ppm_x_weight
                              type: other
                              value: 0
                            - name: ppm_z_weight
                              type: other
                              value: 0
                            - name: ppms
                              type: additive
                              value: 0
                            - name: ppr_x_weight
                              type: other
                              value: 0
                            - name: ppr_z_weight
                              type: other
                              value: 0
                            - name: pprs
                              type: additive
                              value: 0
                            - name: rotations
                              type: additive
                              value: 0
                            - name: t_gates
                              type: additive
                              value: 1
                            - name: toffs
                              type: additive
                              value: 0
                            type: t_inv
                          connections:
                          - source: in_0
                            target: t_inv_0.thru_0
                          - source: t_inv_0.thru_0
                            target: out_0
                          input_params:
                          - M_r
                          - N_spatial
                          - R
                          - b_as
                          - b_givens
                          - b_mas
                          - idx
                          name: Repeated_t_inv_0
                          ports:
                          - direction: input
                            name: in_0
                            size: 1
                          - direction: output
                            name: out_0
                            size: 1
                          repetition: null
                          resources:
                          - name: active_volume
                            type: additive
                            value: 28.5
                          - name: gidney_lelbows
                            type: additive
                            value: 0
                          - name: gidney_relbows
                            type: additive
                            value: 0
                          - name: measurements
                            type: additive
                            value: 0
                          - name: ppms
                            type: additive
                            value: 0
                          - name: pprs
                            type: additive
                            value: 0
                          - name: rotations
                            type: additive
                            value: 0
                          - name: t_gates
                            type: additive
                            value: 1
                          - name: toffs
                            type: additive
                            value: 0
                          type: qubrick
                        connections:
                        - source: Repeated_t_inv_0.out_0
                          target: out_0
                        - source: in_0
                          target: Repeated_t_inv_0.in_0
                        input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: Repeated_t_inv_0_repetition
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: output
                          name: out_0
                          size: 1
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                          sequence:
                            multiplier: 1
                            type: constant
                        resources:
                        - name: active_volume
                          type: additive
                          value: 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: 0
                        - name: t_gates
                          type: additive
                          value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                        - name: toffs
                          type: additive
                          value: 0
                        type: qubrick
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_6
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: input
                          name: in_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_7
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_1
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_2
                          size: Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: split
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_8
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_1
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_2
                          size: Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_9
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: 1
                        - direction: output
                          name: out_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        repetition: null
                        type: split
                      - children:
                        - children:
                          - input_params:
                            - M_r
                            - N_spatial
                            - R
                            - b_as
                            - b_givens
                            - b_mas
                            - idx
                            name: phase_0
                            ports:
                            - direction: through
                              name: thru_0
                              size: 1
                            repetition: null
                            resources:
                            - name: active_volume
                              type: additive
                              value: 1397
                            - name: gidney_lelbows
                              type: additive
                              value: 0
                            - name: gidney_relbows
                              type: additive
                              value: 0
                            - name: measurements
                              type: additive
                              value: 0
                            - name: ppm_x_weight
                              type: other
                              value: 0
                            - name: ppm_z_weight
                              type: other
                              value: 0
                            - name: ppms
                              type: additive
                              value: 0
                            - name: ppr_x_weight
                              type: other
                              value: 0
                            - name: ppr_z_weight
                              type: other
                              value: 0
                            - name: pprs
                              type: additive
                              value: 0
                            - name: rotations
                              type: additive
                              value: 1
                            - name: t_gates
                              type: additive
                              value: 0
                            - name: toffs
                              type: additive
                              value: 0
                            type: phase
                          connections:
                          - source: in_0
                            target: phase_0.thru_0
                          - source: phase_0.thru_0
                            target: out_0
                          input_params:
                          - M_r
                          - N_spatial
                          - R
                          - b_as
                          - b_givens
                          - b_mas
                          - idx
                          name: Repeated_phase_0
                          ports:
                          - direction: input
                            name: in_0
                            size: 1
                          - direction: output
                            name: out_0
                            size: 1
                          repetition: null
                          resources:
                          - name: active_volume
                            type: additive
                            value: 1397
                          - name: gidney_lelbows
                            type: additive
                            value: 0
                          - name: gidney_relbows
                            type: additive
                            value: 0
                          - name: measurements
                            type: additive
                            value: 0
                          - name: ppms
                            type: additive
                            value: 0
                          - name: pprs
                            type: additive
                            value: 0
                          - name: rotations
                            type: additive
                            value: 1
                          - name: t_gates
                            type: additive
                            value: 0
                          - name: toffs
                            type: additive
                            value: 0
                          type: qubrick
                        connections:
                        - source: Repeated_phase_0.out_0
                          target: out_0
                        - source: in_0
                          target: Repeated_phase_0.in_0
                        input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: Repeated_phase_0_repetition
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: output
                          name: out_0
                          size: 1
                        repetition:
                          count: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0))
                          sequence:
                            multiplier: 1
                            type: constant
                        resources:
                        - name: active_volume
                          type: additive
                          value: 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0))
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                            b_mas) - 2.5, 0))
                        - name: t_gates
                          type: additive
                          value: 0
                        - name: toffs
                          type: additive
                          value: 0
                        type: qubrick
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_10
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: input
                          name: in_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_11
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_1
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_2
                          size: Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: split
                      connections:
                      - source: Repeated_phase_0_repetition.out_0
                        target: merge_10.in_0
                      - source: Repeated_s_inv_0_repetition.out_0
                        target: merge_2.in_0
                      - source: Repeated_t_inv_0_repetition.out_0
                        target: merge_6.in_0
                      - source: had_0.thru_0
                        target: merge_0.in_0
                      - source: in_0
                        target: merge_0.in_1
                      - source: in_1
                        target: merge_0.in_2
                      - source: merge_0.out_0
                        target: split_1.in_0
                      - source: merge_10.out_0
                        target: split_11.in_0
                      - source: merge_2.out_0
                        target: split_3.in_0
                      - source: merge_4.out_0
                        target: split_5.in_0
                      - source: merge_6.out_0
                        target: split_7.in_0
                      - source: merge_8.out_0
                        target: split_9.in_0
                      - source: qubits_alloc_0.out_0
                        target: had_0.thru_0
                      - source: split_1.out_0
                        target: Repeated_s_inv_0_repetition.in_0
                      - source: split_1.out_remainder
                        target: merge_2.in_remainder
                      - source: split_11.out_0
                        target: out_0
                      - source: split_11.out_1
                        target: out_1
                      - source: split_11.out_2
                        target: out_2
                      - source: split_3.out_0
                        target: merge_4.in_0
                      - source: split_3.out_1
                        target: merge_4.in_1
                      - source: split_3.out_2
                        target: merge_4.in_2
                      - source: split_5.out_0
                        target: Repeated_t_inv_0_repetition.in_0
                      - source: split_5.out_remainder
                        target: merge_6.in_remainder
                      - source: split_7.out_0
                        target: merge_8.in_0
                      - source: split_7.out_1
                        target: merge_8.in_1
                      - source: split_7.out_2
                        target: merge_8.in_2
                      - source: split_9.out_0
                        target: Repeated_phase_0_repetition.in_0
                      - source: split_9.out_remainder
                        target: merge_10.in_remainder
                      input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: RotationCatalystStatePrep_compute_0
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_2
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 3*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 5*Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
                      - name: t_gates
                        type: additive
                        value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
                      - name: toffs
                        type: additive
                        value: 0
                      type: qubrick
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_0
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_1
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(b_as, b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_2
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_3
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_4
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_5
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_6
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - children:
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: cost_event
                        repetition: null
                        resources:
                        - name: active_volume
                          type: additive
                          value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                            100*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(b_as,
                            b_givens, b_mas) - 56
                        - name: gidney_lelbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - name: gidney_relbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - name: local_ancillae
                          type: qubits
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - name: toffs
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        type: intrinsic_cost
                      connections:
                      - source: in_0
                        target: out_0
                      - source: in_1
                        target: out_1
                      - source: in_2
                        target: out_2
                      - source: in_3
                        target: out_3
                      - source: in_4
                        target: out_4
                      input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: GidneyAdd_compute_0
                      ports:
                      - direction: input
                        name: in_0
                        size: b_givens
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_4
                        size: 1
                      - direction: output
                        name: out_0
                        size: b_givens
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_4
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas)
                          - 56
                      - name: gidney_lelbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          - 1
                      - name: gidney_relbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          - 1
                      - name: toffs
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                      type: qubrick
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_7
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_8
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_2
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_9
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_10
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_11
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_3
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(b_as, b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_12
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_13
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    connections:
                    - source: GidneyAdd_compute_0.out_0
                      target: out_0
                    - source: GidneyAdd_compute_0.out_1
                      target: merge_11.in_1
                    - source: GidneyAdd_compute_0.out_2
                      target: merge_11.in_0
                    - source: GidneyAdd_compute_0.out_3
                      target: x_3.thru_1
                    - source: GidneyAdd_compute_0.out_4
                      target: merge_7.in_0
                    - source: RotationCatalystStatePrep_compute_0.out_0
                      target: x_0.thru_1
                    - source: RotationCatalystStatePrep_compute_0.out_1
                      target: merge_1.in_0
                    - source: RotationCatalystStatePrep_compute_0.out_2
                      target: merge_1.in_1
                    - source: in_0
                      target: GidneyAdd_compute_0.in_0
                    - source: in_1
                      target: RotationCatalystStatePrep_compute_0.in_0
                    - source: in_2
                      target: RotationCatalystStatePrep_compute_0.in_1
                    - source: in_3
                      target: ppr_0.thru_0
                    - source: merge_1.out_0
                      target: x_0.thru_0
                    - source: merge_11.out_0
                      target: x_3.thru_0
                    - source: merge_13.out_0
                      target: ppr_1.thru_0
                    - source: merge_3.out_0
                      target: split_4.in_0
                    - source: merge_5.out_0
                      target: split_6.in_0
                    - source: merge_7.out_0
                      target: split_8.in_0
                    - source: merge_9.out_0
                      target: split_10.in_0
                    - source: ppr_0.thru_0
                      target: split_0.in_0
                    - source: ppr_1.thru_0
                      target: out_4
                    - source: split_0.out_0
                      target: x_0.thru_2
                    - source: split_0.out_remainder
                      target: merge_3.in_remainder
                    - source: split_10.out_0
                      target: x_3.thru_2
                    - source: split_10.out_remainder
                      target: merge_13.in_remainder
                    - source: split_12.out_0
                      target: out_2
                    - source: split_12.out_1
                      target: out_1
                    - source: split_2.out_0
                      target: GidneyAdd_compute_0.in_2
                    - source: split_2.out_1
                      target: GidneyAdd_compute_0.in_1
                    - source: split_4.out_0
                      target: x_1.thru_0
                    - source: split_4.out_1
                      target: x_1.thru_1
                    - source: split_4.out_remainder
                      target: merge_5.in_remainder
                    - source: split_6.out_0
                      target: GidneyAdd_compute_0.in_4
                    - source: split_6.out_remainder
                      target: merge_7.in_remainder
                    - source: split_8.out_0
                      target: x_2.thru_0
                    - source: split_8.out_1
                      target: x_2.thru_1
                    - source: split_8.out_remainder
                      target: merge_9.in_remainder
                    - source: x_0.thru_0
                      target: split_2.in_0
                    - source: x_0.thru_1
                      target: GidneyAdd_compute_0.in_3
                    - source: x_0.thru_2
                      target: merge_3.in_0
                    - source: x_1.thru_0
                      target: merge_5.in_0
                    - source: x_1.thru_1
                      target: merge_5.in_1
                    - source: x_2.thru_0
                      target: merge_9.in_0
                    - source: x_2.thru_1
                      target: merge_9.in_1
                    - source: x_3.thru_0
                      target: split_12.in_0
                    - source: x_3.thru_1
                      target: out_3
                    - source: x_3.thru_2
                      target: merge_13.in_0
                    input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: GivensRotationFusedAdder_compute_0
                    ports:
                    - direction: input
                      name: in_0
                      size: b_givens
                    - direction: input
                      name: in_1
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_2
                      size: Max(b_as, b_givens, b_mas)
                    - direction: input
                      name: in_3
                      size: Mod(2, N_spatial)
                    - direction: output
                      name: out_0
                      size: b_givens
                    - direction: output
                      name: out_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: output
                      name: out_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_3
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_4
                      size: Mod(2, N_spatial)
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                        Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 2.5, 0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48
                    - name: gidney_lelbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: gidney_relbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: pprs
                      type: additive
                      value: 2
                    - name: rotations
                      type: additive
                      value: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
                    - name: t_gates
                      type: additive
                      value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 2.5, 0)
                    - name: toffs
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas)
                    type: qubrick
                  connections:
                  - source: GivensRotationFusedAdder_compute_0.out_0
                    target: out_0
                  - source: GivensRotationFusedAdder_compute_0.out_1
                    target: out_1
                  - source: GivensRotationFusedAdder_compute_0.out_2
                    target: out_2
                  - source: GivensRotationFusedAdder_compute_0.out_3
                    target: out_3
                  - source: GivensRotationFusedAdder_compute_0.out_4
                    target: out_4
                  - source: in_0
                    target: GivensRotationFusedAdder_compute_0.in_0
                  - source: in_1
                    target: GivensRotationFusedAdder_compute_0.in_1
                  - source: in_2
                    target: GivensRotationFusedAdder_compute_0.in_2
                  - source: in_3
                    target: GivensRotationFusedAdder_compute_0.in_3
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: GivensRotationFusedAdder_compute_0_repetition
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_1
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_2
                    size: Max(b_as, b_givens, b_mas)
                  - direction: input
                    name: in_3
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: output
                    name: out_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_3
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_4
                    size: Mod(2, N_spatial)
                  repetition:
                    count: N_spatial - 1
                    sequence:
                      multiplier: 1
                      type: constant
                  resources:
                  - name: active_volume
                    type: additive
                    value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                      + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48)
                  - name: gidney_lelbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: gidney_relbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 2*N_spatial - 2
                  - name: rotations
                    type: additive
                    value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas -
                      Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                      Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                      b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                      b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0))
                  - name: t_gates
                    type: additive
                    value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0)
                  - name: toffs
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                  type: qubrick
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: Mod(2, N_spatial)
                  - direction: input
                    name: in_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: N_spatial
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  - direction: output
                    name: out_0
                    size: b_givens*(N_spatial - 1)
                  repetition: null
                  type: merge
                connections:
                - source: GivensRotationFusedAdder_compute_0_repetition.out_0
                  target: merge_3.in_0
                - source: GivensRotationFusedAdder_compute_0_repetition.out_1
                  target: out_1
                - source: GivensRotationFusedAdder_compute_0_repetition.out_2
                  target: out_2
                - source: GivensRotationFusedAdder_compute_0_repetition.out_3
                  target: out_3
                - source: GivensRotationFusedAdder_compute_0_repetition.out_4
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: GivensRotationFusedAdder_compute_0_repetition.in_1
                - source: in_2
                  target: GivensRotationFusedAdder_compute_0_repetition.in_2
                - source: in_3
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_4
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: GivensRotationFusedAdder_compute_0_repetition.in_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: GivensRotationFusedAdder_compute_0_repetition.in_3
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GivensRotationBasisChangeDF_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_1
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_2
                  size: Max(b_as, b_givens, b_mas)
                - direction: input
                  name: in_3
                  size: N_spatial
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_4
                  size: N_spatial
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
                    b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                    + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0) - 48)
                - name: gidney_lelbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
                - name: gidney_relbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 2*N_spatial - 2
                - name: rotations
                  type: additive
                  value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                    + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                    0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 2.5, 0))
                - name: t_gates
                  type: additive
                  value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 2.5, 0)
                - name: toffs
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: N_spatial
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: N_spatial - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: z_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: z
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: N_spatial - 1
                - direction: output
                  name: out_0
                  size: N_spatial
                repetition: null
                type: merge
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens*(N_spatial - 1)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: N_spatial
                  - direction: output
                    name: out_0
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  repetition: null
                  type: split
                - children:
                  - children:
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_0
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_1
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(b_as, b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_2
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_3
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_4
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_5
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_6
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - children:
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: cost_event
                        repetition: null
                        resources:
                        - name: active_volume
                          type: additive
                          value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                            100*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(b_as,
                            b_givens, b_mas) - 56
                        - name: gidney_lelbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - name: gidney_relbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - name: local_ancillae
                          type: qubits
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1
                        - name: toffs
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        type: intrinsic_cost
                      connections:
                      - source: in_0
                        target: out_0
                      - source: in_1
                        target: out_1
                      - source: in_2
                        target: out_2
                      - source: in_3
                        target: out_3
                      - source: in_4
                        target: out_4
                      input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: GidneyAdd_uncompute_0
                      ports:
                      - direction: input
                        name: in_0
                        size: b_givens
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_4
                        size: 1
                      - direction: output
                        name: out_0
                        size: b_givens
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_4
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas)
                          - 56
                      - name: gidney_lelbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          - 1
                      - name: gidney_relbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                          - 1
                      - name: toffs
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                      type: qubrick
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_7
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_8
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_2
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_9
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_10
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_11
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_3
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(b_as, b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_12
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_13
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: RotationCatalystStatePrep_uncompute_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_1
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_2
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: qubrick
                    connections:
                    - source: GidneyAdd_uncompute_0.out_0
                      target: out_0
                    - source: GidneyAdd_uncompute_0.out_1
                      target: merge_11.in_1
                    - source: GidneyAdd_uncompute_0.out_2
                      target: merge_11.in_0
                    - source: GidneyAdd_uncompute_0.out_3
                      target: x_3.thru_1
                    - source: GidneyAdd_uncompute_0.out_4
                      target: merge_7.in_0
                    - source: RotationCatalystStatePrep_uncompute_0.thru_0
                      target: out_3
                    - source: RotationCatalystStatePrep_uncompute_0.thru_1
                      target: out_2
                    - source: RotationCatalystStatePrep_uncompute_0.thru_2
                      target: out_1
                    - source: in_0
                      target: GidneyAdd_uncompute_0.in_0
                    - source: in_1
                      target: merge_1.in_1
                    - source: in_2
                      target: merge_1.in_0
                    - source: in_3
                      target: x_0.thru_1
                    - source: in_4
                      target: ppr_0.thru_0
                    - source: merge_1.out_0
                      target: x_0.thru_0
                    - source: merge_11.out_0
                      target: x_3.thru_0
                    - source: merge_13.out_0
                      target: ppr_1.thru_0
                    - source: merge_3.out_0
                      target: split_4.in_0
                    - source: merge_5.out_0
                      target: split_6.in_0
                    - source: merge_7.out_0
                      target: split_8.in_0
                    - source: merge_9.out_0
                      target: split_10.in_0
                    - source: ppr_0.thru_0
                      target: split_0.in_0
                    - source: ppr_1.thru_0
                      target: out_4
                    - source: split_0.out_0
                      target: x_0.thru_2
                    - source: split_0.out_remainder
                      target: merge_3.in_remainder
                    - source: split_10.out_0
                      target: x_3.thru_2
                    - source: split_10.out_remainder
                      target: merge_13.in_remainder
                    - source: split_12.out_0
                      target: RotationCatalystStatePrep_uncompute_0.thru_1
                    - source: split_12.out_1
                      target: RotationCatalystStatePrep_uncompute_0.thru_2
                    - source: split_2.out_0
                      target: GidneyAdd_uncompute_0.in_2
                    - source: split_2.out_1
                      target: GidneyAdd_uncompute_0.in_1
                    - source: split_4.out_0
                      target: x_1.thru_0
                    - source: split_4.out_1
                      target: x_1.thru_1
                    - source: split_4.out_remainder
                      target: merge_5.in_remainder
                    - source: split_6.out_0
                      target: GidneyAdd_uncompute_0.in_4
                    - source: split_6.out_remainder
                      target: merge_7.in_remainder
                    - source: split_8.out_0
                      target: x_2.thru_0
                    - source: split_8.out_1
                      target: x_2.thru_1
                    - source: split_8.out_remainder
                      target: merge_9.in_remainder
                    - source: x_0.thru_0
                      target: split_2.in_0
                    - source: x_0.thru_1
                      target: GidneyAdd_uncompute_0.in_3
                    - source: x_0.thru_2
                      target: merge_3.in_0
                    - source: x_1.thru_0
                      target: merge_5.in_0
                    - source: x_1.thru_1
                      target: merge_5.in_1
                    - source: x_2.thru_0
                      target: merge_9.in_0
                    - source: x_2.thru_1
                      target: merge_9.in_1
                    - source: x_3.thru_0
                      target: split_12.in_0
                    - source: x_3.thru_1
                      target: RotationCatalystStatePrep_uncompute_0.thru_0
                    - source: x_3.thru_2
                      target: merge_13.in_0
                    input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: GivensRotationFusedAdder_uncompute_0
                    ports:
                    - direction: input
                      name: in_0
                      size: b_givens
                    - direction: input
                      name: in_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: input
                      name: in_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_3
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_4
                      size: Mod(2, N_spatial)
                    - direction: output
                      name: out_0
                      size: b_givens
                    - direction: output
                      name: out_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: output
                      name: out_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_3
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_4
                      size: Mod(2, N_spatial)
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48
                    - name: gidney_lelbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: gidney_relbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: pprs
                      type: additive
                      value: 2
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas)
                    type: qubrick
                  connections:
                  - source: GivensRotationFusedAdder_uncompute_0.out_0
                    target: out_0
                  - source: GivensRotationFusedAdder_uncompute_0.out_1
                    target: out_1
                  - source: GivensRotationFusedAdder_uncompute_0.out_2
                    target: out_2
                  - source: GivensRotationFusedAdder_uncompute_0.out_3
                    target: out_3
                  - source: GivensRotationFusedAdder_uncompute_0.out_4
                    target: out_4
                  - source: in_0
                    target: GivensRotationFusedAdder_uncompute_0.in_0
                  - source: in_1
                    target: GivensRotationFusedAdder_uncompute_0.in_1
                  - source: in_2
                    target: GivensRotationFusedAdder_uncompute_0.in_2
                  - source: in_3
                    target: GivensRotationFusedAdder_uncompute_0.in_3
                  - source: in_4
                    target: GivensRotationFusedAdder_uncompute_0.in_4
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: GivensRotationFusedAdder_uncompute_0_repetition
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: input
                    name: in_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_3
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_4
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: output
                    name: out_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_3
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_4
                    size: Mod(2, N_spatial)
                  repetition:
                    count: N_spatial - 1
                    sequence:
                      multiplier: 1
                      type: constant
                  resources:
                  - name: active_volume
                    type: additive
                    value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens,
                      b_mas) - 48)
                  - name: gidney_lelbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: gidney_relbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 2*N_spatial - 2
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                  type: qubrick
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: Mod(2, N_spatial)
                  - direction: input
                    name: in_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: N_spatial
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  - direction: output
                    name: out_0
                    size: b_givens*(N_spatial - 1)
                  repetition: null
                  type: merge
                connections:
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_0
                  target: merge_3.in_0
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_1
                  target: out_1
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_2
                  target: out_2
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_3
                  target: out_3
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_4
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_1
                - source: in_2
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_2
                - source: in_3
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_3
                - source: in_4
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_4
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_4
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GivensRotationBasisChangeDF_uncompute_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: input
                  name: in_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_3
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_4
                  size: N_spatial
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_4
                  size: N_spatial
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas)
                    - 48)
                - name: gidney_lelbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
                - name: gidney_relbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 2*N_spatial - 2
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                type: qubrick
              connections:
              - source: GivensRotationBasisChangeDF_compute_0.out_0
                target: GivensRotationBasisChangeDF_uncompute_0.in_0
              - source: GivensRotationBasisChangeDF_compute_0.out_1
                target: GivensRotationBasisChangeDF_uncompute_0.in_1
              - source: GivensRotationBasisChangeDF_compute_0.out_2
                target: GivensRotationBasisChangeDF_uncompute_0.in_2
              - source: GivensRotationBasisChangeDF_compute_0.out_3
                target: GivensRotationBasisChangeDF_uncompute_0.in_3
              - source: GivensRotationBasisChangeDF_compute_0.out_4
                target: split_0.in_0
              - source: GivensRotationBasisChangeDF_uncompute_0.out_0
                target: out_0
              - source: GivensRotationBasisChangeDF_uncompute_0.out_1
                target: out_1
              - source: GivensRotationBasisChangeDF_uncompute_0.out_2
                target: out_2
              - source: GivensRotationBasisChangeDF_uncompute_0.out_3
                target: out_3
              - source: GivensRotationBasisChangeDF_uncompute_0.out_4
                target: out_4
              - source: in_0
                target: GivensRotationBasisChangeDF_compute_0.in_0
              - source: in_1
                target: GivensRotationBasisChangeDF_compute_0.in_2
              - source: in_2
                target: GivensRotationBasisChangeDF_compute_0.in_1
              - source: in_3
                target: GivensRotationBasisChangeDF_compute_0.in_3
              - source: in_4
                target: z_0.thru_1
              - source: merge_1.out_0
                target: GivensRotationBasisChangeDF_uncompute_0.in_4
              - source: split_0.out_0
                target: z_0.thru_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: z_0.thru_0
                target: merge_1.in_0
              - source: z_0.thru_1
                target: out_5
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: ApplyMajoranaFermionOperatorDF_compute_0
              ports:
              - direction: input
                name: in_0
                size: b_givens*(N_spatial - 1)
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: N_spatial
              - direction: input
                name: in_4
                size: 1
              - direction: output
                name: out_0
                size: b_givens*(N_spatial - 1)
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_4
                size: N_spatial
              - direction: output
                name: out_5
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) -
                  48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                  0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                  0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                  0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) +
                  4
              - name: gidney_lelbows
                type: additive
                value: 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
              - name: gidney_relbows
                type: additive
                value: 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 4*N_spatial - 4
              - name: rotations
                type: additive
                value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
              - name: t_gates
                type: additive
                value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0)
              - name: toffs
                type: additive
                value: 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*b_givens*(N_spatial - 1)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: b_givens*(N_spatial - 1)
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_lelbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_lelbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_1
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                      - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda) -
                    1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_9
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_2
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_11
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_relbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_uncompute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_relbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_12
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_13
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_14
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_1
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_15
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_1
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              connections:
              - source: BinaryToUnaryUncomputation_compute_0.out_0
                target: merge_4.in_0
              - source: BinaryToUnaryUncomputation_compute_0.out_1
                target: had_1.thru_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_0
                target: merge_12.in_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_1
                target: split_14.in_0
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_8.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: had_2.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: had_1.thru_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: had_2.thru_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_1
              - source: in_0
                target: merge_2.in_1
              - source: in_1
                target: had_0.thru_0
              - source: in_2
                target: merge_2.in_0
              - source: merge_1.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_1
              - source: merge_10.out_0
                target: split_11.in_0
              - source: merge_12.out_0
                target: split_13.in_0
              - source: merge_15.out_0
                target: qubits_free_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_9.in_0
              - source: qubits_alloc_0.out_0
                target: split_0.in_0
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_0.out_0
                target: x_0.thru_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_11.out_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_0
              - source: split_11.out_remainder
                target: merge_12.in_remainder
              - source: split_13.out_0
                target: out_1
              - source: split_13.out_1
                target: out_0
              - source: split_14.out_0
                target: x_1.thru_0
              - source: split_14.out_remainder
                target: merge_15.in_remainder
              - source: split_3.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_0
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_5.out_0
                target: merge_6.in_0
              - source: split_5.out_1
                target: merge_6.in_1
              - source: split_7.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: split_9.out_0
                target: merge_10.in_0
              - source: split_9.out_1
                target: merge_10.in_1
              - source: x_0.thru_0
                target: merge_1.in_0
              - source: x_1.thru_0
                target: merge_15.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: b_givens*(N_spatial - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3*b_givens*(N_spatial - 1) + 102*lamda + (ceiling(0.75*lamda)
                  + 49)*Max(0, ceiling(M_r*R/lamda) - 1) - 96
              - name: gidney_lelbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: gidney_relbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: measurements
                type: additive
                value: b_givens*(N_spatial - 1)
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            connections:
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_0
              target: DataLookupClean_uncompute_0.in_1
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_1
              target: out_1
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_2
              target: out_2
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_3
              target: out_3
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_4
              target: out_5
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_5
              target: out_6
            - source: DataLookupClean_compute_0.out_0
              target: DataLookupClean_uncompute_0.in_0
            - source: DataLookupClean_compute_0.out_1
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_0
            - source: DataLookupClean_compute_0.out_2
              target: DataLookupClean_uncompute_0.in_2
            - source: DataLookupClean_uncompute_0.out_0
              target: out_0
            - source: DataLookupClean_uncompute_0.out_1
              target: out_4
            - source: in_0
              target: DataLookupClean_compute_0.in_0
            - source: in_1
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_1
            - source: in_2
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_2
            - source: in_3
              target: DataLookupClean_compute_0.in_1
            - source: in_4
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_3
            - source: in_5
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_4
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: BasisRotatedMajoranaOperatorDF_compute_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: input
              name: in_1
              size: Max(b_as, b_givens, b_mas)
            - direction: input
              name: in_2
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_3
              size: ceiling(log2(R))
            - direction: input
              name: in_4
              size: N_spatial
            - direction: input
              name: in_5
              size: 1
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: output
              name: out_1
              size: Max(b_as, b_givens, b_mas)
            - direction: output
              name: out_2
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_3
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_4
              size: ceiling(log2(R))
            - direction: output
              name: out_5
              size: N_spatial
            - direction: output
              name: out_6
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial
                - 1)*(lamda - 1) + 3*b_givens*(N_spatial - 1) + 102*lamda + (N_spatial
                - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial
                - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
                b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2.5, 0) - 48) + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
                - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) - 92
            - name: gidney_lelbows
              type: additive
              value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) +
                2*Max(0, ceiling(M_r*R/lamda) - 1) - 1
            - name: gidney_relbows
              type: additive
              value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) +
                2*Max(0, ceiling(M_r*R/lamda) - 1) - 1
            - name: measurements
              type: additive
              value: b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial -
                1)
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 4*N_spatial - 4
            - name: rotations
              type: additive
              value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
            - name: t_gates
              type: additive
              value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 2.5, 0)
            - name: toffs
              type: additive
              value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 2*(N_spatial -
                1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(b_as, b_givens, b_mas))
            type: qubrick
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: local_ancillae
                type: qubits
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: GidneyAdd_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: input
              name: in_1
              size: M_r*(R - 1)
            - direction: input
              name: in_2
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: output
              name: out_1
              size: M_r*(R - 1)
            - direction: output
              name: out_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                - 60
            - name: gidney_lelbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: gidney_relbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: toffs
              type: additive
              value: 0
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_1
            ports:
            - direction: through
              name: thru_0
              size: N_spatial
            - direction: through
              name: thru_1
              size: N_spatial
            - direction: through
              name: thru_2
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*N_spatial
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: N_spatial
            type: swap
          connections:
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_0
            target: GidneyAdd_uncompute_0.in_0
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_1
            target: out_4
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_2
            target: out_6
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_3
            target: out_5
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_4
            target: GidneyAdd_uncompute_0.in_2
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_5
            target: swap_1.thru_0
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_6
            target: out_11
          - source: GidneyAdd_compute_0.out_0
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_0
          - source: GidneyAdd_compute_0.out_1
            target: GidneyAdd_uncompute_0.in_1
          - source: GidneyAdd_compute_0.out_2
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_3
          - source: GidneyAdd_uncompute_0.out_0
            target: qubits_free_0.in_0
          - source: GidneyAdd_uncompute_0.out_1
            target: out_2
          - source: GidneyAdd_uncompute_0.out_2
            target: out_7
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: in_10
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_5
          - source: in_2
            target: GidneyAdd_compute_0.in_1
          - source: in_3
            target: out_3
          - source: in_4
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_1
          - source: in_5
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_2
          - source: in_6
            target: GidneyAdd_compute_0.in_2
          - source: in_7
            target: swap_0.thru_0
          - source: in_8
            target: swap_0.thru_1
          - source: in_9
            target: swap_0.thru_2
          - source: qubits_alloc_0.out_0
            target: GidneyAdd_compute_0.in_0
          - source: swap_0.thru_0
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_4
          - source: swap_0.thru_1
            target: swap_1.thru_1
          - source: swap_0.thru_2
            target: swap_1.thru_2
          - source: swap_1.thru_0
            target: out_8
          - source: swap_1.thru_1
            target: out_9
          - source: swap_1.thru_2
            target: out_10
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: OneElectronTermSelect_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: input
            name: in_10
            size: 1
          - direction: input
            name: in_2
            size: M_r*(R - 1)
          - direction: input
            name: in_3
            size: b_mas
          - direction: input
            name: in_4
            size: Max(b_as, b_givens, b_mas)
          - direction: input
            name: in_5
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: input
            name: in_6
            size: ceiling(log2(R))
          - direction: input
            name: in_7
            size: N_spatial
          - direction: input
            name: in_8
            size: N_spatial
          - direction: input
            name: in_9
            size: 1
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: output
            name: out_10
            size: 1
          - direction: output
            name: out_11
            size: 1
          - direction: output
            name: out_2
            size: M_r*(R - 1)
          - direction: output
            name: out_3
            size: b_mas
          - direction: output
            name: out_4
            size: Max(b_as, b_givens, b_mas)
          - direction: output
            name: out_5
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: output
            name: out_6
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_7
            size: ceiling(log2(R))
          - direction: output
            name: out_8
            size: N_spatial
          - direction: output
            name: out_9
            size: N_spatial
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 110*N_spatial + 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda
              - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
              - 1) + 3*b_givens*(N_spatial - 1)*(lamda - 1) + 3*b_givens*(N_spatial
              - 1) + 102*lamda + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48)
              + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
              111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
              0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
              0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0) - 48) + (ceiling(0.75*lamda) + 49)*Max(0,
              ceiling(M_r*R/lamda) - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda
              - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lamda)
              - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 114*ceiling(log2(R))
              - 212
          - name: gidney_lelbows
            type: additive
            value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lamda)
              - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 3
          - name: gidney_relbows
            type: additive
            value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lamda)
              - 1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 3
          - name: measurements
            type: additive
            value: b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial - 1)
          - name: ppms
            type: additive
            value: 0
          - name: pprs
            type: additive
            value: 4*N_spatial - 4
          - name: rotations
            type: additive
            value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
              0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0))
          - name: t_gates
            type: additive
            value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              2.5, 0)
          - name: toffs
            type: additive
            value: 2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda -
              1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
              - 1) + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
          type: qubrick
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_0
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: ceiling(log2(R))
            - direction: output
              name: out_remainder
              size: b_mas
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_0
            ports:
            - direction: through
              name: thru_0
              size: ceiling(log2(R))
            - direction: through
              name: thru_1
              size: 1
            - direction: through
              name: thru_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*ceiling(log2(R))
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: ceiling(log2(R))
            type: swap
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_1
            ports:
            - direction: input
              name: in_0
              size: ceiling(log2(R))
            - direction: input
              name: in_remainder
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_2
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_remainder
              size: ceiling(log2(R))
            repetition: null
            type: split
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: qubits_alloc_0.out_0
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_compute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_lelbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_4
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: output
              name: out_0
              size: 1
            - direction: output
              name: out_remainder
              size: b_mas - 1
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: x_0
            ports:
            - direction: through
              name: thru_0
              size: 1
            - direction: through
              name: thru_1
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 4
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: x
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_5
            ports:
            - direction: input
              name: in_0
              size: 1
            - direction: input
              name: in_remainder
              size: b_mas - 1
            - direction: output
              name: out_0
              size: b_mas
            repetition: null
            type: merge
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_relbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: qubits_free_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_relbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_7
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_remainder
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: had_0
            ports:
            - direction: through
              name: thru_0
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 3*b_mas
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: had
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_1
            ports:
            - direction: input
              name: in_0
              size: b_mas
            repetition: null
            type: qubits_alloc
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*b_mas + 3*ceiling(log2(R))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: b_mas + ceiling(log2(R))
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_lelbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_lelbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_1
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                      - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda) -
                    1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_9
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_2
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_11
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_relbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_uncompute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_relbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_12
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_13
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_14
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_1
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_15
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_1
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              connections:
              - source: BinaryToUnaryUncomputation_compute_0.out_0
                target: merge_4.in_0
              - source: BinaryToUnaryUncomputation_compute_0.out_1
                target: had_1.thru_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_0
                target: merge_12.in_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_1
                target: split_14.in_0
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_8.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: had_2.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: had_1.thru_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: had_2.thru_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_1
              - source: in_0
                target: merge_2.in_1
              - source: in_1
                target: had_0.thru_0
              - source: in_2
                target: merge_2.in_0
              - source: merge_1.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_1
              - source: merge_10.out_0
                target: split_11.in_0
              - source: merge_12.out_0
                target: split_13.in_0
              - source: merge_15.out_0
                target: qubits_free_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_9.in_0
              - source: qubits_alloc_0.out_0
                target: split_0.in_0
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_0.out_0
                target: x_0.thru_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_11.out_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_0
              - source: split_11.out_remainder
                target: merge_12.in_remainder
              - source: split_13.out_0
                target: out_1
              - source: split_13.out_1
                target: out_0
              - source: split_14.out_0
                target: x_1.thru_0
              - source: split_14.out_remainder
                target: merge_15.in_remainder
              - source: split_3.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_0
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_5.out_0
                target: merge_6.in_0
              - source: split_5.out_1
                target: merge_6.in_1
              - source: split_7.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: split_9.out_0
                target: merge_10.in_0
              - source: split_9.out_1
                target: merge_10.in_1
              - source: x_0.thru_0
                target: merge_1.in_0
              - source: x_1.thru_0
                target: merge_15.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: b_mas + ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3*b_mas + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                  - 1) + 3*ceiling(log2(R)) - 96
              - name: gidney_lelbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: gidney_relbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: measurements
                type: additive
                value: b_mas + ceiling(log2(R))
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            connections:
            - source: DataLookupClean_uncompute_0.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: DataLookupClean_uncompute_0.out_1
              target: GidneyAdd_uncompute_0.in_2
            - source: GidneyAdd_compute_0.out_0
              target: DataLookupClean_uncompute_0.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_compute_0.out_2
              target: DataLookupClean_uncompute_0.in_2
            - source: GidneyAdd_uncompute_0.out_0
              target: qubits_free_0.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_0
            - source: GidneyAdd_uncompute_0.out_2
              target: out_1
            - source: in_0
              target: DataLookupClean_uncompute_0.in_1
            - source: in_1
              target: GidneyAdd_compute_0.in_1
            - source: in_2
              target: GidneyAdd_compute_0.in_2
            - source: qubits_alloc_0.out_0
              target: GidneyAdd_compute_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedSparseDataLookupDF_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: input
              name: in_1
              size: M_r*(R - 1)
            - direction: input
              name: in_2
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: M_r*(R - 1)
            - direction: output
              name: out_1
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 3*b_mas + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 117*ceiling(log2(R))
                - 216
            - name: gidney_lelbows
              type: additive
              value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 3
            - name: gidney_relbows
              type: additive
              value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 3
            - name: measurements
              type: additive
              value: b_mas + ceiling(log2(R))
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: qubrick
          - children:
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_0
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: relbow_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: relbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_1
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: 1
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: lelbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: lelbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_3
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: lelbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 44
                    - name: gidney_lelbows
                      type: additive
                      value: 1
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: lelbow
                  connections:
                  - source: in_0
                    target: lelbow_0.thru_0
                  - source: in_1
                    target: lelbow_0.thru_1
                  - source: in_2
                    target: lelbow_0.thru_2
                  - source: lelbow_0.thru_0
                    target: out_0
                  - source: lelbow_0.thru_1
                    target: out_1
                  - source: lelbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 44
                  - name: gidney_lelbows
                    type: additive
                    value: 1
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                    + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_9
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_10
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_9.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_8.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_8.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_11.in_0
              - source: in_0
                target: split_0.in_0
              - source: lelbow_0.thru_0
                target: merge_3.in_0
              - source: lelbow_0.thru_1
                target: x_0.thru_0
              - source: merge_11.out_0
                target: out_1
              - source: merge_3.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_10.in_0
              - source: merge_9.out_0
                target: out_0
              - source: qubits_alloc_0.out_0
                target: split_1.in_0
              - source: split_0.out_0
                target: lelbow_0.thru_0
              - source: split_0.out_remainder
                target: merge_3.in_remainder
              - source: split_1.out_0
                target: lelbow_0.thru_1
              - source: split_1.out_remainder
                target: merge_5.in_remainder
              - source: split_10.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_10.out_remainder
                target: merge_11.in_remainder
              - source: split_6.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_6.out_remainder
                target: merge_9.in_remainder
              - source: split_7.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_7.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: x_0.thru_0
                target: merge_5.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_0.out_0
                target: out_0
              - source: Repeated_had_0.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_0.in_0
              - source: in_1
                target: Repeated_had_0.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_0_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_0
              ports:
              - direction: through
                name: thru_0
                size: ceiling(log2(R))
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 47*Heaviside(ceiling(log2(R)) - 1.5, 0) + 49*ceiling(log2(R))
                  - 49*Min(2, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: local_ancillae
                type: qubits
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: Heaviside(ceiling(log2(R)) - 1.5, 0)
              type: z
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_1.out_0
                target: out_0
              - source: Repeated_had_1.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_1.in_0
              - source: in_1
                target: Repeated_had_1.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_1_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_2
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_3
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_0
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_4
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_5
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_6
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_7
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_8
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_9
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_10
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_11
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_1
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_12
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_13
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_14
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: z
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_15
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_2
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_16
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_17
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_2
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_18
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_19
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_20
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_21
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_22
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_23
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_24
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_25
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_3
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_26
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_27
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                  b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_3
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_2.out_0
                target: out_0
              - source: Repeated_had_2.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_2.in_0
              - source: in_1
                target: Repeated_had_2.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_2_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: relbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 1
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: relbow
                  connections:
                  - source: in_0
                    target: relbow_0.thru_0
                  - source: in_1
                    target: relbow_0.thru_1
                  - source: in_2
                    target: relbow_0.thru_2
                  - source: relbow_0.thru_0
                    target: out_0
                  - source: relbow_0.thru_1
                    target: out_1
                  - source: relbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 1
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                    1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_8
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: relbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: relbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_5.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_4.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_4.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_1.in_0
              - source: in_0
                target: split_2.in_0
              - source: in_1
                target: split_0.in_0
              - source: merge_1.out_0
                target: split_3.in_0
              - source: merge_10.out_0
                target: qubits_free_0.in_0
              - source: merge_11.out_0
                target: out_0
              - source: merge_4.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_8.in_0
              - source: relbow_0.thru_0
                target: merge_11.in_0
              - source: relbow_0.thru_1
                target: merge_10.in_0
              - source: split_0.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_2.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_2.out_remainder
                target: merge_5.in_remainder
              - source: split_3.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_3.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_6.out_0
                target: x_0.thru_0
              - source: split_6.out_remainder
                target: merge_10.in_remainder
              - source: split_8.out_0
                target: relbow_0.thru_0
              - source: split_8.out_remainder
                target: merge_11.in_remainder
              - source: x_0.thru_0
                target: relbow_0.thru_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: RotationCatalystStatePrep_uncompute_0
              ports:
              - direction: through
                name: thru_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: through
                name: thru_1
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_4
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: relbow_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: relbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_1
              ports:
              - direction: input
                name: in_0
                size: 1
              repetition: null
              type: qubits_alloc
            connections:
            - source: CompareLT_compute_0.out_0
              target: CompareLT_uncompute_0.in_0
            - source: CompareLT_compute_0.out_1
              target: CompareLT_uncompute_0.in_1
            - source: CompareLT_compute_0.out_2
              target: split_0.in_0
            - source: CompareLT_compute_1.out_0
              target: CompareLT_uncompute_1.in_0
            - source: CompareLT_compute_1.out_1
              target: CompareLT_uncompute_1.in_1
            - source: CompareLT_compute_1.out_2
              target: split_14.in_0
            - source: CompareLT_uncompute_0.out_0
              target: Contiguizer_compute_0.in_0
            - source: CompareLT_uncompute_0.out_1
              target: Repeated_had_0_repetition.in_1
            - source: CompareLT_uncompute_1.out_0
              target: Contiguizer_uncompute_0.in_0
            - source: CompareLT_uncompute_1.out_1
              target: Repeated_had_2_repetition.in_1
            - source: Contiguizer_compute_0.out_0
              target: CompareLT_compute_1.in_0
            - source: Contiguizer_compute_0.out_1
              target: Repeated_had_0_repetition.in_0
            - source: Contiguizer_uncompute_0.out_0
              target: out_0
            - source: GidneyAdd_compute_0.out_0
              target: merge_8.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_uncompute_0.out_0
              target: merge_22.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_1
            - source: Repeated_had_0_repetition.out_0
              target: Repeated_had_1_repetition.in_0
            - source: Repeated_had_0_repetition.out_1
              target: z_0.thru_0
            - source: Repeated_had_1_repetition.out_0
              target: Repeated_had_2_repetition.in_0
            - source: Repeated_had_1_repetition.out_1
              target: CompareLT_compute_1.in_1
            - source: Repeated_had_2_repetition.out_0
              target: Contiguizer_uncompute_0.in_1
            - source: Repeated_had_2_repetition.out_1
              target: out_4
            - source: RotationCatalystStatePrep_uncompute_0.thru_0
              target: out_3
            - source: RotationCatalystStatePrep_uncompute_0.thru_1
              target: out_2
            - source: had_0.thru_0
              target: x_0.thru_1
            - source: had_1.thru_0
              target: s_0.thru_0
            - source: had_2.thru_0
              target: x_2.thru_1
            - source: had_3.thru_0
              target: s_1.thru_0
            - source: in_0
              target: CompareLT_compute_0.in_0
            - source: in_1
              target: GidneyAdd_compute_0.in_1
            - source: in_2
              target: merge_2.in_1
            - source: in_3
              target: merge_2.in_0
            - source: in_4
              target: CompareLT_compute_0.in_1
            - source: in_5
              target: z_0.thru_1
            - source: in_6
              target: relbow_0.thru_1
            - source: merge_1.out_0
              target: CompareLT_uncompute_0.in_2
            - source: merge_10.out_0
              target: split_11.in_0
            - source: merge_12.out_0
              target: split_13.in_0
            - source: merge_15.out_0
              target: CompareLT_uncompute_1.in_2
            - source: merge_16.out_0
              target: split_17.in_0
            - source: merge_18.out_0
              target: split_19.in_0
            - source: merge_2.out_0
              target: split_3.in_0
            - source: merge_20.out_0
              target: split_21.in_0
            - source: merge_22.out_0
              target: split_23.in_0
            - source: merge_24.out_0
              target: split_25.in_0
            - source: merge_26.out_0
              target: split_27.in_0
            - source: merge_4.out_0
              target: split_5.in_0
            - source: merge_6.out_0
              target: split_7.in_0
            - source: merge_8.out_0
              target: split_9.in_0
            - source: relbow_0.thru_0
              target: merge_1.in_0
            - source: relbow_0.thru_1
              target: qubits_free_0.in_0
            - source: relbow_1.thru_0
              target: qubits_free_1.in_0
            - source: s_0.thru_0
              target: z_1.thru_1
            - source: s_1.thru_0
              target: x_4.thru_0
            - source: s_inv_0.thru_0
              target: had_0.thru_0
            - source: s_inv_1.thru_0
              target: had_2.thru_0
            - source: split_0.out_0
              target: relbow_0.thru_0
            - source: split_0.out_remainder
              target: merge_1.in_remainder
            - source: split_11.out_0
              target: x_1.thru_0
            - source: split_11.out_remainder
              target: merge_12.in_remainder
            - source: split_13.out_0
              target: merge_16.in_0
            - source: split_13.out_1
              target: merge_16.in_1
            - source: split_14.out_0
              target: z_1.thru_0
            - source: split_14.out_remainder
              target: merge_15.in_remainder
            - source: split_17.out_0
              target: x_2.thru_0
            - source: split_17.out_remainder
              target: merge_18.in_remainder
            - source: split_19.out_0
              target: merge_20.in_0
            - source: split_19.out_1
              target: merge_20.in_1
            - source: split_21.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: split_21.out_remainder
              target: merge_22.in_remainder
            - source: split_23.out_0
              target: merge_24.in_0
            - source: split_23.out_1
              target: merge_24.in_1
            - source: split_25.out_0
              target: x_3.thru_0
            - source: split_25.out_remainder
              target: merge_26.in_remainder
            - source: split_27.out_0
              target: RotationCatalystStatePrep_uncompute_0.thru_0
            - source: split_27.out_1
              target: RotationCatalystStatePrep_uncompute_0.thru_1
            - source: split_3.out_0
              target: x_0.thru_0
            - source: split_3.out_remainder
              target: merge_4.in_remainder
            - source: split_5.out_0
              target: merge_6.in_0
            - source: split_5.out_1
              target: merge_6.in_1
            - source: split_7.out_0
              target: GidneyAdd_compute_0.in_0
            - source: split_7.out_remainder
              target: merge_8.in_remainder
            - source: split_9.out_0
              target: merge_10.in_0
            - source: split_9.out_1
              target: merge_10.in_1
            - source: x_0.thru_0
              target: merge_4.in_0
            - source: x_0.thru_1
              target: x_1.thru_1
            - source: x_1.thru_0
              target: merge_12.in_0
            - source: x_1.thru_1
              target: had_1.thru_0
            - source: x_2.thru_0
              target: merge_18.in_0
            - source: x_2.thru_1
              target: x_3.thru_1
            - source: x_3.thru_0
              target: merge_26.in_0
            - source: x_3.thru_1
              target: had_3.thru_0
            - source: x_4.thru_0
              target: relbow_1.thru_0
            - source: z_0.thru_0
              target: Repeated_had_1_repetition.in_1
            - source: z_0.thru_1
              target: s_inv_0.thru_0
            - source: z_1.thru_0
              target: merge_15.in_0
            - source: z_1.thru_1
              target: s_inv_1.thru_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedRealUSPDF_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: Max(b_as, b_givens, b_mas)
            - direction: input
              name: in_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_4
              size: ceiling(log2(R))
            - direction: input
              name: in_5
              size: 1
            - direction: input
              name: in_6
              size: 1
            - direction: output
              name: out_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: Max(b_as, b_givens, b_mas)
            - direction: output
              name: out_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_4
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 49*M_r + 130*b_mas + 47*Heaviside(ceiling(log2(R)) - 1.5, 0)
                - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
                + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
                (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R)) - 49*Min(2,
                ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                - 312
            - name: gidney_lelbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: gidney_relbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: measurements
              type: additive
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - name: toffs
              type: additive
              value: Heaviside(ceiling(log2(R)) - 1.5, 0)
            type: qubrick
          connections:
          - source: CompareLT_compute_0.out_0
            target: CompareLT_uncompute_0.in_0
          - source: CompareLT_compute_0.out_1
            target: CompareLT_uncompute_0.in_1
          - source: CompareLT_compute_0.out_2
            target: split_4.in_0
          - source: CompareLT_uncompute_0.out_0
            target: merge_7.in_0
          - source: CompareLT_uncompute_0.out_1
            target: had_0.thru_0
          - source: MultiplexedRealUSPDF_uncompute_0.out_0
            target: out_1
          - source: MultiplexedRealUSPDF_uncompute_0.out_1
            target: out_3
          - source: MultiplexedRealUSPDF_uncompute_0.out_2
            target: out_4
          - source: MultiplexedRealUSPDF_uncompute_0.out_3
            target: out_5
          - source: MultiplexedRealUSPDF_uncompute_0.out_4
            target: out_6
          - source: MultiplexedSparseDataLookupDF_uncompute_0.out_0
            target: out_2
          - source: MultiplexedSparseDataLookupDF_uncompute_0.out_1
            target: MultiplexedRealUSPDF_uncompute_0.in_4
          - source: had_0.thru_0
            target: qubits_free_1.in_0
          - source: in_0
            target: out_0
          - source: in_1
            target: split_0.in_0
          - source: in_10
            target: MultiplexedRealUSPDF_uncompute_0.in_5
          - source: in_11
            target: out_7
          - source: in_12
            target: MultiplexedRealUSPDF_uncompute_0.in_6
          - source: in_2
            target: MultiplexedRealUSPDF_uncompute_0.in_0
          - source: in_3
            target: MultiplexedSparseDataLookupDF_uncompute_0.in_1
          - source: in_4
            target: MultiplexedRealUSPDF_uncompute_0.in_1
          - source: in_5
            target: CompareLT_compute_0.in_1
          - source: in_6
            target: swap_0.thru_1
          - source: in_7
            target: MultiplexedRealUSPDF_uncompute_0.in_2
          - source: in_8
            target: MultiplexedRealUSPDF_uncompute_0.in_3
          - source: in_9
            target: swap_0.thru_2
          - source: merge_1.out_0
            target: split_2.in_0
          - source: merge_5.out_0
            target: CompareLT_uncompute_0.in_2
          - source: merge_7.out_0
            target: MultiplexedSparseDataLookupDF_uncompute_0.in_0
          - source: split_0.out_0
            target: swap_0.thru_0
          - source: split_0.out_remainder
            target: merge_1.in_remainder
          - source: split_2.out_0
            target: CompareLT_compute_0.in_0
          - source: split_2.out_remainder
            target: merge_7.in_remainder
          - source: split_4.out_0
            target: x_0.thru_1
          - source: split_4.out_remainder
            target: merge_5.in_remainder
          - source: swap_0.thru_0
            target: merge_1.in_0
          - source: swap_0.thru_1
            target: x_0.thru_0
          - source: swap_0.thru_2
            target: MultiplexedSparseDataLookupDF_uncompute_0.in_2
          - source: x_0.thru_0
            target: qubits_free_0.in_0
          - source: x_0.thru_1
            target: merge_5.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: MultiplexedAliasSamplingDF_uncompute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: b_mas + ceiling(log2(R))
          - direction: input
            name: in_10
            size: 1
          - direction: input
            name: in_11
            size: 1
          - direction: input
            name: in_12
            size: 1
          - direction: input
            name: in_2
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: input
            name: in_3
            size: M_r*(R - 1)
          - direction: input
            name: in_4
            size: b_mas
          - direction: input
            name: in_5
            size: b_mas
          - direction: input
            name: in_6
            size: 1
          - direction: input
            name: in_7
            size: Max(b_as, b_givens, b_mas)
          - direction: input
            name: in_8
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: input
            name: in_9
            size: ceiling(log2(R))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: output
            name: out_2
            size: M_r*(R - 1)
          - direction: output
            name: out_3
            size: b_mas
          - direction: output
            name: out_4
            size: Max(b_as, b_givens, b_mas)
          - direction: output
            name: out_5
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_6
            size: ceiling(log2(R))
          - direction: output
            name: out_7
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 49*M_r + 250*b_mas + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0,
              ceiling(M_r*R/lamda) - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 47*Heaviside(ceiling(log2(R)) - 1.5, 0) - 49*Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 449*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) - 644
          - name: gidney_lelbows
            type: additive
            value: M_r + 3*b_mas + lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 5
          - name: gidney_relbows
            type: additive
            value: M_r + 3*b_mas + lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 5
          - name: measurements
            type: additive
            value: b_mas + ceiling(log2(R))
          - name: ppms
            type: additive
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
          - name: toffs
            type: additive
            value: Heaviside(ceiling(log2(R)) - 1.5, 0) + ceiling(log2(R))
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        connections:
        - source: MultiplexedAliasSamplingDF_compute_0.out_0
          target: OneElectronTermSelect_compute_0.in_0
        - source: MultiplexedAliasSamplingDF_compute_0.out_1
          target: MultiplexedAliasSamplingDF_uncompute_0.in_1
        - source: MultiplexedAliasSamplingDF_compute_0.out_10
          target: MultiplexedAliasSamplingDF_uncompute_0.in_10
        - source: MultiplexedAliasSamplingDF_compute_0.out_11
          target: OneElectronTermSelect_compute_0.in_9
        - source: MultiplexedAliasSamplingDF_compute_0.out_12
          target: OneElectronTermSelect_compute_0.in_10
        - source: MultiplexedAliasSamplingDF_compute_0.out_2
          target: OneElectronTermSelect_compute_0.in_1
        - source: MultiplexedAliasSamplingDF_compute_0.out_3
          target: OneElectronTermSelect_compute_0.in_2
        - source: MultiplexedAliasSamplingDF_compute_0.out_4
          target: OneElectronTermSelect_compute_0.in_3
        - source: MultiplexedAliasSamplingDF_compute_0.out_5
          target: MultiplexedAliasSamplingDF_uncompute_0.in_5
        - source: MultiplexedAliasSamplingDF_compute_0.out_6
          target: MultiplexedAliasSamplingDF_uncompute_0.in_6
        - source: MultiplexedAliasSamplingDF_compute_0.out_7
          target: OneElectronTermSelect_compute_0.in_4
        - source: MultiplexedAliasSamplingDF_compute_0.out_8
          target: OneElectronTermSelect_compute_0.in_5
        - source: MultiplexedAliasSamplingDF_compute_0.out_9
          target: OneElectronTermSelect_compute_0.in_6
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_0
          target: out_0
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_1
          target: out_1
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_2
          target: out_2
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_3
          target: out_3
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_4
          target: out_4
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_5
          target: out_5
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_6
          target: out_7
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_7
          target: had_1.thru_0
        - source: OneElectronTermSelect_compute_0.out_0
          target: MultiplexedAliasSamplingDF_uncompute_0.in_0
        - source: OneElectronTermSelect_compute_0.out_1
          target: MultiplexedAliasSamplingDF_uncompute_0.in_2
        - source: OneElectronTermSelect_compute_0.out_10
          target: MultiplexedAliasSamplingDF_uncompute_0.in_11
        - source: OneElectronTermSelect_compute_0.out_11
          target: MultiplexedAliasSamplingDF_uncompute_0.in_12
        - source: OneElectronTermSelect_compute_0.out_2
          target: MultiplexedAliasSamplingDF_uncompute_0.in_3
        - source: OneElectronTermSelect_compute_0.out_3
          target: MultiplexedAliasSamplingDF_uncompute_0.in_4
        - source: OneElectronTermSelect_compute_0.out_4
          target: MultiplexedAliasSamplingDF_uncompute_0.in_7
        - source: OneElectronTermSelect_compute_0.out_5
          target: out_6
        - source: OneElectronTermSelect_compute_0.out_6
          target: MultiplexedAliasSamplingDF_uncompute_0.in_8
        - source: OneElectronTermSelect_compute_0.out_7
          target: MultiplexedAliasSamplingDF_uncompute_0.in_9
        - source: OneElectronTermSelect_compute_0.out_8
          target: out_8
        - source: OneElectronTermSelect_compute_0.out_9
          target: out_9
        - source: had_0.thru_0
          target: MultiplexedAliasSamplingDF_compute_0.in_6
        - source: had_1.thru_0
          target: out_10
        - source: in_0
          target: MultiplexedAliasSamplingDF_compute_0.in_0
        - source: in_1
          target: MultiplexedAliasSamplingDF_compute_0.in_1
        - source: in_2
          target: MultiplexedAliasSamplingDF_compute_0.in_2
        - source: in_3
          target: MultiplexedAliasSamplingDF_compute_0.in_3
        - source: in_4
          target: MultiplexedAliasSamplingDF_compute_0.in_4
        - source: in_5
          target: MultiplexedAliasSamplingDF_compute_0.in_5
        - source: in_6
          target: OneElectronTermSelect_compute_0.in_7
        - source: in_7
          target: OneElectronTermSelect_compute_0.in_8
        - source: in_8
          target: had_0.thru_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: OneElectronTermBlockEncoding_compute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: input
          name: in_1
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: input
          name: in_2
          size: M_r*(R - 1)
        - direction: input
          name: in_3
          size: b_mas
        - direction: input
          name: in_4
          size: Max(b_as, b_givens, b_mas)
        - direction: input
          name: in_5
          size: ceiling(log2(R))
        - direction: input
          name: in_6
          size: N_spatial
        - direction: input
          name: in_7
          size: N_spatial
        - direction: input
          name: in_8
          size: 1
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_1
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: output
          name: out_10
          size: 1
        - direction: output
          name: out_2
          size: M_r*(R - 1)
        - direction: output
          name: out_3
          size: b_mas
        - direction: output
          name: out_4
          size: Max(b_as, b_givens, b_mas)
        - direction: output
          name: out_5
          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - direction: output
          name: out_6
          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas))
        - direction: output
          name: out_7
          size: ceiling(log2(R))
        - direction: output
          name: out_8
          size: N_spatial
        - direction: output
          name: out_9
          size: N_spatial
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 98*M_r + 110*N_spatial + 55*b_givens*(-1 + (b_givens*(N_spatial -
            1)*(lamda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
            - 1) + 3*b_givens*(N_spatial - 1)*(lamda - 1) + 3*b_givens*(N_spatial
            - 1) + 497*b_mas + 204*lamda + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
            - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
            + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0,
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
            0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
            + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 2.5, 0) - 48) + (3*b_mas + 3*ceiling(log2(R)))*(lamda
            - 1) + 2*(ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) +
            (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
            - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + (ceiling(0.75*b_mas + (0.75*b_mas
            + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0,
            ceiling(M_r*R/lamda) - 1) + 3*Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + 342*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
            b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2.5, 0)) + 5*Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
            0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
            0) + 94*Heaviside(ceiling(log2(R)) - 1.5, 0) - 98*Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1009*ceiling(log2(R))
            - 98*Min(2, ceiling(log2(R))) + 462*Min(M_r - Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - 1398
        - name: gidney_lelbows
          type: additive
          value: 2*M_r + 6*b_mas + 2*lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
            + 4*Max(0, ceiling(M_r*R/lamda) - 1) + 6*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 12*ceiling(log2(R)) - 2*Min(2, ceiling(log2(R)))
            - 12
        - name: gidney_relbows
          type: additive
          value: 2*M_r + 6*b_mas + 2*lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
            + 4*Max(0, ceiling(M_r*R/lamda) - 1) + 6*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - 2*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 12*ceiling(log2(R)) - 2*Min(2, ceiling(log2(R)))
            - 12
        - name: measurements
          type: additive
          value: b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial - 1) +
            b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R))
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 4*N_spatial - 4
        - name: rotations
          type: additive
          value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
            b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Heaviside(1.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) -
            Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
        - name: t_gates
          type: additive
          value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
            0) + Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) +
            12*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
        - name: toffs
          type: additive
          value: 2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1)
            + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
            + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
            + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + 2*(N_spatial - 1)*(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas)) + 2*Heaviside(ceiling(log2(R)) - 1.5, 0) + 2*ceiling(log2(R))
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_1
        ports:
        - direction: input
          name: in_0
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: input
          name: in_1
          size: M_r*(R - 1)
        - direction: input
          name: in_2
          size: b_mas
        - direction: input
          name: in_remainder
          size: -M_r*(R - 1) - M_r - b_mas + Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1
        - direction: output
          name: out_0
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        repetition: null
        type: merge
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_2
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        - direction: output
          name: out_0
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        - direction: output
          name: out_remainder
          size: -Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))
        repetition: null
        type: split
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_3
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R))
        - direction: input
          name: in_1
          size: 1
        - direction: output
          name: out_0
          size: ceiling(log2(R)) + 1
        repetition: null
        type: merge
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: z_0
        ports:
        - direction: through
          name: thru_0
          size: ceiling(log2(R)) + 1
        - direction: through
          name: thru_1
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 47*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + 49*(Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
            + 49*ceiling(log2(R)) - 49*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)))
        - name: gidney_lelbows
          type: additive
          value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - Min(2, Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)))
        - name: gidney_relbows
          type: additive
          value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - Min(2, Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)))
        - name: local_ancillae
          type: qubits
          value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - Min(2, Mod(1, ceiling(log2(2
            ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)))
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0)
        type: z
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_4
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R)) + 1
        - direction: output
          name: out_0
          size: ceiling(log2(R))
        - direction: output
          name: out_1
          size: 1
        repetition: null
        type: split
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_5
        ports:
        - direction: input
          name: in_0
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        - direction: input
          name: in_remainder
          size: -Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
            - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
            (b_mas + 1) - 1) + 2*M_r + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        repetition: null
        type: merge
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_6
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        - direction: output
          name: out_0
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        - direction: output
          name: out_1
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: output
          name: out_2
          size: M_r*(R - 1)
        - direction: output
          name: out_3
          size: b_mas
        - direction: output
          name: out_remainder
          size: -M_r*(R - 1) - M_r - b_mas + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1
        repetition: null
        type: split
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: 1
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: lelbow_0
          ports:
          - direction: through
            name: thru_0
            size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
              2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1)))
          - direction: through
            name: thru_1
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 44*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 49*(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
              - 49*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: gidney_lelbows
            type: additive
            value: Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: gidney_relbows
            type: additive
            value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
              2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: local_ancillae
            type: qubits
            value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
              2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: lelbow
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - children:
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: 1
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: lelbow_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: lelbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_1
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_3
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: s_inv_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: s_inv
                  connections:
                  - source: in_0
                    target: s_inv_0.thru_0
                  - source: s_inv_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_s_inv_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_s_inv_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_s_inv_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_s_inv_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 1.5, 0)
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1.5, 0)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_1
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(b_as, b_givens, b_mas)
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_1
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_3
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: t_inv_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 28.5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 1
                    - name: toffs
                      type: additive
                      value: 0
                    type: t_inv
                  connections:
                  - source: in_0
                    target: t_inv_0.thru_0
                  - source: t_inv_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_t_inv_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 28.5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 1
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_t_inv_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_t_inv_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_t_inv_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 2.5, 0)
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 2.5, 0)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 2.5, 0)
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_1
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(b_as, b_givens, b_mas)
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_1
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_3
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_9
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: phase_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 1397
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 1
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: phase
                  connections:
                  - source: in_0
                    target: phase_0.thru_0
                  - source: phase_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_phase_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 1397
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 1
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_phase_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_phase_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_phase_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                    b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0))
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas) - 1
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_11
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_0
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_1
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(b_as, b_givens, b_mas)
                repetition: null
                type: split
              connections:
              - source: Repeated_phase_0_repetition.out_0
                target: merge_10.in_0
              - source: Repeated_s_inv_0_repetition.out_0
                target: merge_2.in_0
              - source: Repeated_t_inv_0_repetition.out_0
                target: merge_6.in_0
              - source: had_0.thru_0
                target: merge_0.in_0
              - source: in_0
                target: merge_0.in_1
              - source: in_1
                target: merge_0.in_2
              - source: in_2
                target: merge_0.in_3
              - source: merge_0.out_0
                target: split_1.in_0
              - source: merge_10.out_0
                target: split_11.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_9.in_0
              - source: qubits_alloc_0.out_0
                target: had_0.thru_0
              - source: split_1.out_0
                target: Repeated_s_inv_0_repetition.in_0
              - source: split_1.out_remainder
                target: merge_2.in_remainder
              - source: split_11.out_0
                target: out_3
              - source: split_11.out_1
                target: out_1
              - source: split_11.out_2
                target: out_0
              - source: split_11.out_3
                target: out_2
              - source: split_3.out_0
                target: merge_4.in_0
              - source: split_3.out_1
                target: merge_4.in_1
              - source: split_3.out_2
                target: merge_4.in_2
              - source: split_3.out_3
                target: merge_4.in_3
              - source: split_5.out_0
                target: Repeated_t_inv_0_repetition.in_0
              - source: split_5.out_remainder
                target: merge_6.in_remainder
              - source: split_7.out_0
                target: merge_8.in_0
              - source: split_7.out_1
                target: merge_8.in_1
              - source: split_7.out_2
                target: merge_8.in_2
              - source: split_7.out_3
                target: merge_8.in_3
              - source: split_9.out_0
                target: Repeated_phase_0_repetition.in_0
              - source: split_9.out_remainder
                target: merge_10.in_remainder
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: RotationCatalystStatePrep_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_3
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
                  0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0)
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0))
              - name: t_gates
                type: additive
                value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                  - 2.5, 0)
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: lelbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: lelbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_3
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: lelbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 44
                    - name: gidney_lelbows
                      type: additive
                      value: 1
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: lelbow
                  connections:
                  - source: in_0
                    target: lelbow_0.thru_0
                  - source: in_1
                    target: lelbow_0.thru_1
                  - source: in_2
                    target: lelbow_0.thru_2
                  - source: lelbow_0.thru_0
                    target: out_0
                  - source: lelbow_0.thru_1
                    target: out_1
                  - source: lelbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 44
                  - name: gidney_lelbows
                    type: additive
                    value: 1
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                    + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_9
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_10
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_9.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_8.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_8.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_11.in_0
              - source: in_0
                target: split_0.in_0
              - source: lelbow_0.thru_0
                target: merge_3.in_0
              - source: lelbow_0.thru_1
                target: x_0.thru_0
              - source: merge_11.out_0
                target: out_1
              - source: merge_3.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_10.in_0
              - source: merge_9.out_0
                target: out_0
              - source: qubits_alloc_0.out_0
                target: split_1.in_0
              - source: split_0.out_0
                target: lelbow_0.thru_0
              - source: split_0.out_remainder
                target: merge_3.in_remainder
              - source: split_1.out_0
                target: lelbow_0.thru_1
              - source: split_1.out_remainder
                target: merge_5.in_remainder
              - source: split_10.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_10.out_remainder
                target: merge_11.in_remainder
              - source: split_6.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_6.out_remainder
                target: merge_9.in_remainder
              - source: split_7.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_7.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: x_0.thru_0
                target: merge_5.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_0.out_0
                target: out_0
              - source: Repeated_had_0.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_0.in_0
              - source: in_1
                target: Repeated_had_0.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_0_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_1
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_1
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_2
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_3
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_4
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_5
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_6
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_7
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_8
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_9
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_2
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_10
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_11
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_12
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: z
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_13
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_2
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_14
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_15
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_3
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_16
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_17
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_18
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_19
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_20
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_21
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_22
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_23
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_4
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_24
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_25
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_3
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_1.out_0
                target: out_0
              - source: Repeated_had_1.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_1.in_0
              - source: in_1
                target: Repeated_had_1.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_1_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_1
              ports:
              - direction: through
                name: thru_0
                size: ceiling(log2(R))
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 47*Heaviside(ceiling(log2(R)) - 1.5, 0) + 49*ceiling(log2(R))
                  - 49*Min(2, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: local_ancillae
                type: qubits
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: Heaviside(ceiling(log2(R)) - 1.5, 0)
              type: z
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_2.out_0
                target: out_0
              - source: Repeated_had_2.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_2.in_0
              - source: in_1
                target: Repeated_had_2.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_2_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: relbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 1
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: relbow
                  connections:
                  - source: in_0
                    target: relbow_0.thru_0
                  - source: in_1
                    target: relbow_0.thru_1
                  - source: in_2
                    target: relbow_0.thru_2
                  - source: relbow_0.thru_0
                    target: out_0
                  - source: relbow_0.thru_1
                    target: out_1
                  - source: relbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 1
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                    1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_8
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: relbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: relbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_5.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_4.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_4.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_1.in_0
              - source: in_0
                target: split_2.in_0
              - source: in_1
                target: split_0.in_0
              - source: merge_1.out_0
                target: split_3.in_0
              - source: merge_10.out_0
                target: qubits_free_0.in_0
              - source: merge_11.out_0
                target: out_0
              - source: merge_4.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_8.in_0
              - source: relbow_0.thru_0
                target: merge_11.in_0
              - source: relbow_0.thru_1
                target: merge_10.in_0
              - source: split_0.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_2.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_2.out_remainder
                target: merge_5.in_remainder
              - source: split_3.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_3.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_6.out_0
                target: x_0.thru_0
              - source: split_6.out_remainder
                target: merge_10.in_remainder
              - source: split_8.out_0
                target: relbow_0.thru_0
              - source: split_8.out_remainder
                target: merge_11.in_remainder
              - source: x_0.thru_0
                target: relbow_0.thru_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_1
              ports:
              - direction: output
                name: out_0
                size: 1
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_26
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: lelbow_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: lelbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_27
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            connections:
            - source: CompareLT_compute_0.out_0
              target: CompareLT_uncompute_0.in_0
            - source: CompareLT_compute_0.out_1
              target: CompareLT_uncompute_0.in_1
            - source: CompareLT_compute_0.out_2
              target: split_12.in_0
            - source: CompareLT_compute_1.out_0
              target: CompareLT_uncompute_1.in_0
            - source: CompareLT_compute_1.out_1
              target: CompareLT_uncompute_1.in_1
            - source: CompareLT_compute_1.out_2
              target: split_26.in_0
            - source: CompareLT_uncompute_0.out_0
              target: Contiguizer_uncompute_0.in_0
            - source: CompareLT_uncompute_0.out_1
              target: Repeated_had_1_repetition.in_1
            - source: CompareLT_uncompute_1.out_0
              target: out_0
            - source: CompareLT_uncompute_1.out_1
              target: out_6
            - source: Contiguizer_compute_0.out_0
              target: CompareLT_compute_0.in_0
            - source: Contiguizer_compute_0.out_1
              target: Repeated_had_0_repetition.in_0
            - source: Contiguizer_uncompute_0.out_0
              target: CompareLT_compute_1.in_0
            - source: GidneyAdd_compute_0.out_0
              target: merge_6.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_uncompute_0.out_0
              target: merge_20.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_1
            - source: Repeated_had_0_repetition.out_0
              target: Repeated_had_1_repetition.in_0
            - source: Repeated_had_0_repetition.out_1
              target: CompareLT_compute_0.in_1
            - source: Repeated_had_1_repetition.out_0
              target: Repeated_had_2_repetition.in_0
            - source: Repeated_had_1_repetition.out_1
              target: z_1.thru_0
            - source: Repeated_had_2_repetition.out_0
              target: Contiguizer_uncompute_0.in_1
            - source: Repeated_had_2_repetition.out_1
              target: CompareLT_compute_1.in_1
            - source: RotationCatalystStatePrep_compute_0.out_0
              target: merge_0.in_2
            - source: RotationCatalystStatePrep_compute_0.out_1
              target: merge_0.in_1
            - source: RotationCatalystStatePrep_compute_0.out_2
              target: merge_0.in_3
            - source: RotationCatalystStatePrep_compute_0.out_3
              target: merge_0.in_0
            - source: had_0.thru_0
              target: x_1.thru_1
            - source: had_1.thru_0
              target: s_0.thru_0
            - source: had_2.thru_0
              target: x_3.thru_1
            - source: had_3.thru_0
              target: s_1.thru_0
            - source: in_0
              target: Contiguizer_compute_0.in_0
            - source: in_1
              target: GidneyAdd_compute_0.in_1
            - source: in_2
              target: RotationCatalystStatePrep_compute_0.in_2
            - source: in_3
              target: RotationCatalystStatePrep_compute_0.in_1
            - source: in_4
              target: RotationCatalystStatePrep_compute_0.in_0
            - source: in_5
              target: Repeated_had_0_repetition.in_1
            - source: lelbow_0.thru_0
              target: x_0.thru_0
            - source: lelbow_1.thru_0
              target: merge_27.in_0
            - source: lelbow_1.thru_1
              target: out_8
            - source: merge_0.out_0
              target: split_1.in_0
            - source: merge_10.out_0
              target: split_11.in_0
            - source: merge_13.out_0
              target: CompareLT_uncompute_0.in_2
            - source: merge_14.out_0
              target: split_15.in_0
            - source: merge_16.out_0
              target: split_17.in_0
            - source: merge_18.out_0
              target: split_19.in_0
            - source: merge_2.out_0
              target: split_3.in_0
            - source: merge_20.out_0
              target: split_21.in_0
            - source: merge_22.out_0
              target: split_23.in_0
            - source: merge_24.out_0
              target: split_25.in_0
            - source: merge_27.out_0
              target: CompareLT_uncompute_1.in_2
            - source: merge_4.out_0
              target: split_5.in_0
            - source: merge_6.out_0
              target: split_7.in_0
            - source: merge_8.out_0
              target: split_9.in_0
            - source: qubits_alloc_0.out_0
              target: lelbow_0.thru_0
            - source: qubits_alloc_1.out_0
              target: lelbow_1.thru_1
            - source: s_0.thru_0
              target: z_0.thru_1
            - source: s_1.thru_0
              target: z_1.thru_1
            - source: s_inv_0.thru_0
              target: had_0.thru_0
            - source: s_inv_1.thru_0
              target: had_2.thru_0
            - source: split_1.out_0
              target: x_1.thru_0
            - source: split_1.out_remainder
              target: merge_2.in_remainder
            - source: split_11.out_0
              target: merge_14.in_0
            - source: split_11.out_1
              target: merge_14.in_1
            - source: split_11.out_2
              target: merge_14.in_2
            - source: split_11.out_3
              target: merge_14.in_3
            - source: split_12.out_0
              target: z_0.thru_0
            - source: split_12.out_remainder
              target: merge_13.in_remainder
            - source: split_15.out_0
              target: x_3.thru_0
            - source: split_15.out_remainder
              target: merge_16.in_remainder
            - source: split_17.out_0
              target: merge_18.in_0
            - source: split_17.out_1
              target: merge_18.in_1
            - source: split_17.out_2
              target: merge_18.in_2
            - source: split_17.out_3
              target: merge_18.in_3
            - source: split_19.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: split_19.out_remainder
              target: merge_20.in_remainder
            - source: split_21.out_0
              target: merge_22.in_0
            - source: split_21.out_1
              target: merge_22.in_1
            - source: split_21.out_2
              target: merge_22.in_2
            - source: split_21.out_3
              target: merge_22.in_3
            - source: split_23.out_0
              target: x_4.thru_0
            - source: split_23.out_remainder
              target: merge_24.in_remainder
            - source: split_25.out_0
              target: out_4
            - source: split_25.out_1
              target: out_5
            - source: split_25.out_2
              target: out_3
            - source: split_25.out_3
              target: out_2
            - source: split_26.out_0
              target: lelbow_1.thru_0
            - source: split_26.out_remainder
              target: merge_27.in_remainder
            - source: split_3.out_0
              target: merge_4.in_0
            - source: split_3.out_1
              target: merge_4.in_1
            - source: split_3.out_2
              target: merge_4.in_2
            - source: split_3.out_3
              target: merge_4.in_3
            - source: split_5.out_0
              target: GidneyAdd_compute_0.in_0
            - source: split_5.out_remainder
              target: merge_6.in_remainder
            - source: split_7.out_0
              target: merge_8.in_0
            - source: split_7.out_1
              target: merge_8.in_1
            - source: split_7.out_2
              target: merge_8.in_2
            - source: split_7.out_3
              target: merge_8.in_3
            - source: split_9.out_0
              target: x_2.thru_0
            - source: split_9.out_remainder
              target: merge_10.in_remainder
            - source: x_0.thru_0
              target: s_inv_0.thru_0
            - source: x_1.thru_0
              target: merge_2.in_0
            - source: x_1.thru_1
              target: x_2.thru_1
            - source: x_2.thru_0
              target: merge_10.in_0
            - source: x_2.thru_1
              target: had_1.thru_0
            - source: x_3.thru_0
              target: merge_16.in_0
            - source: x_3.thru_1
              target: x_4.thru_1
            - source: x_4.thru_0
              target: merge_24.in_0
            - source: x_4.thru_1
              target: had_3.thru_0
            - source: z_0.thru_0
              target: merge_13.in_0
            - source: z_0.thru_1
              target: s_inv_1.thru_0
            - source: z_1.thru_0
              target: Repeated_had_2_repetition.in_1
            - source: z_1.thru_1
              target: out_7
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedRealUSPDF_compute_0
            ports:
            - direction: input
              name: in_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: Max(b_as, b_givens, b_mas)
            - direction: input
              name: in_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_4
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_5
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: Max(b_as, b_givens, b_mas)
            - direction: output
              name: out_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_4
              size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_5
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_6
              size: ceiling(log2(R))
            - direction: output
              name: out_7
              size: 1
            - direction: output
              name: out_8
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 49*M_r + 130*b_mas + 1397*Max(0, Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 47*Heaviside(ceiling(log2(R))
                - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R)) - 49*Min(2,
                ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                - 312
            - name: gidney_lelbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: gidney_relbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: measurements
              type: additive
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                b_givens, b_mas) - 2.5, 0))
            - name: t_gates
              type: additive
              value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                - 2.5, 0) + 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - name: toffs
              type: additive
              value: Heaviside(ceiling(log2(R)) - 1.5, 0)
            type: qubrick
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_1
                ports:
                - direction: output
                  name: out_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda
                      - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lamda)
                      - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_mas + ceiling(log2(R))
                - direction: input
                  name: in_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_mas + ceiling(log2(R))
                - direction: output
                  name: out_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda
                    - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lamda)
                    - 1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) +
                      ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
                  - name: toffs
                    type: additive
                    value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) +
                      ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: SwapUp_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_mas + ceiling(log2(R))
                - direction: input
                  name: in_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_mas + ceiling(log2(R))
                - direction: output
                  name: out_2
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                    + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
                - name: toffs
                  type: additive
                  value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                    + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (3*b_mas + 3*ceiling(log2(R)))*(lamda - 1)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: (b_mas + ceiling(log2(R)))*(lamda - 1)
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: (b_mas + ceiling(log2(R)))*(lamda - 1)
                repetition: null
                type: qubits_alloc
              connections:
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_2.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: SwapUp_compute_0.in_1
              - source: GoogleSelectOptimized_compute_0.out_2
                target: SwapUp_compute_0.in_2
              - source: SwapUp_compute_0.out_0
                target: merge_6.in_0
              - source: SwapUp_compute_0.out_1
                target: out_1
              - source: SwapUp_compute_0.out_2
                target: had_0.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: in_0
                target: merge_0.in_1
              - source: in_1
                target: merge_0.in_0
              - source: merge_0.out_0
                target: split_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: qubits_alloc_0.out_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: qubits_alloc_1.out_0
                target: GoogleSelectOptimized_compute_0.in_2
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_1.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_1.out_remainder
                target: merge_2.in_remainder
              - source: split_3.out_0
                target: merge_4.in_0
              - source: split_3.out_1
                target: merge_4.in_1
              - source: split_5.out_0
                target: SwapUp_compute_0.in_0
              - source: split_5.out_remainder
                target: merge_6.in_remainder
              - source: split_7.out_0
                target: out_2
              - source: split_7.out_1
                target: out_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: b_mas + ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                  + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (3*b_mas
                  + 3*ceiling(log2(R)))*(lamda - 1) + (ceiling(0.75*b_mas + (0.75*b_mas
                  + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) +
                  49)*Max(0, ceiling(M_r*R/lamda) - 1)
              - name: gidney_lelbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: gidney_relbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: measurements
                type: additive
                value: (b_mas + ceiling(log2(R)))*(lamda - 1)
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                  + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            connections:
            - source: DataLookupClean_compute_0.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: DataLookupClean_compute_0.out_1
              target: out_0
            - source: DataLookupClean_compute_0.out_2
              target: GidneyAdd_uncompute_0.in_2
            - source: GidneyAdd_compute_0.out_0
              target: DataLookupClean_compute_0.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_compute_0.out_2
              target: DataLookupClean_compute_0.in_1
            - source: GidneyAdd_uncompute_0.out_0
              target: qubits_free_0.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_1
            - source: GidneyAdd_uncompute_0.out_2
              target: out_2
            - source: in_0
              target: GidneyAdd_compute_0.in_1
            - source: in_1
              target: GidneyAdd_compute_0.in_2
            - source: qubits_alloc_0.out_0
              target: GidneyAdd_compute_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedSparseDataLookupDF_compute_0
            ports:
            - direction: input
              name: in_0
              size: M_r*(R - 1)
            - direction: input
              name: in_1
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_1
              size: M_r*(R - 1)
            - direction: output
              name: out_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R))) + (3*b_mas +
                3*ceiling(log2(R)))*(lamda - 1) + (ceiling(0.75*b_mas + (0.75*b_mas
                + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0,
                ceiling(M_r*R/lamda) - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                + 114*ceiling(log2(R)) - 120
            - name: gidney_lelbows
              type: additive
              value: Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2
            - name: gidney_relbows
              type: additive
              value: Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 2
            - name: measurements
              type: additive
              value: (b_mas + ceiling(log2(R)))*(lamda - 1)
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
                + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: b_mas
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: had_0
            ports:
            - direction: through
              name: thru_0
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 3*b_mas
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: had
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_1
            ports:
            - direction: output
              name: out_0
              size: 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_0
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_remainder
              size: ceiling(log2(R))
            repetition: null
            type: split
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: qubits_alloc_0.out_0
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_compute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_lelbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_2
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: output
              name: out_0
              size: 1
            - direction: output
              name: out_remainder
              size: b_mas - 1
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: x_0
            ports:
            - direction: through
              name: thru_0
              size: 1
            - direction: through
              name: thru_1
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 4
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: x
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_3
            ports:
            - direction: input
              name: in_0
              size: 1
            - direction: input
              name: in_remainder
              size: b_mas - 1
            - direction: output
              name: out_0
              size: b_mas
            repetition: null
            type: merge
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_relbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: qubits_free_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_relbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_5
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_remainder
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_6
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: ceiling(log2(R))
            - direction: output
              name: out_remainder
              size: b_mas
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_0
            ports:
            - direction: through
              name: thru_0
              size: ceiling(log2(R))
            - direction: through
              name: thru_1
              size: 1
            - direction: through
              name: thru_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*ceiling(log2(R))
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: ceiling(log2(R))
            type: swap
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_7
            ports:
            - direction: input
              name: in_0
              size: ceiling(log2(R))
            - direction: input
              name: in_remainder
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          connections:
          - source: CompareLT_compute_0.out_0
            target: CompareLT_uncompute_0.in_0
          - source: CompareLT_compute_0.out_1
            target: CompareLT_uncompute_0.in_1
          - source: CompareLT_compute_0.out_2
            target: split_2.in_0
          - source: CompareLT_uncompute_0.out_0
            target: merge_5.in_0
          - source: CompareLT_uncompute_0.out_1
            target: out_5
          - source: MultiplexedRealUSPDF_compute_0.out_0
            target: out_2
          - source: MultiplexedRealUSPDF_compute_0.out_1
            target: out_4
          - source: MultiplexedRealUSPDF_compute_0.out_2
            target: out_7
          - source: MultiplexedRealUSPDF_compute_0.out_3
            target: out_8
          - source: MultiplexedRealUSPDF_compute_0.out_4
            target: out_9
          - source: MultiplexedRealUSPDF_compute_0.out_5
            target: out_10
          - source: MultiplexedRealUSPDF_compute_0.out_6
            target: MultiplexedSparseDataLookupDF_compute_0.in_1
          - source: MultiplexedRealUSPDF_compute_0.out_7
            target: out_12
          - source: MultiplexedRealUSPDF_compute_0.out_8
            target: out_14
          - source: MultiplexedSparseDataLookupDF_compute_0.out_0
            target: split_0.in_0
          - source: MultiplexedSparseDataLookupDF_compute_0.out_1
            target: out_3
          - source: MultiplexedSparseDataLookupDF_compute_0.out_2
            target: swap_0.thru_2
          - source: had_0.thru_0
            target: CompareLT_compute_0.in_1
          - source: in_0
            target: out_0
          - source: in_1
            target: MultiplexedRealUSPDF_compute_0.in_0
          - source: in_2
            target: MultiplexedSparseDataLookupDF_compute_0.in_0
          - source: in_3
            target: MultiplexedRealUSPDF_compute_0.in_1
          - source: in_4
            target: MultiplexedRealUSPDF_compute_0.in_2
          - source: in_5
            target: MultiplexedRealUSPDF_compute_0.in_3
          - source: in_6
            target: MultiplexedRealUSPDF_compute_0.in_4
          - source: in_7
            target: MultiplexedRealUSPDF_compute_0.in_5
          - source: in_8
            target: out_13
          - source: merge_3.out_0
            target: CompareLT_uncompute_0.in_2
          - source: merge_5.out_0
            target: split_6.in_0
          - source: merge_7.out_0
            target: out_1
          - source: qubits_alloc_0.out_0
            target: had_0.thru_0
          - source: qubits_alloc_1.out_0
            target: x_0.thru_0
          - source: split_0.out_0
            target: CompareLT_compute_0.in_0
          - source: split_0.out_remainder
            target: merge_5.in_remainder
          - source: split_2.out_0
            target: x_0.thru_1
          - source: split_2.out_remainder
            target: merge_3.in_remainder
          - source: split_6.out_0
            target: swap_0.thru_0
          - source: split_6.out_remainder
            target: merge_7.in_remainder
          - source: swap_0.thru_0
            target: merge_7.in_0
          - source: swap_0.thru_1
            target: out_6
          - source: swap_0.thru_2
            target: out_11
          - source: x_0.thru_0
            target: swap_0.thru_1
          - source: x_0.thru_1
            target: merge_3.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: MultiplexedAliasSamplingDF_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: input
            name: in_2
            size: M_r*(R - 1)
          - direction: input
            name: in_3
            size: b_mas
          - direction: input
            name: in_4
            size: Max(b_as, b_givens, b_mas)
          - direction: input
            name: in_5
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: input
            name: in_6
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: input
            name: in_7
            size: ceiling(log2(R))
          - direction: input
            name: in_8
            size: 1
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: b_mas + ceiling(log2(R))
          - direction: output
            name: out_10
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: output
            name: out_11
            size: ceiling(log2(R))
          - direction: output
            name: out_12
            size: 1
          - direction: output
            name: out_13
            size: 1
          - direction: output
            name: out_14
            size: 1
          - direction: output
            name: out_2
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: output
            name: out_3
            size: M_r*(R - 1)
          - direction: output
            name: out_4
            size: b_mas
          - direction: output
            name: out_5
            size: b_mas
          - direction: output
            name: out_6
            size: 1
          - direction: output
            name: out_7
            size: Max(b_as, b_givens, b_mas)
          - direction: output
            name: out_8
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_9
            size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 49*M_r + 247*b_mas + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
              - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
              + (3*b_mas + 3*ceiling(log2(R)))*(lamda - 1) + (ceiling(0.75*b_mas +
              (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R)))
              + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + 114*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0, b_mas - Max(0, b_mas -
              Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + 47*Heaviside(ceiling(log2(R)) - 1.5, 0) + 5*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 446*ceiling(log2(R))
              - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 1, ceiling(log2(R))) - 548
          - name: gidney_lelbows
            type: additive
            value: M_r + 3*b_mas + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 4
          - name: gidney_relbows
            type: additive
            value: M_r + 3*b_mas + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 4
          - name: measurements
            type: additive
            value: (b_mas + ceiling(log2(R)))*(lamda - 1)
          - name: ppms
            type: additive
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
              2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
              b_mas) - 2.5, 0))
          - name: t_gates
            type: additive
            value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + 6*Min(M_r
              - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
              ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
          - name: toffs
            type: additive
            value: (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
              + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + Heaviside(ceiling(log2(R))
              - 1.5, 0) + ceiling(log2(R))
          type: qubrick
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_0
            ports:
            - direction: through
              name: thru_0
              size: N_spatial
            - direction: through
              name: thru_1
              size: N_spatial
            - direction: through
              name: thru_2
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*N_spatial
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: N_spatial
            type: swap
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            repetition: null
            type: qubits_alloc
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: local_ancillae
                type: qubits
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: GidneyAdd_compute_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: input
              name: in_1
              size: M_r*(R - 1)
            - direction: input
              name: in_2
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: output
              name: out_1
              size: M_r*(R - 1)
            - direction: output
              name: out_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                - 60
            - name: gidney_lelbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: gidney_relbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: toffs
              type: additive
              value: 0
            type: qubrick
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: 1
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: lelbow_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              - direction: through
                name: thru_2
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 44
              - name: gidney_lelbows
                type: additive
                value: 1
              - name: gidney_relbows
                type: additive
                value: 0
              - name: local_ancillae
                type: qubits
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: lelbow
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_1
                ports:
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
                      - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
                    - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1)
                      + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
                      - 1)
                  - name: toffs
                    type: additive
                    value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) +
                      b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
                      - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: in_2
                  target: out_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: SwapUp_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_2
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) +
                    b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
                    - 1)
                - name: toffs
                  type: additive
                  value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                    - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*b_givens*(N_spatial - 1)*(lamda - 1)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: b_givens*(N_spatial - 1)*(lamda - 1)
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)*(lamda - 1)
                repetition: null
                type: qubits_alloc
              connections:
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_2.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: SwapUp_compute_0.in_1
              - source: GoogleSelectOptimized_compute_0.out_2
                target: SwapUp_compute_0.in_2
              - source: SwapUp_compute_0.out_0
                target: merge_6.in_0
              - source: SwapUp_compute_0.out_1
                target: out_1
              - source: SwapUp_compute_0.out_2
                target: had_0.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: in_0
                target: merge_0.in_1
              - source: in_1
                target: merge_0.in_0
              - source: merge_0.out_0
                target: split_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: qubits_alloc_0.out_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: qubits_alloc_1.out_0
                target: GoogleSelectOptimized_compute_0.in_2
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_1.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_1.out_remainder
                target: merge_2.in_remainder
              - source: split_3.out_0
                target: merge_4.in_0
              - source: split_3.out_1
                target: merge_4.in_1
              - source: split_5.out_0
                target: SwapUp_compute_0.in_0
              - source: split_5.out_remainder
                target: merge_6.in_remainder
              - source: split_7.out_0
                target: out_2
              - source: split_7.out_1
                target: out_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: b_givens*(N_spatial - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                  - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial
                  - 1)*(lamda - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda
                  - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lamda)
                  - 1)
              - name: gidney_lelbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: gidney_relbows
                type: additive
                value: Max(0, ceiling(M_r*R/lamda) - 1)
              - name: measurements
                type: additive
                value: b_givens*(N_spatial - 1)*(lamda - 1)
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                  - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens*(N_spatial - 1)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: N_spatial
                  - direction: output
                    name: out_0
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  repetition: null
                  type: split
                - children:
                  - children:
                    - children:
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: qubits_alloc_0
                        ports:
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        repetition: null
                        type: qubits_alloc
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: had_0
                        ports:
                        - direction: through
                          name: thru_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        repetition: null
                        resources:
                        - name: active_volume
                          type: additive
                          value: 3*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppm_x_weight
                          type: other
                          value: 0
                        - name: ppm_z_weight
                          type: other
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: ppr_x_weight
                          type: other
                          value: 0
                        - name: ppr_z_weight
                          type: other
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: 0
                        - name: t_gates
                          type: additive
                          value: 0
                        - name: toffs
                          type: additive
                          value: 0
                        type: had
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_0
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - direction: input
                          name: in_1
                          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas))
                        - direction: input
                          name: in_2
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_3
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_4
                          size: Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_1
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: 1
                        - direction: output
                          name: out_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        repetition: null
                        type: split
                      - children:
                        - children:
                          - input_params:
                            - M_r
                            - N_spatial
                            - R
                            - b_as
                            - b_givens
                            - b_mas
                            - idx
                            name: s_inv_0
                            ports:
                            - direction: through
                              name: thru_0
                              size: 1
                            repetition: null
                            resources:
                            - name: active_volume
                              type: additive
                              value: 5
                            - name: gidney_lelbows
                              type: additive
                              value: 0
                            - name: gidney_relbows
                              type: additive
                              value: 0
                            - name: measurements
                              type: additive
                              value: 0
                            - name: ppm_x_weight
                              type: other
                              value: 0
                            - name: ppm_z_weight
                              type: other
                              value: 0
                            - name: ppms
                              type: additive
                              value: 0
                            - name: ppr_x_weight
                              type: other
                              value: 0
                            - name: ppr_z_weight
                              type: other
                              value: 0
                            - name: pprs
                              type: additive
                              value: 0
                            - name: rotations
                              type: additive
                              value: 0
                            - name: t_gates
                              type: additive
                              value: 0
                            - name: toffs
                              type: additive
                              value: 0
                            type: s_inv
                          connections:
                          - source: in_0
                            target: s_inv_0.thru_0
                          - source: s_inv_0.thru_0
                            target: out_0
                          input_params:
                          - M_r
                          - N_spatial
                          - R
                          - b_as
                          - b_givens
                          - b_mas
                          - idx
                          name: Repeated_s_inv_0
                          ports:
                          - direction: input
                            name: in_0
                            size: 1
                          - direction: output
                            name: out_0
                            size: 1
                          repetition: null
                          resources:
                          - name: active_volume
                            type: additive
                            value: 5
                          - name: gidney_lelbows
                            type: additive
                            value: 0
                          - name: gidney_relbows
                            type: additive
                            value: 0
                          - name: measurements
                            type: additive
                            value: 0
                          - name: ppms
                            type: additive
                            value: 0
                          - name: pprs
                            type: additive
                            value: 0
                          - name: rotations
                            type: additive
                            value: 0
                          - name: t_gates
                            type: additive
                            value: 0
                          - name: toffs
                            type: additive
                            value: 0
                          type: qubrick
                        connections:
                        - source: Repeated_s_inv_0.out_0
                          target: out_0
                        - source: in_0
                          target: Repeated_s_inv_0.in_0
                        input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: Repeated_s_inv_0_repetition
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: output
                          name: out_0
                          size: 1
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)
                          sequence:
                            multiplier: 1
                            type: constant
                        resources:
                        - name: active_volume
                          type: additive
                          value: 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                            0)
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: 0
                        - name: t_gates
                          type: additive
                          value: 0
                        - name: toffs
                          type: additive
                          value: 0
                        type: qubrick
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_2
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: input
                          name: in_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_3
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - direction: output
                          name: out_1
                          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas))
                        - direction: output
                          name: out_2
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_3
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_4
                          size: Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: split
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_4
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - direction: input
                          name: in_1
                          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas))
                        - direction: input
                          name: in_2
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_3
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_4
                          size: Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_5
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: 1
                        - direction: output
                          name: out_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        repetition: null
                        type: split
                      - children:
                        - children:
                          - input_params:
                            - M_r
                            - N_spatial
                            - R
                            - b_as
                            - b_givens
                            - b_mas
                            - idx
                            name: t_inv_0
                            ports:
                            - direction: through
                              name: thru_0
                              size: 1
                            repetition: null
                            resources:
                            - name: active_volume
                              type: additive
                              value: 28.5
                            - name: gidney_lelbows
                              type: additive
                              value: 0
                            - name: gidney_relbows
                              type: additive
                              value: 0
                            - name: measurements
                              type: additive
                              value: 0
                            - name: ppm_x_weight
                              type: other
                              value: 0
                            - name: ppm_z_weight
                              type: other
                              value: 0
                            - name: ppms
                              type: additive
                              value: 0
                            - name: ppr_x_weight
                              type: other
                              value: 0
                            - name: ppr_z_weight
                              type: other
                              value: 0
                            - name: pprs
                              type: additive
                              value: 0
                            - name: rotations
                              type: additive
                              value: 0
                            - name: t_gates
                              type: additive
                              value: 1
                            - name: toffs
                              type: additive
                              value: 0
                            type: t_inv
                          connections:
                          - source: in_0
                            target: t_inv_0.thru_0
                          - source: t_inv_0.thru_0
                            target: out_0
                          input_params:
                          - M_r
                          - N_spatial
                          - R
                          - b_as
                          - b_givens
                          - b_mas
                          - idx
                          name: Repeated_t_inv_0
                          ports:
                          - direction: input
                            name: in_0
                            size: 1
                          - direction: output
                            name: out_0
                            size: 1
                          repetition: null
                          resources:
                          - name: active_volume
                            type: additive
                            value: 28.5
                          - name: gidney_lelbows
                            type: additive
                            value: 0
                          - name: gidney_relbows
                            type: additive
                            value: 0
                          - name: measurements
                            type: additive
                            value: 0
                          - name: ppms
                            type: additive
                            value: 0
                          - name: pprs
                            type: additive
                            value: 0
                          - name: rotations
                            type: additive
                            value: 0
                          - name: t_gates
                            type: additive
                            value: 1
                          - name: toffs
                            type: additive
                            value: 0
                          type: qubrick
                        connections:
                        - source: Repeated_t_inv_0.out_0
                          target: out_0
                        - source: in_0
                          target: Repeated_t_inv_0.in_0
                        input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: Repeated_t_inv_0_repetition
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: output
                          name: out_0
                          size: 1
                        repetition:
                          count: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                          sequence:
                            multiplier: 1
                            type: constant
                        resources:
                        - name: active_volume
                          type: additive
                          value: 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: 0
                        - name: t_gates
                          type: additive
                          value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0)
                        - name: toffs
                          type: additive
                          value: 0
                        type: qubrick
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_6
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: input
                          name: in_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_7
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - direction: output
                          name: out_1
                          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas))
                        - direction: output
                          name: out_2
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_3
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_4
                          size: Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: split
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_8
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - direction: input
                          name: in_1
                          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas))
                        - direction: input
                          name: in_2
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_3
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: input
                          name: in_4
                          size: Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_9
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: 1
                        - direction: output
                          name: out_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        repetition: null
                        type: split
                      - children:
                        - children:
                          - input_params:
                            - M_r
                            - N_spatial
                            - R
                            - b_as
                            - b_givens
                            - b_mas
                            - idx
                            name: phase_0
                            ports:
                            - direction: through
                              name: thru_0
                              size: 1
                            repetition: null
                            resources:
                            - name: active_volume
                              type: additive
                              value: 1397
                            - name: gidney_lelbows
                              type: additive
                              value: 0
                            - name: gidney_relbows
                              type: additive
                              value: 0
                            - name: measurements
                              type: additive
                              value: 0
                            - name: ppm_x_weight
                              type: other
                              value: 0
                            - name: ppm_z_weight
                              type: other
                              value: 0
                            - name: ppms
                              type: additive
                              value: 0
                            - name: ppr_x_weight
                              type: other
                              value: 0
                            - name: ppr_z_weight
                              type: other
                              value: 0
                            - name: pprs
                              type: additive
                              value: 0
                            - name: rotations
                              type: additive
                              value: 1
                            - name: t_gates
                              type: additive
                              value: 0
                            - name: toffs
                              type: additive
                              value: 0
                            type: phase
                          connections:
                          - source: in_0
                            target: phase_0.thru_0
                          - source: phase_0.thru_0
                            target: out_0
                          input_params:
                          - M_r
                          - N_spatial
                          - R
                          - b_as
                          - b_givens
                          - b_mas
                          - idx
                          name: Repeated_phase_0
                          ports:
                          - direction: input
                            name: in_0
                            size: 1
                          - direction: output
                            name: out_0
                            size: 1
                          repetition: null
                          resources:
                          - name: active_volume
                            type: additive
                            value: 1397
                          - name: gidney_lelbows
                            type: additive
                            value: 0
                          - name: gidney_relbows
                            type: additive
                            value: 0
                          - name: measurements
                            type: additive
                            value: 0
                          - name: ppms
                            type: additive
                            value: 0
                          - name: pprs
                            type: additive
                            value: 0
                          - name: rotations
                            type: additive
                            value: 1
                          - name: t_gates
                            type: additive
                            value: 0
                          - name: toffs
                            type: additive
                            value: 0
                          type: qubrick
                        connections:
                        - source: Repeated_phase_0.out_0
                          target: out_0
                        - source: in_0
                          target: Repeated_phase_0.in_0
                        input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: Repeated_phase_0_repetition
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: output
                          name: out_0
                          size: 1
                        repetition:
                          count: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0))
                          sequence:
                            multiplier: 1
                            type: constant
                        resources:
                        - name: active_volume
                          type: additive
                          value: 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0))
                        - name: gidney_lelbows
                          type: additive
                          value: 0
                        - name: gidney_relbows
                          type: additive
                          value: 0
                        - name: measurements
                          type: additive
                          value: 0
                        - name: ppms
                          type: additive
                          value: 0
                        - name: pprs
                          type: additive
                          value: 0
                        - name: rotations
                          type: additive
                          value: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                            - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                            0))
                        - name: t_gates
                          type: additive
                          value: 0
                        - name: toffs
                          type: additive
                          value: 0
                        type: qubrick
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: merge_10
                        ports:
                        - direction: input
                          name: in_0
                          size: 1
                        - direction: input
                          name: in_remainder
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - direction: output
                          name: out_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: merge
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: split_11
                        ports:
                        - direction: input
                          name: in_0
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - direction: output
                          name: out_0
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas))
                        - direction: output
                          name: out_1
                          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                            b_mas))
                        - direction: output
                          name: out_2
                          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_3
                          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - direction: output
                          name: out_4
                          size: Max(b_as, b_givens, b_mas)
                        repetition: null
                        type: split
                      connections:
                      - source: Repeated_phase_0_repetition.out_0
                        target: merge_10.in_0
                      - source: Repeated_s_inv_0_repetition.out_0
                        target: merge_2.in_0
                      - source: Repeated_t_inv_0_repetition.out_0
                        target: merge_6.in_0
                      - source: had_0.thru_0
                        target: merge_0.in_0
                      - source: in_0
                        target: merge_0.in_3
                      - source: in_1
                        target: merge_0.in_2
                      - source: in_2
                        target: merge_0.in_4
                      - source: in_3
                        target: merge_0.in_1
                      - source: merge_0.out_0
                        target: split_1.in_0
                      - source: merge_10.out_0
                        target: split_11.in_0
                      - source: merge_2.out_0
                        target: split_3.in_0
                      - source: merge_4.out_0
                        target: split_5.in_0
                      - source: merge_6.out_0
                        target: split_7.in_0
                      - source: merge_8.out_0
                        target: split_9.in_0
                      - source: qubits_alloc_0.out_0
                        target: had_0.thru_0
                      - source: split_1.out_0
                        target: Repeated_s_inv_0_repetition.in_0
                      - source: split_1.out_remainder
                        target: merge_2.in_remainder
                      - source: split_11.out_0
                        target: out_4
                      - source: split_11.out_1
                        target: out_2
                      - source: split_11.out_2
                        target: out_3
                      - source: split_11.out_3
                        target: out_1
                      - source: split_11.out_4
                        target: out_0
                      - source: split_3.out_0
                        target: merge_4.in_0
                      - source: split_3.out_1
                        target: merge_4.in_1
                      - source: split_3.out_2
                        target: merge_4.in_2
                      - source: split_3.out_3
                        target: merge_4.in_3
                      - source: split_3.out_4
                        target: merge_4.in_4
                      - source: split_5.out_0
                        target: Repeated_t_inv_0_repetition.in_0
                      - source: split_5.out_remainder
                        target: merge_6.in_remainder
                      - source: split_7.out_0
                        target: merge_8.in_0
                      - source: split_7.out_1
                        target: merge_8.in_1
                      - source: split_7.out_2
                        target: merge_8.in_2
                      - source: split_7.out_3
                        target: merge_8.in_3
                      - source: split_7.out_4
                        target: merge_8.in_4
                      - source: split_9.out_0
                        target: Repeated_phase_0_repetition.in_0
                      - source: split_9.out_remainder
                        target: merge_10.in_remainder
                      input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: RotationCatalystStatePrep_compute_0
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_2
                        size: Max(b_as, b_givens, b_mas)
                      - direction: input
                        name: in_3
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_0
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_1
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_4
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
                      - name: t_gates
                        type: additive
                        value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 2.5, 0)
                      - name: toffs
                        type: additive
                        value: 0
                      type: qubrick
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_0
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_1
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(b_as,
                          b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_2
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_3
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_4
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_5
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_6
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - children:
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: cost_event
                        repetition: null
                        resources:
                        - name: active_volume
                          type: additive
                          value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                            100*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_mas
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + 100*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56
                        - name: gidney_lelbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - name: gidney_relbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - name: local_ancillae
                          type: qubits
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - name: toffs
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        type: intrinsic_cost
                      connections:
                      - source: in_0
                        target: out_0
                      - source: in_1
                        target: out_1
                      - source: in_2
                        target: out_2
                      - source: in_3
                        target: out_3
                      - source: in_4
                        target: out_4
                      - source: in_5
                        target: out_5
                      - source: in_6
                        target: out_6
                      input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: GidneyAdd_compute_0
                      ports:
                      - direction: input
                        name: in_0
                        size: b_givens
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_4
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_5
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: input
                        name: in_6
                        size: 1
                      - direction: output
                        name: out_0
                        size: b_givens
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_4
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_5
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: output
                        name: out_6
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 100*Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(b_as,
                          b_givens, b_mas) - 56
                      - name: gidney_lelbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1
                      - name: gidney_relbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1
                      - name: toffs
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      type: qubrick
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_7
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_8
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_2
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_9
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_10
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_11
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_3
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(b_as,
                          b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_12
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_13
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    connections:
                    - source: GidneyAdd_compute_0.out_0
                      target: out_0
                    - source: GidneyAdd_compute_0.out_1
                      target: merge_11.in_3
                    - source: GidneyAdd_compute_0.out_2
                      target: merge_11.in_2
                    - source: GidneyAdd_compute_0.out_3
                      target: merge_11.in_0
                    - source: GidneyAdd_compute_0.out_4
                      target: merge_11.in_1
                    - source: GidneyAdd_compute_0.out_5
                      target: x_3.thru_1
                    - source: GidneyAdd_compute_0.out_6
                      target: merge_7.in_0
                    - source: RotationCatalystStatePrep_compute_0.out_0
                      target: merge_1.in_3
                    - source: RotationCatalystStatePrep_compute_0.out_1
                      target: merge_1.in_2
                    - source: RotationCatalystStatePrep_compute_0.out_2
                      target: merge_1.in_0
                    - source: RotationCatalystStatePrep_compute_0.out_3
                      target: merge_1.in_1
                    - source: RotationCatalystStatePrep_compute_0.out_4
                      target: x_0.thru_1
                    - source: in_0
                      target: GidneyAdd_compute_0.in_0
                    - source: in_1
                      target: RotationCatalystStatePrep_compute_0.in_2
                    - source: in_2
                      target: RotationCatalystStatePrep_compute_0.in_0
                    - source: in_3
                      target: RotationCatalystStatePrep_compute_0.in_3
                    - source: in_4
                      target: RotationCatalystStatePrep_compute_0.in_1
                    - source: in_5
                      target: ppr_0.thru_0
                    - source: merge_1.out_0
                      target: x_0.thru_0
                    - source: merge_11.out_0
                      target: x_3.thru_0
                    - source: merge_13.out_0
                      target: ppr_1.thru_0
                    - source: merge_3.out_0
                      target: split_4.in_0
                    - source: merge_5.out_0
                      target: split_6.in_0
                    - source: merge_7.out_0
                      target: split_8.in_0
                    - source: merge_9.out_0
                      target: split_10.in_0
                    - source: ppr_0.thru_0
                      target: split_0.in_0
                    - source: ppr_1.thru_0
                      target: out_6
                    - source: split_0.out_0
                      target: x_0.thru_2
                    - source: split_0.out_remainder
                      target: merge_3.in_remainder
                    - source: split_10.out_0
                      target: x_3.thru_2
                    - source: split_10.out_remainder
                      target: merge_13.in_remainder
                    - source: split_12.out_0
                      target: out_3
                    - source: split_12.out_1
                      target: out_4
                    - source: split_12.out_2
                      target: out_2
                    - source: split_12.out_3
                      target: out_1
                    - source: split_2.out_0
                      target: GidneyAdd_compute_0.in_3
                    - source: split_2.out_1
                      target: GidneyAdd_compute_0.in_4
                    - source: split_2.out_2
                      target: GidneyAdd_compute_0.in_2
                    - source: split_2.out_3
                      target: GidneyAdd_compute_0.in_1
                    - source: split_4.out_0
                      target: x_1.thru_0
                    - source: split_4.out_1
                      target: x_1.thru_1
                    - source: split_4.out_remainder
                      target: merge_5.in_remainder
                    - source: split_6.out_0
                      target: GidneyAdd_compute_0.in_6
                    - source: split_6.out_remainder
                      target: merge_7.in_remainder
                    - source: split_8.out_0
                      target: x_2.thru_0
                    - source: split_8.out_1
                      target: x_2.thru_1
                    - source: split_8.out_remainder
                      target: merge_9.in_remainder
                    - source: x_0.thru_0
                      target: split_2.in_0
                    - source: x_0.thru_1
                      target: GidneyAdd_compute_0.in_5
                    - source: x_0.thru_2
                      target: merge_3.in_0
                    - source: x_1.thru_0
                      target: merge_5.in_0
                    - source: x_1.thru_1
                      target: merge_5.in_1
                    - source: x_2.thru_0
                      target: merge_9.in_0
                    - source: x_2.thru_1
                      target: merge_9.in_1
                    - source: x_3.thru_0
                      target: split_12.in_0
                    - source: x_3.thru_1
                      target: out_5
                    - source: x_3.thru_2
                      target: merge_13.in_0
                    input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: GivensRotationFusedAdder_compute_0
                    ports:
                    - direction: input
                      name: in_0
                      size: b_givens
                    - direction: input
                      name: in_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: input
                      name: in_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_3
                      size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_4
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_5
                      size: Mod(2, N_spatial)
                    - direction: output
                      name: out_0
                      size: b_givens
                    - direction: output
                      name: out_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: output
                      name: out_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_3
                      size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_4
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_5
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_6
                      size: Mod(2, N_spatial)
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
                        Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0,
                        b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
                        b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 2.5, 0) - 48
                    - name: gidney_lelbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: gidney_relbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: pprs
                      type: additive
                      value: 2
                    - name: rotations
                      type: additive
                      value: Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                        + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                        b_mas) - 2.5, 0))
                    - name: t_gates
                      type: additive
                      value: Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                        + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        - 2.5, 0)
                    - name: toffs
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas)
                    type: qubrick
                  connections:
                  - source: GivensRotationFusedAdder_compute_0.out_0
                    target: out_0
                  - source: GivensRotationFusedAdder_compute_0.out_1
                    target: out_1
                  - source: GivensRotationFusedAdder_compute_0.out_2
                    target: out_2
                  - source: GivensRotationFusedAdder_compute_0.out_3
                    target: out_3
                  - source: GivensRotationFusedAdder_compute_0.out_4
                    target: out_4
                  - source: GivensRotationFusedAdder_compute_0.out_5
                    target: out_5
                  - source: GivensRotationFusedAdder_compute_0.out_6
                    target: out_6
                  - source: in_0
                    target: GivensRotationFusedAdder_compute_0.in_0
                  - source: in_1
                    target: GivensRotationFusedAdder_compute_0.in_1
                  - source: in_2
                    target: GivensRotationFusedAdder_compute_0.in_2
                  - source: in_3
                    target: GivensRotationFusedAdder_compute_0.in_3
                  - source: in_4
                    target: GivensRotationFusedAdder_compute_0.in_4
                  - source: in_5
                    target: GivensRotationFusedAdder_compute_0.in_5
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: GivensRotationFusedAdder_compute_0_repetition
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: input
                    name: in_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_3
                    size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_4
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_5
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: output
                    name: out_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_3
                    size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_4
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_5
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_6
                    size: Mod(2, N_spatial)
                  repetition:
                    count: N_spatial - 1
                    sequence:
                      multiplier: 1
                      type: constant
                  resources:
                  - name: active_volume
                    type: additive
                    value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas -
                      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens,
                      b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0) - 48)
                  - name: gidney_lelbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: gidney_relbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 2*N_spatial - 2
                  - name: rotations
                    type: additive
                    value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas -
                      Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                      b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0))
                  - name: t_gates
                    type: additive
                    value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
                      2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      2.5, 0)
                  - name: toffs
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                  type: qubrick
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: Mod(2, N_spatial)
                  - direction: input
                    name: in_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: N_spatial
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  - direction: output
                    name: out_0
                    size: b_givens*(N_spatial - 1)
                  repetition: null
                  type: merge
                connections:
                - source: GivensRotationFusedAdder_compute_0_repetition.out_0
                  target: merge_3.in_0
                - source: GivensRotationFusedAdder_compute_0_repetition.out_1
                  target: out_1
                - source: GivensRotationFusedAdder_compute_0_repetition.out_2
                  target: out_2
                - source: GivensRotationFusedAdder_compute_0_repetition.out_3
                  target: out_3
                - source: GivensRotationFusedAdder_compute_0_repetition.out_4
                  target: out_4
                - source: GivensRotationFusedAdder_compute_0_repetition.out_5
                  target: out_5
                - source: GivensRotationFusedAdder_compute_0_repetition.out_6
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: GivensRotationFusedAdder_compute_0_repetition.in_1
                - source: in_2
                  target: GivensRotationFusedAdder_compute_0_repetition.in_2
                - source: in_3
                  target: GivensRotationFusedAdder_compute_0_repetition.in_3
                - source: in_4
                  target: GivensRotationFusedAdder_compute_0_repetition.in_4
                - source: in_5
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_6
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: GivensRotationFusedAdder_compute_0_repetition.in_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: GivensRotationFusedAdder_compute_0_repetition.in_5
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GivensRotationBasisChangeDF_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: input
                  name: in_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_3
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_4
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_5
                  size: N_spatial
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_4
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_5
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_6
                  size: N_spatial
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                    + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                    Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) +
                    5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                    0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0) - 48)
                - name: gidney_lelbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)
                - name: gidney_relbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 2*N_spatial - 2
                - name: rotations
                  type: additive
                  value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                    0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
                    0))
                - name: t_gates
                  type: additive
                  value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                    b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
                    0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                    b_mas) - 2.5, 0)
                - name: toffs
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas))
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: N_spatial
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: N_spatial - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: z_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: z
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: N_spatial - 1
                - direction: output
                  name: out_0
                  size: N_spatial
                repetition: null
                type: merge
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens*(N_spatial - 1)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: N_spatial
                  - direction: output
                    name: out_0
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  repetition: null
                  type: split
                - children:
                  - children:
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_0
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_1
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(b_as,
                          b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_2
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_3
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_4
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_5
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_6
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - children:
                      - input_params:
                        - M_r
                        - N_spatial
                        - R
                        - b_as
                        - b_givens
                        - b_mas
                        - idx
                        name: cost_event
                        repetition: null
                        resources:
                        - name: active_volume
                          type: additive
                          value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                            100*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_mas
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                            + 100*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + 100*Max(b_as, b_givens, b_mas) - 56
                        - name: gidney_lelbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - name: gidney_relbows
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - name: local_ancillae
                          type: qubits
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1
                        - name: toffs
                          type: additive
                          value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                            b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
                        type: intrinsic_cost
                      connections:
                      - source: in_0
                        target: out_0
                      - source: in_1
                        target: out_1
                      - source: in_2
                        target: out_2
                      - source: in_3
                        target: out_3
                      - source: in_4
                        target: out_4
                      - source: in_5
                        target: out_5
                      - source: in_6
                        target: out_6
                      input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: GidneyAdd_uncompute_0
                      ports:
                      - direction: input
                        name: in_0
                        size: b_givens
                      - direction: input
                        name: in_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_4
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_5
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: input
                        name: in_6
                        size: 1
                      - direction: output
                        name: out_0
                        size: b_givens
                      - direction: output
                        name: out_1
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_4
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_5
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: output
                        name: out_6
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 100*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 100*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 100*Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 100*Max(b_as,
                          b_givens, b_mas) - 56
                      - name: gidney_lelbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1
                      - name: gidney_relbows
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas) - 1
                      - name: toffs
                        type: additive
                        value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                          b_givens, b_mas)
                      type: qubrick
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_7
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_8
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_1
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 2
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_2
                      ports:
                      - direction: through
                        name: thru_0
                        size: 1
                      - direction: through
                        name: thru_1
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_9
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_1
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 2
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_10
                      ports:
                      - direction: input
                        name: in_0
                        size: Mod(2, N_spatial)
                      - direction: output
                        name: out_0
                        size: 1
                      - direction: output
                        name: out_remainder
                        size: Mod(2, N_spatial) - 1
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_11
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: input
                        name: in_3
                        size: Max(b_as, b_givens, b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: x_3
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      - direction: through
                        name: thru_2
                        size: 1
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 4*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 4*Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + 4*Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 4*Max(b_as,
                          b_givens, b_mas)
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 0
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 0
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: x
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: split_12
                      ports:
                      - direction: input
                        name: in_0
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                          Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                          b_mas)
                      - direction: output
                        name: out_0
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_1
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_2
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: output
                        name: out_3
                        size: Max(b_as, b_givens, b_mas)
                      repetition: null
                      type: split
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: merge_13
                      ports:
                      - direction: input
                        name: in_0
                        size: 1
                      - direction: input
                        name: in_remainder
                        size: Mod(2, N_spatial) - 1
                      - direction: output
                        name: out_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      type: merge
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: ppr_1
                      ports:
                      - direction: through
                        name: thru_0
                        size: Mod(2, N_spatial)
                      repetition: null
                      resources:
                      - name: active_volume
                        type: additive
                        value: 0
                      - name: gidney_lelbows
                        type: additive
                        value: 0
                      - name: gidney_relbows
                        type: additive
                        value: 0
                      - name: measurements
                        type: additive
                        value: 0
                      - name: ppm_x_weight
                        type: other
                        value: 0
                      - name: ppm_z_weight
                        type: other
                        value: 0
                      - name: ppms
                        type: additive
                        value: 0
                      - name: ppr_x_weight
                        type: other
                        value: 3
                      - name: ppr_z_weight
                        type: other
                        value: 0
                      - name: pprs
                        type: additive
                        value: 1
                      - name: rotations
                        type: additive
                        value: 0
                      - name: t_gates
                        type: additive
                        value: 0
                      - name: toffs
                        type: additive
                        value: 0
                      type: ppr
                    - input_params:
                      - M_r
                      - N_spatial
                      - R
                      - b_as
                      - b_givens
                      - b_mas
                      - idx
                      name: RotationCatalystStatePrep_uncompute_0
                      ports:
                      - direction: through
                        name: thru_0
                        size: Max(b_as, b_givens, b_mas)
                      - direction: through
                        name: thru_1
                        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_2
                        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_3
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas))
                      - direction: through
                        name: thru_4
                        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
                          Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                          b_mas))
                      repetition: null
                      type: qubrick
                    connections:
                    - source: GidneyAdd_uncompute_0.out_0
                      target: out_0
                    - source: GidneyAdd_uncompute_0.out_1
                      target: merge_11.in_3
                    - source: GidneyAdd_uncompute_0.out_2
                      target: merge_11.in_2
                    - source: GidneyAdd_uncompute_0.out_3
                      target: merge_11.in_0
                    - source: GidneyAdd_uncompute_0.out_4
                      target: merge_11.in_1
                    - source: GidneyAdd_uncompute_0.out_5
                      target: x_3.thru_1
                    - source: GidneyAdd_uncompute_0.out_6
                      target: merge_7.in_0
                    - source: RotationCatalystStatePrep_uncompute_0.thru_0
                      target: out_1
                    - source: RotationCatalystStatePrep_uncompute_0.thru_1
                      target: out_2
                    - source: RotationCatalystStatePrep_uncompute_0.thru_2
                      target: out_3
                    - source: RotationCatalystStatePrep_uncompute_0.thru_3
                      target: out_4
                    - source: RotationCatalystStatePrep_uncompute_0.thru_4
                      target: out_5
                    - source: in_0
                      target: GidneyAdd_uncompute_0.in_0
                    - source: in_1
                      target: merge_1.in_3
                    - source: in_2
                      target: merge_1.in_2
                    - source: in_3
                      target: merge_1.in_0
                    - source: in_4
                      target: merge_1.in_1
                    - source: in_5
                      target: x_0.thru_1
                    - source: in_6
                      target: ppr_0.thru_0
                    - source: merge_1.out_0
                      target: x_0.thru_0
                    - source: merge_11.out_0
                      target: x_3.thru_0
                    - source: merge_13.out_0
                      target: ppr_1.thru_0
                    - source: merge_3.out_0
                      target: split_4.in_0
                    - source: merge_5.out_0
                      target: split_6.in_0
                    - source: merge_7.out_0
                      target: split_8.in_0
                    - source: merge_9.out_0
                      target: split_10.in_0
                    - source: ppr_0.thru_0
                      target: split_0.in_0
                    - source: ppr_1.thru_0
                      target: out_6
                    - source: split_0.out_0
                      target: x_0.thru_2
                    - source: split_0.out_remainder
                      target: merge_3.in_remainder
                    - source: split_10.out_0
                      target: x_3.thru_2
                    - source: split_10.out_remainder
                      target: merge_13.in_remainder
                    - source: split_12.out_0
                      target: RotationCatalystStatePrep_uncompute_0.thru_2
                    - source: split_12.out_1
                      target: RotationCatalystStatePrep_uncompute_0.thru_3
                    - source: split_12.out_2
                      target: RotationCatalystStatePrep_uncompute_0.thru_1
                    - source: split_12.out_3
                      target: RotationCatalystStatePrep_uncompute_0.thru_0
                    - source: split_2.out_0
                      target: GidneyAdd_uncompute_0.in_3
                    - source: split_2.out_1
                      target: GidneyAdd_uncompute_0.in_4
                    - source: split_2.out_2
                      target: GidneyAdd_uncompute_0.in_2
                    - source: split_2.out_3
                      target: GidneyAdd_uncompute_0.in_1
                    - source: split_4.out_0
                      target: x_1.thru_0
                    - source: split_4.out_1
                      target: x_1.thru_1
                    - source: split_4.out_remainder
                      target: merge_5.in_remainder
                    - source: split_6.out_0
                      target: GidneyAdd_uncompute_0.in_6
                    - source: split_6.out_remainder
                      target: merge_7.in_remainder
                    - source: split_8.out_0
                      target: x_2.thru_0
                    - source: split_8.out_1
                      target: x_2.thru_1
                    - source: split_8.out_remainder
                      target: merge_9.in_remainder
                    - source: x_0.thru_0
                      target: split_2.in_0
                    - source: x_0.thru_1
                      target: GidneyAdd_uncompute_0.in_5
                    - source: x_0.thru_2
                      target: merge_3.in_0
                    - source: x_1.thru_0
                      target: merge_5.in_0
                    - source: x_1.thru_1
                      target: merge_5.in_1
                    - source: x_2.thru_0
                      target: merge_9.in_0
                    - source: x_2.thru_1
                      target: merge_9.in_1
                    - source: x_3.thru_0
                      target: split_12.in_0
                    - source: x_3.thru_1
                      target: RotationCatalystStatePrep_uncompute_0.thru_4
                    - source: x_3.thru_2
                      target: merge_13.in_0
                    input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: GivensRotationFusedAdder_uncompute_0
                    ports:
                    - direction: input
                      name: in_0
                      size: b_givens
                    - direction: input
                      name: in_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: input
                      name: in_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_3
                      size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_4
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_5
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: input
                      name: in_6
                      size: Mod(2, N_spatial)
                    - direction: output
                      name: out_0
                      size: b_givens
                    - direction: output
                      name: out_1
                      size: Max(b_as, b_givens, b_mas)
                    - direction: output
                      name: out_2
                      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_3
                      size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_4
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_5
                      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    - direction: output
                      name: out_6
                      size: Mod(2, N_spatial)
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                        b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48
                    - name: gidney_lelbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: gidney_relbows
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas) - 1
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: pprs
                      type: additive
                      value: 2
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                        b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                        b_mas)) + Max(b_as, b_givens, b_mas)
                    type: qubrick
                  connections:
                  - source: GivensRotationFusedAdder_uncompute_0.out_0
                    target: out_0
                  - source: GivensRotationFusedAdder_uncompute_0.out_1
                    target: out_1
                  - source: GivensRotationFusedAdder_uncompute_0.out_2
                    target: out_2
                  - source: GivensRotationFusedAdder_uncompute_0.out_3
                    target: out_3
                  - source: GivensRotationFusedAdder_uncompute_0.out_4
                    target: out_4
                  - source: GivensRotationFusedAdder_uncompute_0.out_5
                    target: out_5
                  - source: GivensRotationFusedAdder_uncompute_0.out_6
                    target: out_6
                  - source: in_0
                    target: GivensRotationFusedAdder_uncompute_0.in_0
                  - source: in_1
                    target: GivensRotationFusedAdder_uncompute_0.in_1
                  - source: in_2
                    target: GivensRotationFusedAdder_uncompute_0.in_2
                  - source: in_3
                    target: GivensRotationFusedAdder_uncompute_0.in_3
                  - source: in_4
                    target: GivensRotationFusedAdder_uncompute_0.in_4
                  - source: in_5
                    target: GivensRotationFusedAdder_uncompute_0.in_5
                  - source: in_6
                    target: GivensRotationFusedAdder_uncompute_0.in_6
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: GivensRotationFusedAdder_uncompute_0_repetition
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: input
                    name: in_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_3
                    size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_4
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_5
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: input
                    name: in_6
                    size: Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: b_givens
                  - direction: output
                    name: out_1
                    size: Max(b_as, b_givens, b_mas)
                  - direction: output
                    name: out_2
                    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_3
                    size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_4
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_5
                    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - direction: output
                    name: out_6
                    size: Mod(2, N_spatial)
                  repetition:
                    count: N_spatial - 1
                    sequence:
                      multiplier: 1
                      type: constant
                  resources:
                  - name: active_volume
                    type: additive
                    value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                      b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas)
                      - 48)
                  - name: gidney_lelbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: gidney_relbows
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
                      1)
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 2*N_spatial - 2
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                      - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
                  type: qubrick
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: Mod(2, N_spatial)
                  - direction: input
                    name: in_remainder
                    size: N_spatial - Mod(2, N_spatial)
                  - direction: output
                    name: out_0
                    size: N_spatial
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: b_givens
                  - direction: input
                    name: in_remainder
                    size: b_givens*(N_spatial - 1) - b_givens
                  - direction: output
                    name: out_0
                    size: b_givens*(N_spatial - 1)
                  repetition: null
                  type: merge
                connections:
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_0
                  target: merge_3.in_0
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_1
                  target: out_1
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_2
                  target: out_2
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_3
                  target: out_3
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_4
                  target: out_4
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_5
                  target: out_5
                - source: GivensRotationFusedAdder_uncompute_0_repetition.out_6
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_1
                - source: in_2
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_2
                - source: in_3
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_3
                - source: in_4
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_4
                - source: in_5
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_5
                - source: in_6
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_6
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: GivensRotationFusedAdder_uncompute_0_repetition.in_6
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GivensRotationBasisChangeDF_uncompute_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)
                - direction: input
                  name: in_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: input
                  name: in_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_3
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_4
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_5
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: input
                  name: in_6
                  size: N_spatial
                - direction: output
                  name: out_0
                  size: b_givens*(N_spatial - 1)
                - direction: output
                  name: out_1
                  size: Max(b_as, b_givens, b_mas)
                - direction: output
                  name: out_2
                  size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_3
                  size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_4
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_5
                  size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - direction: output
                  name: out_6
                  size: N_spatial
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                    - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
                    Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                    b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48)
                - name: gidney_lelbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)
                - name: gidney_relbows
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas) - 1)
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 2*N_spatial - 2
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: (N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                    - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                    Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                    b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                    b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                    - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                    b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                    + Max(b_as, b_givens, b_mas))
                type: qubrick
              connections:
              - source: GivensRotationBasisChangeDF_compute_0.out_0
                target: GivensRotationBasisChangeDF_uncompute_0.in_0
              - source: GivensRotationBasisChangeDF_compute_0.out_1
                target: GivensRotationBasisChangeDF_uncompute_0.in_1
              - source: GivensRotationBasisChangeDF_compute_0.out_2
                target: GivensRotationBasisChangeDF_uncompute_0.in_2
              - source: GivensRotationBasisChangeDF_compute_0.out_3
                target: GivensRotationBasisChangeDF_uncompute_0.in_3
              - source: GivensRotationBasisChangeDF_compute_0.out_4
                target: GivensRotationBasisChangeDF_uncompute_0.in_4
              - source: GivensRotationBasisChangeDF_compute_0.out_5
                target: GivensRotationBasisChangeDF_uncompute_0.in_5
              - source: GivensRotationBasisChangeDF_compute_0.out_6
                target: split_0.in_0
              - source: GivensRotationBasisChangeDF_uncompute_0.out_0
                target: out_0
              - source: GivensRotationBasisChangeDF_uncompute_0.out_1
                target: out_2
              - source: GivensRotationBasisChangeDF_uncompute_0.out_2
                target: out_3
              - source: GivensRotationBasisChangeDF_uncompute_0.out_3
                target: out_4
              - source: GivensRotationBasisChangeDF_uncompute_0.out_4
                target: out_5
              - source: GivensRotationBasisChangeDF_uncompute_0.out_5
                target: out_6
              - source: GivensRotationBasisChangeDF_uncompute_0.out_6
                target: out_7
              - source: in_0
                target: GivensRotationBasisChangeDF_compute_0.in_0
              - source: in_1
                target: z_0.thru_0
              - source: in_2
                target: GivensRotationBasisChangeDF_compute_0.in_1
              - source: in_3
                target: GivensRotationBasisChangeDF_compute_0.in_2
              - source: in_4
                target: GivensRotationBasisChangeDF_compute_0.in_3
              - source: in_5
                target: GivensRotationBasisChangeDF_compute_0.in_4
              - source: in_6
                target: GivensRotationBasisChangeDF_compute_0.in_5
              - source: merge_1.out_0
                target: GivensRotationBasisChangeDF_uncompute_0.in_6
              - source: split_0.out_0
                target: z_0.thru_1
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: z_0.thru_0
                target: out_1
              - source: z_0.thru_1
                target: merge_1.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: ApplyMajoranaFermionOperatorDF_compute_0
              ports:
              - direction: input
                name: in_0
                size: b_givens*(N_spatial - 1)
              - direction: input
                name: in_1
                size: 1
              - direction: input
                name: in_2
                size: Max(b_as, b_givens, b_mas)
              - direction: input
                name: in_3
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_4
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_5
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_6
                size: N_spatial
              - direction: output
                name: out_0
                size: b_givens*(N_spatial - 1)
              - direction: output
                name: out_1
                size: 1
              - direction: output
                name: out_2
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_3
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_4
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_5
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_6
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_7
                size: N_spatial
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
                  b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
                  b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + 4
              - name: gidney_lelbows
                type: additive
                value: 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
              - name: gidney_relbows
                type: additive
                value: 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 4*N_spatial - 4
              - name: rotations
                type: additive
                value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                  b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
                  + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
              - name: t_gates
                type: additive
                value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
                  Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas -
                  Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                  b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas) - 2.5, 0)
              - name: toffs
                type: additive
                value: 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                  + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*b_givens*(N_spatial - 1)
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: b_givens*(N_spatial - 1)
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: b_givens*(N_spatial - 1)
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_lelbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_lelbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_1
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                      - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda) -
                    1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_9
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_2
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_11
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_relbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_uncompute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_relbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_12
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_13
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_14
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_1
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_15
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_1
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              connections:
              - source: BinaryToUnaryUncomputation_compute_0.out_0
                target: merge_4.in_0
              - source: BinaryToUnaryUncomputation_compute_0.out_1
                target: had_1.thru_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_0
                target: merge_12.in_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_1
                target: split_14.in_0
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_8.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: had_2.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: had_1.thru_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: had_2.thru_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_1
              - source: in_0
                target: merge_2.in_1
              - source: in_1
                target: had_0.thru_0
              - source: in_2
                target: merge_2.in_0
              - source: merge_1.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_1
              - source: merge_10.out_0
                target: split_11.in_0
              - source: merge_12.out_0
                target: split_13.in_0
              - source: merge_15.out_0
                target: qubits_free_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_9.in_0
              - source: qubits_alloc_0.out_0
                target: split_0.in_0
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_0.out_0
                target: x_0.thru_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_11.out_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_0
              - source: split_11.out_remainder
                target: merge_12.in_remainder
              - source: split_13.out_0
                target: out_1
              - source: split_13.out_1
                target: out_0
              - source: split_14.out_0
                target: x_1.thru_0
              - source: split_14.out_remainder
                target: merge_15.in_remainder
              - source: split_3.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_0
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_5.out_0
                target: merge_6.in_0
              - source: split_5.out_1
                target: merge_6.in_1
              - source: split_7.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: split_9.out_0
                target: merge_10.in_0
              - source: split_9.out_1
                target: merge_10.in_1
              - source: x_0.thru_0
                target: merge_1.in_0
              - source: x_1.thru_0
                target: merge_15.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: b_givens*(N_spatial - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3*b_givens*(N_spatial - 1) + 102*lamda + (ceiling(0.75*lamda)
                  + 49)*Max(0, ceiling(M_r*R/lamda) - 1) - 96
              - name: gidney_lelbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: gidney_relbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: measurements
                type: additive
                value: b_givens*(N_spatial - 1)
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: relbow_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              - direction: through
                name: thru_2
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 1
              - name: local_ancillae
                type: qubits
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: relbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: 1
              repetition: null
              type: qubits_alloc
            connections:
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_0
              target: DataLookupClean_uncompute_0.in_1
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_1
              target: relbow_0.thru_0
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_2
              target: out_2
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_3
              target: out_3
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_4
              target: out_4
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_5
              target: out_5
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_6
              target: out_6
            - source: ApplyMajoranaFermionOperatorDF_compute_0.out_7
              target: out_8
            - source: DataLookupClean_compute_0.out_0
              target: DataLookupClean_uncompute_0.in_0
            - source: DataLookupClean_compute_0.out_1
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_0
            - source: DataLookupClean_compute_0.out_2
              target: DataLookupClean_uncompute_0.in_2
            - source: DataLookupClean_uncompute_0.out_0
              target: out_0
            - source: DataLookupClean_uncompute_0.out_1
              target: out_7
            - source: in_0
              target: DataLookupClean_compute_0.in_0
            - source: in_1
              target: lelbow_0.thru_1
            - source: in_2
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_2
            - source: in_3
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_3
            - source: in_4
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_4
            - source: in_5
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_5
            - source: in_6
              target: DataLookupClean_compute_0.in_1
            - source: in_7
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_6
            - source: in_8
              target: lelbow_0.thru_2
            - source: lelbow_0.thru_0
              target: ApplyMajoranaFermionOperatorDF_compute_0.in_1
            - source: lelbow_0.thru_1
              target: relbow_0.thru_1
            - source: lelbow_0.thru_2
              target: relbow_0.thru_2
            - source: qubits_alloc_0.out_0
              target: lelbow_0.thru_0
            - source: relbow_0.thru_0
              target: qubits_free_0.in_0
            - source: relbow_0.thru_1
              target: out_1
            - source: relbow_0.thru_2
              target: out_9
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: BasisRotatedMajoranaOperatorDF_compute_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: input
              name: in_1
              size: 1
            - direction: input
              name: in_2
              size: Max(b_as, b_givens, b_mas)
            - direction: input
              name: in_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_4
              size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_5
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_6
              size: ceiling(log2(R))
            - direction: input
              name: in_7
              size: N_spatial
            - direction: input
              name: in_8
              size: 1
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: output
              name: out_1
              size: 1
            - direction: output
              name: out_2
              size: Max(b_as, b_givens, b_mas)
            - direction: output
              name: out_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_4
              size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_5
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_6
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas))
            - direction: output
              name: out_7
              size: ceiling(log2(R))
            - direction: output
              name: out_8
              size: N_spatial
            - direction: output
              name: out_9
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 3*b_givens*(N_spatial
                - 1)*(lamda - 1) + 3*b_givens*(N_spatial - 1) + 102*lamda + (N_spatial
                - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
                0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + (ceiling(0.75*lamda)
                + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + (ceiling(0.75*b_givens*(N_spatial
                - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lamda)
                - 1) - 43
            - name: gidney_lelbows
              type: additive
              value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lamda)
                - 1)
            - name: gidney_relbows
              type: additive
              value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lamda)
                - 1)
            - name: measurements
              type: additive
              value: b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial -
                1)
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 4*N_spatial - 4
            - name: rotations
              type: additive
              value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
                Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
                b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
                b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
            - name: t_gates
              type: additive
              value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
                - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
            - name: toffs
              type: additive
              value: b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial
                - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + 2*(N_spatial -
                1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
                Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
                b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
                - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                b_mas)) + Max(b_as, b_givens, b_mas))
            type: qubrick
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: local_ancillae
                type: qubits
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: GidneyAdd_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: input
              name: in_1
              size: M_r*(R - 1)
            - direction: input
              name: in_2
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            - direction: output
              name: out_1
              size: M_r*(R - 1)
            - direction: output
              name: out_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                - 60
            - name: gidney_lelbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: gidney_relbows
              type: additive
              value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - 1
            - name: toffs
              type: additive
              value: 0
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_1
            ports:
            - direction: through
              name: thru_0
              size: N_spatial
            - direction: through
              name: thru_1
              size: N_spatial
            - direction: through
              name: thru_2
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*N_spatial
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: N_spatial
            type: swap
          connections:
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_0
            target: GidneyAdd_uncompute_0.in_0
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_1
            target: out_4
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_2
            target: out_5
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_3
            target: out_6
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_4
            target: out_7
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_5
            target: out_8
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_6
            target: out_9
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_7
            target: GidneyAdd_uncompute_0.in_2
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_8
            target: swap_1.thru_0
          - source: BasisRotatedMajoranaOperatorDF_compute_0.out_9
            target: out_14
          - source: GidneyAdd_compute_0.out_0
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_0
          - source: GidneyAdd_compute_0.out_1
            target: GidneyAdd_uncompute_0.in_1
          - source: GidneyAdd_compute_0.out_2
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_6
          - source: GidneyAdd_uncompute_0.out_0
            target: qubits_free_0.in_0
          - source: GidneyAdd_uncompute_0.out_1
            target: out_2
          - source: GidneyAdd_uncompute_0.out_2
            target: out_10
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: in_10
            target: swap_0.thru_0
          - source: in_11
            target: swap_0.thru_1
          - source: in_12
            target: swap_0.thru_2
          - source: in_13
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_8
          - source: in_2
            target: GidneyAdd_compute_0.in_1
          - source: in_3
            target: out_3
          - source: in_4
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_1
          - source: in_5
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_2
          - source: in_6
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_3
          - source: in_7
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_4
          - source: in_8
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_5
          - source: in_9
            target: GidneyAdd_compute_0.in_2
          - source: qubits_alloc_0.out_0
            target: GidneyAdd_compute_0.in_0
          - source: swap_0.thru_0
            target: BasisRotatedMajoranaOperatorDF_compute_0.in_7
          - source: swap_0.thru_1
            target: swap_1.thru_1
          - source: swap_0.thru_2
            target: swap_1.thru_2
          - source: swap_1.thru_0
            target: out_11
          - source: swap_1.thru_1
            target: out_12
          - source: swap_1.thru_2
            target: out_13
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: OneElectronTermSelect_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: input
            name: in_10
            size: N_spatial
          - direction: input
            name: in_11
            size: N_spatial
          - direction: input
            name: in_12
            size: 1
          - direction: input
            name: in_13
            size: 1
          - direction: input
            name: in_2
            size: M_r*(R - 1)
          - direction: input
            name: in_3
            size: b_mas
          - direction: input
            name: in_4
            size: 1
          - direction: input
            name: in_5
            size: Max(b_as, b_givens, b_mas)
          - direction: input
            name: in_6
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: input
            name: in_7
            size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas))
          - direction: input
            name: in_8
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: input
            name: in_9
            size: ceiling(log2(R))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: output
            name: out_10
            size: ceiling(log2(R))
          - direction: output
            name: out_11
            size: N_spatial
          - direction: output
            name: out_12
            size: N_spatial
          - direction: output
            name: out_13
            size: 1
          - direction: output
            name: out_14
            size: 1
          - direction: output
            name: out_2
            size: M_r*(R - 1)
          - direction: output
            name: out_3
            size: b_mas
          - direction: output
            name: out_4
            size: 1
          - direction: output
            name: out_5
            size: Max(b_as, b_givens, b_mas)
          - direction: output
            name: out_6
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_7
            size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_8
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: output
            name: out_9
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 110*N_spatial + 55*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda
              - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
              - 1) + 3*b_givens*(N_spatial - 1)*(lamda - 1) + 3*b_givens*(N_spatial
              - 1) + 102*lamda + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
              Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial
              - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
              b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) -
              2.5, 0) - 48) + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
              - 1) + (ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
              - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + 114*Max(0, -ceiling(log2(R))
              + ceiling(log2(M_r*R))) + 114*ceiling(log2(R)) - 163
          - name: gidney_lelbows
            type: additive
            value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lamda) -
              1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 2
          - name: gidney_relbows
            type: additive
            value: lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0, ceiling(M_r*R/lamda) -
              1) + 2*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 2*ceiling(log2(R))
              - 2
          - name: measurements
            type: additive
            value: b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial - 1)
          - name: ppms
            type: additive
            value: 0
          - name: pprs
            type: additive
            value: 4*N_spatial - 4
          - name: rotations
            type: additive
            value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)
              - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) +
              2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens -
              Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
              b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
              Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
              b_givens, b_mas) - 2.5, 0))
          - name: t_gates
            type: additive
            value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
              b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
          - name: toffs
            type: additive
            value: 2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda -
              1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
              - 1) + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas))
              + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
              b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
              - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              + Max(b_as, b_givens, b_mas))
          type: qubrick
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_0
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: ceiling(log2(R))
            - direction: output
              name: out_remainder
              size: b_mas
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: swap_0
            ports:
            - direction: through
              name: thru_0
              size: ceiling(log2(R))
            - direction: through
              name: thru_1
              size: 1
            - direction: through
              name: thru_2
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 55*ceiling(log2(R))
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: ceiling(log2(R))
            type: swap
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_1
            ports:
            - direction: input
              name: in_0
              size: ceiling(log2(R))
            - direction: input
              name: in_remainder
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_2
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_remainder
              size: ceiling(log2(R))
            repetition: null
            type: split
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: qubits_alloc_0.out_0
              target: out_2
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_compute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_lelbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: split_4
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: output
              name: out_0
              size: 1
            - direction: output
              name: out_remainder
              size: b_mas - 1
            repetition: null
            type: split
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: x_0
            ports:
            - direction: through
              name: thru_0
              size: 1
            - direction: through
              name: thru_1
              size: 1
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 4
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: x
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_5
            ports:
            - direction: input
              name: in_0
              size: 1
            - direction: input
              name: in_remainder
              size: b_mas - 1
            - direction: output
              name: out_0
              size: b_mas
            repetition: null
            type: merge
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: cost_event
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_relbows
                type: additive
                value: b_mas
              type: intrinsic_cost
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              repetition: null
              type: qubits_alloc
            connections:
            - source: in_0
              target: out_0
            - source: in_1
              target: out_1
            - source: in_2
              target: qubits_free_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: CompareLT_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: b_mas
            - direction: output
              name: out_0
              size: b_mas
            - direction: output
              name: out_1
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*b_mas - 60
            - name: gidney_relbows
              type: additive
              value: b_mas
            type: qubrick
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: merge_7
            ports:
            - direction: input
              name: in_0
              size: b_mas
            - direction: input
              name: in_remainder
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: b_mas + ceiling(log2(R))
            repetition: null
            type: merge
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: had_0
            ports:
            - direction: through
              name: thru_0
              size: b_mas
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 3*b_mas
            - name: gidney_lelbows
              type: additive
              value: 0
            - name: gidney_relbows
              type: additive
              value: 0
            - name: measurements
              type: additive
              value: 0
            - name: ppm_x_weight
              type: other
              value: 0
            - name: ppm_z_weight
              type: other
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: ppr_x_weight
              type: other
              value: 0
            - name: ppr_z_weight
              type: other
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: had
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_1
            ports:
            - direction: input
              name: in_0
              size: b_mas
            repetition: null
            type: qubits_alloc
          - children:
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_alloc_0
              ports:
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*b_mas + 3*ceiling(log2(R))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: read_0
                ports:
                - direction: through
                  name: thru_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: b_mas + ceiling(log2(R))
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: read
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: b_mas + ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_2
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_lelbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_lelbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_5
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_1
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_6
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_alloc_0
                  ports:
                  - direction: output
                    name: out_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: qubits_free_0
                  ports:
                  - direction: input
                    name: in_0
                    size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                      - ceiling(log2(lamda)) - 1
                  repetition: null
                  type: qubits_alloc
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                      - 1)
                  - name: gidney_lelbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  - name: gidney_relbows
                    type: additive
                    value: Max(0, ceiling(M_r*R/lamda) - 1)
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                - source: qubits_alloc_0.out_0
                  target: qubits_free_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: GoogleSelectOptimized_compute_0
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda) -
                    1)
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                - name: gidney_relbows
                  type: additive
                  value: Max(0, ceiling(M_r*R/lamda) - 1)
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_9
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: had_2
                ports:
                - direction: through
                  name: thru_0
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 3*lamda
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: had
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                - direction: input
                  name: in_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_11
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                repetition: null
                type: split
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: cost_event
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 48*lamda - 48
                  - name: gidney_relbows
                    type: additive
                    value: lamda - 1
                  type: intrinsic_cost
                connections:
                - source: in_0
                  target: out_0
                - source: in_1
                  target: out_1
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: BinaryToUnaryUncomputation_uncompute_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_1
                  size: lamda
                - direction: output
                  name: out_0
                  size: ceiling(log2(lamda))
                - direction: output
                  name: out_1
                  size: lamda
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 48*lamda - 48
                - name: gidney_relbows
                  type: additive
                  value: lamda - 1
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_12
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(lamda))
                - direction: input
                  name: in_remainder
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - ceiling(log2(lamda))
                - direction: output
                  name: out_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_13
                ports:
                - direction: input
                  name: in_0
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                - direction: output
                  name: out_1
                  size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_14
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: lamda - 1
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_1
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_15
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: lamda - 1
                - direction: output
                  name: out_0
                  size: lamda
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_1
                ports:
                - direction: input
                  name: in_0
                  size: lamda
                repetition: null
                type: qubits_alloc
              connections:
              - source: BinaryToUnaryUncomputation_compute_0.out_0
                target: merge_4.in_0
              - source: BinaryToUnaryUncomputation_compute_0.out_1
                target: had_1.thru_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_0
                target: merge_12.in_0
              - source: BinaryToUnaryUncomputation_uncompute_0.out_1
                target: split_14.in_0
              - source: GoogleSelectOptimized_compute_0.out_0
                target: merge_8.in_0
              - source: GoogleSelectOptimized_compute_0.out_1
                target: had_2.thru_0
              - source: had_0.thru_0
                target: read_0.thru_0
              - source: had_1.thru_0
                target: GoogleSelectOptimized_compute_0.in_1
              - source: had_2.thru_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_1
              - source: in_0
                target: merge_2.in_1
              - source: in_1
                target: had_0.thru_0
              - source: in_2
                target: merge_2.in_0
              - source: merge_1.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_1
              - source: merge_10.out_0
                target: split_11.in_0
              - source: merge_12.out_0
                target: split_13.in_0
              - source: merge_15.out_0
                target: qubits_free_1.in_0
              - source: merge_2.out_0
                target: split_3.in_0
              - source: merge_4.out_0
                target: split_5.in_0
              - source: merge_6.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_9.in_0
              - source: qubits_alloc_0.out_0
                target: split_0.in_0
              - source: read_0.thru_0
                target: qubits_free_0.in_0
              - source: split_0.out_0
                target: x_0.thru_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_11.out_0
                target: BinaryToUnaryUncomputation_uncompute_0.in_0
              - source: split_11.out_remainder
                target: merge_12.in_remainder
              - source: split_13.out_0
                target: out_1
              - source: split_13.out_1
                target: out_0
              - source: split_14.out_0
                target: x_1.thru_0
              - source: split_14.out_remainder
                target: merge_15.in_remainder
              - source: split_3.out_0
                target: BinaryToUnaryUncomputation_compute_0.in_0
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_5.out_0
                target: merge_6.in_0
              - source: split_5.out_1
                target: merge_6.in_1
              - source: split_7.out_0
                target: GoogleSelectOptimized_compute_0.in_0
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: split_9.out_0
                target: merge_10.in_0
              - source: split_9.out_1
                target: merge_10.in_1
              - source: x_0.thru_0
                target: merge_1.in_0
              - source: x_1.thru_0
                target: merge_15.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: DataLookupClean_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: b_mas + ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3*b_mas + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                  - 1) + 3*ceiling(log2(R)) - 96
              - name: gidney_lelbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: gidney_relbows
                type: additive
                value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) - 1
              - name: measurements
                type: additive
                value: b_mas + ceiling(log2(R))
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                    - 60
                - name: gidney_lelbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: gidney_relbows
                  type: additive
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: local_ancillae
                  type: qubits
                  value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                    - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: input
                name: in_1
                size: M_r*(R - 1)
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              - direction: output
                name: out_1
                size: M_r*(R - 1)
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 57*ceiling(log2(R))
                  - 60
              - name: gidney_lelbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: gidney_relbows
                type: additive
                value: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + ceiling(log2(R))
                  - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              repetition: null
              type: qubits_alloc
            connections:
            - source: DataLookupClean_uncompute_0.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: DataLookupClean_uncompute_0.out_1
              target: GidneyAdd_uncompute_0.in_2
            - source: GidneyAdd_compute_0.out_0
              target: DataLookupClean_uncompute_0.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_compute_0.out_2
              target: DataLookupClean_uncompute_0.in_2
            - source: GidneyAdd_uncompute_0.out_0
              target: qubits_free_0.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_0
            - source: GidneyAdd_uncompute_0.out_2
              target: out_1
            - source: in_0
              target: DataLookupClean_uncompute_0.in_1
            - source: in_1
              target: GidneyAdd_compute_0.in_1
            - source: in_2
              target: GidneyAdd_compute_0.in_2
            - source: qubits_alloc_0.out_0
              target: GidneyAdd_compute_0.in_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedSparseDataLookupDF_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: b_mas + ceiling(log2(R))
            - direction: input
              name: in_1
              size: M_r*(R - 1)
            - direction: input
              name: in_2
              size: ceiling(log2(R))
            - direction: output
              name: out_0
              size: M_r*(R - 1)
            - direction: output
              name: out_1
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 3*b_mas + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
                - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 117*ceiling(log2(R))
                - 216
            - name: gidney_lelbows
              type: additive
              value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 3
            - name: gidney_relbows
              type: additive
              value: lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0, -ceiling(log2(R))
                + ceiling(log2(M_r*R))) + 2*ceiling(log2(R)) - 3
            - name: measurements
              type: additive
              value: b_mas + ceiling(log2(R))
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 0
            - name: toffs
              type: additive
              value: 0
            type: qubrick
          - children:
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_0
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: relbow_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: relbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_1
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_0
              ports:
              - direction: input
                name: in_0
                size: 1
              repetition: null
              type: qubits_alloc
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: lelbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: lelbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_3
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_7
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: lelbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 44
                    - name: gidney_lelbows
                      type: additive
                      value: 1
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: lelbow
                  connections:
                  - source: in_0
                    target: lelbow_0.thru_0
                  - source: in_1
                    target: lelbow_0.thru_1
                  - source: in_2
                    target: lelbow_0.thru_2
                  - source: lelbow_0.thru_0
                    target: out_0
                  - source: lelbow_0.thru_1
                    target: out_1
                  - source: lelbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 44
                  - name: gidney_lelbows
                    type: additive
                    value: 1
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                    + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_8
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_9
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_10
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_9.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_8.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_8.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_11.in_0
              - source: in_0
                target: split_0.in_0
              - source: lelbow_0.thru_0
                target: merge_3.in_0
              - source: lelbow_0.thru_1
                target: x_0.thru_0
              - source: merge_11.out_0
                target: out_1
              - source: merge_3.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_7.in_0
              - source: merge_8.out_0
                target: split_10.in_0
              - source: merge_9.out_0
                target: out_0
              - source: qubits_alloc_0.out_0
                target: split_1.in_0
              - source: split_0.out_0
                target: lelbow_0.thru_0
              - source: split_0.out_remainder
                target: merge_3.in_remainder
              - source: split_1.out_0
                target: lelbow_0.thru_1
              - source: split_1.out_remainder
                target: merge_5.in_remainder
              - source: split_10.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_10.out_remainder
                target: merge_11.in_remainder
              - source: split_6.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_6.out_remainder
                target: merge_9.in_remainder
              - source: split_7.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_7.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_7.out_remainder
                target: merge_8.in_remainder
              - source: x_0.thru_0
                target: merge_5.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_compute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 44*M_r - 44*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_0.out_0
                target: out_0
              - source: Repeated_had_0.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_0.in_0
              - source: in_1
                target: Repeated_had_0.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_0_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_0
              ports:
              - direction: through
                name: thru_0
                size: ceiling(log2(R))
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 47*Heaviside(ceiling(log2(R)) - 1.5, 0) + 49*ceiling(log2(R))
                  - 49*Min(2, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: local_ancillae
                type: qubits
                value: ceiling(log2(R)) - Min(2, ceiling(log2(R)))
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: Heaviside(ceiling(log2(R)) - 1.5, 0)
              type: z
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_1
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_1.out_0
                target: out_0
              - source: Repeated_had_1.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_1.in_0
              - source: in_1
                target: Repeated_had_1.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_1_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_alloc_0
                ports:
                - direction: output
                  name: out_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_lelbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: qubits_alloc_0.out_0
                target: out_2
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_compute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              - direction: output
                name: out_2
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_lelbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_2
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_3
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_0
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_4
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_5
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_6
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_7
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_compute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_8
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_9
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_10
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_11
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_1
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_12
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_13
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_0
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_14
              ports:
              - direction: input
                name: in_0
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: 1
              - direction: output
                name: out_remainder
                size: ceiling(log2(R)) - 1
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: z_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: z
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_15
              ports:
              - direction: input
                name: in_0
                size: 1
              - direction: input
                name: in_remainder
                size: ceiling(log2(R)) - 1
              - direction: output
                name: out_0
                size: ceiling(log2(R))
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_inv_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s_inv
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_2
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_16
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_17
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_2
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_18
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_19
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_20
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_21
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*b_mas - 60
                - name: gidney_lelbows
                  type: additive
                  value: b_mas - 1
                - name: gidney_relbows
                  type: additive
                  value: b_mas - 1
                - name: local_ancillae
                  type: qubits
                  value: b_mas - 1
                - name: toffs
                  type: additive
                  value: 0
                type: intrinsic_cost
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: GidneyAdd_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_1
                size: b_mas
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_1
                size: b_mas
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*b_mas - 60
              - name: gidney_lelbows
                type: additive
                value: b_mas - 1
              - name: gidney_relbows
                type: additive
                value: b_mas - 1
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_22
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_23
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_24
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: input
                name: in_3
                size: Max(b_as, b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_25
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: b_mas
              - direction: output
                name: out_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_3
              ports:
              - direction: through
                name: thru_0
                size: b_mas
              - direction: through
                name: thru_1
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 4*b_mas
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: merge_26
              ports:
              - direction: input
                name: in_0
                size: b_mas
              - direction: input
                name: in_remainder
                size: -b_mas + Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
                  b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
                  b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              repetition: null
              type: merge
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: split_27
              ports:
              - direction: input
                name: in_0
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
                  - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
                  b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
                  b_givens, b_mas)
              - direction: output
                name: out_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: output
                name: out_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: split
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: had_3
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 3
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: had
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: s_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: s
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: cost_event
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 57*ceiling(log2(R)) - 60
                - name: gidney_relbows
                  type: additive
                  value: ceiling(log2(R))
                type: intrinsic_cost
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: ceiling(log2(R))
                repetition: null
                type: qubits_alloc
              connections:
              - source: in_0
                target: out_0
              - source: in_1
                target: out_1
              - source: in_2
                target: qubits_free_0.in_0
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: CompareLT_uncompute_1
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: input
                name: in_2
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 57*ceiling(log2(R)) - 60
              - name: gidney_relbows
                type: additive
                value: ceiling(log2(R))
              type: qubrick
            - children:
              - children:
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_0
                  ports:
                  - direction: input
                    name: in_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: split_1
                  ports:
                  - direction: input
                    name: in_0
                    size: ceiling(log2(R))
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_remainder
                    size: ceiling(log2(R)) - 1
                  repetition: null
                  type: split
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: had_0
                  ports:
                  - direction: through
                    name: thru_0
                    size: 1
                  - direction: through
                    name: thru_1
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 77
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppm_x_weight
                    type: other
                    value: 0
                  - name: ppm_z_weight
                    type: other
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: ppr_x_weight
                    type: other
                    value: 0
                  - name: ppr_z_weight
                    type: other
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 2
                  - name: toffs
                    type: additive
                    value: 0
                  type: had
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_2
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: ceiling(log2(R)) - 1
                  - direction: output
                    name: out_0
                    size: ceiling(log2(R))
                  repetition: null
                  type: merge
                - input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: merge_3
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_remainder
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  - direction: output
                    name: out_0
                    size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
                      + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                  repetition: null
                  type: merge
                connections:
                - source: had_0.thru_0
                  target: merge_3.in_0
                - source: had_0.thru_1
                  target: merge_2.in_0
                - source: in_0
                  target: split_0.in_0
                - source: in_1
                  target: split_1.in_0
                - source: merge_2.out_0
                  target: out_1
                - source: merge_3.out_0
                  target: out_0
                - source: split_0.out_0
                  target: had_0.thru_0
                - source: split_0.out_remainder
                  target: merge_3.in_remainder
                - source: split_1.out_0
                  target: had_0.thru_1
                - source: split_1.out_remainder
                  target: merge_2.in_remainder
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_had_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: input
                  name: in_1
                  size: ceiling(log2(R))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_1
                  size: ceiling(log2(R))
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 77
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 2
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              connections:
              - source: Repeated_had_2.out_0
                target: out_0
              - source: Repeated_had_2.out_1
                target: out_1
              - source: in_0
                target: Repeated_had_2.in_0
              - source: in_1
                target: Repeated_had_2.in_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Repeated_had_2_repetition
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: ceiling(log2(R))
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_1
                size: ceiling(log2(R))
              repetition:
                count: Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                sequence:
                  multiplier: 1
                  type: constant
              resources:
              - name: active_volume
                type: additive
                value: 77*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 2*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                  1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                  - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - children:
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: x_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    repetition: null
                    resources:
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: x
                  connections:
                  - source: in_0
                    target: x_0.thru_0
                  - source: x_0.thru_0
                    target: out_0
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_x_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  repetition: null
                  resources:
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 0
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_x_0.out_0
                  target: out_0
                - source: in_0
                  target: Repeated_x_0.in_0
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_x_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_1
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_2
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_3
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                repetition: null
                type: split
              - children:
                - children:
                  - input_params:
                    - M_r
                    - N_spatial
                    - R
                    - b_as
                    - b_givens
                    - b_mas
                    - idx
                    name: relbow_0
                    ports:
                    - direction: through
                      name: thru_0
                      size: 1
                    - direction: through
                      name: thru_1
                      size: 1
                    - direction: through
                      name: thru_2
                      size: 1
                    repetition: null
                    resources:
                    - name: active_volume
                      type: additive
                      value: 5
                    - name: gidney_lelbows
                      type: additive
                      value: 0
                    - name: gidney_relbows
                      type: additive
                      value: 1
                    - name: local_ancillae
                      type: qubits
                      value: 0
                    - name: measurements
                      type: additive
                      value: 0
                    - name: ppm_x_weight
                      type: other
                      value: 0
                    - name: ppm_z_weight
                      type: other
                      value: 0
                    - name: ppms
                      type: additive
                      value: 0
                    - name: ppr_x_weight
                      type: other
                      value: 0
                    - name: ppr_z_weight
                      type: other
                      value: 0
                    - name: pprs
                      type: additive
                      value: 0
                    - name: rotations
                      type: additive
                      value: 0
                    - name: t_gates
                      type: additive
                      value: 0
                    - name: toffs
                      type: additive
                      value: 0
                    type: relbow
                  connections:
                  - source: in_0
                    target: relbow_0.thru_0
                  - source: in_1
                    target: relbow_0.thru_1
                  - source: in_2
                    target: relbow_0.thru_2
                  - source: relbow_0.thru_0
                    target: out_0
                  - source: relbow_0.thru_1
                    target: out_1
                  - source: relbow_0.thru_2
                    target: out_2
                  input_params:
                  - M_r
                  - N_spatial
                  - R
                  - b_as
                  - b_givens
                  - b_mas
                  - idx
                  name: Repeated_lelbow_0
                  ports:
                  - direction: input
                    name: in_0
                    size: 1
                  - direction: input
                    name: in_1
                    size: 1
                  - direction: input
                    name: in_2
                    size: 1
                  - direction: output
                    name: out_0
                    size: 1
                  - direction: output
                    name: out_1
                    size: 1
                  - direction: output
                    name: out_2
                    size: 1
                  repetition: null
                  resources:
                  - name: active_volume
                    type: additive
                    value: 5
                  - name: gidney_lelbows
                    type: additive
                    value: 0
                  - name: gidney_relbows
                    type: additive
                    value: 1
                  - name: measurements
                    type: additive
                    value: 0
                  - name: ppms
                    type: additive
                    value: 0
                  - name: pprs
                    type: additive
                    value: 0
                  - name: rotations
                    type: additive
                    value: 0
                  - name: t_gates
                    type: additive
                    value: 0
                  - name: toffs
                    type: additive
                    value: 0
                  type: qubrick
                connections:
                - source: Repeated_lelbow_0.out_0
                  target: out_0
                - source: Repeated_lelbow_0.out_1
                  target: out_1
                - source: Repeated_lelbow_0.out_2
                  target: out_2
                - source: in_0
                  target: Repeated_lelbow_0.in_0
                - source: in_1
                  target: Repeated_lelbow_0.in_1
                - source: in_2
                  target: Repeated_lelbow_0.in_2
                input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: Repeated_lelbow_0_repetition
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_2
                  size: 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_1
                  size: 1
                - direction: output
                  name: out_2
                  size: 1
                repetition:
                  count: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                  sequence:
                    multiplier: 1
                    type: constant
                resources:
                - name: active_volume
                  type: additive
                  value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
                    1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                    - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - name: measurements
                  type: additive
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: qubrick
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_4
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_1
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_5
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_6
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: x_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                repetition: null
                resources:
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: x
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: split_8
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                - direction: output
                  name: out_0
                  size: 1
                - direction: output
                  name: out_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                repetition: null
                type: split
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: relbow_0
                ports:
                - direction: through
                  name: thru_0
                  size: 1
                - direction: through
                  name: thru_1
                  size: 1
                repetition: null
                resources:
                - name: active_volume
                  type: additive
                  value: 4
                - name: gidney_lelbows
                  type: additive
                  value: 0
                - name: gidney_relbows
                  type: additive
                  value: 0
                - name: measurements
                  type: additive
                  value: 0
                - name: ppm_x_weight
                  type: other
                  value: 0
                - name: ppm_z_weight
                  type: other
                  value: 0
                - name: ppms
                  type: additive
                  value: 0
                - name: ppr_x_weight
                  type: other
                  value: 0
                - name: ppr_z_weight
                  type: other
                  value: 0
                - name: pprs
                  type: additive
                  value: 0
                - name: rotations
                  type: additive
                  value: 0
                - name: t_gates
                  type: additive
                  value: 0
                - name: toffs
                  type: additive
                  value: 0
                type: relbow
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_10
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: merge_11
                ports:
                - direction: input
                  name: in_0
                  size: 1
                - direction: input
                  name: in_remainder
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
                - direction: output
                  name: out_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: merge
              - input_params:
                - M_r
                - N_spatial
                - R
                - b_as
                - b_givens
                - b_mas
                - idx
                name: qubits_free_0
                ports:
                - direction: input
                  name: in_0
                  size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                    - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
                    1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
                repetition: null
                type: qubits_alloc
              connections:
              - source: Repeated_lelbow_0_repetition.out_0
                target: merge_5.in_0
              - source: Repeated_lelbow_0_repetition.out_1
                target: merge_4.in_0
              - source: Repeated_lelbow_0_repetition.out_2
                target: merge_4.in_1
              - source: Repeated_x_0_repetition.out_0
                target: merge_1.in_0
              - source: in_0
                target: split_2.in_0
              - source: in_1
                target: split_0.in_0
              - source: merge_1.out_0
                target: split_3.in_0
              - source: merge_10.out_0
                target: qubits_free_0.in_0
              - source: merge_11.out_0
                target: out_0
              - source: merge_4.out_0
                target: split_6.in_0
              - source: merge_5.out_0
                target: split_8.in_0
              - source: relbow_0.thru_0
                target: merge_11.in_0
              - source: relbow_0.thru_1
                target: merge_10.in_0
              - source: split_0.out_0
                target: Repeated_x_0_repetition.in_0
              - source: split_0.out_remainder
                target: merge_1.in_remainder
              - source: split_2.out_0
                target: Repeated_lelbow_0_repetition.in_0
              - source: split_2.out_remainder
                target: merge_5.in_remainder
              - source: split_3.out_0
                target: Repeated_lelbow_0_repetition.in_1
              - source: split_3.out_1
                target: Repeated_lelbow_0_repetition.in_2
              - source: split_3.out_remainder
                target: merge_4.in_remainder
              - source: split_6.out_0
                target: x_0.thru_0
              - source: split_6.out_remainder
                target: merge_10.in_remainder
              - source: split_8.out_0
                target: relbow_0.thru_0
              - source: split_8.out_remainder
                target: merge_11.in_remainder
              - source: x_0.thru_0
                target: relbow_0.thru_1
              input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: Contiguizer_uncompute_0
              ports:
              - direction: input
                name: in_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: input
                name: in_1
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              - direction: output
                name: out_0
                size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
              repetition: null
              resources:
              - name: active_volume
                type: additive
                value: 5*M_r - 5*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1))) + 4
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                  - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                  ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - name: measurements
                type: additive
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: RotationCatalystStatePrep_uncompute_0
              ports:
              - direction: through
                name: thru_0
                size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                  Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                  b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
              - direction: through
                name: thru_1
                size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
                  - Max(b_as, b_givens, b_mas))
              - direction: through
                name: thru_2
                size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
              - direction: through
                name: thru_3
                size: Max(b_as, b_givens, b_mas)
              repetition: null
              type: qubrick
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: x_4
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: x
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: relbow_1
              ports:
              - direction: through
                name: thru_0
                size: 1
              repetition: null
              resources:
              - name: gidney_lelbows
                type: additive
                value: 0
              - name: gidney_relbows
                type: additive
                value: 0
              - name: measurements
                type: additive
                value: 0
              - name: ppm_x_weight
                type: other
                value: 0
              - name: ppm_z_weight
                type: other
                value: 0
              - name: ppms
                type: additive
                value: 0
              - name: ppr_x_weight
                type: other
                value: 0
              - name: ppr_z_weight
                type: other
                value: 0
              - name: pprs
                type: additive
                value: 0
              - name: rotations
                type: additive
                value: 0
              - name: t_gates
                type: additive
                value: 0
              - name: toffs
                type: additive
                value: 0
              type: relbow
            - input_params:
              - M_r
              - N_spatial
              - R
              - b_as
              - b_givens
              - b_mas
              - idx
              name: qubits_free_1
              ports:
              - direction: input
                name: in_0
                size: 1
              repetition: null
              type: qubits_alloc
            connections:
            - source: CompareLT_compute_0.out_0
              target: CompareLT_uncompute_0.in_0
            - source: CompareLT_compute_0.out_1
              target: CompareLT_uncompute_0.in_1
            - source: CompareLT_compute_0.out_2
              target: split_0.in_0
            - source: CompareLT_compute_1.out_0
              target: CompareLT_uncompute_1.in_0
            - source: CompareLT_compute_1.out_1
              target: CompareLT_uncompute_1.in_1
            - source: CompareLT_compute_1.out_2
              target: split_14.in_0
            - source: CompareLT_uncompute_0.out_0
              target: Contiguizer_compute_0.in_0
            - source: CompareLT_uncompute_0.out_1
              target: Repeated_had_0_repetition.in_1
            - source: CompareLT_uncompute_1.out_0
              target: Contiguizer_uncompute_0.in_0
            - source: CompareLT_uncompute_1.out_1
              target: Repeated_had_2_repetition.in_1
            - source: Contiguizer_compute_0.out_0
              target: CompareLT_compute_1.in_0
            - source: Contiguizer_compute_0.out_1
              target: Repeated_had_0_repetition.in_0
            - source: Contiguizer_uncompute_0.out_0
              target: out_0
            - source: GidneyAdd_compute_0.out_0
              target: merge_8.in_0
            - source: GidneyAdd_compute_0.out_1
              target: GidneyAdd_uncompute_0.in_1
            - source: GidneyAdd_uncompute_0.out_0
              target: merge_22.in_0
            - source: GidneyAdd_uncompute_0.out_1
              target: out_1
            - source: Repeated_had_0_repetition.out_0
              target: Repeated_had_1_repetition.in_0
            - source: Repeated_had_0_repetition.out_1
              target: z_0.thru_0
            - source: Repeated_had_1_repetition.out_0
              target: Repeated_had_2_repetition.in_0
            - source: Repeated_had_1_repetition.out_1
              target: CompareLT_compute_1.in_1
            - source: Repeated_had_2_repetition.out_0
              target: Contiguizer_uncompute_0.in_1
            - source: Repeated_had_2_repetition.out_1
              target: out_6
            - source: RotationCatalystStatePrep_uncompute_0.thru_0
              target: out_4
            - source: RotationCatalystStatePrep_uncompute_0.thru_1
              target: out_5
            - source: RotationCatalystStatePrep_uncompute_0.thru_2
              target: out_3
            - source: RotationCatalystStatePrep_uncompute_0.thru_3
              target: out_2
            - source: had_0.thru_0
              target: x_0.thru_1
            - source: had_1.thru_0
              target: s_0.thru_0
            - source: had_2.thru_0
              target: x_2.thru_1
            - source: had_3.thru_0
              target: s_1.thru_0
            - source: in_0
              target: CompareLT_compute_0.in_0
            - source: in_1
              target: GidneyAdd_compute_0.in_1
            - source: in_2
              target: merge_2.in_3
            - source: in_3
              target: merge_2.in_2
            - source: in_4
              target: merge_2.in_0
            - source: in_5
              target: merge_2.in_1
            - source: in_6
              target: CompareLT_compute_0.in_1
            - source: in_7
              target: z_0.thru_1
            - source: in_8
              target: relbow_0.thru_1
            - source: merge_1.out_0
              target: CompareLT_uncompute_0.in_2
            - source: merge_10.out_0
              target: split_11.in_0
            - source: merge_12.out_0
              target: split_13.in_0
            - source: merge_15.out_0
              target: CompareLT_uncompute_1.in_2
            - source: merge_16.out_0
              target: split_17.in_0
            - source: merge_18.out_0
              target: split_19.in_0
            - source: merge_2.out_0
              target: split_3.in_0
            - source: merge_20.out_0
              target: split_21.in_0
            - source: merge_22.out_0
              target: split_23.in_0
            - source: merge_24.out_0
              target: split_25.in_0
            - source: merge_26.out_0
              target: split_27.in_0
            - source: merge_4.out_0
              target: split_5.in_0
            - source: merge_6.out_0
              target: split_7.in_0
            - source: merge_8.out_0
              target: split_9.in_0
            - source: relbow_0.thru_0
              target: merge_1.in_0
            - source: relbow_0.thru_1
              target: qubits_free_0.in_0
            - source: relbow_1.thru_0
              target: qubits_free_1.in_0
            - source: s_0.thru_0
              target: z_1.thru_1
            - source: s_1.thru_0
              target: x_4.thru_0
            - source: s_inv_0.thru_0
              target: had_0.thru_0
            - source: s_inv_1.thru_0
              target: had_2.thru_0
            - source: split_0.out_0
              target: relbow_0.thru_0
            - source: split_0.out_remainder
              target: merge_1.in_remainder
            - source: split_11.out_0
              target: x_1.thru_0
            - source: split_11.out_remainder
              target: merge_12.in_remainder
            - source: split_13.out_0
              target: merge_16.in_0
            - source: split_13.out_1
              target: merge_16.in_1
            - source: split_13.out_2
              target: merge_16.in_2
            - source: split_13.out_3
              target: merge_16.in_3
            - source: split_14.out_0
              target: z_1.thru_0
            - source: split_14.out_remainder
              target: merge_15.in_remainder
            - source: split_17.out_0
              target: x_2.thru_0
            - source: split_17.out_remainder
              target: merge_18.in_remainder
            - source: split_19.out_0
              target: merge_20.in_0
            - source: split_19.out_1
              target: merge_20.in_1
            - source: split_19.out_2
              target: merge_20.in_2
            - source: split_19.out_3
              target: merge_20.in_3
            - source: split_21.out_0
              target: GidneyAdd_uncompute_0.in_0
            - source: split_21.out_remainder
              target: merge_22.in_remainder
            - source: split_23.out_0
              target: merge_24.in_0
            - source: split_23.out_1
              target: merge_24.in_1
            - source: split_23.out_2
              target: merge_24.in_2
            - source: split_23.out_3
              target: merge_24.in_3
            - source: split_25.out_0
              target: x_3.thru_0
            - source: split_25.out_remainder
              target: merge_26.in_remainder
            - source: split_27.out_0
              target: RotationCatalystStatePrep_uncompute_0.thru_0
            - source: split_27.out_1
              target: RotationCatalystStatePrep_uncompute_0.thru_1
            - source: split_27.out_2
              target: RotationCatalystStatePrep_uncompute_0.thru_2
            - source: split_27.out_3
              target: RotationCatalystStatePrep_uncompute_0.thru_3
            - source: split_3.out_0
              target: x_0.thru_0
            - source: split_3.out_remainder
              target: merge_4.in_remainder
            - source: split_5.out_0
              target: merge_6.in_0
            - source: split_5.out_1
              target: merge_6.in_1
            - source: split_5.out_2
              target: merge_6.in_2
            - source: split_5.out_3
              target: merge_6.in_3
            - source: split_7.out_0
              target: GidneyAdd_compute_0.in_0
            - source: split_7.out_remainder
              target: merge_8.in_remainder
            - source: split_9.out_0
              target: merge_10.in_0
            - source: split_9.out_1
              target: merge_10.in_1
            - source: split_9.out_2
              target: merge_10.in_2
            - source: split_9.out_3
              target: merge_10.in_3
            - source: x_0.thru_0
              target: merge_4.in_0
            - source: x_0.thru_1
              target: x_1.thru_1
            - source: x_1.thru_0
              target: merge_12.in_0
            - source: x_1.thru_1
              target: had_1.thru_0
            - source: x_2.thru_0
              target: merge_18.in_0
            - source: x_2.thru_1
              target: x_3.thru_1
            - source: x_3.thru_0
              target: merge_26.in_0
            - source: x_3.thru_1
              target: had_3.thru_0
            - source: x_4.thru_0
              target: relbow_1.thru_0
            - source: z_0.thru_0
              target: Repeated_had_1_repetition.in_1
            - source: z_0.thru_1
              target: s_inv_0.thru_0
            - source: z_1.thru_0
              target: merge_15.in_0
            - source: z_1.thru_1
              target: s_inv_1.thru_0
            input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: MultiplexedRealUSPDF_uncompute_0
            ports:
            - direction: input
              name: in_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: input
              name: in_1
              size: b_mas
            - direction: input
              name: in_2
              size: Max(b_as, b_givens, b_mas)
            - direction: input
              name: in_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_4
              size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_5
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: input
              name: in_6
              size: ceiling(log2(R))
            - direction: input
              name: in_7
              size: 1
            - direction: input
              name: in_8
              size: 1
            - direction: output
              name: out_0
              size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1
            - direction: output
              name: out_1
              size: b_mas
            - direction: output
              name: out_2
              size: Max(b_as, b_givens, b_mas)
            - direction: output
              name: out_3
              size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_4
              size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
                b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
                b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_5
              size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
                Max(b_as, b_givens, b_mas))
            - direction: output
              name: out_6
              size: ceiling(log2(R))
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 49*M_r + 130*b_mas + 47*Heaviside(ceiling(log2(R)) - 1.5, 0)
                - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
                + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
                (b_mas + 1) - 1) + 2*M_r + 1))) + 277*ceiling(log2(R)) - 49*Min(2,
                ceiling(log2(R))) + 231*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
                - 312
            - name: gidney_lelbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: gidney_relbows
              type: additive
              value: M_r + 2*b_mas - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
                + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
                - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 3*ceiling(log2(R))
                - Min(2, ceiling(log2(R))) - 2
            - name: measurements
              type: additive
              value: 0
            - name: ppms
              type: additive
              value: 0
            - name: pprs
              type: additive
              value: 0
            - name: rotations
              type: additive
              value: 0
            - name: t_gates
              type: additive
              value: 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
                - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
                ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - name: toffs
              type: additive
              value: Heaviside(ceiling(log2(R)) - 1.5, 0)
            type: qubrick
          connections:
          - source: CompareLT_compute_0.out_0
            target: CompareLT_uncompute_0.in_0
          - source: CompareLT_compute_0.out_1
            target: CompareLT_uncompute_0.in_1
          - source: CompareLT_compute_0.out_2
            target: split_4.in_0
          - source: CompareLT_uncompute_0.out_0
            target: merge_7.in_0
          - source: CompareLT_uncompute_0.out_1
            target: had_0.thru_0
          - source: MultiplexedRealUSPDF_uncompute_0.out_0
            target: out_1
          - source: MultiplexedRealUSPDF_uncompute_0.out_1
            target: out_3
          - source: MultiplexedRealUSPDF_uncompute_0.out_2
            target: out_4
          - source: MultiplexedRealUSPDF_uncompute_0.out_3
            target: out_5
          - source: MultiplexedRealUSPDF_uncompute_0.out_4
            target: out_6
          - source: MultiplexedRealUSPDF_uncompute_0.out_5
            target: out_7
          - source: MultiplexedRealUSPDF_uncompute_0.out_6
            target: out_8
          - source: MultiplexedSparseDataLookupDF_uncompute_0.out_0
            target: out_2
          - source: MultiplexedSparseDataLookupDF_uncompute_0.out_1
            target: MultiplexedRealUSPDF_uncompute_0.in_6
          - source: had_0.thru_0
            target: qubits_free_1.in_0
          - source: in_0
            target: out_0
          - source: in_1
            target: split_0.in_0
          - source: in_10
            target: MultiplexedRealUSPDF_uncompute_0.in_5
          - source: in_11
            target: swap_0.thru_2
          - source: in_12
            target: MultiplexedRealUSPDF_uncompute_0.in_7
          - source: in_13
            target: out_9
          - source: in_14
            target: MultiplexedRealUSPDF_uncompute_0.in_8
          - source: in_2
            target: MultiplexedRealUSPDF_uncompute_0.in_0
          - source: in_3
            target: MultiplexedSparseDataLookupDF_uncompute_0.in_1
          - source: in_4
            target: MultiplexedRealUSPDF_uncompute_0.in_1
          - source: in_5
            target: CompareLT_compute_0.in_1
          - source: in_6
            target: swap_0.thru_1
          - source: in_7
            target: MultiplexedRealUSPDF_uncompute_0.in_2
          - source: in_8
            target: MultiplexedRealUSPDF_uncompute_0.in_3
          - source: in_9
            target: MultiplexedRealUSPDF_uncompute_0.in_4
          - source: merge_1.out_0
            target: split_2.in_0
          - source: merge_5.out_0
            target: CompareLT_uncompute_0.in_2
          - source: merge_7.out_0
            target: MultiplexedSparseDataLookupDF_uncompute_0.in_0
          - source: split_0.out_0
            target: swap_0.thru_0
          - source: split_0.out_remainder
            target: merge_1.in_remainder
          - source: split_2.out_0
            target: CompareLT_compute_0.in_0
          - source: split_2.out_remainder
            target: merge_7.in_remainder
          - source: split_4.out_0
            target: x_0.thru_1
          - source: split_4.out_remainder
            target: merge_5.in_remainder
          - source: swap_0.thru_0
            target: merge_1.in_0
          - source: swap_0.thru_1
            target: x_0.thru_0
          - source: swap_0.thru_2
            target: MultiplexedSparseDataLookupDF_uncompute_0.in_2
          - source: x_0.thru_0
            target: qubits_free_0.in_0
          - source: x_0.thru_1
            target: merge_5.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: MultiplexedAliasSamplingDF_uncompute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: b_mas + ceiling(log2(R))
          - direction: input
            name: in_10
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: input
            name: in_11
            size: ceiling(log2(R))
          - direction: input
            name: in_12
            size: 1
          - direction: input
            name: in_13
            size: 1
          - direction: input
            name: in_14
            size: 1
          - direction: input
            name: in_2
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: input
            name: in_3
            size: M_r*(R - 1)
          - direction: input
            name: in_4
            size: b_mas
          - direction: input
            name: in_5
            size: b_mas
          - direction: input
            name: in_6
            size: 1
          - direction: input
            name: in_7
            size: Max(b_as, b_givens, b_mas)
          - direction: input
            name: in_8
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: input
            name: in_9
            size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))) + 1
          - direction: output
            name: out_2
            size: M_r*(R - 1)
          - direction: output
            name: out_3
            size: b_mas
          - direction: output
            name: out_4
            size: Max(b_as, b_givens, b_mas)
          - direction: output
            name: out_5
            size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_6
            size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
              b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
              b_mas)) - Max(b_as, b_givens, b_mas))
          - direction: output
            name: out_7
            size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
              b_givens, b_mas))
          - direction: output
            name: out_8
            size: ceiling(log2(R))
          - direction: output
            name: out_9
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 49*M_r + 250*b_mas + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0,
              ceiling(M_r*R/lamda) - 1) + 114*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
              + 47*Heaviside(ceiling(log2(R)) - 1.5, 0) - 49*Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              + 449*ceiling(log2(R)) - 49*Min(2, ceiling(log2(R))) + 231*Min(M_r -
              Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) - 644
          - name: gidney_lelbows
            type: additive
            value: M_r + 3*b_mas + lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 5
          - name: gidney_relbows
            type: additive
            value: M_r + 3*b_mas + lamda + Max(0, ceiling(M_r*R/lamda) - 1) + 2*Max(0,
              -ceiling(log2(R)) + ceiling(log2(M_r*R))) - Mod(1, ceiling(log2(2 **
              (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
              - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 5*ceiling(log2(R))
              - Min(2, ceiling(log2(R))) - 5
          - name: measurements
            type: additive
            value: b_mas + ceiling(log2(R))
          - name: ppms
            type: additive
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 6*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
          - name: toffs
            type: additive
            value: Heaviside(ceiling(log2(R)) - 1.5, 0) + ceiling(log2(R))
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: relbow_0
          ports:
          - direction: through
            name: thru_0
            size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
              2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1)))
          - direction: through
            name: thru_1
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 5*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 49*(Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
              - 49*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: gidney_lelbows
            type: additive
            value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
              2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: gidney_relbows
            type: additive
            value: Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
              - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
              ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + Mod(1, ceiling(log2(2
              ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) +
              ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
              - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
              1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
              (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: local_ancillae
            type: qubits
            value: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
              2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
              + 1) - 1) + 2*M_r + 1))) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
              + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R -
              1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: relbow
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: 1
          repetition: null
          type: qubits_alloc
        connections:
        - source: MultiplexedAliasSamplingDF_compute_0.out_0
          target: OneElectronTermSelect_compute_0.in_0
        - source: MultiplexedAliasSamplingDF_compute_0.out_1
          target: MultiplexedAliasSamplingDF_uncompute_0.in_1
        - source: MultiplexedAliasSamplingDF_compute_0.out_10
          target: OneElectronTermSelect_compute_0.in_8
        - source: MultiplexedAliasSamplingDF_compute_0.out_11
          target: OneElectronTermSelect_compute_0.in_9
        - source: MultiplexedAliasSamplingDF_compute_0.out_12
          target: MultiplexedAliasSamplingDF_uncompute_0.in_12
        - source: MultiplexedAliasSamplingDF_compute_0.out_13
          target: OneElectronTermSelect_compute_0.in_12
        - source: MultiplexedAliasSamplingDF_compute_0.out_14
          target: OneElectronTermSelect_compute_0.in_13
        - source: MultiplexedAliasSamplingDF_compute_0.out_2
          target: OneElectronTermSelect_compute_0.in_1
        - source: MultiplexedAliasSamplingDF_compute_0.out_3
          target: OneElectronTermSelect_compute_0.in_2
        - source: MultiplexedAliasSamplingDF_compute_0.out_4
          target: OneElectronTermSelect_compute_0.in_3
        - source: MultiplexedAliasSamplingDF_compute_0.out_5
          target: MultiplexedAliasSamplingDF_uncompute_0.in_5
        - source: MultiplexedAliasSamplingDF_compute_0.out_6
          target: MultiplexedAliasSamplingDF_uncompute_0.in_6
        - source: MultiplexedAliasSamplingDF_compute_0.out_7
          target: OneElectronTermSelect_compute_0.in_5
        - source: MultiplexedAliasSamplingDF_compute_0.out_8
          target: OneElectronTermSelect_compute_0.in_6
        - source: MultiplexedAliasSamplingDF_compute_0.out_9
          target: OneElectronTermSelect_compute_0.in_7
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_0
          target: out_0
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_1
          target: out_2
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_2
          target: out_3
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_3
          target: out_4
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_4
          target: out_5
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_5
          target: out_6
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_6
          target: out_7
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_7
          target: out_8
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_8
          target: out_10
        - source: MultiplexedAliasSamplingDF_uncompute_0.out_9
          target: had_1.thru_0
        - source: OneElectronTermSelect_compute_0.out_0
          target: MultiplexedAliasSamplingDF_uncompute_0.in_0
        - source: OneElectronTermSelect_compute_0.out_1
          target: MultiplexedAliasSamplingDF_uncompute_0.in_2
        - source: OneElectronTermSelect_compute_0.out_10
          target: MultiplexedAliasSamplingDF_uncompute_0.in_11
        - source: OneElectronTermSelect_compute_0.out_11
          target: out_11
        - source: OneElectronTermSelect_compute_0.out_12
          target: out_12
        - source: OneElectronTermSelect_compute_0.out_13
          target: MultiplexedAliasSamplingDF_uncompute_0.in_13
        - source: OneElectronTermSelect_compute_0.out_14
          target: MultiplexedAliasSamplingDF_uncompute_0.in_14
        - source: OneElectronTermSelect_compute_0.out_2
          target: MultiplexedAliasSamplingDF_uncompute_0.in_3
        - source: OneElectronTermSelect_compute_0.out_3
          target: MultiplexedAliasSamplingDF_uncompute_0.in_4
        - source: OneElectronTermSelect_compute_0.out_4
          target: relbow_0.thru_1
        - source: OneElectronTermSelect_compute_0.out_5
          target: MultiplexedAliasSamplingDF_uncompute_0.in_7
        - source: OneElectronTermSelect_compute_0.out_6
          target: MultiplexedAliasSamplingDF_uncompute_0.in_8
        - source: OneElectronTermSelect_compute_0.out_7
          target: MultiplexedAliasSamplingDF_uncompute_0.in_9
        - source: OneElectronTermSelect_compute_0.out_8
          target: MultiplexedAliasSamplingDF_uncompute_0.in_10
        - source: OneElectronTermSelect_compute_0.out_9
          target: out_9
        - source: had_0.thru_0
          target: MultiplexedAliasSamplingDF_compute_0.in_8
        - source: had_1.thru_0
          target: out_13
        - source: in_0
          target: MultiplexedAliasSamplingDF_compute_0.in_0
        - source: in_1
          target: lelbow_0.thru_0
        - source: in_10
          target: OneElectronTermSelect_compute_0.in_11
        - source: in_11
          target: had_0.thru_0
        - source: in_2
          target: MultiplexedAliasSamplingDF_compute_0.in_1
        - source: in_3
          target: MultiplexedAliasSamplingDF_compute_0.in_2
        - source: in_4
          target: MultiplexedAliasSamplingDF_compute_0.in_3
        - source: in_5
          target: MultiplexedAliasSamplingDF_compute_0.in_4
        - source: in_6
          target: MultiplexedAliasSamplingDF_compute_0.in_5
        - source: in_7
          target: MultiplexedAliasSamplingDF_compute_0.in_6
        - source: in_8
          target: MultiplexedAliasSamplingDF_compute_0.in_7
        - source: in_9
          target: OneElectronTermSelect_compute_0.in_10
        - source: lelbow_0.thru_0
          target: relbow_0.thru_0
        - source: lelbow_0.thru_1
          target: OneElectronTermSelect_compute_0.in_4
        - source: qubits_alloc_0.out_0
          target: lelbow_0.thru_1
        - source: relbow_0.thru_0
          target: out_1
        - source: relbow_0.thru_1
          target: qubits_free_0.in_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: OneElectronTermBlockEncoding_compute_1
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: input
          name: in_1
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        - direction: input
          name: in_10
          size: N_spatial
        - direction: input
          name: in_11
          size: 1
        - direction: input
          name: in_2
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: input
          name: in_3
          size: M_r*(R - 1)
        - direction: input
          name: in_4
          size: b_mas
        - direction: input
          name: in_5
          size: Max(b_as, b_givens, b_mas)
        - direction: input
          name: in_6
          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - direction: input
          name: in_7
          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas))
        - direction: input
          name: in_8
          size: ceiling(log2(R))
        - direction: input
          name: in_9
          size: N_spatial
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_1
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        - direction: output
          name: out_10
          size: ceiling(log2(R))
        - direction: output
          name: out_11
          size: N_spatial
        - direction: output
          name: out_12
          size: N_spatial
        - direction: output
          name: out_13
          size: 1
        - direction: output
          name: out_2
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: output
          name: out_3
          size: M_r*(R - 1)
        - direction: output
          name: out_4
          size: b_mas
        - direction: output
          name: out_5
          size: Max(b_as, b_givens, b_mas)
        - direction: output
          name: out_6
          size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - direction: output
          name: out_7
          size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas))
        - direction: output
          name: out_8
          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas))
        - direction: output
          name: out_9
          size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 98*M_r + 110*N_spatial + 55*b_givens*(-1 + (b_givens*(N_spatial -
            1)*(lamda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
            - 1) + 3*b_givens*(N_spatial - 1)*(lamda - 1) + 3*b_givens*(N_spatial
            - 1) + 497*b_mas + 204*lamda + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
            - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
            + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
            b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) +
            108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens,
            b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48)
            + (3*b_mas + 3*ceiling(log2(R)))*(lamda - 1) + 2*(ceiling(0.75*lamda)
            + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + (ceiling(0.75*b_givens*(N_spatial
            - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lamda)
            - 1) + (ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda
            - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) +
            342*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0,
            b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
            Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + 49*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
            1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 94*Heaviside(ceiling(log2(R))
            - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(b_as, b_givens, b_mas) - 2.5, 0) + 1009*ceiling(log2(R)) - 98*Min(2,
            Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))))
            - 98*Min(2, ceiling(log2(R))) + 462*Min(M_r - Mod(1, ceiling(log2(2 **
            (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
            - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
            - 1349
        - name: gidney_lelbows
          type: additive
          value: 2*M_r + 6*b_mas + 2*lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 4*Max(0, ceiling(M_r*R/lamda)
            - 1) + 6*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Heaviside(Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            - 1.5, 0) + 12*ceiling(log2(R)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 2*Min(2, ceiling(log2(R)))
            - 11
        - name: gidney_relbows
          type: additive
          value: 2*M_r + 6*b_mas + 2*lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 4*Max(0, ceiling(M_r*R/lamda)
            - 1) + 6*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + Heaviside(Mod(1,
            ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
            - 1.5, 0) + 12*ceiling(log2(R)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 2*Min(2, ceiling(log2(R)))
            - 11
        - name: measurements
          type: additive
          value: b_givens*(N_spatial - 1)*(lamda - 1) + b_givens*(N_spatial - 1) +
            b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R))
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 4*N_spatial - 4
        - name: rotations
          type: additive
          value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) +
            Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
            0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) -
            Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
        - name: t_gates
          type: additive
          value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
            b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
            Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(-Max(0, b_mas
            - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
            b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
            + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
            b_givens, b_mas) - 2.5, 0) + 12*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
        - name: toffs
          type: additive
          value: 2*N_spatial + b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1)
            + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
            + (-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
            + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + 2*(N_spatial - 1)*(Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
            Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
            - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
            b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
            b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
            - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
            b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
            b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
            Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + 2*Heaviside(ceiling(log2(R))
            - 1.5, 0) + 2*ceiling(log2(R))
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_7
        ports:
        - direction: input
          name: in_0
          size: Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2
            ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1)))
        - direction: input
          name: in_1
          size: M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
            + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
            + 1) - 1) + 2*M_r + 1))) + 1
        - direction: input
          name: in_2
          size: M_r*(R - 1)
        - direction: input
          name: in_3
          size: b_mas
        - direction: input
          name: in_remainder
          size: -M_r*(R - 1) - M_r - b_mas + ceiling(log2(2 ** (ceiling(log2(M_r))
            + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
            + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1
        - direction: output
          name: out_0
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        repetition: null
        type: merge
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 **
              (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
              1) - 1) + 2*M_r + 1))
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: read_0
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: read
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
              + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: lamda
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_0
          ports:
          - direction: input
            name: in_0
            size: lamda
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: lamda - 1
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: x_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: x
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_1
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: lamda - 1
          - direction: output
            name: out_0
            size: lamda
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_2
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 48*lamda - 48
            - name: gidney_lelbows
              type: additive
              value: lamda - 1
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: BinaryToUnaryUncomputation_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_1
            size: lamda
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_1
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 48*lamda - 48
          - name: gidney_lelbows
            type: additive
            value: lamda - 1
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_3
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_1
          ports:
          - direction: through
            name: thru_0
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*lamda
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_4
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_remainder
            size: ceiling(log2(lamda))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: -ceiling(log2(lamda)) + ceiling(log2(R + 1)) - 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: -ceiling(log2(lamda)) + ceiling(log2(R + 1)) - 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(R/lamda) - 1)
            - name: gidney_lelbows
              type: additive
              value: Max(0, ceiling(R/lamda) - 1)
            - name: gidney_relbows
              type: additive
              value: Max(0, ceiling(R/lamda) - 1)
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: qubits_alloc_0.out_0
            target: qubits_free_0.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: GoogleSelectOptimized_compute_0
          ports:
          - direction: input
            name: in_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: lamda
          - direction: output
            name: out_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling(R/lamda) - 1)
          - name: gidney_lelbows
            type: additive
            value: Max(0, ceiling(R/lamda) - 1)
          - name: gidney_relbows
            type: additive
            value: Max(0, ceiling(R/lamda) - 1)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_5
          ports:
          - direction: input
            name: in_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: input
            name: in_remainder
            size: ceiling(log2(lamda))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_2
          ports:
          - direction: through
            name: thru_0
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*lamda
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_6
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 48*lamda - 48
            - name: gidney_relbows
              type: additive
              value: lamda - 1
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: BinaryToUnaryUncomputation_uncompute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_1
            size: lamda
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_1
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 48*lamda - 48
          - name: gidney_relbows
            type: additive
            value: lamda - 1
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_7
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_8
          ports:
          - direction: input
            name: in_0
            size: lamda
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: lamda - 1
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: x_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: x
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_9
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: lamda - 1
          - direction: output
            name: out_0
            size: lamda
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_1
          ports:
          - direction: input
            name: in_0
            size: lamda
          repetition: null
          type: qubits_alloc
        connections:
        - source: BinaryToUnaryUncomputation_compute_0.out_0
          target: merge_3.in_0
        - source: BinaryToUnaryUncomputation_compute_0.out_1
          target: had_1.thru_0
        - source: BinaryToUnaryUncomputation_uncompute_0.out_0
          target: merge_7.in_0
        - source: BinaryToUnaryUncomputation_uncompute_0.out_1
          target: split_8.in_0
        - source: GoogleSelectOptimized_compute_0.out_0
          target: merge_5.in_0
        - source: GoogleSelectOptimized_compute_0.out_1
          target: had_2.thru_0
        - source: had_0.thru_0
          target: read_0.thru_0
        - source: had_1.thru_0
          target: GoogleSelectOptimized_compute_0.in_1
        - source: had_2.thru_0
          target: BinaryToUnaryUncomputation_uncompute_0.in_1
        - source: in_0
          target: split_2.in_0
        - source: in_1
          target: had_0.thru_0
        - source: merge_1.out_0
          target: BinaryToUnaryUncomputation_compute_0.in_1
        - source: merge_3.out_0
          target: split_4.in_0
        - source: merge_5.out_0
          target: split_6.in_0
        - source: merge_7.out_0
          target: out_0
        - source: merge_9.out_0
          target: qubits_free_1.in_0
        - source: qubits_alloc_0.out_0
          target: split_0.in_0
        - source: read_0.thru_0
          target: qubits_free_0.in_0
        - source: split_0.out_0
          target: x_0.thru_0
        - source: split_0.out_remainder
          target: merge_1.in_remainder
        - source: split_2.out_0
          target: BinaryToUnaryUncomputation_compute_0.in_0
        - source: split_2.out_remainder
          target: merge_3.in_remainder
        - source: split_4.out_0
          target: GoogleSelectOptimized_compute_0.in_0
        - source: split_4.out_remainder
          target: merge_5.in_remainder
        - source: split_6.out_0
          target: BinaryToUnaryUncomputation_uncompute_0.in_0
        - source: split_6.out_remainder
          target: merge_7.in_remainder
        - source: split_8.out_0
          target: x_1.thru_0
        - source: split_8.out_remainder
          target: merge_9.in_remainder
        - source: x_0.thru_0
          target: merge_1.in_0
        - source: x_1.thru_0
          target: merge_9.in_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: DataLookupClean_uncompute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: input
          name: in_1
          size: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(R/lamda) -
            1) + 3*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
            - 96
        - name: gidney_lelbows
          type: additive
          value: lamda + Max(0, ceiling(R/lamda) - 1) - 1
        - name: gidney_relbows
          type: additive
          value: lamda + Max(0, ceiling(R/lamda) - 1) - 1
        - name: measurements
          type: additive
          value: ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
            + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: qubrick
      connections:
      - source: DataLookupClean_compute_0.out_0
        target: OneElectronTermBlockEncoding_compute_0.in_0
      - source: DataLookupClean_compute_0.out_1
        target: split_0.in_0
      - source: DataLookupClean_uncompute_0.out_0
        target: out_0
      - source: OneElectronTermBlockEncoding_compute_0.out_0
        target: OneElectronTermBlockEncoding_compute_1.in_0
      - source: OneElectronTermBlockEncoding_compute_0.out_1
        target: merge_1.in_0
      - source: OneElectronTermBlockEncoding_compute_0.out_10
        target: merge_3.in_1
      - source: OneElectronTermBlockEncoding_compute_0.out_2
        target: merge_1.in_1
      - source: OneElectronTermBlockEncoding_compute_0.out_3
        target: merge_1.in_2
      - source: OneElectronTermBlockEncoding_compute_0.out_4
        target: OneElectronTermBlockEncoding_compute_1.in_5
      - source: OneElectronTermBlockEncoding_compute_0.out_5
        target: OneElectronTermBlockEncoding_compute_1.in_6
      - source: OneElectronTermBlockEncoding_compute_0.out_6
        target: OneElectronTermBlockEncoding_compute_1.in_7
      - source: OneElectronTermBlockEncoding_compute_0.out_7
        target: merge_3.in_0
      - source: OneElectronTermBlockEncoding_compute_0.out_8
        target: OneElectronTermBlockEncoding_compute_1.in_9
      - source: OneElectronTermBlockEncoding_compute_0.out_9
        target: OneElectronTermBlockEncoding_compute_1.in_10
      - source: OneElectronTermBlockEncoding_compute_1.out_0
        target: DataLookupClean_uncompute_0.in_0
      - source: OneElectronTermBlockEncoding_compute_1.out_1
        target: merge_7.in_0
      - source: OneElectronTermBlockEncoding_compute_1.out_10
        target: out_6
      - source: OneElectronTermBlockEncoding_compute_1.out_11
        target: out_7
      - source: OneElectronTermBlockEncoding_compute_1.out_12
        target: out_8
      - source: OneElectronTermBlockEncoding_compute_1.out_13
        target: out_9
      - source: OneElectronTermBlockEncoding_compute_1.out_2
        target: merge_7.in_1
      - source: OneElectronTermBlockEncoding_compute_1.out_3
        target: merge_7.in_2
      - source: OneElectronTermBlockEncoding_compute_1.out_4
        target: merge_7.in_3
      - source: OneElectronTermBlockEncoding_compute_1.out_5
        target: out_1
      - source: OneElectronTermBlockEncoding_compute_1.out_6
        target: out_2
      - source: OneElectronTermBlockEncoding_compute_1.out_7
        target: out_3
      - source: OneElectronTermBlockEncoding_compute_1.out_8
        target: out_4
      - source: OneElectronTermBlockEncoding_compute_1.out_9
        target: out_5
      - source: in_0
        target: DataLookupClean_compute_0.in_0
      - source: in_1
        target: OneElectronTermBlockEncoding_compute_0.in_4
      - source: in_2
        target: OneElectronTermBlockEncoding_compute_0.in_5
      - source: in_3
        target: OneElectronTermBlockEncoding_compute_0.in_6
      - source: in_4
        target: OneElectronTermBlockEncoding_compute_0.in_7
      - source: in_5
        target: OneElectronTermBlockEncoding_compute_0.in_8
      - source: merge_1.out_0
        target: split_2.in_0
      - source: merge_3.out_0
        target: z_0.thru_0
      - source: merge_5.out_0
        target: split_6.in_0
      - source: merge_7.out_0
        target: DataLookupClean_uncompute_0.in_1
      - source: split_0.out_0
        target: OneElectronTermBlockEncoding_compute_0.in_1
      - source: split_0.out_1
        target: OneElectronTermBlockEncoding_compute_0.in_2
      - source: split_0.out_2
        target: OneElectronTermBlockEncoding_compute_0.in_3
      - source: split_0.out_remainder
        target: merge_1.in_remainder
      - source: split_2.out_0
        target: z_0.thru_1
      - source: split_2.out_remainder
        target: merge_5.in_remainder
      - source: split_4.out_0
        target: OneElectronTermBlockEncoding_compute_1.in_8
      - source: split_4.out_1
        target: OneElectronTermBlockEncoding_compute_1.in_11
      - source: split_6.out_0
        target: OneElectronTermBlockEncoding_compute_1.in_1
      - source: split_6.out_1
        target: OneElectronTermBlockEncoding_compute_1.in_2
      - source: split_6.out_2
        target: OneElectronTermBlockEncoding_compute_1.in_3
      - source: split_6.out_3
        target: OneElectronTermBlockEncoding_compute_1.in_4
      - source: split_6.out_remainder
        target: merge_7.in_remainder
      - source: z_0.thru_0
        target: split_4.in_0
      - source: z_0.thru_1
        target: merge_5.in_0
      input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: DoubleFactorizationSelect_compute_0
      ports:
      - direction: input
        name: in_0
        size: ceiling(log2(R + 1))
      - direction: input
        name: in_1
        size: Max(b_as, b_givens, b_mas)
      - direction: input
        name: in_2
        size: ceiling(log2(R))
      - direction: input
        name: in_3
        size: N_spatial
      - direction: input
        name: in_4
        size: N_spatial
      - direction: input
        name: in_5
        size: 1
      - direction: output
        name: out_0
        size: ceiling(log2(R + 1))
      - direction: output
        name: out_1
        size: Max(b_as, b_givens, b_mas)
      - direction: output
        name: out_2
        size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - direction: output
        name: out_3
        size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas))
      - direction: output
        name: out_4
        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas))
      - direction: output
        name: out_5
        size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      - direction: output
        name: out_6
        size: ceiling(log2(R))
      - direction: output
        name: out_7
        size: N_spatial
      - direction: output
        name: out_8
        size: N_spatial
      - direction: output
        name: out_9
        size: 1
      repetition: null
      resources:
      - name: active_volume
        type: additive
        value: 196*M_r + 220*N_spatial + 110*b_givens*(-1 + (b_givens*(N_spatial -
          1)*(lamda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
          - 1) + 6*b_givens*(N_spatial - 1)*(lamda - 1) + 6*b_givens*(N_spatial -
          1) + 994*b_mas + 510*lamda + 2*(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
          - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
          + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0,
          b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0,
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as,
          b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48)
          + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5,
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
          b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0) - 48) + 2*(3*b_mas + 3*ceiling(log2(R)))*(lamda
          - 1) + (3*lamda - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
          1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1)) + (55*((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + (ceiling(0.75*lamda) + 49)*Max(0,
          ceiling(R/lamda) - 1) + 4*(ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda)
          - 1) + (ceiling((0.75*lamda - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lamda)
          - 1) + 2*(ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
          - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + 2*(ceiling(0.75*b_mas + (0.75*b_mas
          + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0,
          ceiling(M_r*R/lamda) - 1) + 3*Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + 684*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
          b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
          0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
          b_mas) - 2.5, 0)) + 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 5*Heaviside(1.5
          - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as,
          b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0) + 49*Heaviside(Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 188*Heaviside(ceiling(log2(R))
          - 1.5, 0) + 47*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
          1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
          1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) +
          5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2067*ceiling(log2(R)) + 3*ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 49*Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) -
          98*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
          + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1)))) - 196*Min(2, ceiling(log2(R))) + 924*Min(M_r -
          Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))
          + 1, ceiling(log2(R))) - 2843
      - name: gidney_lelbows
        type: additive
        value: 4*M_r + 12*b_mas + 5*lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
          + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0,
          ceiling(R/lamda) - 1) + 8*Max(0, ceiling(M_r*R/lamda) - 1) + 12*Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R))
          - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R)))
          - 24
      - name: gidney_relbows
        type: additive
        value: 4*M_r + 12*b_mas + 5*lamda + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1)
          + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*Max(0,
          ceiling(R/lamda) - 1) + 8*Max(0, ceiling(M_r*R/lamda) - 1) + 12*Max(0, -ceiling(log2(R))
          + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
          + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1)))
          + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R))
          - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
          2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
          + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, Mod(1, ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R)))
          - 24
      - name: measurements
        type: additive
        value: 2*b_givens*(N_spatial - 1)*(lamda - 1) + 2*b_givens*(N_spatial - 1)
          + 2*b_mas + 2*(b_mas + ceiling(log2(R)))*(lamda - 1) + (lamda - 1)*ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 2*ceiling(log2(R)) +
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
      - name: ppms
        type: additive
        value: 0
      - name: pprs
        type: additive
        value: 8*N_spatial - 8
      - name: rotations
        type: additive
        value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
          - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + (N_spatial
          - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
          Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
          Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) +
          Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
          b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
          + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens,
          b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5,
          0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
          - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
          b_givens, b_mas) - 2.5, 0))
      - name: t_gates
        type: additive
        value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
          0) + (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
          - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(2.5
          - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
          b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(-Max(0, b_mas
          - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
          + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5,
          0) + 24*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
      - name: toffs
        type: additive
        value: 4*N_spatial + 2*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1)
          + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1)
          + 2*(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
          + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + 2*(N_spatial - 1)*(Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
          + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
          b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
          b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas -
          Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0,
          b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
          b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
          - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + (((lamda -
          1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) +
          ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
          + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2
          ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 **
          (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
          - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 4*Heaviside(ceiling(log2(R))
          - 1.5, 0) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
          - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 **
          (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + 4*ceiling(log2(R))
      type: qubrick
    - children:
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_0
        ports:
        - direction: input
          name: in_0
          size: b_as + ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_remainder
          size: b_as
        repetition: null
        type: split
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: swap_0
        ports:
        - direction: through
          name: thru_0
          size: ceiling(log2(R + 1))
        - direction: through
          name: thru_1
          size: ceiling(log2(R + 1))
        - direction: through
          name: thru_2
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 55*ceiling(log2(R + 1))
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: ceiling(log2(R + 1))
        type: swap
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_1
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: input
          name: in_remainder
          size: b_as
        - direction: output
          name: out_0
          size: b_as + ceiling(log2(R + 1))
        repetition: null
        type: merge
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_2
        ports:
        - direction: input
          name: in_0
          size: b_as + ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: b_as
        - direction: output
          name: out_remainder
          size: ceiling(log2(R + 1))
        repetition: null
        type: split
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: b_as
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: cost_event
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*b_as - 60
          - name: gidney_lelbows
            type: additive
            value: b_as
          type: intrinsic_cost
        connections:
        - source: in_0
          target: out_0
        - source: in_1
          target: out_1
        - source: qubits_alloc_0.out_0
          target: out_2
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: CompareGE_compute_0
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: input
          name: in_1
          size: b_as
        - direction: output
          name: out_0
          size: b_as
        - direction: output
          name: out_1
          size: b_as
        - direction: output
          name: out_2
          size: b_as
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 57*b_as - 60
        - name: gidney_lelbows
          type: additive
          value: b_as
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: split_4
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: output
          name: out_0
          size: 1
        - direction: output
          name: out_remainder
          size: b_as - 1
        repetition: null
        type: split
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: x_0
        ports:
        - direction: through
          name: thru_0
          size: 1
        - direction: through
          name: thru_1
          size: 1
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 4
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: x
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_5
        ports:
        - direction: input
          name: in_0
          size: 1
        - direction: input
          name: in_remainder
          size: b_as - 1
        - direction: output
          name: out_0
          size: b_as
        repetition: null
        type: merge
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: cost_event
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*b_as - 60
          - name: gidney_relbows
            type: additive
            value: b_as
          type: intrinsic_cost
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: b_as
          repetition: null
          type: qubits_alloc
        connections:
        - source: in_0
          target: out_0
        - source: in_1
          target: out_1
        - source: in_2
          target: qubits_free_0.in_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: CompareGE_uncompute_0
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: input
          name: in_1
          size: b_as
        - direction: input
          name: in_2
          size: b_as
        - direction: output
          name: out_0
          size: b_as
        - direction: output
          name: out_1
          size: b_as
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 57*b_as - 60
        - name: gidney_relbows
          type: additive
          value: b_as
        type: qubrick
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: merge_7
        ports:
        - direction: input
          name: in_0
          size: b_as
        - direction: input
          name: in_remainder
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: b_as + ceiling(log2(R + 1))
        repetition: null
        type: merge
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: qubits_free_0
        ports:
        - direction: input
          name: in_0
          size: 1
        repetition: null
        type: qubits_alloc
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: had_0
        ports:
        - direction: through
          name: thru_0
          size: b_as
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 3*b_as
        - name: gidney_lelbows
          type: additive
          value: 0
        - name: gidney_relbows
          type: additive
          value: 0
        - name: measurements
          type: additive
          value: 0
        - name: ppm_x_weight
          type: other
          value: 0
        - name: ppm_z_weight
          type: other
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: ppr_x_weight
          type: other
          value: 0
        - name: ppr_z_weight
          type: other
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: had
      - input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: qubits_free_1
        ports:
        - direction: input
          name: in_0
          size: b_as
        repetition: null
        type: qubits_alloc
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*b_as + 3*ceiling(log2(R + 1))
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: read_0
          ports:
          - direction: through
            name: thru_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: b_as + ceiling(log2(R + 1))
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: read
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: b_as + ceiling(log2(R + 1))
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: lamda
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_0
          ports:
          - direction: input
            name: in_0
            size: lamda
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: lamda - 1
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: x_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: x
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_1
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: lamda - 1
          - direction: output
            name: out_0
            size: lamda
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_2
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 48*lamda - 48
            - name: gidney_lelbows
              type: additive
              value: lamda - 1
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: BinaryToUnaryUncomputation_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_1
            size: lamda
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_1
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 48*lamda - 48
          - name: gidney_lelbows
            type: additive
            value: lamda - 1
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_3
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_1
          ports:
          - direction: through
            name: thru_0
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*lamda
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_4
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_remainder
            size: ceiling(log2(lamda))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: -ceiling(log2(lamda)) + ceiling(log2(R + 1)) - 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: -ceiling(log2(lamda)) + ceiling(log2(R + 1)) - 1
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling((R + 1)/lamda) - 1)
            - name: gidney_lelbows
              type: additive
              value: Max(0, ceiling((R + 1)/lamda) - 1)
            - name: gidney_relbows
              type: additive
              value: Max(0, ceiling((R + 1)/lamda) - 1)
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          - source: qubits_alloc_0.out_0
            target: qubits_free_0.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: GoogleSelectOptimized_compute_0
          ports:
          - direction: input
            name: in_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: lamda
          - direction: output
            name: out_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: (ceiling(0.75*lamda) + 49)*Max(0, ceiling((R + 1)/lamda) - 1)
          - name: gidney_lelbows
            type: additive
            value: Max(0, ceiling((R + 1)/lamda) - 1)
          - name: gidney_relbows
            type: additive
            value: Max(0, ceiling((R + 1)/lamda) - 1)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_5
          ports:
          - direction: input
            name: in_0
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: input
            name: in_remainder
            size: ceiling(log2(lamda))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_2
          ports:
          - direction: through
            name: thru_0
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*lamda
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_6
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          repetition: null
          type: split
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 48*lamda - 48
            - name: gidney_relbows
              type: additive
              value: lamda - 1
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: out_1
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: BinaryToUnaryUncomputation_uncompute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_1
            size: lamda
          - direction: output
            name: out_0
            size: ceiling(log2(lamda))
          - direction: output
            name: out_1
            size: lamda
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 48*lamda - 48
          - name: gidney_relbows
            type: additive
            value: lamda - 1
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_7
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(lamda))
          - direction: input
            name: in_remainder
            size: -ceiling(log2(lamda)) + ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_8
          ports:
          - direction: input
            name: in_0
            size: lamda
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: lamda - 1
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: x_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: x
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_9
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: lamda - 1
          - direction: output
            name: out_0
            size: lamda
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_1
          ports:
          - direction: input
            name: in_0
            size: lamda
          repetition: null
          type: qubits_alloc
        connections:
        - source: BinaryToUnaryUncomputation_compute_0.out_0
          target: merge_3.in_0
        - source: BinaryToUnaryUncomputation_compute_0.out_1
          target: had_1.thru_0
        - source: BinaryToUnaryUncomputation_uncompute_0.out_0
          target: merge_7.in_0
        - source: BinaryToUnaryUncomputation_uncompute_0.out_1
          target: split_8.in_0
        - source: GoogleSelectOptimized_compute_0.out_0
          target: merge_5.in_0
        - source: GoogleSelectOptimized_compute_0.out_1
          target: had_2.thru_0
        - source: had_0.thru_0
          target: read_0.thru_0
        - source: had_1.thru_0
          target: GoogleSelectOptimized_compute_0.in_1
        - source: had_2.thru_0
          target: BinaryToUnaryUncomputation_uncompute_0.in_1
        - source: in_0
          target: split_2.in_0
        - source: in_1
          target: had_0.thru_0
        - source: merge_1.out_0
          target: BinaryToUnaryUncomputation_compute_0.in_1
        - source: merge_3.out_0
          target: split_4.in_0
        - source: merge_5.out_0
          target: split_6.in_0
        - source: merge_7.out_0
          target: out_0
        - source: merge_9.out_0
          target: qubits_free_1.in_0
        - source: qubits_alloc_0.out_0
          target: split_0.in_0
        - source: read_0.thru_0
          target: qubits_free_0.in_0
        - source: split_0.out_0
          target: x_0.thru_0
        - source: split_0.out_remainder
          target: merge_1.in_remainder
        - source: split_2.out_0
          target: BinaryToUnaryUncomputation_compute_0.in_0
        - source: split_2.out_remainder
          target: merge_3.in_remainder
        - source: split_4.out_0
          target: GoogleSelectOptimized_compute_0.in_0
        - source: split_4.out_remainder
          target: merge_5.in_remainder
        - source: split_6.out_0
          target: BinaryToUnaryUncomputation_uncompute_0.in_0
        - source: split_6.out_remainder
          target: merge_7.in_remainder
        - source: split_8.out_0
          target: x_1.thru_0
        - source: split_8.out_remainder
          target: merge_9.in_remainder
        - source: x_0.thru_0
          target: merge_1.in_0
        - source: x_1.thru_0
          target: merge_9.in_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: DataLookupClean_uncompute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: input
          name: in_1
          size: b_as + ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 3*b_as + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling((R
            + 1)/lamda) - 1) + 3*ceiling(log2(R + 1)) - 96
        - name: gidney_lelbows
          type: additive
          value: lamda + Max(0, ceiling((R + 1)/lamda) - 1) - 1
        - name: gidney_relbows
          type: additive
          value: lamda + Max(0, ceiling((R + 1)/lamda) - 1) - 1
        - name: measurements
          type: additive
          value: b_as + ceiling(log2(R + 1))
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 0
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: 0
        type: qubrick
      - children:
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_alloc_0
          ports:
          - direction: output
            name: out_0
            size: 1
          repetition: null
          type: qubits_alloc
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: lelbow_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: lelbow
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: x_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: x
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          - direction: output
            name: out_remainder
            size: ntz(R + 1)
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_0
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(R + 1)) - 3*ntz(R + 1)
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: z_0
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          - direction: through
            name: thru_1
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 47*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + 49*ceiling(log2(R
              + 1)) - 49*ntz(R + 1) - 49*Min(2, ceiling(log2(R + 1)) - ntz(R + 1))
          - name: gidney_lelbows
            type: additive
            value: ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1))
              - ntz(R + 1))
          - name: gidney_relbows
            type: additive
            value: ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1))
              - ntz(R + 1))
          - name: local_ancillae
            type: qubits
            value: ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1))
              - ntz(R + 1))
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0)
          type: z
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_1
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(R + 1)) - 3*ntz(R + 1)
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_5
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1)) - ntz(R + 1)
          - direction: input
            name: in_remainder
            size: ntz(R + 1)
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          type: merge
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: ry_0
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 1399
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 1
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: ry
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_alloc_0
            ports:
            - direction: output
              name: out_0
              size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
                - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
                + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
            repetition: null
            type: qubits_alloc
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*ceiling(log2(R + 1)) - 60
            - name: gidney_lelbows
              type: additive
              value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R +
                1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) +
                0.5, 0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
                0.5, 0))*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
                0)
            type: intrinsic_cost
          connections:
          - source: in_0
            target: out_0
          - source: qubits_alloc_0.out_0
            target: out_1
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: CompareLT_compute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          - direction: output
            name: out_1
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*ceiling(log2(R + 1)) - 60
          - name: gidney_lelbows
            type: additive
            value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: split_6
          ports:
          - direction: input
            name: in_0
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          - direction: output
            name: out_0
            size: 1
          - direction: output
            name: out_remainder
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) -
              1
          repetition: null
          type: split
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: z_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          - direction: through
            name: thru_1
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 4
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: z
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: merge_7
          ports:
          - direction: input
            name: in_0
            size: 1
          - direction: input
            name: in_remainder
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0) -
              1
          - direction: output
            name: out_0
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          repetition: null
          type: merge
        - children:
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: cost_event
            repetition: null
            resources:
            - name: active_volume
              type: additive
              value: 57*ceiling(log2(R + 1)) - 60
            - name: gidney_relbows
              type: additive
              value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R +
                1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) +
                0.5, 0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) -
                0.5, 0))*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
                0)
            type: intrinsic_cost
          - input_params:
            - M_r
            - N_spatial
            - R
            - b_as
            - b_givens
            - b_mas
            - idx
            name: qubits_free_0
            ports:
            - direction: input
              name: in_0
              size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
                - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
                + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
            repetition: null
            type: qubits_alloc
          connections:
          - source: in_0
            target: out_0
          - source: in_1
            target: qubits_free_0.in_0
          input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: CompareLT_uncompute_0
          ports:
          - direction: input
            name: in_0
            size: ceiling(log2(R + 1))
          - direction: input
            name: in_1
            size: (ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0)
          - direction: output
            name: out_0
            size: ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 57*ceiling(log2(R + 1)) - 60
          - name: gidney_relbows
            type: additive
            value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
              - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
              + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
              + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
          type: qubrick
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: ry_1
          ports:
          - direction: through
            name: thru_0
            size: 1
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 1399
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 1
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: ry
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: had_2
          ports:
          - direction: through
            name: thru_0
            size: ceiling(log2(R + 1))
          repetition: null
          resources:
          - name: active_volume
            type: additive
            value: 3*ceiling(log2(R + 1))
          - name: gidney_lelbows
            type: additive
            value: 0
          - name: gidney_relbows
            type: additive
            value: 0
          - name: measurements
            type: additive
            value: 0
          - name: ppm_x_weight
            type: other
            value: 0
          - name: ppm_z_weight
            type: other
            value: 0
          - name: ppms
            type: additive
            value: 0
          - name: ppr_x_weight
            type: other
            value: 0
          - name: ppr_z_weight
            type: other
            value: 0
          - name: pprs
            type: additive
            value: 0
          - name: rotations
            type: additive
            value: 0
          - name: t_gates
            type: additive
            value: 0
          - name: toffs
            type: additive
            value: 0
          type: had
        - input_params:
          - M_r
          - N_spatial
          - R
          - b_as
          - b_givens
          - b_mas
          - idx
          name: qubits_free_0
          ports:
          - direction: input
            name: in_0
            size: 1
          repetition: null
          type: qubits_alloc
        connections:
        - source: CompareLT_compute_0.out_0
          target: CompareLT_uncompute_0.in_0
        - source: CompareLT_compute_0.out_1
          target: split_6.in_0
        - source: CompareLT_uncompute_0.out_0
          target: had_2.thru_0
        - source: had_0.thru_0
          target: z_0.thru_0
        - source: had_1.thru_0
          target: merge_5.in_0
        - source: had_2.thru_0
          target: out_0
        - source: in_0
          target: split_0.in_0
        - source: lelbow_0.thru_0
          target: x_0.thru_0
        - source: merge_5.out_0
          target: CompareLT_compute_0.in_0
        - source: merge_7.out_0
          target: CompareLT_uncompute_0.in_1
        - source: qubits_alloc_0.out_0
          target: lelbow_0.thru_0
        - source: ry_0.thru_0
          target: z_1.thru_1
        - source: ry_1.thru_0
          target: qubits_free_0.in_0
        - source: split_0.out_0
          target: had_0.thru_0
        - source: split_0.out_remainder
          target: merge_5.in_remainder
        - source: split_6.out_0
          target: z_1.thru_0
        - source: split_6.out_remainder
          target: merge_7.in_remainder
        - source: x_0.thru_0
          target: z_0.thru_1
        - source: z_0.thru_0
          target: had_1.thru_0
        - source: z_0.thru_1
          target: ry_0.thru_0
        - source: z_1.thru_0
          target: merge_7.in_0
        - source: z_1.thru_1
          target: ry_1.thru_0
        input_params:
        - M_r
        - N_spatial
        - R
        - b_as
        - b_givens
        - b_mas
        - idx
        name: RealUSP_uncompute_0
        ports:
        - direction: input
          name: in_0
          size: ceiling(log2(R + 1))
        - direction: output
          name: out_0
          size: ceiling(log2(R + 1))
        repetition: null
        resources:
        - name: active_volume
          type: additive
          value: 47*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + 172*ceiling(log2(R
            + 1)) - 55*ntz(R + 1) - 49*Min(2, ceiling(log2(R + 1)) - ntz(R + 1)) +
            2682
        - name: gidney_lelbows
          type: additive
          value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
            - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
            Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - ntz(R
            + 1) - Min(2, ceiling(log2(R + 1)) - ntz(R + 1))
        - name: gidney_relbows
          type: additive
          value: ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
            - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) +
            Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
            + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + ceiling(log2(R + 1)) - ntz(R
            + 1) - Min(2, ceiling(log2(R + 1)) - ntz(R + 1))
        - name: measurements
          type: additive
          value: 0
        - name: ppms
          type: additive
          value: 0
        - name: pprs
          type: additive
          value: 0
        - name: rotations
          type: additive
          value: 2
        - name: t_gates
          type: additive
          value: 0
        - name: toffs
          type: additive
          value: Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0)
        type: qubrick
      connections:
      - source: CompareGE_compute_0.out_0
        target: CompareGE_uncompute_0.in_0
      - source: CompareGE_compute_0.out_1
        target: CompareGE_uncompute_0.in_1
      - source: CompareGE_compute_0.out_2
        target: split_4.in_0
      - source: CompareGE_uncompute_0.out_0
        target: merge_7.in_0
      - source: CompareGE_uncompute_0.out_1
        target: had_0.thru_0
      - source: DataLookupClean_uncompute_0.out_0
        target: RealUSP_uncompute_0.in_0
      - source: RealUSP_uncompute_0.out_0
        target: out_0
      - source: had_0.thru_0
        target: qubits_free_1.in_0
      - source: in_0
        target: swap_0.thru_0
      - source: in_1
        target: split_0.in_0
      - source: in_2
        target: CompareGE_compute_0.in_1
      - source: in_3
        target: swap_0.thru_2
      - source: in_4
        target: out_1
      - source: in_5
        target: out_2
      - source: merge_1.out_0
        target: split_2.in_0
      - source: merge_5.out_0
        target: CompareGE_uncompute_0.in_2
      - source: merge_7.out_0
        target: DataLookupClean_uncompute_0.in_1
      - source: split_0.out_0
        target: swap_0.thru_1
      - source: split_0.out_remainder
        target: merge_1.in_remainder
      - source: split_2.out_0
        target: CompareGE_compute_0.in_0
      - source: split_2.out_remainder
        target: merge_7.in_remainder
      - source: split_4.out_0
        target: x_0.thru_1
      - source: split_4.out_remainder
        target: merge_5.in_remainder
      - source: swap_0.thru_0
        target: DataLookupClean_uncompute_0.in_0
      - source: swap_0.thru_1
        target: merge_1.in_0
      - source: swap_0.thru_2
        target: x_0.thru_0
      - source: x_0.thru_0
        target: qubits_free_0.in_0
      - source: x_0.thru_1
        target: merge_5.in_0
      input_params:
      - M_r
      - N_spatial
      - R
      - b_as
      - b_givens
      - b_mas
      - idx
      name: AliasSampling_uncompute_0
      ports:
      - direction: input
        name: in_0
        size: ceiling(log2(R + 1))
      - direction: input
        name: in_1
        size: b_as + ceiling(log2(R + 1))
      - direction: input
        name: in_2
        size: b_as
      - direction: input
        name: in_3
        size: 1
      - direction: input
        name: in_4
        size: ceiling(log2(R))
      - direction: input
        name: in_5
        size: 1
      - direction: output
        name: out_0
        size: ceiling(log2(R + 1))
      - direction: output
        name: out_1
        size: ceiling(log2(R))
      - direction: output
        name: out_2
        size: 1
      repetition: null
      resources:
      - name: active_volume
        type: additive
        value: 120*b_as + 102*lamda + (ceiling(0.75*lamda) + 49)*Max(0, ceiling((R
          + 1)/lamda) - 1) + 47*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5,
          0) + 230*ceiling(log2(R + 1)) - 55*ntz(R + 1) - 49*Min(2, ceiling(log2(R
          + 1)) - ntz(R + 1)) + 2470
      - name: gidney_lelbows
        type: additive
        value: b_as + lamda + ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
          0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Max(0, ceiling((R + 1)/lamda)
          - 1) + ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1)) -
          ntz(R + 1)) - 1
      - name: gidney_relbows
        type: additive
        value: b_as + lamda + ((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R
          + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5,
          0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
          + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + Max(0, ceiling((R + 1)/lamda)
          - 1) + ceiling(log2(R + 1)) - ntz(R + 1) - Min(2, ceiling(log2(R + 1)) -
          ntz(R + 1)) - 1
      - name: measurements
        type: additive
        value: b_as + ceiling(log2(R + 1))
      - name: ppms
        type: additive
        value: 0
      - name: pprs
        type: additive
        value: 0
      - name: rotations
        type: additive
        value: 2
      - name: t_gates
        type: additive
        value: 0
      - name: toffs
        type: additive
        value: Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + ceiling(log2(R
          + 1))
      type: qubrick
    connections:
    - source: AliasSampling_compute_0.out_0
      target: DoubleFactorizationSelect_compute_0.in_0
    - source: AliasSampling_compute_0.out_1
      target: AliasSampling_uncompute_0.in_1
    - source: AliasSampling_compute_0.out_2
      target: AliasSampling_uncompute_0.in_2
    - source: AliasSampling_compute_0.out_3
      target: AliasSampling_uncompute_0.in_3
    - source: AliasSampling_compute_0.out_4
      target: DoubleFactorizationSelect_compute_0.in_2
    - source: AliasSampling_compute_0.out_5
      target: DoubleFactorizationSelect_compute_0.in_5
    - source: AliasSampling_uncompute_0.out_0
      target: out_0
    - source: AliasSampling_uncompute_0.out_1
      target: out_6
    - source: AliasSampling_uncompute_0.out_2
      target: out_9
    - source: DoubleFactorizationSelect_compute_0.out_0
      target: AliasSampling_uncompute_0.in_0
    - source: DoubleFactorizationSelect_compute_0.out_1
      target: out_1
    - source: DoubleFactorizationSelect_compute_0.out_2
      target: out_2
    - source: DoubleFactorizationSelect_compute_0.out_3
      target: out_3
    - source: DoubleFactorizationSelect_compute_0.out_4
      target: out_4
    - source: DoubleFactorizationSelect_compute_0.out_5
      target: out_5
    - source: DoubleFactorizationSelect_compute_0.out_6
      target: AliasSampling_uncompute_0.in_4
    - source: DoubleFactorizationSelect_compute_0.out_7
      target: out_7
    - source: DoubleFactorizationSelect_compute_0.out_8
      target: out_8
    - source: DoubleFactorizationSelect_compute_0.out_9
      target: AliasSampling_uncompute_0.in_5
    - source: in_0
      target: AliasSampling_compute_0.in_0
    - source: in_1
      target: DoubleFactorizationSelect_compute_0.in_1
    - source: in_2
      target: AliasSampling_compute_0.in_1
    - source: in_3
      target: DoubleFactorizationSelect_compute_0.in_3
    - source: in_4
      target: DoubleFactorizationSelect_compute_0.in_4
    - source: in_5
      target: AliasSampling_compute_0.in_2
    input_params:
    - M_r
    - N_spatial
    - R
    - b_as
    - b_givens
    - b_mas
    - idx
    name: LCU_compute_0
    ports:
    - direction: input
      name: in_0
      size: ceiling(log2(R + 1))
    - direction: input
      name: in_1
      size: Max(b_as, b_givens, b_mas)
    - direction: input
      name: in_2
      size: ceiling(log2(R))
    - direction: input
      name: in_3
      size: N_spatial
    - direction: input
      name: in_4
      size: N_spatial
    - direction: input
      name: in_5
      size: 1
    - direction: output
      name: out_0
      size: ceiling(log2(R + 1))
    - direction: output
      name: out_1
      size: Max(b_as, b_givens, b_mas)
    - direction: output
      name: out_2
      size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
    - direction: output
      name: out_3
      size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas))
    - direction: output
      name: out_4
      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas))
    - direction: output
      name: out_5
      size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
    - direction: output
      name: out_6
      size: ceiling(log2(R))
    - direction: output
      name: out_7
      size: N_spatial
    - direction: output
      name: out_8
      size: N_spatial
    - direction: output
      name: out_9
      size: 1
    repetition: null
    resources:
    - name: active_volume
      type: additive
      value: 196*M_r + 220*N_spatial + 240*b_as + 110*b_givens*(-1 + (b_givens*(N_spatial
        - 1)*(lamda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
        - 1) + 6*b_givens*(N_spatial - 1)*(lamda - 1) + 6*b_givens*(N_spatial - 1)
        + 994*b_mas + 612*lamda + (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as +
        ceiling(log2(R + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + 2*(-1 + (b_mas
        + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas
        + 55*ceiling(log2(R))) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial
        - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2.5, 0)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + (N_spatial
        - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5,
        0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
        b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
        + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) - 48) + 2*(3*b_mas + 3*ceiling(log2(R)))*(lamda
        - 1) + (3*lamda - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
        + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1)) + (55*((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + (ceiling(0.75*lamda) + 49)*Max(0,
        ceiling(R/lamda) - 1) + (ceiling(0.75*lamda) + 49)*Max(0, ceiling((R + 1)/lamda)
        - 1) + 4*(ceiling(0.75*lamda) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + (ceiling(1.5*b_as
        + 1.5*ceiling(log2(R + 1))) + 49)*Max(0, ceiling(R/2 + 1/2) - 1) + (ceiling((0.75*lamda
        - 0.75)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lamda)
        - 1) + 2*(ceiling(0.75*b_givens*(N_spatial - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial
        - 1)) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + 2*(ceiling(0.75*b_mas + (0.75*b_mas
        + 0.75*ceiling(log2(R)))*(lamda - 1) + 0.75*ceiling(log2(R))) + 49)*Max(0,
        ceiling(M_r*R/lamda) - 1) + 3*Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
        684*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R))) + 1397*Max(0, Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
        b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
        + 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas -
        Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 5*Heaviside(1.5
        - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as,
        b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) + 49*Heaviside(Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) + 188*Heaviside(ceiling(log2(R))
        - 1.5, 0) + 47*Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + 94*Heaviside(ceiling(log2(R
        + 1)) - ntz(R + 1) - 1.5, 0) + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0) - 49*Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2067*ceiling(log2(R)) + 460*ceiling(log2(R
        + 1)) + 3*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 110*ntz(R
        + 1) - 49*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 98*Min(2, ceiling(log2(R +
        1)) - ntz(R + 1)) - 98*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 196*Min(2, ceiling(log2(R))) +
        924*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
        + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R))) + 2193
    - name: gidney_lelbows
      type: additive
      value: 4*M_r + 2*b_as + 12*b_mas + 6*lamda + 2*(N_spatial - 1)*(Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 1) + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1) + 2*((ceiling(log2(R + 1)) - ntz(Mod(R +
        1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R
        + 1)))) + 0.5, 0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
        - 0.5, 0))*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
        + 2*Max(0, ceiling(R/lamda) - 1) + Max(0, ceiling((R + 1)/lamda) - 1) + 8*Max(0,
        ceiling(M_r*R/lamda) - 1) + Max(0, ceiling(R/2 + 1/2) - 1) + 12*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) +
        2*ceiling(log2(R + 1)) - 2*ntz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
        + 1)) - ntz(R + 1)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 25
    - name: gidney_relbows
      type: additive
      value: 4*M_r + 2*b_as + 12*b_mas + 6*lamda + 2*(N_spatial - 1)*(Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 1) + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1) + 2*((ceiling(log2(R + 1)) - ntz(Mod(R +
        1, 2 ** ceiling(log2(R + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R
        + 1)))) + 0.5, 0) + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1))))
        - 0.5, 0))*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
        + 2*Max(0, ceiling(R/lamda) - 1) + Max(0, ceiling((R + 1)/lamda) - 1) + 8*Max(0,
        ceiling(M_r*R/lamda) - 1) + Max(0, ceiling(R/2 + 1/2) - 1) + 12*Max(0, -ceiling(log2(R))
        + ceiling(log2(M_r*R))) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) +
        2*ceiling(log2(R + 1)) - 2*ntz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
        + 1)) - ntz(R + 1)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 25
    - name: measurements
      type: additive
      value: 2*b_as + 2*b_givens*(N_spatial - 1)*(lamda - 1) + 2*b_givens*(N_spatial
        - 1) + 2*b_mas + 2*(b_mas + ceiling(log2(R)))*(lamda - 1) + (lamda - 1)*ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 2*ceiling(log2(R)) + 2*ceiling(log2(R
        + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
        + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
    - name: ppms
      type: additive
      value: 0
    - name: pprs
      type: additive
      value: 8*N_spatial - 8
    - name: rotations
      type: additive
      value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + (N_spatial - 1)*Max(0,
        Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + Max(0,
        Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as, b_givens,
        b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
        b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
        + Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
        b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
        b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 4
    - name: t_gates
      type: additive
      value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + (N_spatial
        - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
        b_mas) - 2.5, 0) + Heaviside(2.5 - Max(b_as, b_givens, b_mas), 0)*Heaviside(Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
        + Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
        - 2.5, 0) + 24*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
        - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
    - name: toffs
      type: additive
      value: 4*N_spatial + 2*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1)
        + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) +
        (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as
        + ceiling(log2(R + 1))) + 2*(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
        - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(b_mas + ceiling(log2(R)))
        + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
        - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        + Max(b_as, b_givens, b_mas)) + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
        b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
        b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
        - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
        b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
        - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)) + (((lamda - 1)*ceiling(log2(2
        ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
        - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
        + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) +
        1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 4*Heaviside(ceiling(log2(R)) - 1.5,
        0) + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
        1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
        + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5, 0) + 2*Heaviside(ceiling(log2(R
        + 1)) - ntz(R + 1) - 1.5, 0) + 4*ceiling(log2(R)) + 2*ceiling(log2(R + 1))
    type: qubrick
  connections:
  - source: LCU_compute_0.out_0
    target: out_0
  - source: LCU_compute_0.out_1
    target: out_1
  - source: LCU_compute_0.out_2
    target: out_2
  - source: LCU_compute_0.out_3
    target: out_3
  - source: LCU_compute_0.out_4
    target: out_4
  - source: LCU_compute_0.out_5
    target: out_5
  - source: LCU_compute_0.out_6
    target: out_6
  - source: LCU_compute_0.out_7
    target: out_7
  - source: LCU_compute_0.out_8
    target: out_8
  - source: LCU_compute_0.out_9
    target: out_9
  - source: RotationCatalystStatePrep_compute_0.out_0
    target: LCU_compute_0.in_1
  - source: qubits_alloc_0.out_0
    target: LCU_compute_0.in_0
  - source: qubits_alloc_1.out_0
    target: LCU_compute_0.in_2
  - source: qubits_alloc_2.out_0
    target: LCU_compute_0.in_5
  - source: qubits_alloc_3.out_0
    target: LCU_compute_0.in_3
  - source: qubits_alloc_4.out_0
    target: LCU_compute_0.in_4
  input_params:
  - M_r
  - N_spatial
  - R
  - b_as
  - b_givens
  - b_mas
  - idx
  name: root
  ports:
  - direction: output
    name: out_0
    size: ceiling(log2(R + 1))
  - direction: output
    name: out_1
    size: Max(b_as, b_givens, b_mas)
  - direction: output
    name: out_2
    size: Max(0, b_mas - Max(b_as, b_givens, b_mas))
  - direction: output
    name: out_3
    size: Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas))
  - direction: output
    name: out_4
    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas))
  - direction: output
    name: out_5
    size: Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
  - direction: output
    name: out_6
    size: ceiling(log2(R))
  - direction: output
    name: out_7
    size: N_spatial
  - direction: output
    name: out_8
    size: N_spatial
  - direction: output
    name: out_9
    size: 1
  repetition: null
  resources:
  - name: active_volume
    type: additive
    value: 196*M_r + 220*N_spatial + 240*b_as + 110*b_givens*(-1 + (b_givens*(N_spatial
      - 1)*(lamda - 1) + b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial
      - 1) + 6*b_givens*(N_spatial - 1)*(lamda - 1) + 6*b_givens*(N_spatial - 1) +
      994*b_mas + 612*lamda + (-1 + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R
      + 1))))*(55*b_as + 55*ceiling(log2(R + 1))) + 2*(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda
      - 1) + ceiling(log2(R)))/(b_mas + ceiling(log2(R))))*(55*b_mas + 55*ceiling(log2(R)))
      + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + 108*Max(b_as, b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(0, b_mas - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 108*Max(b_as,
      b_givens, b_mas) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + 111*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + 108*Max(b_as, b_givens, b_mas)
      + 5*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0) - 48) + (N_spatial - 1)*(108*Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + 108*Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + 1397*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0)) + 108*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + 111*Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + 108*Max(b_as, b_givens, b_mas) + 5*Heaviside(-Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0) - 48) + 2*(3*b_mas + 3*ceiling(log2(R)))*(lamda -
      1) + (3*lamda - 3)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
      2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
      - 1) + 2*M_r + 1)) + (55*((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) - 55)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) + (ceiling(0.75*lamda) + 49)*Max(0, ceiling(R/lamda)
      - 1) + (ceiling(0.75*lamda) + 49)*Max(0, ceiling((R + 1)/lamda) - 1) + 4*(ceiling(0.75*lamda)
      + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + (ceiling(1.5*b_as + 1.5*ceiling(log2(R
      + 1))) + 49)*Max(0, ceiling(R/2 + 1/2) - 1) + (ceiling((0.75*lamda - 0.75)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 0.75*ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 49)*Max(0, ceiling(R/lamda) - 1) + 2*(ceiling(0.75*b_givens*(N_spatial
      - 1)*(lamda - 1) + 0.75*b_givens*(N_spatial - 1)) + 49)*Max(0, ceiling(M_r*R/lamda)
      - 1) + 2*(ceiling(0.75*b_mas + (0.75*b_mas + 0.75*ceiling(log2(R)))*(lamda -
      1) + 0.75*ceiling(log2(R))) + 49)*Max(0, ceiling(M_r*R/lamda) - 1) + 3*Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + 684*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + 1397*Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
      b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
      0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - 2.5, 0)) + 1397*Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0)) + 3*Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + 1397*Max(0, Max(b_as, b_givens, b_mas)
      - Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens,
      b_mas) - 1.5, 0) - 1) + 3*Max(b_as, b_givens, b_mas) + 5*Heaviside(1.5 - Max(b_as,
      b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(2.5 - Max(b_as, b_givens,
      b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0) + 28.5*Heaviside(Max(b_as, b_givens, b_mas) - 2.5,
      0) + 5*Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) + 49*Heaviside(Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) - 1.5,
      0) + 188*Heaviside(ceiling(log2(R)) - 1.5, 0) + 47*Heaviside(Mod(1, ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R)) - 1.5,
      0) + 94*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + 5*Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0) + 28.5*Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) - 49*Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 2067*ceiling(log2(R))
      + 460*ceiling(log2(R + 1)) + 3*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) - 110*ntz(R + 1) - 49*Min(2, Mod(1, ceiling(log2(2 **
      (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 98*Min(2,
      ceiling(log2(R + 1)) - ntz(R + 1)) - 98*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 196*Min(2, ceiling(log2(R))) + 924*Min(M_r
      - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + 1,
      ceiling(log2(R))) + 2193
  - name: gidney_lelbows
    type: additive
    value: 4*M_r + 2*b_as + 12*b_mas + 6*lamda + 2*(N_spatial - 1)*(Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*(N_spatial
      - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 1) + 2*((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R
      + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
      + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + 2*Max(0, ceiling(R/lamda) - 1)
      + Max(0, ceiling((R + 1)/lamda) - 1) + 8*Max(0, ceiling(M_r*R/lamda) - 1) +
      Max(0, ceiling(R/2 + 1/2) - 1) + 12*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
      2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
      - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) + 2*ceiling(log2(R
      + 1)) - 2*ntz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
      + 1)) - ntz(R + 1)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 25
  - name: gidney_relbows
    type: additive
    value: 4*M_r + 2*b_as + 12*b_mas + 6*lamda + 2*(N_spatial - 1)*(Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1) + 2*(N_spatial
      - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 1) + 2*((ceiling(log2(R + 1)) - ntz(Mod(R + 1, 2 ** ceiling(log2(R
      + 1)))) - 1)*Heaviside(ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0)
      + Heaviside(-ntz(Mod(R + 1, 2 ** ceiling(log2(R + 1)))) - 0.5, 0))*Heaviside(ntz(Mod(R
      + 1, 2 ** ceiling(log2(R + 1)))) + 0.5, 0) + 2*Max(0, ceiling(R/lamda) - 1)
      + Max(0, ceiling((R + 1)/lamda) - 1) + 8*Max(0, ceiling(M_r*R/lamda) - 1) +
      Max(0, ceiling(R/2 + 1/2) - 1) + 12*Max(0, -ceiling(log2(R)) + ceiling(log2(M_r*R)))
      + Heaviside(Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) +
      2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1)
      - 1) + 2*M_r + 1))) - 1.5, 0) - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + 25*ceiling(log2(R)) + 2*ceiling(log2(R
      + 1)) - 2*ntz(R + 1) - Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) +
      1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))) - 2*Min(2, ceiling(log2(R
      + 1)) - ntz(R + 1)) - 2*Min(2, Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r))
      + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2
      ** (b_mas + 1) - 1) + 2*M_r + 1)))) - 4*Min(2, ceiling(log2(R))) - 25
  - name: measurements
    type: additive
    value: 2*b_as + 2*b_givens*(N_spatial - 1)*(lamda - 1) + 2*b_givens*(N_spatial
      - 1) + 2*b_mas + 2*(b_mas + ceiling(log2(R)))*(lamda - 1) + (lamda - 1)*ceiling(log2(2
      ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R
      - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1)) + 2*ceiling(log2(R)) + 2*ceiling(log2(R
      + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))
  - name: ppms
    type: additive
    value: 0
  - name: pprs
    type: additive
    value: 8*N_spatial - 8
  - name: rotations
    type: additive
    value: (N_spatial - 1)*Max(0, Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 1.5, 0)
      - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)) + (N_spatial - 1)*Max(0, Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)
      + 1.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0))
      + Max(0, Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Heaviside(1.5 - Max(b_as,
      b_givens, b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) +
      Max(b_as, b_givens, b_mas) - 1.5, 0) - Heaviside(2.5 - Max(b_as, b_givens, b_mas),
      0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens,
      b_mas) - 2.5, 0)) + Max(0, Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Heaviside(-Max(0, b_mas -
      Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas) + 1.5, 0)*Heaviside(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 1.5, 0) - Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas)
      - 2.5, 0)) + Max(0, Max(b_as, b_givens, b_mas) - Heaviside(Max(b_as, b_givens,
      b_mas) - 2.5, 0) - Heaviside(Max(b_as, b_givens, b_mas) - 1.5, 0) - 1) + 4
  - name: t_gates
    type: additive
    value: (N_spatial - 1)*Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0) + (N_spatial - 1)*Heaviside(-Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas
      - Max(b_as, b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(b_as, b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas))
      + Max(b_as, b_givens, b_mas) - 2.5, 0) + Heaviside(2.5 - Max(b_as, b_givens,
      b_mas), 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas) - 2.5, 0) + Heaviside(Max(b_as, b_givens, b_mas) - 2.5, 0)
      + Heaviside(-Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens -
      Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas) + 2.5, 0)*Heaviside(Max(0, b_mas - Max(b_as, b_givens, b_mas))
      + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) + Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0,
      b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas) - 2.5, 0)
      + 24*Min(M_r - Mod(1, ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1)
      + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas +
      1) - 1) + 2*M_r + 1))) + 1, ceiling(log2(R)))
  - name: toffs
    type: additive
    value: 4*N_spatial + 2*b_givens*(-1 + (b_givens*(N_spatial - 1)*(lamda - 1) +
      b_givens*(N_spatial - 1))/(b_givens*(N_spatial - 1)))*(N_spatial - 1) + (-1
      + (2*b_as + 2*ceiling(log2(R + 1)))/(b_as + ceiling(log2(R + 1))))*(b_as + ceiling(log2(R
      + 1))) + 2*(-1 + (b_mas + (b_mas + ceiling(log2(R)))*(lamda - 1) + ceiling(log2(R)))/(b_mas
      + ceiling(log2(R))))*(b_mas + ceiling(log2(R))) + 2*(N_spatial - 1)*(Max(0,
      b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as,
      b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as, b_givens, b_mas))
      + 2*(N_spatial - 1)*(Max(0, b_mas - Max(b_as, b_givens, b_mas)) + Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) +
      Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(0, b_givens
      - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) -
      Max(b_as, b_givens, b_mas)) + Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens,
      b_mas)) - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as,
      b_givens, b_mas)) - Max(0, b_mas - Max(0, b_mas - Max(b_as, b_givens, b_mas))
      - Max(0, b_givens - Max(0, b_mas - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens,
      b_mas)) - Max(b_as, b_givens, b_mas)) - Max(b_as, b_givens, b_mas)) + Max(b_as,
      b_givens, b_mas)) + (((lamda - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) + ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)))/ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R -
      1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) - 1)*ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R
      - 1) + 2 ** (ceiling(log2(M_r)) + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas
      + 1) - 1) + 2*M_r + 1)) + 4*Heaviside(ceiling(log2(R)) - 1.5, 0) + Heaviside(Mod(1,
      ceiling(log2(2 ** (ceiling(log2(M_r)) + 1)*M_r*(R - 1) + 2 ** (ceiling(log2(M_r))
      + ceiling(log2(M_r*(R - 1))) + 1)*(2 ** (b_mas + 1) - 1) + 2*M_r + 1))) + ceiling(log2(R))
      - 1.5, 0) + 2*Heaviside(ceiling(log2(R + 1)) - ntz(R + 1) - 1.5, 0) + 4*ceiling(log2(R))
      + 2*ceiling(log2(R + 1))
  type: root
version: v1
